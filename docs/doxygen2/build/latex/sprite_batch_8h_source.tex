\hypertarget{sprite_batch_8h_source}{}\doxysection{sprite\+Batch.\+h}
\label{sprite_batch_8h_source}\index{/Users/william/Developer/demo/simpleRenderEngine/re/core/spriteBatch.h@{/Users/william/Developer/demo/simpleRenderEngine/re/core/spriteBatch.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//}}
\DoxyCodeLine{2 \textcolor{comment}{// Created by william on 2022/6/1.}}
\DoxyCodeLine{3 \textcolor{comment}{//}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#ifndef SIMPLERENDERENGINE\_SPRITEBATCH\_H}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#define SIMPLERENDERENGINE\_SPRITEBATCH\_H}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}mesh.h"{}}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}sprite.h"{}}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{11 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacere}{re}}}
\DoxyCodeLine{12 \{}
\DoxyCodeLine{13 \textcolor{keyword}{class }Shader;}
\DoxyCodeLine{14 \textcolor{keyword}{class }Material;}
\DoxyCodeLine{15 \textcolor{keyword}{class }\mbox{\hyperlink{classre_1_1_sprite_batch}{SpriteBatch}}}
\DoxyCodeLine{16 \{}
\DoxyCodeLine{17 \textcolor{keyword}{public}:}
\DoxyCodeLine{18     \textcolor{keyword}{class }\mbox{\hyperlink{classre_1_1_sprite_batch_1_1_sprite_batch_builder}{SpriteBatchBuilder}}}
\DoxyCodeLine{19     \{}
\DoxyCodeLine{20     \textcolor{keyword}{public}:}
\DoxyCodeLine{21         [[maybe\_unused]] \mbox{\hyperlink{classre_1_1_sprite_batch_1_1_sprite_batch_builder}{SpriteBatchBuilder}}\& withShader(std::shared\_ptr<Shader> shader);}
\DoxyCodeLine{22         \mbox{\hyperlink{classre_1_1_sprite_batch_1_1_sprite_batch_builder}{SpriteBatchBuilder}}\& addSprite(\mbox{\hyperlink{classre_1_1_sprite}{Sprite}} sprite);}
\DoxyCodeLine{23         \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{24         \mbox{\hyperlink{classre_1_1_sprite_batch_1_1_sprite_batch_builder}{SpriteBatch::SpriteBatchBuilder}}\& addSprites(T first, \textcolor{keyword}{const} T last)}
\DoxyCodeLine{25         \{}
\DoxyCodeLine{26             \textcolor{keyword}{auto} start = m\_sprites.end();}
\DoxyCodeLine{27             \textcolor{keywordtype}{int} size = m\_sprites.size();}
\DoxyCodeLine{28             start = m\_sprites.insert(m\_sprites.end(), first, last);}
\DoxyCodeLine{29             \textcolor{keywordflow}{while} (start != m\_sprites.end())}
\DoxyCodeLine{30             \{}
\DoxyCodeLine{31                 (*start).m\_order.details.drawOrder = \textcolor{keyword}{static\_cast<}uint16\_t\textcolor{keyword}{>}(size);}
\DoxyCodeLine{32                 size++;}
\DoxyCodeLine{33                 start++;}
\DoxyCodeLine{34             \}}
\DoxyCodeLine{35             \textcolor{keywordflow}{if} (size >= std::numeric\_limits<uint16\_t>::max())}
\DoxyCodeLine{36             \{}
\DoxyCodeLine{37                 LOG\_ERROR(\textcolor{stringliteral}{"{}More than \%i sprites in a batch "{}}, std::numeric\_limits<uint16\_t>::max());}
\DoxyCodeLine{38                 m\_sprites.resize(std::numeric\_limits<uint16\_t>::max());}
\DoxyCodeLine{39                 \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{40             \}}
\DoxyCodeLine{41             \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{42         \}}
\DoxyCodeLine{43         std::shared\_ptr<SpriteBatch> build();}
\DoxyCodeLine{44 }
\DoxyCodeLine{45     \textcolor{keyword}{private}:}
\DoxyCodeLine{46         \mbox{\hyperlink{classre_1_1_sprite_batch_1_1_sprite_batch_builder}{SpriteBatchBuilder}}();}
\DoxyCodeLine{47         std::shared\_ptr<Shader> m\_shader;}
\DoxyCodeLine{48         std::vector<Sprite> m\_sprites;}
\DoxyCodeLine{49         \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{classre_1_1_sprite_batch}{SpriteBatch}};}
\DoxyCodeLine{50     \};}
\DoxyCodeLine{51     \textcolor{keyword}{static} \mbox{\hyperlink{classre_1_1_sprite_batch_1_1_sprite_batch_builder}{SpriteBatchBuilder}} create();}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{keyword}{private}:}
\DoxyCodeLine{54     \mbox{\hyperlink{classre_1_1_sprite_batch}{SpriteBatch}}(std::shared\_ptr<Shader> shader, std::vector<Sprite>\&\& sprites);}
\DoxyCodeLine{55 }
\DoxyCodeLine{56 \textcolor{keyword}{private}:}
\DoxyCodeLine{57     \textcolor{comment}{// 可以复用的资源}}
\DoxyCodeLine{58     std::vector<std::shared\_ptr<Material>> m\_materials;}
\DoxyCodeLine{59     std::vector<std::shared\_ptr<Mesh>> m\_spriteMeshes;}
\DoxyCodeLine{60     \textcolor{keyword}{friend} \textcolor{keyword}{class }\mbox{\hyperlink{classre_1_1_render_pass}{RenderPass}};}
\DoxyCodeLine{61 \};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \} \textcolor{comment}{// namespace re}}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// SIMPLERENDERENGINE\_SPRITEBATCH\_H}}

\end{DoxyCode}
