<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.2" xml:lang="en-US">
  <compounddef id="tinycthread_8c" kind="file" language="C++">
    <compoundname>tinycthread.c</compoundname>
    <includes refid="tinycthread_8h" local="yes">tinycthread.h</includes>
    <includes local="no">stdlib.h</includes>
    <includes local="no">signal.h</includes>
    <includes local="no">sched.h</includes>
    <includes local="no">unistd.h</includes>
    <includes local="no">sys/time.h</includes>
    <includes local="no">errno.h</includes>
    <incdepgraph>
      <node id="1">
        <label>/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c</label>
        <link refid="tinycthread_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>tinycthread.h</label>
        <link refid="tinycthread_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>errno.h</label>
      </node>
      <node id="5">
        <label>pthread.h</label>
      </node>
      <node id="8">
        <label>sched.h</label>
      </node>
      <node id="7">
        <label>signal.h</label>
      </node>
      <node id="6">
        <label>stdlib.h</label>
      </node>
      <node id="4">
        <label>sys/time.h</label>
      </node>
      <node id="3">
        <label>time.h</label>
      </node>
      <node id="9">
        <label>unistd.h</label>
      </node>
    </incdepgraph>
    <innerclass refid="struct__thread__start__info" prot="public">_thread_start_info</innerclass>
      <sectiondef kind="define">
      <memberdef kind="define" id="tinycthread_8c_1a070d2ce7b6bb7e5c05602aa8c308d0c4" prot="public" static="no">
        <name>NULL</name>
        <initializer>(void*)0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="47" column="11" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="47" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="tinycthread_8c_1aa8cecfc5c5c054d2875c03e77b7be15d" prot="public" static="no">
        <name>TRUE</name>
        <initializer>1</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="50" column="11" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="50" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="tinycthread_8c_1aa93f0eb578d23995850d61f7d61c55c1" prot="public" static="no">
        <name>FALSE</name>
        <initializer>0</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="53" column="11" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="53" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="tinycthread_8c_1a89200caf0dc25fcc97df171d0034bff2" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mtx_init</definition>
        <argsstring>(mtx_t *mtx, int type)</argsstring>
        <name>mtx_init</name>
        <param>
          <type>mtx_t *</type>
          <declname>mtx</declname>
        </param>
        <param>
          <type>int</type>
          <declname>type</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Create a mutex object. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>mtx</parametername>
</parameternamelist>
<parameterdescription>
<para>A mutex object. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>type</parametername>
</parameternamelist>
<parameterdescription>
<para>Bit-mask that must have one of the following six values: <itemizedlist>
<listitem><para><computeroutput>mtx_plain</computeroutput> for a simple non-recursive mutex </para>
</listitem>
<listitem><para><computeroutput>mtx_timed</computeroutput> for a non-recursive mutex that supports timeout </para>
</listitem>
<listitem><para><computeroutput>mtx_try</computeroutput> for a non-recursive mutex that supports test and return </para>
</listitem>
<listitem><para><computeroutput>mtx_plain</computeroutput> | <computeroutput>mtx_recursive</computeroutput> (same as <computeroutput>mtx_plain</computeroutput>, but recursive) </para>
</listitem>
<listitem><para><computeroutput>mtx_timed</computeroutput> | <computeroutput>mtx_recursive</computeroutput> (same as <computeroutput>mtx_timed</computeroutput>, but recursive) </para>
</listitem>
<listitem><para><computeroutput>mtx_try</computeroutput> | <computeroutput>mtx_recursive</computeroutput> (same as <computeroutput>mtx_try</computeroutput>, but recursive) </para>
</listitem>
</itemizedlist>
</para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="56" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="56" bodyend="75"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1ae8b3732298d1d316db6438b4c561c0dd" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void mtx_destroy</definition>
        <argsstring>(mtx_t *mtx)</argsstring>
        <name>mtx_destroy</name>
        <param>
          <type>mtx_t *</type>
          <declname>mtx</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Release any resources used by the given mutex. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>mtx</parametername>
</parameternamelist>
<parameterdescription>
<para>A mutex object. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="77" column="6" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="77" bodyend="84"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a8945984db67db8ee774872da64d0e424" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mtx_lock</definition>
        <argsstring>(mtx_t *mtx)</argsstring>
        <name>mtx_lock</name>
        <param>
          <type>mtx_t *</type>
          <declname>mtx</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Lock the given mutex. Blocks until the given mutex can be locked. If the mutex is non-recursive, and the calling thread already has a lock on the mutex, this call will block forever. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>mtx</parametername>
</parameternamelist>
<parameterdescription>
<para>A mutex object. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="86" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="86" bodyend="99"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a98f9757dde089254735199ac738ff65f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mtx_timedlock</definition>
        <argsstring>(mtx_t *mtx, const struct timespec *ts)</argsstring>
        <name>mtx_timedlock</name>
        <param>
          <type>mtx_t *</type>
          <declname>mtx</declname>
        </param>
        <param>
          <type>const struct timespec *</type>
          <declname>ts</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>NOT YET IMPLEMENTED. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="101" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="101" bodyend="107"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1ac577690ddd48f5a1fdf3dc97881a2199" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mtx_trylock</definition>
        <argsstring>(mtx_t *mtx)</argsstring>
        <name>mtx_trylock</name>
        <param>
          <type>mtx_t *</type>
          <declname>mtx</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Try to lock the given mutex. The specified mutex shall support either test and return or timeout. If the mutex is already locked, the function returns without blocking. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>mtx</parametername>
</parameternamelist>
<parameterdescription>
<para>A mutex object. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a3c563aa25920a041d83d4019b113ab5d" kindref="member">thrd_busy</ref> if the resource requested is already in use, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="109" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="109" bodyend="122"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1ae2fb1d2854461fa583017cc9b0bc6cca" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int mtx_unlock</definition>
        <argsstring>(mtx_t *mtx)</argsstring>
        <name>mtx_unlock</name>
        <param>
          <type>mtx_t *</type>
          <declname>mtx</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Unlock the given mutex. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>mtx</parametername>
</parameternamelist>
<parameterdescription>
<para>A mutex object. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="124" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="124" bodyend="133"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a146f4cd218c2a2f770be14c1dee26d08" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int cnd_init</definition>
        <argsstring>(cnd_t *cond)</argsstring>
        <name>cnd_init</name>
        <param>
          <type>cnd_t *</type>
          <declname>cond</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Create a condition variable object. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>cond</parametername>
</parameternamelist>
<parameterdescription>
<para>A condition variable object. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="140" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="140" bodyend="167"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1aa925921fa9edc189f474ae10a23bcfd3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void cnd_destroy</definition>
        <argsstring>(cnd_t *cond)</argsstring>
        <name>cnd_destroy</name>
        <param>
          <type>cnd_t *</type>
          <declname>cond</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Release any resources used by the given condition variable. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>cond</parametername>
</parameternamelist>
<parameterdescription>
<para>A condition variable object. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="169" column="6" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="169" bodyend="184"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1af76e066715b1190d38a69da1c511e30f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int cnd_signal</definition>
        <argsstring>(cnd_t *cond)</argsstring>
        <name>cnd_signal</name>
        <param>
          <type>cnd_t *</type>
          <declname>cond</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Signal a condition variable. Unblocks one of the threads that are blocked on the given condition variable at the time of the call. If no threads are blocked on the condition variable at the time of the call, the function does nothing and return success. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>cond</parametername>
</parameternamelist>
<parameterdescription>
<para>A condition variable object. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="186" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="186" bodyend="209"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a66228b340509733bdf529b93bca8df14" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int cnd_broadcast</definition>
        <argsstring>(cnd_t *cond)</argsstring>
        <name>cnd_broadcast</name>
        <param>
          <type>cnd_t *</type>
          <declname>cond</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Broadcast a condition variable. Unblocks all of the threads that are blocked on the given condition variable at the time of the call. If no threads are blocked on the condition variable at the time of the call, the function does nothing and return success. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>cond</parametername>
</parameternamelist>
<parameterdescription>
<para>A condition variable object. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="211" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="211" bodyend="234"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1ac4dfb82fc3d92bb688cb07308af6a659" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int cnd_wait</definition>
        <argsstring>(cnd_t *cond, mtx_t *mtx)</argsstring>
        <name>cnd_wait</name>
        <param>
          <type>cnd_t *</type>
          <declname>cond</declname>
        </param>
        <param>
          <type>mtx_t *</type>
          <declname>mtx</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Wait for a condition variable to become signaled. The function atomically unlocks the given mutex and endeavors to block until the given condition variable is signaled by a call to cnd_signal or to cnd_broadcast. When the calling thread becomes unblocked it locks the mutex before it returns. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>cond</parametername>
</parameternamelist>
<parameterdescription>
<para>A condition variable object. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mtx</parametername>
</parameternamelist>
<parameterdescription>
<para>A mutex object. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="285" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="285" bodyend="292"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a2bdc352d949424855c957b0d1916d443" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int cnd_timedwait</definition>
        <argsstring>(cnd_t *cond, mtx_t *mtx, const struct timespec *ts)</argsstring>
        <name>cnd_timedwait</name>
        <param>
          <type>cnd_t *</type>
          <declname>cond</declname>
        </param>
        <param>
          <type>mtx_t *</type>
          <declname>mtx</declname>
        </param>
        <param>
          <type>const struct timespec *</type>
          <declname>ts</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Wait for a condition variable to become signaled. The function atomically unlocks the given mutex and endeavors to block until the given condition variable is signaled by a call to cnd_signal or to cnd_broadcast, or until after the specified time. When the calling thread becomes unblocked it locks the mutex before it returns. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>cond</parametername>
</parameternamelist>
<parameterdescription>
<para>A condition variable object. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>mtx</parametername>
</parameternamelist>
<parameterdescription>
<para>A mutex object. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>xt</parametername>
</parameternamelist>
<parameterdescription>
<para>A point in time at which the request will time out (absolute time). </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> upon success, or <ref refid="tinycthread_8h_1aec454a4baf61e6d518bbfb8768bd6a1f" kindref="member">thrd_timeout</ref> if the time specified in the call was reached without acquiring the requested resource, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="294" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="294" bodyend="315"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1aea3e52c054a4759a7fbf4ed91a670916" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void *</type>
        <definition>static void * _thrd_wrapper_function</definition>
        <argsstring>(void *aArg)</argsstring>
        <name>_thrd_wrapper_function</name>
        <param>
          <type>void *</type>
          <declname>aArg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="328" column="14" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="328" bodyend="359"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a1a52b6cd2d15cc6c4741d5124f85d183" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int thrd_create</definition>
        <argsstring>(thrd_t *thr, thrd_start_t func, void *arg)</argsstring>
        <name>thrd_create</name>
        <param>
          <type>thrd_t *</type>
          <declname>thr</declname>
        </param>
        <param>
          <type><ref refid="tinycthread_8h_1ab26bdfa456502f8c483f45bb39ca7336" kindref="member">thrd_start_t</ref></type>
          <declname>func</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>arg</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Create a new thread. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>thr</parametername>
</parameternamelist>
<parameterdescription>
<para>Identifier of the newly created thread. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>func</parametername>
</parameternamelist>
<parameterdescription>
<para>A function pointer to the function that will be executed in the new thread. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>arg</parametername>
</parameternamelist>
<parameterdescription>
<para>An argument to the thread function. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1ad6010b6ba8c0508cef692f066b09e2ef" kindref="member">thrd_nomem</ref> if no memory could be allocated for the thread requested, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
<simplesect kind="note"><para>A thread’s identifier may be reused for a different thread once the original thread has exited and either been detached or joined to another thread. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="361" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="361" bodyend="391"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1ab67b6f182a848d979155d03598325fa7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>thrd_t</type>
        <definition>thrd_t thrd_current</definition>
        <argsstring>(void)</argsstring>
        <name>thrd_current</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Identify the calling thread. <simplesect kind="return"><para>The identifier of the calling thread. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="393" column="8" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="393" bodyend="400"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1ad5380997f9e32a31f802bdd9cb266902" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int thrd_detach</definition>
        <argsstring>(thrd_t thr)</argsstring>
        <name>thrd_detach</name>
        <param>
          <type>thrd_t</type>
          <declname>thr</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>NOT YET IMPLEMENTED. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="402" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="402" bodyend="407"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a153e65a389814ce51ad07791e42b2118" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int thrd_equal</definition>
        <argsstring>(thrd_t thr0, thrd_t thr1)</argsstring>
        <name>thrd_equal</name>
        <param>
          <type>thrd_t</type>
          <declname>thr0</declname>
        </param>
        <param>
          <type>thrd_t</type>
          <declname>thr1</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Compare two thread identifiers. The function determines if two thread identifiers refer to the same thread. <simplesect kind="return"><para>Zero if the two thread identifiers refer to different threads. Otherwise a nonzero value is returned. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="409" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="409" bodyend="416"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1ae13e483223c39327e190e79e18f20b15" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void thrd_exit</definition>
        <argsstring>(int res)</argsstring>
        <name>thrd_exit</name>
        <param>
          <type>int</type>
          <declname>res</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Terminate execution of the calling thread. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>res</parametername>
</parameternamelist>
<parameterdescription>
<para>Result code of the calling thread. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="418" column="6" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="418" bodyend="430"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1aa2e83a544f49f74cf217a69a882b5d80" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int thrd_join</definition>
        <argsstring>(thrd_t thr, int *res)</argsstring>
        <name>thrd_join</name>
        <param>
          <type>thrd_t</type>
          <declname>thr</declname>
        </param>
        <param>
          <type>int *</type>
          <declname>res</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Wait for a thread to terminate. The function joins the given thread with the current thread by blocking until the other thread has terminated. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>thr</parametername>
</parameternamelist>
<parameterdescription>
<para>The thread to join with. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>res</parametername>
</parameternamelist>
<parameterdescription>
<para>If this pointer is not NULL, the function will store the result code of the given thread in the integer pointed to by <computeroutput>res</computeroutput>. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="432" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="432" bodyend="463"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a58d00bd1fc0cc3c91d4c34d5faf117c3" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int thrd_sleep</definition>
        <argsstring>(const struct timespec *time_point, struct timespec *remaining)</argsstring>
        <name>thrd_sleep</name>
        <param>
          <type>const struct timespec *</type>
          <declname>time_point</declname>
        </param>
        <param>
          <type>struct timespec *</type>
          <declname>remaining</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Put the calling thread to sleep. Suspend execution of the calling thread. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>time_point</parametername>
</parameternamelist>
<parameterdescription>
<para>A point in time at which the thread will resume (absolute time). </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>remaining</parametername>
</parameternamelist>
<parameterdescription>
<para>If non-NULL, this parameter will hold the remaining time until time_point upon return. This will typically be zero, but if the thread was woken up by a signal that is not ignored before time_point was reached <computeroutput>remaining</computeroutput> will hold a positive time. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>0 (zero) on successful sleep, or -1 if an interrupt occurred. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="465" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="465" bodyend="510"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1acbfb78346e6b76b23da1d2d8df03549a" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void thrd_yield</definition>
        <argsstring>(void)</argsstring>
        <name>thrd_yield</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Yield execution to another thread. Permit other threads to run, even if the current thread would ordinarily continue to run. </para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="512" column="6" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="512" bodyend="519"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a286fe7927e9af276a9cfdbc8b9eb08ad" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int tss_create</definition>
        <argsstring>(tss_t *key, tss_dtor_t dtor)</argsstring>
        <name>tss_create</name>
        <param>
          <type>tss_t *</type>
          <declname>key</declname>
        </param>
        <param>
          <type><ref refid="tinycthread_8h_1a7bd9f13e4169f842cbb831ea348049dd" kindref="member">tss_dtor_t</ref></type>
          <declname>dtor</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Create a thread-specific storage. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>key</parametername>
</parameternamelist>
<parameterdescription>
<para>The unique key identifier that will be set if the function is successful. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>dtor</parametername>
</parameternamelist>
<parameterdescription>
<para>Destructor function. This can be NULL. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
<simplesect kind="note"><para>The destructor function is not supported under Windows. If <computeroutput>dtor</computeroutput> is not NULL when calling this function under Windows, the function will fail and return <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="521" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="521" bodyend="541"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1aecebbc66b206171d9381ba94528c6cb7" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void tss_delete</definition>
        <argsstring>(tss_t key)</argsstring>
        <name>tss_delete</name>
        <param>
          <type>tss_t</type>
          <declname>key</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Delete a thread-specific storage. The function releases any resources used by the given thread-specific storage. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>key</parametername>
</parameternamelist>
<parameterdescription>
<para>The key that shall be deleted. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="543" column="6" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="543" bodyend="550"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a5cf26b78a3f19a4e7b6876f957f2059c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void *</type>
        <definition>void * tss_get</definition>
        <argsstring>(tss_t key)</argsstring>
        <name>tss_get</name>
        <param>
          <type>tss_t</type>
          <declname>key</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Get the value for a thread-specific storage. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>key</parametername>
</parameternamelist>
<parameterdescription>
<para>The thread-specific storage identifier. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>The value for the current thread held in the given thread-specific storage. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="552" column="6" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="552" bodyend="559"/>
      </memberdef>
      <memberdef kind="function" id="tinycthread_8c_1a608e01c49b84a5ad4f085a9aedc6a680" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>int</type>
        <definition>int tss_set</definition>
        <argsstring>(tss_t key, void *val)</argsstring>
        <name>tss_set</name>
        <param>
          <type>tss_t</type>
          <declname>key</declname>
        </param>
        <param>
          <type>void *</type>
          <declname>val</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
<para>Set the value for a thread-specific storage. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>key</parametername>
</parameternamelist>
<parameterdescription>
<para>The thread-specific storage identifier. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>val</parametername>
</parameternamelist>
<parameterdescription>
<para>The value of the thread-specific storage to set for the current thread. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref> on success, or <ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref> if the request could not be honored. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" line="561" column="5" bodyfile="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c" bodystart="561" bodyend="575"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">/*<sp/>-*-<sp/>mode:<sp/>c;<sp/>tab-width:<sp/>2;<sp/>indent-tabs-mode:<sp/>nil;<sp/>-*-</highlight></codeline>
<codeline lineno="2"><highlight class="comment">Copyright<sp/>(c)<sp/>2012<sp/>Marcus<sp/>Geelnard</highlight></codeline>
<codeline lineno="3"><highlight class="comment"></highlight></codeline>
<codeline lineno="4"><highlight class="comment">This<sp/>software<sp/>is<sp/>provided<sp/>&apos;as-is&apos;,<sp/>without<sp/>any<sp/>express<sp/>or<sp/>implied</highlight></codeline>
<codeline lineno="5"><highlight class="comment">warranty.<sp/>In<sp/>no<sp/>event<sp/>will<sp/>the<sp/>authors<sp/>be<sp/>held<sp/>liable<sp/>for<sp/>any<sp/>damages</highlight></codeline>
<codeline lineno="6"><highlight class="comment">arising<sp/>from<sp/>the<sp/>use<sp/>of<sp/>this<sp/>software.</highlight></codeline>
<codeline lineno="7"><highlight class="comment"></highlight></codeline>
<codeline lineno="8"><highlight class="comment">Permission<sp/>is<sp/>granted<sp/>to<sp/>anyone<sp/>to<sp/>use<sp/>this<sp/>software<sp/>for<sp/>any<sp/>purpose,</highlight></codeline>
<codeline lineno="9"><highlight class="comment">including<sp/>commercial<sp/>applications,<sp/>and<sp/>to<sp/>alter<sp/>it<sp/>and<sp/>redistribute<sp/>it</highlight></codeline>
<codeline lineno="10"><highlight class="comment">freely,<sp/>subject<sp/>to<sp/>the<sp/>following<sp/>restrictions:</highlight></codeline>
<codeline lineno="11"><highlight class="comment"></highlight></codeline>
<codeline lineno="12"><highlight class="comment"><sp/><sp/><sp/><sp/>1.<sp/>The<sp/>origin<sp/>of<sp/>this<sp/>software<sp/>must<sp/>not<sp/>be<sp/>misrepresented;<sp/>you<sp/>must<sp/>not</highlight></codeline>
<codeline lineno="13"><highlight class="comment"><sp/><sp/><sp/><sp/>claim<sp/>that<sp/>you<sp/>wrote<sp/>the<sp/>original<sp/>software.<sp/>If<sp/>you<sp/>use<sp/>this<sp/>software</highlight></codeline>
<codeline lineno="14"><highlight class="comment"><sp/><sp/><sp/><sp/>in<sp/>a<sp/>product,<sp/>an<sp/>acknowledgment<sp/>in<sp/>the<sp/>product<sp/>documentation<sp/>would<sp/>be</highlight></codeline>
<codeline lineno="15"><highlight class="comment"><sp/><sp/><sp/><sp/>appreciated<sp/>but<sp/>is<sp/>not<sp/>required.</highlight></codeline>
<codeline lineno="16"><highlight class="comment"></highlight></codeline>
<codeline lineno="17"><highlight class="comment"><sp/><sp/><sp/><sp/>2.<sp/>Altered<sp/>source<sp/>versions<sp/>must<sp/>be<sp/>plainly<sp/>marked<sp/>as<sp/>such,<sp/>and<sp/>must<sp/>not<sp/>be</highlight></codeline>
<codeline lineno="18"><highlight class="comment"><sp/><sp/><sp/><sp/>misrepresented<sp/>as<sp/>being<sp/>the<sp/>original<sp/>software.</highlight></codeline>
<codeline lineno="19"><highlight class="comment"></highlight></codeline>
<codeline lineno="20"><highlight class="comment"><sp/><sp/><sp/><sp/>3.<sp/>This<sp/>notice<sp/>may<sp/>not<sp/>be<sp/>removed<sp/>or<sp/>altered<sp/>from<sp/>any<sp/>source</highlight></codeline>
<codeline lineno="21"><highlight class="comment"><sp/><sp/><sp/><sp/>distribution.</highlight></codeline>
<codeline lineno="22"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>2013-01-06<sp/>Camilla<sp/>Löwy<sp/>&lt;elmindreda@glfw.org&gt;</highlight></codeline>
<codeline lineno="25"><highlight class="comment"><sp/>*</highlight></codeline>
<codeline lineno="26"><highlight class="comment"><sp/>*<sp/>Added<sp/>casts<sp/>from<sp/>time_t<sp/>to<sp/>DWORD<sp/>to<sp/>avoid<sp/>warnings<sp/>on<sp/>VC++.</highlight></codeline>
<codeline lineno="27"><highlight class="comment"><sp/>*<sp/>Fixed<sp/>time<sp/>retrieval<sp/>on<sp/>POSIX<sp/>systems.</highlight></codeline>
<codeline lineno="28"><highlight class="comment"><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="tinycthread_8h" kindref="compound">tinycthread.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;stdlib.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Platform<sp/>specific<sp/>includes<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_POSIX_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#include<sp/>&lt;signal.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#include<sp/>&lt;sched.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#include<sp/>&lt;unistd.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#include<sp/>&lt;sys/time.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#include<sp/>&lt;errno.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#include<sp/>&lt;process.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#include<sp/>&lt;sys/timeb.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Standard,<sp/>good-to-have<sp/>defines<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>NULL</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#define<sp/>NULL<sp/>(void*)0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>TRUE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#define<sp/>TRUE<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>FALSE</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight><highlight class="preprocessor"><sp/><sp/>#define<sp/>FALSE<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"></highlight></codeline>
<codeline lineno="56" refid="tinycthread_8h_1a89200caf0dc25fcc97df171d0034bff2" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a89200caf0dc25fcc97df171d0034bff2" kindref="member">mtx_init</ref>(mtx_t<sp/>*mtx,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>type)</highlight></codeline>
<codeline lineno="57"><highlight class="normal">{</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/>mtx-&gt;mAlreadyLocked<sp/>=<sp/>FALSE;</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/>mtx-&gt;mRecursive<sp/>=<sp/>type<sp/>&amp;<sp/>mtx_recursive;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/>InitializeCriticalSection(&amp;mtx-&gt;mHandle);</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/>pthread_mutexattr_t<sp/>attr;</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/>pthread_mutexattr_init(&amp;attr);</highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(type<sp/>&amp;<sp/>mtx_recursive)</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>pthread_mutexattr_settype(&amp;attr,<sp/>PTHREAD_MUTEX_RECURSIVE);</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/>ret<sp/>=<sp/>pthread_mutex_init(mtx,<sp/>&amp;attr);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/>pthread_mutexattr_destroy(&amp;attr);</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret<sp/>==<sp/>0<sp/>?<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref><sp/>:<sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal">}</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77" refid="tinycthread_8h_1ae8b3732298d1d316db6438b4c561c0dd" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1ae8b3732298d1d316db6438b4c561c0dd" kindref="member">mtx_destroy</ref>(mtx_t<sp/>*mtx)</highlight></codeline>
<codeline lineno="78"><highlight class="normal">{</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/>DeleteCriticalSection(&amp;mtx-&gt;mHandle);</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"><sp/><sp/>pthread_mutex_destroy(mtx);</highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal">}</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="86" refid="tinycthread_8h_1a8945984db67db8ee774872da64d0e424" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a8945984db67db8ee774872da64d0e424" kindref="member">mtx_lock</ref>(mtx_t<sp/>*mtx)</highlight></codeline>
<codeline lineno="87"><highlight class="normal">{</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/>EnterCriticalSection(&amp;mtx-&gt;mHandle);</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!mtx-&gt;mRecursive)</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(mtx-&gt;mAlreadyLocked)<sp/>Sleep(1000);<sp/></highlight><highlight class="comment">/*<sp/>Simulate<sp/>deadlock...<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/>mtx-&gt;mAlreadyLocked<sp/>=<sp/>TRUE;</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_mutex_lock(mtx)<sp/>==<sp/>0<sp/>?<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref><sp/>:<sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal">}</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101" refid="tinycthread_8h_1a98f9757dde089254735199ac738ff65f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a98f9757dde089254735199ac738ff65f" kindref="member">mtx_timedlock</ref>(mtx_t<sp/>*mtx,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>timespec<sp/>*ts)</highlight></codeline>
<codeline lineno="102"><highlight class="normal">{</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>FIXME!<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/>(void)mtx;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/>(void)ts;</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="107"><highlight class="normal">}</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109" refid="tinycthread_8h_1ac577690ddd48f5a1fdf3dc97881a2199" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1ac577690ddd48f5a1fdf3dc97881a2199" kindref="member">mtx_trylock</ref>(mtx_t<sp/>*mtx)</highlight></codeline>
<codeline lineno="110"><highlight class="normal">{</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret<sp/>=<sp/>TryEnterCriticalSection(&amp;mtx-&gt;mHandle)<sp/>?<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref><sp/>:<sp/><ref refid="tinycthread_8h_1a3c563aa25920a041d83d4019b113ab5d" kindref="member">thrd_busy</ref>;</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>((!mtx-&gt;mRecursive)<sp/>&amp;&amp;<sp/>(ret<sp/>==<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>)<sp/>&amp;&amp;<sp/>mtx-&gt;mAlreadyLocked)</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/>LeaveCriticalSection(&amp;mtx-&gt;mHandle);</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/>ret<sp/>=<sp/><ref refid="tinycthread_8h_1a3c563aa25920a041d83d4019b113ab5d" kindref="member">thrd_busy</ref>;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>(pthread_mutex_trylock(mtx)<sp/>==<sp/>0)<sp/>?<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref><sp/>:<sp/><ref refid="tinycthread_8h_1a3c563aa25920a041d83d4019b113ab5d" kindref="member">thrd_busy</ref>;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal">}</highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight></codeline>
<codeline lineno="124" refid="tinycthread_8h_1ae2fb1d2854461fa583017cc9b0bc6cca" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1ae2fb1d2854461fa583017cc9b0bc6cca" kindref="member">mtx_unlock</ref>(mtx_t<sp/>*mtx)</highlight></codeline>
<codeline lineno="125"><highlight class="normal">{</highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/>mtx-&gt;mAlreadyLocked<sp/>=<sp/>FALSE;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/>LeaveCriticalSection(&amp;mtx-&gt;mHandle);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_mutex_unlock(mtx)<sp/>==<sp/>0<sp/>?<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref><sp/>:<sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;;</highlight></codeline>
<codeline lineno="132"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133"><highlight class="normal">}</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_CONDITION_EVENT_ONE<sp/>0</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>_CONDITION_EVENT_ALL<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140" refid="tinycthread_8h_1a146f4cd218c2a2f770be14c1dee26d08" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a146f4cd218c2a2f770be14c1dee26d08" kindref="member">cnd_init</ref>(cnd_t<sp/>*cond)</highlight></codeline>
<codeline lineno="141"><highlight class="normal">{</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/>cond-&gt;mWaitersCount<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Init<sp/>critical<sp/>section<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/>InitializeCriticalSection(&amp;cond-&gt;mWaitersCountLock);</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Init<sp/>events<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/>cond-&gt;mEvents[_CONDITION_EVENT_ONE]<sp/>=<sp/>CreateEvent(NULL,<sp/>FALSE,<sp/>FALSE,<sp/>NULL);</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cond-&gt;mEvents[_CONDITION_EVENT_ONE]<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/>cond-&gt;mEvents[_CONDITION_EVENT_ALL]<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/>cond-&gt;mEvents[_CONDITION_EVENT_ALL]<sp/>=<sp/>CreateEvent(NULL,<sp/>TRUE,<sp/>FALSE,<sp/>NULL);</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cond-&gt;mEvents[_CONDITION_EVENT_ALL]<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/>CloseHandle(cond-&gt;mEvents[_CONDITION_EVENT_ONE]);</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>cond-&gt;mEvents[_CONDITION_EVENT_ONE]<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_cond_init(cond,<sp/>NULL)<sp/>==<sp/>0<sp/>?<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref><sp/>:<sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="166"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="167"><highlight class="normal">}</highlight></codeline>
<codeline lineno="168"><highlight class="normal"></highlight></codeline>
<codeline lineno="169" refid="tinycthread_8h_1aa925921fa9edc189f474ae10a23bcfd3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1aa925921fa9edc189f474ae10a23bcfd3" kindref="member">cnd_destroy</ref>(cnd_t<sp/>*cond)</highlight></codeline>
<codeline lineno="170"><highlight class="normal">{</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cond-&gt;mEvents[_CONDITION_EVENT_ONE]<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/>CloseHandle(cond-&gt;mEvents[_CONDITION_EVENT_ONE]);</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(cond-&gt;mEvents[_CONDITION_EVENT_ALL]<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>CloseHandle(cond-&gt;mEvents[_CONDITION_EVENT_ALL]);</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/>DeleteCriticalSection(&amp;cond-&gt;mWaitersCountLock);</highlight></codeline>
<codeline lineno="181"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/>pthread_cond_destroy(cond);</highlight></codeline>
<codeline lineno="183"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="184"><highlight class="normal">}</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186" refid="tinycthread_8h_1af76e066715b1190d38a69da1c511e30f" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1af76e066715b1190d38a69da1c511e30f" kindref="member">cnd_signal</ref>(cnd_t<sp/>*cond)</highlight></codeline>
<codeline lineno="187"><highlight class="normal">{</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>haveWaiters;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Are<sp/>there<sp/>any<sp/>waiters?<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/>EnterCriticalSection(&amp;cond-&gt;mWaitersCountLock);</highlight></codeline>
<codeline lineno="193"><highlight class="normal"><sp/><sp/>haveWaiters<sp/>=<sp/>(cond-&gt;mWaitersCount<sp/>&gt;<sp/>0);</highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/>LeaveCriticalSection(&amp;cond-&gt;mWaitersCountLock);</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>we<sp/>have<sp/>any<sp/>waiting<sp/>threads,<sp/>send<sp/>them<sp/>a<sp/>signal<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(haveWaiters)</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(SetEvent(cond-&gt;mEvents[_CONDITION_EVENT_ONE])<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_cond_signal(cond)<sp/>==<sp/>0<sp/>?<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref><sp/>:<sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal">}</highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight></codeline>
<codeline lineno="211" refid="tinycthread_8h_1a66228b340509733bdf529b93bca8df14" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a66228b340509733bdf529b93bca8df14" kindref="member">cnd_broadcast</ref>(cnd_t<sp/>*cond)</highlight></codeline>
<codeline lineno="212"><highlight class="normal">{</highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>haveWaiters;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Are<sp/>there<sp/>any<sp/>waiters?<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/>EnterCriticalSection(&amp;cond-&gt;mWaitersCountLock);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/>haveWaiters<sp/>=<sp/>(cond-&gt;mWaitersCount<sp/>&gt;<sp/>0);</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/>LeaveCriticalSection(&amp;cond-&gt;mWaitersCountLock);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>we<sp/>have<sp/>any<sp/>waiting<sp/>threads,<sp/>send<sp/>them<sp/>a<sp/>signal<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(haveWaiters)</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(SetEvent(cond-&gt;mEvents[_CONDITION_EVENT_ALL])<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="229"><highlight class="normal"></highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_cond_signal(cond)<sp/>==<sp/>0<sp/>?<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref><sp/>:<sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="233"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal">}</highlight></codeline>
<codeline lineno="235"><highlight class="normal"></highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>_cnd_timedwait_win32(cnd_t<sp/>*cond,<sp/>mtx_t<sp/>*mtx,<sp/>DWORD<sp/>timeout)</highlight></codeline>
<codeline lineno="238"><highlight class="normal">{</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="structresult" kindref="compound">result</ref>,<sp/>lastWaiter;</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Increment<sp/>number<sp/>of<sp/>waiters<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/>EnterCriticalSection(&amp;cond-&gt;mWaitersCountLock);</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/>++<sp/>cond-&gt;mWaitersCount;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/>LeaveCriticalSection(&amp;cond-&gt;mWaitersCountLock);</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Release<sp/>the<sp/>mutex<sp/>while<sp/>waiting<sp/>for<sp/>the<sp/>condition<sp/>(will<sp/>decrease</highlight></codeline>
<codeline lineno="247"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>the<sp/>number<sp/>of<sp/>waiters<sp/>when<sp/>done)...<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><ref refid="tinycthread_8h_1ae2fb1d2854461fa583017cc9b0bc6cca" kindref="member">mtx_unlock</ref>(mtx);</highlight></codeline>
<codeline lineno="249"><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Wait<sp/>for<sp/>either<sp/>event<sp/>to<sp/>become<sp/>signaled<sp/>due<sp/>to<sp/>cnd_signal()<sp/>or</highlight></codeline>
<codeline lineno="251"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>cnd_broadcast()<sp/>being<sp/>called<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><ref refid="structresult" kindref="compound">result</ref><sp/>=<sp/>WaitForMultipleObjects(2,<sp/>cond-&gt;mEvents,<sp/>FALSE,<sp/>timeout);</highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="structresult" kindref="compound">result</ref><sp/>==<sp/>WAIT_TIMEOUT)</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1aec454a4baf61e6d518bbfb8768bd6a1f" kindref="member">thrd_timeout</ref>;</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="structresult" kindref="compound">result</ref><sp/>==<sp/>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)WAIT_FAILED)</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="261"><highlight class="normal"></highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Check<sp/>if<sp/>we<sp/>are<sp/>the<sp/>last<sp/>waiter<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/>EnterCriticalSection(&amp;cond-&gt;mWaitersCountLock);</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/>--<sp/>cond-&gt;mWaitersCount;</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/>lastWaiter<sp/>=<sp/>(<ref refid="structresult" kindref="compound">result</ref><sp/>==<sp/>(WAIT_OBJECT_0<sp/>+<sp/>_CONDITION_EVENT_ALL))<sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(cond-&gt;mWaitersCount<sp/>==<sp/>0);</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/>LeaveCriticalSection(&amp;cond-&gt;mWaitersCountLock);</highlight></codeline>
<codeline lineno="268"><highlight class="normal"></highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>If<sp/>we<sp/>are<sp/>the<sp/>last<sp/>waiter<sp/>to<sp/>be<sp/>notified<sp/>to<sp/>stop<sp/>waiting,<sp/>reset<sp/>the<sp/>event<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(lastWaiter)</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ResetEvent(cond-&gt;mEvents[_CONDITION_EVENT_ALL])<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Re-acquire<sp/>the<sp/>mutex<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><ref refid="tinycthread_8h_1a8945984db67db8ee774872da64d0e424" kindref="member">mtx_lock</ref>(mtx);</highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="282"><highlight class="normal">}</highlight></codeline>
<codeline lineno="283"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="285" refid="tinycthread_8h_1ac4dfb82fc3d92bb688cb07308af6a659" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1ac4dfb82fc3d92bb688cb07308af6a659" kindref="member">cnd_wait</ref>(cnd_t<sp/>*cond,<sp/>mtx_t<sp/>*mtx)</highlight></codeline>
<codeline lineno="286"><highlight class="normal">{</highlight></codeline>
<codeline lineno="287"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_cnd_timedwait_win32(cond,<sp/>mtx,<sp/>INFINITE);</highlight></codeline>
<codeline lineno="289"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_cond_wait(cond,<sp/>mtx)<sp/>==<sp/>0<sp/>?<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref><sp/>:<sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="291"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal">}</highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight></codeline>
<codeline lineno="294" refid="tinycthread_8h_1a2bdc352d949424855c957b0d1916d443" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a2bdc352d949424855c957b0d1916d443" kindref="member">cnd_timedwait</ref>(cnd_t<sp/>*cond,<sp/>mtx_t<sp/>*mtx,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>timespec<sp/>*ts)</highlight></codeline>
<codeline lineno="295"><highlight class="normal">{</highlight></codeline>
<codeline lineno="296"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">timespec<sp/>now;</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(clock_gettime(CLOCK_REALTIME,<sp/>&amp;now)<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/>DWORD<sp/>delta<sp/>=<sp/>(DWORD)<sp/>((ts-&gt;tv_sec<sp/>-<sp/>now.tv_sec)<sp/>*<sp/>1000<sp/>+</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(ts-&gt;tv_nsec<sp/>-<sp/>now.tv_nsec<sp/>+<sp/>500000)<sp/>/<sp/>1000000);</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>_cnd_timedwait_win32(cond,<sp/>mtx,<sp/>delta);</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="306"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ret;</highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/>ret<sp/>=<sp/>pthread_cond_timedwait(cond,<sp/>mtx,<sp/>ts);</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ret<sp/>==<sp/>ETIMEDOUT)</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1aec454a4baf61e6d518bbfb8768bd6a1f" kindref="member">thrd_timeout</ref>;</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>ret<sp/>==<sp/>0<sp/>?<sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref><sp/>:<sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="314"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="315"><highlight class="normal">}</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="317"><highlight class="normal"></highlight></codeline>
<codeline lineno="319" refid="struct__thread__start__info" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">typedef</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="320" refid="struct__thread__start__info_1af8538b214eba5919c21dde7cf7102c83" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="tinycthread_8h_1ab26bdfa456502f8c483f45bb39ca7336" kindref="member">thrd_start_t</ref><sp/><ref refid="struct__thread__start__info_1af8538b214eba5919c21dde7cf7102c83" kindref="member">mFunction</ref>;<sp/></highlight></codeline>
<codeline lineno="321" refid="struct__thread__start__info_1a0d38b31c203749b40fd7926c8f4579fa" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/><ref refid="struct__thread__start__info_1a0d38b31c203749b40fd7926c8f4579fa" kindref="member">mArg</ref>;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="322"><highlight class="normal">}<sp/><ref refid="struct__thread__start__info" kindref="compound">_thread_start_info</ref>;</highlight></codeline>
<codeline lineno="323"><highlight class="normal"></highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight><highlight class="comment">/*<sp/>Thread<sp/>wrapper<sp/>function.<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="325"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="326"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">unsigned</highlight><highlight class="normal"><sp/>WINAPI<sp/>_thrd_wrapper_function(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>aArg)</highlight></codeline>
<codeline lineno="327"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined(_TTHREAD_POSIX_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="328"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>_thrd_wrapper_function(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<sp/>aArg)</highlight></codeline>
<codeline lineno="329"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="330"><highlight class="normal">{</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><ref refid="tinycthread_8h_1ab26bdfa456502f8c483f45bb39ca7336" kindref="member">thrd_start_t</ref><sp/>fun;</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*arg;</highlight></codeline>
<codeline lineno="333"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><sp/>res;</highlight></codeline>
<codeline lineno="334"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_POSIX_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*pres;</highlight></codeline>
<codeline lineno="336"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="337"><highlight class="normal"></highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>thread<sp/>startup<sp/>information<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><ref refid="struct__thread__start__info" kindref="compound">_thread_start_info</ref><sp/>*ti<sp/>=<sp/>(<ref refid="struct__thread__start__info" kindref="compound">_thread_start_info</ref><sp/>*)<sp/>aArg;</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/>fun<sp/>=<sp/>ti-&gt;<ref refid="struct__thread__start__info_1af8538b214eba5919c21dde7cf7102c83" kindref="member">mFunction</ref>;</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/>arg<sp/>=<sp/>ti-&gt;<ref refid="struct__thread__start__info_1a0d38b31c203749b40fd7926c8f4579fa" kindref="member">mArg</ref>;</highlight></codeline>
<codeline lineno="342"><highlight class="normal"></highlight></codeline>
<codeline lineno="343"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>The<sp/>thread<sp/>is<sp/>responsible<sp/>for<sp/>freeing<sp/>the<sp/>startup<sp/>information<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="344"><highlight class="normal"><sp/><sp/>free((</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)ti);</highlight></codeline>
<codeline lineno="345"><highlight class="normal"></highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Call<sp/>the<sp/>actual<sp/>client<sp/>thread<sp/>function<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/>res<sp/>=<sp/>fun(arg);</highlight></codeline>
<codeline lineno="348"><highlight class="normal"></highlight></codeline>
<codeline lineno="349"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>res;</highlight></codeline>
<codeline lineno="351"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/>pres<sp/>=<sp/>malloc(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="353"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pres<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/>*(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*)pres<sp/>=<sp/>res;</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pres;</highlight></codeline>
<codeline lineno="358"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="359"><highlight class="normal">}</highlight></codeline>
<codeline lineno="360"><highlight class="normal"></highlight></codeline>
<codeline lineno="361" refid="tinycthread_8h_1a1a52b6cd2d15cc6c4741d5124f85d183" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a1a52b6cd2d15cc6c4741d5124f85d183" kindref="member">thrd_create</ref>(thrd_t<sp/>*thr,<sp/><ref refid="tinycthread_8h_1ab26bdfa456502f8c483f45bb39ca7336" kindref="member">thrd_start_t</ref><sp/>func,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*arg)</highlight></codeline>
<codeline lineno="362"><highlight class="normal">{</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Fill<sp/>out<sp/>the<sp/>thread<sp/>startup<sp/>information<sp/>(passed<sp/>to<sp/>the<sp/>thread<sp/>wrapper,</highlight></codeline>
<codeline lineno="364"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/>which<sp/>will<sp/>eventually<sp/>free<sp/>it)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="365"><highlight class="normal"><sp/><sp/><ref refid="struct__thread__start__info" kindref="compound">_thread_start_info</ref>*<sp/>ti<sp/>=<sp/>(<ref refid="struct__thread__start__info" kindref="compound">_thread_start_info</ref>*)malloc(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(<ref refid="struct__thread__start__info" kindref="compound">_thread_start_info</ref>));</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(ti<sp/>==<sp/>NULL)</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1ad6010b6ba8c0508cef692f066b09e2ef" kindref="member">thrd_nomem</ref>;</highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/>ti-&gt;<ref refid="struct__thread__start__info_1af8538b214eba5919c21dde7cf7102c83" kindref="member">mFunction</ref><sp/>=<sp/>func;</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/>ti-&gt;<ref refid="struct__thread__start__info_1a0d38b31c203749b40fd7926c8f4579fa" kindref="member">mArg</ref><sp/>=<sp/>arg;</highlight></codeline>
<codeline lineno="372"><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Create<sp/>the<sp/>thread<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="374"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/>*thr<sp/>=<sp/>(HANDLE)_beginthreadex(NULL,<sp/>0,<sp/>_thrd_wrapper_function,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)ti,<sp/>0,<sp/>NULL);</highlight></codeline>
<codeline lineno="376"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined(_TTHREAD_POSIX_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(pthread_create(thr,<sp/>NULL,<sp/>_thrd_wrapper_function,<sp/>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*)ti)<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/>*thr<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="381"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="382"><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Did<sp/>we<sp/>fail<sp/>to<sp/>create<sp/>the<sp/>thread?<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!*thr)</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/>free(ti);</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="391"><highlight class="normal">}</highlight></codeline>
<codeline lineno="392"><highlight class="normal"></highlight></codeline>
<codeline lineno="393" refid="tinycthread_8h_1ab67b6f182a848d979155d03598325fa7" refkind="member"><highlight class="normal">thrd_t<sp/><ref refid="tinycthread_8h_1ab67b6f182a848d979155d03598325fa7" kindref="member">thrd_current</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="394"><highlight class="normal">{</highlight></codeline>
<codeline lineno="395"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>GetCurrentThread();</highlight></codeline>
<codeline lineno="397"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_self();</highlight></codeline>
<codeline lineno="399"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="400"><highlight class="normal">}</highlight></codeline>
<codeline lineno="401"><highlight class="normal"></highlight></codeline>
<codeline lineno="402" refid="tinycthread_8h_1ad5380997f9e32a31f802bdd9cb266902" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1ad5380997f9e32a31f802bdd9cb266902" kindref="member">thrd_detach</ref>(thrd_t<sp/>thr)</highlight></codeline>
<codeline lineno="403"><highlight class="normal">{</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>FIXME!<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="405"><highlight class="normal"><sp/><sp/>(void)thr;</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="407"><highlight class="normal">}</highlight></codeline>
<codeline lineno="408"><highlight class="normal"></highlight></codeline>
<codeline lineno="409" refid="tinycthread_8h_1a153e65a389814ce51ad07791e42b2118" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a153e65a389814ce51ad07791e42b2118" kindref="member">thrd_equal</ref>(thrd_t<sp/>thr0,<sp/>thrd_t<sp/>thr1)</highlight></codeline>
<codeline lineno="410"><highlight class="normal">{</highlight></codeline>
<codeline lineno="411"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>thr0<sp/>==<sp/>thr1;</highlight></codeline>
<codeline lineno="413"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_equal(thr0,<sp/>thr1);</highlight></codeline>
<codeline lineno="415"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="416"><highlight class="normal">}</highlight></codeline>
<codeline lineno="417"><highlight class="normal"></highlight></codeline>
<codeline lineno="418" refid="tinycthread_8h_1ae13e483223c39327e190e79e18f20b15" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1ae13e483223c39327e190e79e18f20b15" kindref="member">thrd_exit</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>res)</highlight></codeline>
<codeline lineno="419"><highlight class="normal">{</highlight></codeline>
<codeline lineno="420"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/>ExitThread(res);</highlight></codeline>
<codeline lineno="422"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*pres<sp/>=<sp/>malloc(</highlight><highlight class="keyword">sizeof</highlight><highlight class="normal">(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">));</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pres<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/>*(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*)pres<sp/>=<sp/>res;</highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/>pthread_exit(pres);</highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal">}</highlight></codeline>
<codeline lineno="431"><highlight class="normal"></highlight></codeline>
<codeline lineno="432" refid="tinycthread_8h_1aa2e83a544f49f74cf217a69a882b5d80" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1aa2e83a544f49f74cf217a69a882b5d80" kindref="member">thrd_join</ref>(thrd_t<sp/>thr,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>*res)</highlight></codeline>
<codeline lineno="433"><highlight class="normal">{</highlight></codeline>
<codeline lineno="434"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(WaitForSingleObject(thr,<sp/>INFINITE)<sp/>==<sp/>WAIT_FAILED)</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(res<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/>DWORD<sp/>dwRes;</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/>GetExitCodeThread(thr,<sp/>&amp;dwRes);</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/>*res<sp/>=<sp/>dwRes;</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="445"><highlight class="normal"></highlight><highlight class="preprocessor">#elif<sp/>defined(_TTHREAD_POSIX_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*pres;</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>ires<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="448"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pthread_join(thr,<sp/>&amp;pres)<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="451"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pres<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/>ires<sp/>=<sp/>*(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*)pres;</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/>free(pres);</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(res<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="458"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="459"><highlight class="normal"><sp/><sp/><sp/><sp/>*res<sp/>=<sp/>ires;</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="461"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="463"><highlight class="normal">}</highlight></codeline>
<codeline lineno="464"><highlight class="normal"></highlight></codeline>
<codeline lineno="465" refid="tinycthread_8h_1a58d00bd1fc0cc3c91d4c34d5faf117c3" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a58d00bd1fc0cc3c91d4c34d5faf117c3" kindref="member">thrd_sleep</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>timespec<sp/>*time_point,<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>timespec<sp/>*remaining)</highlight></codeline>
<codeline lineno="466"><highlight class="normal">{</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">timespec<sp/>now;</highlight></codeline>
<codeline lineno="468"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/>DWORD<sp/>delta;</highlight></codeline>
<codeline lineno="470"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">long</highlight><highlight class="normal"><sp/>delta;</highlight></codeline>
<codeline lineno="472"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="473"><highlight class="normal"></highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Get<sp/>the<sp/>current<sp/>time<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(clock_gettime(CLOCK_REALTIME,<sp/>&amp;now)<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>-2;<sp/><sp/></highlight><highlight class="comment">//<sp/>FIXME:<sp/>Some<sp/>specific<sp/>error<sp/>code?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="477"><highlight class="normal"></highlight></codeline>
<codeline lineno="478"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Delta<sp/>in<sp/>milliseconds<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/>delta<sp/>=<sp/>(DWORD)<sp/>((time_point-&gt;tv_sec<sp/>-<sp/>now.tv_sec)<sp/>*<sp/>1000<sp/>+</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(time_point-&gt;tv_nsec<sp/>-<sp/>now.tv_nsec<sp/>+<sp/>500000)<sp/>/<sp/>1000000);</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(delta<sp/>&gt;<sp/>0)</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/>Sleep(delta);</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="486"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>Delta<sp/>in<sp/>microseconds<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/>delta<sp/>=<sp/>(time_point-&gt;tv_sec<sp/>-<sp/>now.tv_sec)<sp/>*<sp/>1000000L<sp/>+</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>(time_point-&gt;tv_nsec<sp/>-<sp/>now.tv_nsec<sp/>+<sp/>500L)<sp/>/<sp/>1000L;</highlight></codeline>
<codeline lineno="490"><highlight class="normal"></highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>On<sp/>some<sp/>systems,<sp/>the<sp/>usleep<sp/>argument<sp/>must<sp/>be<sp/>&lt;<sp/>1000000<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal"><sp/>(delta<sp/>&gt;<sp/>999999L)</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/>usleep(999999);</highlight></codeline>
<codeline lineno="495"><highlight class="normal"><sp/><sp/><sp/><sp/>delta<sp/>-=<sp/>999999L;</highlight></codeline>
<codeline lineno="496"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(delta<sp/>&gt;<sp/>0L)</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/>usleep((useconds_t)delta);</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="501"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"></highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>We<sp/>don&apos;t<sp/>support<sp/>waking<sp/>up<sp/>prematurely<sp/>(yet)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="504"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(remaining)</highlight></codeline>
<codeline lineno="505"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="506"><highlight class="normal"><sp/><sp/><sp/><sp/>remaining-&gt;tv_sec<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/>remaining-&gt;tv_nsec<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="508"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="509"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="510"><highlight class="normal">}</highlight></codeline>
<codeline lineno="511"><highlight class="normal"></highlight></codeline>
<codeline lineno="512" refid="tinycthread_8h_1acbfb78346e6b76b23da1d2d8df03549a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1acbfb78346e6b76b23da1d2d8df03549a" kindref="member">thrd_yield</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="513"><highlight class="normal">{</highlight></codeline>
<codeline lineno="514"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="515"><highlight class="normal"><sp/><sp/>Sleep(0);</highlight></codeline>
<codeline lineno="516"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="517"><highlight class="normal"><sp/><sp/>sched_yield();</highlight></codeline>
<codeline lineno="518"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="519"><highlight class="normal">}</highlight></codeline>
<codeline lineno="520"><highlight class="normal"></highlight></codeline>
<codeline lineno="521" refid="tinycthread_8h_1a286fe7927e9af276a9cfdbc8b9eb08ad" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a286fe7927e9af276a9cfdbc8b9eb08ad" kindref="member">tss_create</ref>(tss_t<sp/>*key,<sp/><ref refid="tinycthread_8h_1a7bd9f13e4169f842cbb831ea348049dd" kindref="member">tss_dtor_t</ref><sp/>dtor)</highlight></codeline>
<codeline lineno="522"><highlight class="normal">{</highlight></codeline>
<codeline lineno="523"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="524"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">/*<sp/>FIXME:<sp/>The<sp/>destructor<sp/>function<sp/>is<sp/>not<sp/>supported<sp/>yet...<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="525"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dtor<sp/>!=<sp/>NULL)</highlight></codeline>
<codeline lineno="526"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="527"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="528"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="529"><highlight class="normal"><sp/><sp/>*key<sp/>=<sp/>TlsAlloc();</highlight></codeline>
<codeline lineno="530"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(*key<sp/>==<sp/>TLS_OUT_OF_INDEXES)</highlight></codeline>
<codeline lineno="531"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="532"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="533"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="534"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="535"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pthread_key_create(key,<sp/>dtor)<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="536"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="537"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="538"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="539"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="540"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="541"><highlight class="normal">}</highlight></codeline>
<codeline lineno="542"><highlight class="normal"></highlight></codeline>
<codeline lineno="543" refid="tinycthread_8h_1aecebbc66b206171d9381ba94528c6cb7" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1aecebbc66b206171d9381ba94528c6cb7" kindref="member">tss_delete</ref>(tss_t<sp/>key)</highlight></codeline>
<codeline lineno="544"><highlight class="normal">{</highlight></codeline>
<codeline lineno="545"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="546"><highlight class="normal"><sp/><sp/>TlsFree(key);</highlight></codeline>
<codeline lineno="547"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="548"><highlight class="normal"><sp/><sp/>pthread_key_delete(key);</highlight></codeline>
<codeline lineno="549"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="550"><highlight class="normal">}</highlight></codeline>
<codeline lineno="551"><highlight class="normal"></highlight></codeline>
<codeline lineno="552" refid="tinycthread_8h_1a5cf26b78a3f19a4e7b6876f957f2059c" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*<ref refid="tinycthread_8h_1a5cf26b78a3f19a4e7b6876f957f2059c" kindref="member">tss_get</ref>(tss_t<sp/>key)</highlight></codeline>
<codeline lineno="553"><highlight class="normal">{</highlight></codeline>
<codeline lineno="554"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="555"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>TlsGetValue(key);</highlight></codeline>
<codeline lineno="556"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="557"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>pthread_getspecific(key);</highlight></codeline>
<codeline lineno="558"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="559"><highlight class="normal">}</highlight></codeline>
<codeline lineno="560"><highlight class="normal"></highlight></codeline>
<codeline lineno="561" refid="tinycthread_8h_1a608e01c49b84a5ad4f085a9aedc6a680" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a608e01c49b84a5ad4f085a9aedc6a680" kindref="member">tss_set</ref>(tss_t<sp/>key,<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*val)</highlight></codeline>
<codeline lineno="562"><highlight class="normal">{</highlight></codeline>
<codeline lineno="563"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="564"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(TlsSetValue(key,<sp/>val)<sp/>==<sp/>0)</highlight></codeline>
<codeline lineno="565"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="566"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="567"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="568"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="569"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(pthread_setspecific(key,<sp/>val)<sp/>!=<sp/>0)</highlight></codeline>
<codeline lineno="570"><highlight class="normal"><sp/><sp/>{</highlight></codeline>
<codeline lineno="571"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a0944e70c2ce4eed616f7bcfd604fba96" kindref="member">thrd_error</ref>;</highlight></codeline>
<codeline lineno="572"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="573"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="574"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="tinycthread_8h_1a6f15c94421801f7f6a4338653b9017dc" kindref="member">thrd_success</ref>;</highlight></codeline>
<codeline lineno="575"><highlight class="normal">}</highlight></codeline>
<codeline lineno="576"><highlight class="normal"></highlight></codeline>
<codeline lineno="577"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_EMULATE_CLOCK_GETTIME_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="578"><highlight class="normal"></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>_tthread_clock_gettime(clockid_t<sp/>clk_id,<sp/></highlight><highlight class="keyword">struct</highlight><highlight class="normal"><sp/>timespec<sp/>*ts)</highlight></codeline>
<codeline lineno="579"><highlight class="normal">{</highlight></codeline>
<codeline lineno="580"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>defined(_TTHREAD_WIN32_)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="581"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">_timeb<sp/>tb;</highlight></codeline>
<codeline lineno="582"><highlight class="normal"><sp/><sp/>_ftime(&amp;tb);</highlight></codeline>
<codeline lineno="583"><highlight class="normal"><sp/><sp/>ts-&gt;tv_sec<sp/>=<sp/>(time_t)tb.time;</highlight></codeline>
<codeline lineno="584"><highlight class="normal"><sp/><sp/>ts-&gt;tv_nsec<sp/>=<sp/>1000000L<sp/>*<sp/>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)tb.millitm;</highlight></codeline>
<codeline lineno="585"><highlight class="normal"></highlight><highlight class="preprocessor">#else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="586"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">struct<sp/></highlight><highlight class="normal">timeval<sp/>tv;</highlight></codeline>
<codeline lineno="587"><highlight class="normal"><sp/><sp/>gettimeofday(&amp;tv,<sp/>NULL);</highlight></codeline>
<codeline lineno="588"><highlight class="normal"><sp/><sp/>ts-&gt;tv_sec<sp/>=<sp/>(time_t)tv.tv_sec;</highlight></codeline>
<codeline lineno="589"><highlight class="normal"><sp/><sp/>ts-&gt;tv_nsec<sp/>=<sp/>1000L<sp/>*<sp/>(</highlight><highlight class="keywordtype">long</highlight><highlight class="normal">)tv.tv_usec;</highlight></codeline>
<codeline lineno="590"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="591"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0;</highlight></codeline>
<codeline lineno="592"><highlight class="normal">}</highlight></codeline>
<codeline lineno="593"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>_TTHREAD_EMULATE_CLOCK_GETTIME_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="594"><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glfw/deps/tinycthread.c"/>
  </compounddef>
</doxygen>
