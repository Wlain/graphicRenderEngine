\hypertarget{stb_8h_source}{}\doxysection{stb.\+h}
\label{stb_8h_source}\index{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/stb/deprecated/stb.h@{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/stb/deprecated/stb.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00001}00001 \textcolor{comment}{/* stb.h -\/ v2.37 -\/ Sean's Tool Box -\/-\/ public domain -\/-\/ http://nothings.org/stb.h}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00002}00002 \textcolor{comment}{          no warranty is offered or implied; use this code at your own risk}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00003}00003 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00004}00004 \textcolor{comment}{   This is a single header file with a bunch of useful utilities}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00005}00005 \textcolor{comment}{   for getting stuff done in C/C++.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00006}00006 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00007}00007 \textcolor{comment}{   Documentation: http://nothings.org/stb/stb\_h.html}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00008}00008 \textcolor{comment}{   Unit tests:    http://nothings.org/stb/stb.c}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00009}00009 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00010}00010 \textcolor{comment}{ ============================================================================}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00011}00011 \textcolor{comment}{   You MUST}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00012}00012 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00013}00013 \textcolor{comment}{      \#define STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00014}00014 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00015}00015 \textcolor{comment}{   in EXACTLY \_one\_ C or C++ file that includes this header, BEFORE the}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00016}00016 \textcolor{comment}{   include, like this:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00017}00017 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00018}00018 \textcolor{comment}{      \#define STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00019}00019 \textcolor{comment}{      \#include "{}stb.h"{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00020}00020 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00021}00021 \textcolor{comment}{   All other files should just \#include "{}stb.h"{} without the \#define.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00022}00022 \textcolor{comment}{ ============================================================================}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00023}00023 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00024}00024 \textcolor{comment}{Version History}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00025}00025 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00026}00026 \textcolor{comment}{   2.36   various fixes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00027}00027 \textcolor{comment}{   2.35   fix clang-\/cl issues with swprintf}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00028}00028 \textcolor{comment}{   2.34   fix warnings}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00029}00029 \textcolor{comment}{   2.33   more fixes to random numbers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00030}00030 \textcolor{comment}{   2.32   stb\_intcmprev, stb\_uidict, fix random numbers on Linux}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00031}00031 \textcolor{comment}{   2.31   stb\_ucharcmp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00032}00032 \textcolor{comment}{   2.30   MinGW fix}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00033}00033 \textcolor{comment}{   2.29   attempt to fix use of swprintf()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00034}00034 \textcolor{comment}{   2.28   various new functionality}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00035}00035 \textcolor{comment}{   2.27   test \_WIN32 not WIN32 in STB\_THREADS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00036}00036 \textcolor{comment}{   2.26   various warning \& bugfixes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00037}00037 \textcolor{comment}{   2.25   various warning \& bugfixes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00038}00038 \textcolor{comment}{   2.24   various warning \& bugfixes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00039}00039 \textcolor{comment}{   2.23   fix 2.22}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00040}00040 \textcolor{comment}{   2.22   64-\/bit fixes from '!='; fix stb\_sdict\_copy() to have preferred name}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00041}00041 \textcolor{comment}{   2.21   utf-\/8 decoder rejects "{}overlong"{} encodings; attempted 64-\/bit improvements}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00042}00042 \textcolor{comment}{   2.20   fix to hash "{}copy"{} function-\/-\/reported by someone with handle "{}!="{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00043}00043 \textcolor{comment}{   2.19   ???}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00044}00044 \textcolor{comment}{   2.18   stb\_readdir\_subdirs\_mask}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00045}00045 \textcolor{comment}{   2.17   stb\_cfg\_dir}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00046}00046 \textcolor{comment}{   2.16   fix stb\_bgio\_, add stb\_bgio\_stat(); begin a streaming wrapper}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00047}00047 \textcolor{comment}{   2.15   upgraded hash table template to allow:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00048}00048 \textcolor{comment}{            -\/ aggregate keys (explicit comparison func for EMPTY and DEL keys)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00049}00049 \textcolor{comment}{            -\/ "{}static"{} implementations (so they can be culled if unused)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00050}00050 \textcolor{comment}{   2.14   stb\_mprintf}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00051}00051 \textcolor{comment}{   2.13   reduce identifiable strings in STB\_NO\_STB\_STRINGS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00052}00052 \textcolor{comment}{   2.12   fix STB\_ONLY -\/-\/ lots of uint32s, TRUE/FALSE things had crept in}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00053}00053 \textcolor{comment}{   2.11   fix bug in stb\_dirtree\_get() which caused "{}c://path"{} sorts of stuff}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00054}00054 \textcolor{comment}{   2.10   STB\_F(), STB\_I() inline constants (also KI,KU,KF,KD)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00055}00055 \textcolor{comment}{   2.09   stb\_box\_face\_vertex\_axis\_side}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00056}00056 \textcolor{comment}{   2.08   bugfix stb\_trimwhite()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00057}00057 \textcolor{comment}{   2.07   colored printing in windows (why are we in 1985?)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00058}00058 \textcolor{comment}{   2.06   comparison functions are now functions-\/that-\/return-\/functions and}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00059}00059 \textcolor{comment}{          accept a struct-\/offset as a parameter (not thread-\/safe)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00060}00060 \textcolor{comment}{   2.05   compile and pass tests under Linux (but no threads); thread cleanup}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00061}00061 \textcolor{comment}{   2.04   stb\_cubic\_bezier\_1d, smoothstep, avoid dependency on registry}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00062}00062 \textcolor{comment}{   2.03   ?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00063}00063 \textcolor{comment}{   2.02   remove integrated documentation}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00064}00064 \textcolor{comment}{   2.01   integrate various fixes; stb\_force\_uniprocessor}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00065}00065 \textcolor{comment}{   2.00   revised stb\_dupe to use multiple hashes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00066}00066 \textcolor{comment}{   1.99   stb\_charcmp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00067}00067 \textcolor{comment}{   1.98   stb\_arr\_deleten, stb\_arr\_insertn}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00068}00068 \textcolor{comment}{   1.97   fix stb\_newell\_normal()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00069}00069 \textcolor{comment}{   1.96   stb\_hash\_number()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00070}00070 \textcolor{comment}{   1.95   hack stb\_\_rec\_max; clean up recursion code to use new functions}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00071}00071 \textcolor{comment}{   1.94   stb\_dirtree; rename stb\_extra to stb\_ptrmap}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00072}00072 \textcolor{comment}{   1.93   stb\_sem\_new() API cleanup (no blockflag-\/starts blocked; use 'extra')}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00073}00073 \textcolor{comment}{   1.92   stb\_threadqueue-\/-\/multi reader/writer queue, fixed size or resizeable}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00074}00074 \textcolor{comment}{   1.91   stb\_bgio\_* for reading disk asynchronously}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00075}00075 \textcolor{comment}{   1.90   stb\_mutex uses CRITICAL\_REGION; new stb\_sync primitive for thread}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00076}00076 \textcolor{comment}{          joining; workqueue supports stb\_sync instead of stb\_semaphore}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00077}00077 \textcolor{comment}{   1.89   support ';' in constant-\/string wildcards; stb\_mutex wrapper (can}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00078}00078 \textcolor{comment}{          implement with EnterCriticalRegion eventually)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00079}00079 \textcolor{comment}{   1.88   portable threading API (only for win32 so far); worker thread queue}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00080}00080 \textcolor{comment}{   1.87   fix wildcard handling in stb\_readdir\_recursive}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00081}00081 \textcolor{comment}{   1.86   support ';' in wildcards}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00082}00082 \textcolor{comment}{   1.85   make stb\_regex work with non-\/constant strings;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00083}00083 \textcolor{comment}{               beginnings of stb\_introspect()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00084}00084 \textcolor{comment}{   1.84   (forgot to make notes)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00085}00085 \textcolor{comment}{   1.83   whoops, stb\_keep\_if\_different wasn't deleting the temp file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00086}00086 \textcolor{comment}{   1.82   bring back stb\_compress from stb\_file.h for cmirror}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00087}00087 \textcolor{comment}{   1.81   various bugfixes, STB\_FASTMALLOC\_INIT inits FASTMALLOC in release}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00088}00088 \textcolor{comment}{   1.80   stb\_readdir returns utf8; write own utf8-\/utf16 because lib was wrong}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00089}00089 \textcolor{comment}{   1.79   stb\_write}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00090}00090 \textcolor{comment}{   1.78   calloc() support for malloc wrapper, STB\_FASTMALLOC}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00091}00091 \textcolor{comment}{   1.77   STB\_FASTMALLOC}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00092}00092 \textcolor{comment}{   1.76   STB\_STUA -\/ Lua-\/like language; (stb\_image, stb\_csample, stb\_bilinear)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00093}00093 \textcolor{comment}{   1.75   alloc/free array of blocks; stb\_hheap bug; a few stb\_ps\_ funcs;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00094}00094 \textcolor{comment}{          hash*getkey, hash*copy; stb\_bitset; stb\_strnicmp; bugfix stb\_bst}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00095}00095 \textcolor{comment}{   1.74   stb\_replaceinplace; use stdlib C function to convert utf8 to UTF-\/16}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00096}00096 \textcolor{comment}{   1.73   fix performance bug \& leak in stb\_ischar (C++ port lost a 'static')}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00097}00097 \textcolor{comment}{   1.72   remove stb\_block, stb\_block\_manager, stb\_decompress (to stb\_file.h)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00098}00098 \textcolor{comment}{   1.71   stb\_trimwhite, stb\_tokens\_nested, etc.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00099}00099 \textcolor{comment}{   1.70   back out 1.69 because it might problemize mixed builds; stb\_filec()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00100}00100 \textcolor{comment}{   1.69   (stb\_file returns 'char *' in C++)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00101}00101 \textcolor{comment}{   1.68   add a special 'tree root' data type for stb\_bst; stb\_arr\_end}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00102}00102 \textcolor{comment}{   1.67   full C++ port. (stb\_block\_manager)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00103}00103 \textcolor{comment}{   1.66   stb\_newell\_normal}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00104}00104 \textcolor{comment}{   1.65   stb\_lex\_item\_wild -\/-\/ allow wildcard items which MUST match entirely}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00105}00105 \textcolor{comment}{   1.64   stb\_data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00106}00106 \textcolor{comment}{   1.63   stb\_log\_name}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00107}00107 \textcolor{comment}{   1.62   stb\_define\_sort; C++ cleanup}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00108}00108 \textcolor{comment}{   1.61   stb\_hash\_fast -\/-\/ Paul Hsieh's hash function (beats Bob Jenkins'?)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00109}00109 \textcolor{comment}{   1.60   stb\_delete\_directory\_recursive}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00110}00110 \textcolor{comment}{   1.59   stb\_readdir\_recursive}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00111}00111 \textcolor{comment}{   1.58   stb\_bst variant with parent pointer for O(1) iteration, not O(log N)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00112}00112 \textcolor{comment}{   1.57   replace LCG random with Mersenne Twister (found a public domain one)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00113}00113 \textcolor{comment}{   1.56   stb\_perfect\_hash, stb\_ischar, stb\_regex}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00114}00114 \textcolor{comment}{   1.55   new stb\_bst API allows multiple BSTs per node (e.g. secondary keys)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00115}00115 \textcolor{comment}{   1.54   bugfix: stb\_define\_hash, stb\_wildmatch, regexp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00116}00116 \textcolor{comment}{   1.53   stb\_define\_hash; recoded stb\_extra, stb\_sdict use it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00117}00117 \textcolor{comment}{   1.52   stb\_rand\_define, stb\_bst, stb\_reverse}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00118}00118 \textcolor{comment}{   1.51   fix 'stb\_arr\_setlen(NULL, 0)'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00119}00119 \textcolor{comment}{   1.50   stb\_wordwrap}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00120}00120 \textcolor{comment}{   1.49   minor improvements to enable the scripting language}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00121}00121 \textcolor{comment}{   1.48   better approach for stb\_arr using stb\_malloc; more invasive, clearer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00122}00122 \textcolor{comment}{   1.47   stb\_lex (lexes stb.h at 1.5ML/s on 3Ghz P4; 60/70\% of optimal/flex)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00123}00123 \textcolor{comment}{   1.46   stb\_wrapper\_*, STB\_MALLOC\_WRAPPER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00124}00124 \textcolor{comment}{   1.45   lightly tested DFA acceleration of regexp searching}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00125}00125 \textcolor{comment}{   1.44   wildcard matching \& searching; regexp matching \& searching}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00126}00126 \textcolor{comment}{   1.43   stb\_temp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00127}00127 \textcolor{comment}{   1.42   allow stb\_arr to use stb\_malloc/realloc; note this is global}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00128}00128 \textcolor{comment}{   1.41   make it compile in C++; (disable stb\_arr in C++)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00129}00129 \textcolor{comment}{   1.40   stb\_dupe tweak; stb\_swap; stb\_substr}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00130}00130 \textcolor{comment}{   1.39   stb\_dupe; improve stb\_file\_max to be less stupid}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00131}00131 \textcolor{comment}{   1.38   stb\_sha1\_file: generate sha1 for file, even > 4GB}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00132}00132 \textcolor{comment}{   1.37   stb\_file\_max; partial support for utf8 filenames in Windows}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00133}00133 \textcolor{comment}{   1.36   remove STB\_\_NO\_PREFIX -\/ poor interaction with IDE, not worth it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00134}00134 \textcolor{comment}{          streamline stb\_arr to make it separately publishable}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00135}00135 \textcolor{comment}{   1.35   bugfixes for stb\_sdict, stb\_malloc(0), stristr}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00136}00136 \textcolor{comment}{   1.34   (streaming interfaces for stb\_compress)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00137}00137 \textcolor{comment}{   1.33   stb\_alloc; bug in stb\_getopt; remove stb\_overflow}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00138}00138 \textcolor{comment}{   1.32   (stb\_compress returns, smaller\&faster; encode window \& 64-\/bit len)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00139}00139 \textcolor{comment}{   1.31   stb\_prefix\_count}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00140}00140 \textcolor{comment}{   1.30   (STB\_\_NO\_PREFIX -\/ remove stb\_ prefixes for personal projects)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00141}00141 \textcolor{comment}{   1.29   stb\_fput\_varlen64, etc.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00142}00142 \textcolor{comment}{   1.28   stb\_sha1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00143}00143 \textcolor{comment}{   1.27   ?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00144}00144 \textcolor{comment}{   1.26   stb\_extra}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00145}00145 \textcolor{comment}{   1.25   ?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00146}00146 \textcolor{comment}{   1.24   stb\_copyfile}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00147}00147 \textcolor{comment}{   1.23   stb\_readdir}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00148}00148 \textcolor{comment}{   1.22   ?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00149}00149 \textcolor{comment}{   1.21   ?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00150}00150 \textcolor{comment}{   1.20   ?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00151}00151 \textcolor{comment}{   1.19   ?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00152}00152 \textcolor{comment}{   1.18   ?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00153}00153 \textcolor{comment}{   1.17   ?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00154}00154 \textcolor{comment}{   1.16   ?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00155}00155 \textcolor{comment}{   1.15   stb\_fixpath, stb\_splitpath, stb\_strchr2}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00156}00156 \textcolor{comment}{   1.14   stb\_arr}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00157}00157 \textcolor{comment}{   1.13   ?stb, stb\_log, stb\_fatal}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00158}00158 \textcolor{comment}{   1.12   ?stb\_hash2}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00159}00159 \textcolor{comment}{   1.11   miniML}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00160}00160 \textcolor{comment}{   1.10   stb\_crc32, stb\_adler32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00161}00161 \textcolor{comment}{   1.09   stb\_sdict}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00162}00162 \textcolor{comment}{   1.08   stb\_bitreverse, stb\_ispow2, stb\_big32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00163}00163 \textcolor{comment}{          stb\_fopen, stb\_fput\_varlen, stb\_fput\_ranged}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00164}00164 \textcolor{comment}{          stb\_fcmp, stb\_feq}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00165}00165 \textcolor{comment}{   1.07   (stb\_encompress)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00166}00166 \textcolor{comment}{   1.06   stb\_compress}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00167}00167 \textcolor{comment}{   1.05   stb\_tokens, (stb\_hheap)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00168}00168 \textcolor{comment}{   1.04   stb\_rand}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00169}00169 \textcolor{comment}{   1.03   ?(s-\/strings)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00170}00170 \textcolor{comment}{   1.02   ?stb\_filelen, stb\_tokens}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00171}00171 \textcolor{comment}{   1.01   stb\_tolower}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00172}00172 \textcolor{comment}{   1.00   stb\_hash, stb\_intcmp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00173}00173 \textcolor{comment}{          stb\_file, stb\_stringfile, stb\_fgets}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00174}00174 \textcolor{comment}{          stb\_prefix, stb\_strlower, stb\_strtok}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00175}00175 \textcolor{comment}{          stb\_image}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00176}00176 \textcolor{comment}{          (stb\_array), (stb\_arena)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00177}00177 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00178}00178 \textcolor{comment}{Parenthesized items have since been removed.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00179}00179 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00180}00180 \textcolor{comment}{LICENSE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00181}00181 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00182}00182 \textcolor{comment}{ See end of file for license information.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00183}00183 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00184}00184 \textcolor{comment}{CREDITS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00185}00185 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00186}00186 \textcolor{comment}{ Written by Sean Barrett.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00187}00187 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00188}00188 \textcolor{comment}{ Fixes:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00189}00189 \textcolor{comment}{  Philipp Wiesemann}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00190}00190 \textcolor{comment}{  Robert Nix}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00191}00191 \textcolor{comment}{  r-\/lyeh}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00192}00192 \textcolor{comment}{  blackpawn}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00193}00193 \textcolor{comment}{  github:Mojofreem}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00194}00194 \textcolor{comment}{  Ryan Whitworth}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00195}00195 \textcolor{comment}{  Vincent Isambart}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00196}00196 \textcolor{comment}{  Mike Sartain}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00197}00197 \textcolor{comment}{  Eugene Opalev}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00198}00198 \textcolor{comment}{  Tim Sjostrand}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00199}00199 \textcolor{comment}{  github:infatum}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00200}00200 \textcolor{comment}{  Dave Butler (Croepha)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00201}00201 \textcolor{comment}{  Ethan Lee (flibitijibibo)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00202}00202 \textcolor{comment}{  Brian Collins}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00203}00203 \textcolor{comment}{  Kyle Langley}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00204}00204 \textcolor{comment}{*/}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00205}00205 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00206}00206 \textcolor{preprocessor}{\#include <stdarg.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00207}00207 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00208}00208 \textcolor{preprocessor}{\#ifndef STB\_\_INCLUDE\_STB\_H}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00209}00209 \textcolor{preprocessor}{\#define STB\_\_INCLUDE\_STB\_H}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00210}00210 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00211}00211 \textcolor{preprocessor}{\#define STB\_VERSION  1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00212}00212 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00213}00213 \textcolor{preprocessor}{\#ifdef STB\_INTROSPECT}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00214}00214 \textcolor{preprocessor}{   \#define STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00215}00215 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00216}00216 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00217}00217 \textcolor{preprocessor}{\#ifdef STB\_DEFINE\_THREADS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00218}00218 \textcolor{preprocessor}{   \#ifndef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00219}00219 \textcolor{preprocessor}{   \#define STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00220}00220 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00221}00221 \textcolor{preprocessor}{   \#ifndef STB\_THREADS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00222}00222 \textcolor{preprocessor}{   \#define STB\_THREADS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00223}00223 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00224}00224 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00225}00225 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00226}00226 \textcolor{preprocessor}{\#if defined(\_WIN32) \&\& !defined(\_\_MINGW32\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00227}00227 \textcolor{preprocessor}{   \#ifndef \_CRT\_SECURE\_NO\_WARNINGS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00228}00228 \textcolor{preprocessor}{   \#define \_CRT\_SECURE\_NO\_WARNINGS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00229}00229 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00230}00230 \textcolor{preprocessor}{   \#ifndef \_CRT\_NONSTDC\_NO\_DEPRECATE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00231}00231 \textcolor{preprocessor}{   \#define \_CRT\_NONSTDC\_NO\_DEPRECATE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00232}00232 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00233}00233 \textcolor{preprocessor}{   \#ifndef \_CRT\_NON\_CONFORMING\_SWPRINTFS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00234}00234 \textcolor{preprocessor}{   \#define \_CRT\_NON\_CONFORMING\_SWPRINTFS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00235}00235 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00236}00236 \textcolor{preprocessor}{   \#if !defined(\_MSC\_VER) || \_MSC\_VER > 1700}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00237}00237 \textcolor{preprocessor}{   \#include <intrin.h>} \textcolor{comment}{// \_BitScanReverse}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00238}00238 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00239}00239 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00240}00240 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00241}00241 \textcolor{preprocessor}{\#include <stdlib.h>}     \textcolor{comment}{// stdlib could have min/max}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00242}00242 \textcolor{preprocessor}{\#include <stdio.h>}      \textcolor{comment}{// need FILE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00243}00243 \textcolor{preprocessor}{\#include <string.h>}     \textcolor{comment}{// stb\_define\_hash needs memcpy/memset}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00244}00244 \textcolor{preprocessor}{\#include <time.h>}       \textcolor{comment}{// stb\_dirtree}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00245}00245 \textcolor{preprocessor}{\#ifdef \_\_MINGW32\_\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00246}00246 \textcolor{preprocessor}{   \#include <fcntl.h>}   \textcolor{comment}{// O\_RDWR}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00247}00247 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00248}00248 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00249}00249 \textcolor{preprocessor}{\#ifdef STB\_PERSONAL}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00250}00250    \textcolor{keyword}{typedef} \textcolor{keywordtype}{int} Bool;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00251}00251 \textcolor{preprocessor}{   \#define False 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00252}00252 \textcolor{preprocessor}{   \#define True 1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00253}00253 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00254}00254 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00255}00255 \textcolor{preprocessor}{\#ifdef STB\_MALLOC\_WRAPPER\_PAGED}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00256}00256 \textcolor{preprocessor}{   \#define STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00257}00257 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00258}00258 \textcolor{preprocessor}{\#ifdef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00259}00259 \textcolor{preprocessor}{   \#define STB\_MALLOC\_WRAPPER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00260}00260 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00261}00261 \textcolor{preprocessor}{\#ifdef STB\_MALLOC\_WRAPPER\_FASTMALLOC}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00262}00262 \textcolor{preprocessor}{   \#define STB\_FASTMALLOC}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00263}00263 \textcolor{preprocessor}{   \#define STB\_MALLOC\_WRAPPER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00264}00264 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00265}00265 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00266}00266 \textcolor{preprocessor}{\#ifdef STB\_FASTMALLOC}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00267}00267 \textcolor{preprocessor}{   \#ifndef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00268}00268 \textcolor{preprocessor}{      \#undef STB\_FASTMALLOC}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00269}00269 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00270}00270 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00271}00271 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00272}00272 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00273}00273 \textcolor{preprocessor}{   \#include <assert.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00274}00274 \textcolor{preprocessor}{   \#include <stdarg.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00275}00275 \textcolor{preprocessor}{   \#include <stddef.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00276}00276 \textcolor{preprocessor}{   \#include <ctype.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00277}00277 \textcolor{preprocessor}{   \#include <math.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00278}00278 \textcolor{preprocessor}{   \#ifndef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00279}00279 \textcolor{preprocessor}{   \#include <unistd.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00280}00280 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00281}00281 \textcolor{preprocessor}{   \#include <io.h>}      \textcolor{comment}{// \_mktemp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00282}00282 \textcolor{preprocessor}{   \#include <direct.h>}  \textcolor{comment}{// \_rmdir}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00283}00283 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00284}00284 \textcolor{preprocessor}{   \#include <sys/types.h>} \textcolor{comment}{// stat()/\_stat()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00285}00285 \textcolor{preprocessor}{   \#include <sys/stat.h>}  \textcolor{comment}{// stat()/\_stat()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00286}00286 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00287}00287 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00288}00288 \textcolor{preprocessor}{\#define stb\_min(a,b)   ((a) < (b) ? (a) : (b))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00289}00289 \textcolor{preprocessor}{\#define stb\_max(a,b)   ((a) > (b) ? (a) : (b))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00290}00290 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00291}00291 \textcolor{preprocessor}{\#ifndef STB\_ONLY}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00292}00292 \textcolor{preprocessor}{   \#if !defined(\_\_cplusplus) \&\& !defined(min) \&\& !defined(max)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00293}00293 \textcolor{preprocessor}{     \#define min(x,y) stb\_min(x,y)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00294}00294 \textcolor{preprocessor}{     \#define max(x,y) stb\_max(x,y)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00295}00295 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00296}00296 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00297}00297 \textcolor{preprocessor}{   \#ifndef M\_PI}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00298}00298 \textcolor{preprocessor}{     \#define M\_PI  3.14159265358979323846f}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00299}00299 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00300}00300 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00301}00301 \textcolor{preprocessor}{   \#ifndef TRUE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00302}00302 \textcolor{preprocessor}{     \#define TRUE  1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00303}00303 \textcolor{preprocessor}{     \#define FALSE 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00304}00304 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00305}00305 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00306}00306 \textcolor{preprocessor}{   \#ifndef deg2rad}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00307}00307 \textcolor{preprocessor}{   \#define deg2rad(a)  ((a)*(M\_PI/180))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00308}00308 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00309}00309 \textcolor{preprocessor}{   \#ifndef rad2deg}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00310}00310 \textcolor{preprocessor}{   \#define rad2deg(a)  ((a)*(180/M\_PI))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00311}00311 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00312}00312 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00313}00313 \textcolor{preprocessor}{   \#ifndef swap}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00314}00314 \textcolor{preprocessor}{   \#ifndef \_\_cplusplus}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00315}00315 \textcolor{preprocessor}{   \#define swap(TYPE,a,b)  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00316}00316 \textcolor{preprocessor}{               do \{ TYPE stb\_\_t; stb\_\_t = (a); (a) = (b); (b) = stb\_\_t; \} while (0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00317}00317 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00318}00318 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00319}00319 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00320}00320    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}  uint8 ;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00321}00321    \textcolor{keyword}{typedef}   \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char}   int8 ;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00322}00322    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} uint16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00323}00323    \textcolor{keyword}{typedef}   \textcolor{keywordtype}{signed} \textcolor{keywordtype}{short}  int16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00324}00324 \textcolor{preprocessor}{  \#if defined(STB\_USE\_LONG\_FOR\_32\_BIT\_INT) || defined(STB\_LONG32)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00325}00325    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long}  uint32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00326}00326    \textcolor{keyword}{typedef}   \textcolor{keywordtype}{signed} \textcolor{keywordtype}{long}   int32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00327}00327 \textcolor{preprocessor}{  \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00328}00328    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}   uint32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00329}00329    \textcolor{keyword}{typedef}   \textcolor{keywordtype}{signed} \textcolor{keywordtype}{int}    int32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00330}00330 \textcolor{preprocessor}{  \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00331}00331 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00332}00332    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}  uchar ;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00333}00333    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} ushort;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00334}00334    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}   \mbox{\hyperlink{group__core__precision_ga4fd29415871152bfb5abd588334147c8}{uint}}  ;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00335}00335    \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long}  ulong ;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00336}00336 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00337}00337    \textcolor{comment}{// produce compile errors if the sizes aren't right}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00338}00338    \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} stb\_\_testsize16[\textcolor{keyword}{sizeof}(int16)==2];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00339}00339    \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} stb\_\_testsize32[\textcolor{keyword}{sizeof}(int32)==4];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00340}00340 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00341}00341 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00342}00342 \textcolor{preprocessor}{\#ifndef STB\_TRUE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00343}00343 \textcolor{preprocessor}{  \#define STB\_TRUE 1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00344}00344 \textcolor{preprocessor}{  \#define STB\_FALSE 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00345}00345 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00346}00346 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00347}00347 \textcolor{comment}{// if we're STB\_ONLY, can't rely on uint32 or even uint, so all the}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00348}00348 \textcolor{comment}{// variables we'll use herein need typenames prefixed with 'stb':}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00349}00349 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stb\_uchar;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00350}00350 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stb\_uint8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00351}00351 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  stb\_uint;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00352}00352 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} stb\_uint16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00353}00353 \textcolor{keyword}{typedef}          \textcolor{keywordtype}{short} stb\_int16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00354}00354 \textcolor{keyword}{typedef}   \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char}  stb\_int8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00355}00355 \textcolor{preprocessor}{\#if defined(STB\_USE\_LONG\_FOR\_32\_BIT\_INT) || defined(STB\_LONG32)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00356}00356   \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long}  stb\_uint32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00357}00357   \textcolor{keyword}{typedef}          \textcolor{keywordtype}{long}  stb\_int32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00358}00358 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00359}00359   \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}   stb\_uint32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00360}00360   \textcolor{keyword}{typedef}          \textcolor{keywordtype}{int}   stb\_int32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00361}00361 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00362}00362 \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} stb\_\_testsize2\_16[\textcolor{keyword}{sizeof}(stb\_uint16)==2 ? 1 : -\/1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00363}00363 \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} stb\_\_testsize2\_32[\textcolor{keyword}{sizeof}(stb\_uint32)==4 ? 1 : -\/1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00364}00364 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00365}00365 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00366}00366   \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \_\_int64 stb\_uint64;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00367}00367   \textcolor{keyword}{typedef}          \_\_int64 stb\_int64;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00368}00368 \textcolor{preprocessor}{  \#define STB\_IMM\_UINT64(literalui64) (literalui64\#\#ui64)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00369}00369 \textcolor{preprocessor}{  \#define STB\_IMM\_INT64(literali64) (literali64\#\#i64)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00370}00370 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00371}00371   \textcolor{comment}{// ??}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00372}00372   \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} stb\_uint64;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00373}00373   \textcolor{keyword}{typedef}          \textcolor{keywordtype}{long} \textcolor{keywordtype}{long} stb\_int64;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00374}00374 \textcolor{preprocessor}{  \#define STB\_IMM\_UINT64(literalui64) (literalui64\#\#ULL)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00375}00375 \textcolor{preprocessor}{  \#define STB\_IMM\_INT64(literali64) (literali64\#\#LL)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00376}00376 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00377}00377 \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} stb\_\_testsize2\_64[\textcolor{keyword}{sizeof}(stb\_uint64)==8 ? 1 : -\/1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00378}00378 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00379}00379 \textcolor{comment}{// add platform-\/specific ways of checking for sizeof(char*) == 8,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00380}00380 \textcolor{comment}{// and make those define STB\_PTR64}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00381}00381 \textcolor{preprocessor}{\#if defined(\_WIN64) || defined(\_\_x86\_64\_\_) || defined(\_\_ia64\_\_) || defined(\_\_LP64\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00382}00382 \textcolor{preprocessor}{  \#define STB\_PTR64}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00383}00383 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00384}00384 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00385}00385 \textcolor{preprocessor}{\#ifdef STB\_PTR64}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00386}00386 \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} stb\_\_testsize2\_ptr[\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char} *) == 8];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00387}00387 \textcolor{keyword}{typedef} stb\_uint64 stb\_uinta;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00388}00388 \textcolor{keyword}{typedef} stb\_int64  stb\_inta;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00389}00389 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00390}00390 \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} stb\_\_testsize2\_ptr[\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char} *) == 4];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00391}00391 \textcolor{keyword}{typedef} stb\_uint32 stb\_uinta;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00392}00392 \textcolor{keyword}{typedef} stb\_int32  stb\_inta;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00393}00393 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00394}00394 \textcolor{keyword}{typedef} \textcolor{keywordtype}{char} stb\_\_testsize2\_uinta[\textcolor{keyword}{sizeof}(stb\_uinta)==\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}*) ? 1 : -\/1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00395}00395 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00396}00396 \textcolor{comment}{// if so, we should define an int type that is the pointer size. until then,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00397}00397 \textcolor{comment}{// we'll have to make do with this (which is not the same at all!)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00398}00398 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00399}\mbox{\hyperlink{unionstb__uintptr}{00399}} \textcolor{keyword}{typedef} \textcolor{keyword}{union}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00400}00400 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00401}00401    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00402}00402    \textcolor{keywordtype}{void} * p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00403}00403 \} \mbox{\hyperlink{unionstb__uintptr}{stb\_uintptr}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00404}00404 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00405}00405 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00406}00406 \textcolor{preprocessor}{\#ifdef \_\_cplusplus}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00407}00407 \textcolor{preprocessor}{   \#define STB\_EXTERN   extern "{}C"{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00408}00408 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00409}00409 \textcolor{preprocessor}{   \#define STB\_EXTERN   extern}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00410}00410 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00411}00411 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00412}00412 \textcolor{comment}{// check for well-\/known debug defines}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00413}00413 \textcolor{preprocessor}{\#if defined(DEBUG) || defined(\_DEBUG) || defined(DBG)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00414}00414 \textcolor{preprocessor}{   \#ifndef NDEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00415}00415 \textcolor{preprocessor}{      \#define STB\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00416}00416 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00417}00417 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00418}00418 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00419}00419 \textcolor{preprocessor}{\#ifdef STB\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00420}00420 \textcolor{preprocessor}{   \#include <assert.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00421}00421 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00422}00422 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00424}00424 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00425}00425 \textcolor{comment}{//                         C library function platform handling}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00426}00426 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00427}00427 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00428}00428 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00429}00429 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00430}00430 \textcolor{preprocessor}{\#if defined(\_WIN32) \&\&  defined(\_\_STDC\_WANT\_SECURE\_LIB\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00431}00431 \textcolor{keyword}{static} FILE * stb\_p\_fopen(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *filename, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *mode)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00432}00432 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00433}00433    FILE *f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00434}00434    \textcolor{keywordflow}{if} (0 == fopen\_s(\&f, filename, mode))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00435}00435       \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00436}00436    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00437}00437       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00438}00438 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00439}00439 \textcolor{keyword}{static} FILE * stb\_p\_wfopen(\textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t} *filename, \textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t} *mode)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00440}00440 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00441}00441    FILE *f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00442}00442    \textcolor{keywordflow}{if} (0 == \_wfopen\_s(\&f, filename, mode))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00443}00443       \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00444}00444    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00445}00445       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00446}00446 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00447}00447 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stb\_p\_strcpy\_s(\textcolor{keywordtype}{char} *a, \textcolor{keywordtype}{size\_t} size, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00448}00448 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00449}00449    strcpy\_s(a,size,b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00450}00450    \textcolor{keywordflow}{return} a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00451}00451 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00452}00452 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stb\_p\_strncpy\_s(\textcolor{keywordtype}{char} *a, \textcolor{keywordtype}{size\_t} size, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *b, \textcolor{keywordtype}{size\_t} count)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00453}00453 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00454}00454    strncpy\_s(a,size,b,count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00455}00455    \textcolor{keywordflow}{return} a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00456}00456 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00457}00457 \textcolor{preprocessor}{\#define stb\_p\_mktemp(s)  (\_mktemp\_s(s, strlen(s)+1) == 0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00458}00458 \textcolor{preprocessor}{\#define stb\_p\_sprintf    sprintf\_s}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00459}00459 \textcolor{preprocessor}{\#define stb\_p\_size(x)    ,(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00460}00460 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00461}00461 \textcolor{preprocessor}{\#define stb\_p\_fopen      fopen}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00462}00462 \textcolor{preprocessor}{\#define stb\_p\_wfopen     \_wfopen}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00463}00463 \textcolor{preprocessor}{\#define stb\_p\_strcpy\_s(a,s,b)     strcpy(a,b)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00464}00464 \textcolor{preprocessor}{\#define stb\_p\_strncpy\_s(a,s,b,c)  strncpy(a,b,c)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00465}00465 \textcolor{preprocessor}{\#define stb\_p\_mktemp(s)  (mktemp(s) != NULL)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00466}00466 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00467}00467 \textcolor{preprocessor}{\#define stb\_p\_sprintf    sprintf}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00468}00468 \textcolor{preprocessor}{\#define stb\_p\_size(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00469}00469 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00470}00470 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00471}00471 \textcolor{preprocessor}{\#if defined(\_WIN32)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00472}00472 \textcolor{preprocessor}{\#define stb\_p\_vsnprintf  \_vsnprintf}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00473}00473 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00474}00474 \textcolor{preprocessor}{\#define stb\_p\_vsnprintf  vsnprintf}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00475}00475 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00476}00476 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00477}00477 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00478}00478 \textcolor{preprocessor}{\#if defined(\_WIN32) \&\& (\_MSC\_VER >= 1300)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00479}00479 \textcolor{preprocessor}{\#define stb\_p\_stricmp    \_stricmp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00480}00480 \textcolor{preprocessor}{\#define stb\_p\_strnicmp   \_strnicmp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00481}00481 \textcolor{preprocessor}{\#define stb\_p\_strdup     \_strdup}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00482}00482 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00483}00483 \textcolor{preprocessor}{\#define stb\_p\_strdup     strdup}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00484}00484 \textcolor{preprocessor}{\#define stb\_p\_stricmp    stricmp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00485}00485 \textcolor{preprocessor}{\#define stb\_p\_strnicmp   strnicmp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00486}00486 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00487}00487 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00488}00488 STB\_EXTERN \textcolor{keywordtype}{void} stb\_wrapper\_malloc(\textcolor{keywordtype}{void} *newp, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00489}00489 STB\_EXTERN \textcolor{keywordtype}{void} stb\_wrapper\_free(\textcolor{keywordtype}{void} *oldp, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00490}00490 STB\_EXTERN \textcolor{keywordtype}{void} stb\_wrapper\_realloc(\textcolor{keywordtype}{void} *oldp, \textcolor{keywordtype}{void} *newp, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00491}00491 STB\_EXTERN \textcolor{keywordtype}{void} stb\_wrapper\_calloc(\textcolor{keywordtype}{size\_t} num, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00492}00492 STB\_EXTERN \textcolor{keywordtype}{void} stb\_wrapper\_listall(\textcolor{keywordtype}{void} (*func)(\textcolor{keywordtype}{void} *ptr, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00493}00493 STB\_EXTERN \textcolor{keywordtype}{void} stb\_wrapper\_dump(\textcolor{keywordtype}{char} *filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00494}00494 STB\_EXTERN \textcolor{keywordtype}{size\_t} stb\_wrapper\_allocsize(\textcolor{keywordtype}{void} *oldp);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00495}00495 STB\_EXTERN \textcolor{keywordtype}{void} stb\_wrapper\_check(\textcolor{keywordtype}{void} *oldp);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00496}00496 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00497}00497 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00498}00498 \textcolor{comment}{// this is a special function used inside malloc wrapper}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00499}00499 \textcolor{comment}{// to do allocations that aren't tracked (to avoid}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00500}00500 \textcolor{comment}{// reentrancy). Of course if someone \_else\_ wraps realloc,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00501}00501 \textcolor{comment}{// this breaks, but if they're doing that AND the malloc}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00502}00502 \textcolor{comment}{// wrapper they need to explicitly check for reentrancy.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00503}00503 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00504}00504 \textcolor{comment}{// only define realloc\_raw() and we do realloc(NULL,sz)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00505}00505 \textcolor{comment}{// for malloc() and realloc(p,0) for free().}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00506}00506 \textcolor{keyword}{static} \textcolor{keywordtype}{void} * stb\_\_realloc\_raw(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{int} sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00507}00507 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00508}00508    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} malloc(sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00509}00509    \textcolor{keywordflow}{if} (sz == 0)   \{ free(p); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00510}00510    \textcolor{keywordflow}{return} realloc(p,sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00511}00511 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00512}00512 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00513}00513 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00514}00514 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00515}00515 STB\_EXTERN \textcolor{keywordtype}{void} * stb\_smalloc(\textcolor{keywordtype}{size\_t} sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00516}00516 STB\_EXTERN \textcolor{keywordtype}{void}   stb\_sfree(\textcolor{keywordtype}{void} *p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00517}00517 STB\_EXTERN \textcolor{keywordtype}{void} * stb\_srealloc(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00518}00518 STB\_EXTERN \textcolor{keywordtype}{void} * stb\_scalloc(\textcolor{keywordtype}{size\_t} n, \textcolor{keywordtype}{size\_t} sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00519}00519 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_sstrdup(\textcolor{keywordtype}{char} *s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00520}00520 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00521}00521 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00522}00522 \textcolor{preprocessor}{\#ifdef STB\_FASTMALLOC}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00523}00523 \textcolor{preprocessor}{\#define malloc  stb\_smalloc}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00524}00524 \textcolor{preprocessor}{\#define free    stb\_sfree}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00525}00525 \textcolor{preprocessor}{\#define realloc stb\_srealloc}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00526}00526 \textcolor{preprocessor}{\#define strdup  stb\_sstrdup}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00527}00527 \textcolor{preprocessor}{\#define calloc  stb\_scalloc}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00528}00528 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00529}00529 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00530}00530 \textcolor{preprocessor}{\#ifndef STB\_MALLOC\_ALLCHECK}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00531}00531 \textcolor{preprocessor}{   \#define stb\_\_check(p)  1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00532}00532 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00533}00533 \textcolor{preprocessor}{   \#ifndef STB\_MALLOC\_WRAPPER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00534}00534 \textcolor{preprocessor}{      \#error STB\_MALLOC\_ALLCHECK requires STB\_MALLOC\_WRAPPER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00535}00535 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00536}00536 \textcolor{preprocessor}{      \#define stb\_\_check(p) stb\_mcheck(p)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00537}00537 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00538}00538 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00539}00539 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00540}00540 \textcolor{preprocessor}{\#ifdef STB\_MALLOC\_WRAPPER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00541}00541    STB\_EXTERN \textcolor{keywordtype}{void} * stb\_\_malloc(\textcolor{keywordtype}{size\_t}, \textcolor{keywordtype}{char} *, \textcolor{keywordtype}{int});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00542}00542    STB\_EXTERN \textcolor{keywordtype}{void} * stb\_\_realloc(\textcolor{keywordtype}{void} *, \textcolor{keywordtype}{size\_t}, \textcolor{keywordtype}{char} *, \textcolor{keywordtype}{int});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00543}00543    STB\_EXTERN \textcolor{keywordtype}{void} * stb\_\_calloc(\textcolor{keywordtype}{size\_t} n, \textcolor{keywordtype}{size\_t} s, \textcolor{keywordtype}{char} *, \textcolor{keywordtype}{int});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00544}00544    STB\_EXTERN \textcolor{keywordtype}{void}   stb\_\_free(\textcolor{keywordtype}{void} *, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00545}00545    STB\_EXTERN \textcolor{keywordtype}{char} * stb\_\_strdup(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00546}00546    STB\_EXTERN \textcolor{keywordtype}{void}   stb\_malloc\_checkall(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00547}00547    STB\_EXTERN \textcolor{keywordtype}{void}   stb\_malloc\_check\_counter(\textcolor{keywordtype}{int} init\_delay, \textcolor{keywordtype}{int} rep\_delay);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00548}00548 \textcolor{preprocessor}{   \#ifndef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00549}00549 \textcolor{preprocessor}{      \#define stb\_mcheck(p) 1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00550}00550 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00551}00551       STB\_EXTERN \textcolor{keywordtype}{int}   stb\_mcheck(\textcolor{keywordtype}{void} *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00552}00552 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00553}00553 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00554}00554 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00555}00555 \textcolor{preprocessor}{   \#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00556}00556 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00557}00557 \textcolor{preprocessor}{   \#ifdef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00558}00558 \textcolor{preprocessor}{      \#define STB\_\_PAD   32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00559}00559 \textcolor{preprocessor}{      \#define STB\_\_BIAS  16}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00560}00560 \textcolor{preprocessor}{      \#define STB\_\_SIG   0x51b01234}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00561}00561 \textcolor{preprocessor}{      \#define STB\_\_FIXSIZE(sz)  (((sz+3) \& \string~3) + STB\_\_PAD)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00562}00562 \textcolor{preprocessor}{      \#define STB\_\_ptr(x,y)   ((char *) (x) + (y))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00563}00563 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00564}00564 \textcolor{preprocessor}{      \#define STB\_\_ptr(x,y)   (x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00565}00565 \textcolor{preprocessor}{      \#define STB\_\_FIXSIZE(sz)  (sz)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00566}00566 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00567}00567 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00568}00568 \textcolor{preprocessor}{   \#ifdef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00569}00569    \textcolor{keywordtype}{int} stb\_mcheck(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00570}00570    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00571}00571       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} sz;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00572}00572       \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00573}00573       p = ((\textcolor{keywordtype}{char} *) p) -\/ STB\_\_BIAS;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00574}00574       sz = * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00575}00575       assert(* (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,4) == STB\_\_SIG);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00576}00576       assert(* (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,8) == STB\_\_SIG);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00577}00577       assert(* (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,12) == STB\_\_SIG);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00578}00578       assert(* (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,sz-\/4) == STB\_\_SIG+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00579}00579       assert(* (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,sz-\/8) == STB\_\_SIG+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00580}00580       assert(* (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,sz-\/12) == STB\_\_SIG+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00581}00581       assert(* (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,sz-\/16) == STB\_\_SIG+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00582}00582       stb\_wrapper\_check(STB\_\_ptr(p, STB\_\_BIAS));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00583}00583       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00584}00584    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00585}00585 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00586}00586    \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_check2(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00587}00587    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00588}00588       stb\_mcheck(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00589}00589    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00590}00590 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00591}00591    \textcolor{keywordtype}{void} stb\_malloc\_checkall(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00592}00592    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00593}00593       stb\_wrapper\_listall(stb\_\_check2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00594}00594    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00595}00595 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00596}00596    \textcolor{keywordtype}{void} stb\_malloc\_checkall(\textcolor{keywordtype}{void}) \{ \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00597}00597 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00598}00598 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00599}00599    \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_malloc\_wait=(1 << 30), stb\_\_malloc\_next\_wait = (1 << 30), stb\_\_malloc\_iter;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00600}00600    \textcolor{keywordtype}{void} stb\_malloc\_check\_counter(\textcolor{keywordtype}{int} init\_delay, \textcolor{keywordtype}{int} rep\_delay)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00601}00601    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00602}00602       stb\_\_malloc\_wait = init\_delay;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00603}00603       stb\_\_malloc\_next\_wait = rep\_delay;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00604}00604    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00605}00605 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00606}00606    \textcolor{keywordtype}{void} stb\_mcheck\_all(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00607}00607    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00608}00608 \textcolor{preprocessor}{      \#ifdef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00609}00609       ++stb\_\_malloc\_iter;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00610}00610       \textcolor{keywordflow}{if} (-\/-\/stb\_\_malloc\_wait <= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00611}00611          stb\_malloc\_checkall();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00612}00612          stb\_\_malloc\_wait = stb\_\_malloc\_next\_wait;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00613}00613       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00614}00614 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00615}00615    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00616}00616 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00617}00617 \textcolor{preprocessor}{   \#ifdef STB\_MALLOC\_WRAPPER\_PAGED}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00618}00618 \textcolor{preprocessor}{   \#define STB\_\_WINDOWS\_PAGE (1 << 12)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00619}00619 \textcolor{preprocessor}{   \#ifndef \_WINDOWS\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00620}00620    STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{void} * \_\_stdcall VirtualAlloc(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} size, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} type, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} protect);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00621}00621    STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{int}   \_\_stdcall VirtualFree(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} size, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} freetype);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00622}00622 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00623}00623 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00624}00624 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00625}00625    \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stb\_\_malloc\_final(\textcolor{keywordtype}{size\_t} sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00626}00626    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00627}00627 \textcolor{preprocessor}{      \#ifdef STB\_MALLOC\_WRAPPER\_PAGED}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00628}00628       \textcolor{keywordtype}{size\_t} aligned = (sz + STB\_\_WINDOWS\_PAGE -\/ 1) \& \string~(STB\_\_WINDOWS\_PAGE-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00629}00629       \textcolor{keywordtype}{char} *p = VirtualAlloc(NULL, aligned + STB\_\_WINDOWS\_PAGE, 0x2000, 0x04); \textcolor{comment}{// RESERVE, READWRITE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00630}00630       \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00631}00631       VirtualAlloc(p, aligned,   0x1000, 0x04); \textcolor{comment}{// COMMIT, READWRITE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00632}00632       \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00633}00633 \textcolor{preprocessor}{      \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00634}00634       \textcolor{keywordflow}{return} malloc(sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00635}00635 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00636}00636    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00637}00637 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00638}00638    \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_free\_final(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00639}00639    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00640}00640 \textcolor{preprocessor}{      \#ifdef STB\_MALLOC\_WRAPPER\_PAGED}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00641}00641       VirtualFree(p, 0, 0x8000); \textcolor{comment}{// RELEASE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00642}00642 \textcolor{preprocessor}{      \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00643}00643       free(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00644}00644 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00645}00645    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00646}00646 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00647}00647    \textcolor{keywordtype}{int} stb\_\_malloc\_failure;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00648}00648 \textcolor{preprocessor}{   \#ifdef STB\_MALLOC\_WRAPPER\_PAGED}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00649}00649    \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stb\_\_realloc\_final(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{size\_t} old\_sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00650}00650    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00651}00651       \textcolor{keywordtype}{void} *q = stb\_\_malloc\_final(sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00652}00652       \textcolor{keywordflow}{if} (q == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00653}00653           \textcolor{keywordflow}{return} ++stb\_\_malloc\_failure, q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00654}00654       \textcolor{comment}{// @TODO: deal with p being smaller!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00655}00655       memcpy(q, p, sz < old\_sz ? sz : old\_sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00656}00656       stb\_\_free\_final(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00657}00657       \textcolor{keywordflow}{return} q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00658}00658    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00659}00659 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00660}00660 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00661}00661    \textcolor{keywordtype}{void} stb\_\_free(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00662}00662    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00663}00663       stb\_mcheck\_all();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00664}00664       \textcolor{keywordflow}{if} (!p) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00665}00665 \textcolor{preprocessor}{      \#ifdef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00666}00666       stb\_mcheck(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00667}00667 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00668}00668       stb\_wrapper\_free(p,file,line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00669}00669 \textcolor{preprocessor}{      \#ifdef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00670}00670          p = STB\_\_ptr(p,-\/STB\_\_BIAS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00671}00671          * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,0) = 0xdeadbeef;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00672}00672          * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,4) = 0xdeadbeef;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00673}00673          * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,8) = 0xdeadbeef;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00674}00674          * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,12) = 0xdeadbeef;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00675}00675 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00676}00676       stb\_\_free\_final(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00677}00677    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00678}00678 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00679}00679    \textcolor{keywordtype}{void} * stb\_\_malloc(\textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00680}00680    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00681}00681       \textcolor{keywordtype}{void} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00682}00682       stb\_mcheck\_all();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00683}00683       \textcolor{keywordflow}{if} (sz == 0) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00684}00684       p = stb\_\_malloc\_final(STB\_\_FIXSIZE(sz));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00685}00685       \textcolor{keywordflow}{if} (p == NULL) p = stb\_\_malloc\_final(STB\_\_FIXSIZE(sz));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00686}00686       \textcolor{keywordflow}{if} (p == NULL) p = stb\_\_malloc\_final(STB\_\_FIXSIZE(sz));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00687}00687       \textcolor{keywordflow}{if} (p == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00688}00688          ++stb\_\_malloc\_failure;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00689}00689 \textcolor{preprocessor}{         \#ifdef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00690}00690          stb\_malloc\_checkall();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00691}00691 \textcolor{preprocessor}{         \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00692}00692          \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00693}00693       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00694}00694 \textcolor{preprocessor}{      \#ifdef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00695}00695       * (\textcolor{keywordtype}{int} *) STB\_\_ptr(p,0) = STB\_\_FIXSIZE(sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00696}00696       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,4) = STB\_\_SIG;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00697}00697       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,8) = STB\_\_SIG;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00698}00698       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,12) = STB\_\_SIG;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00699}00699       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,STB\_\_FIXSIZE(sz)-\/4) = STB\_\_SIG+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00700}00700       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,STB\_\_FIXSIZE(sz)-\/8) = STB\_\_SIG+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00701}00701       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,STB\_\_FIXSIZE(sz)-\/12) = STB\_\_SIG+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00702}00702       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(p,STB\_\_FIXSIZE(sz)-\/16) = STB\_\_SIG+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00703}00703       p = STB\_\_ptr(p, STB\_\_BIAS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00704}00704 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00705}00705       stb\_wrapper\_malloc(p,sz,file,line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00706}00706       \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00707}00707    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00708}00708 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00709}00709    \textcolor{keywordtype}{void} * stb\_\_realloc(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00710}00710    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00711}00711       \textcolor{keywordtype}{void} *q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00712}00712 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00713}00713       stb\_mcheck\_all();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00714}00714       \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} stb\_\_malloc(sz,file,line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00715}00715       \textcolor{keywordflow}{if} (sz == 0  ) \{ stb\_\_free(p,file,line); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00716}00716 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00717}00717 \textcolor{preprocessor}{      \#ifdef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00718}00718          stb\_mcheck(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00719}00719          p = STB\_\_ptr(p,-\/STB\_\_BIAS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00720}00720 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00721}00721 \textcolor{preprocessor}{      \#ifdef STB\_MALLOC\_WRAPPER\_PAGED}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00722}00722       \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00723}00723          \textcolor{keywordtype}{size\_t} n = stb\_wrapper\_allocsize(STB\_\_ptr(p,STB\_\_BIAS));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00724}00724          \textcolor{keywordflow}{if} (!n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00725}00725             stb\_wrapper\_check(STB\_\_ptr(p,STB\_\_BIAS));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00726}00726          q = stb\_\_realloc\_final(p, STB\_\_FIXSIZE(sz), STB\_\_FIXSIZE(n));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00727}00727       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00728}00728 \textcolor{preprocessor}{      \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00729}00729       q = realloc(p, STB\_\_FIXSIZE(sz));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00730}00730 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00731}00731       \textcolor{keywordflow}{if} (q == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00732}00732          \textcolor{keywordflow}{return} ++stb\_\_malloc\_failure, q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00733}00733 \textcolor{preprocessor}{      \#ifdef STB\_MALLOC\_WRAPPER\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00734}00734       * (\textcolor{keywordtype}{int} *) STB\_\_ptr(q,0) = STB\_\_FIXSIZE(sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00735}00735       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(q,4) = STB\_\_SIG;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00736}00736       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(q,8) = STB\_\_SIG;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00737}00737       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(q,12) = STB\_\_SIG;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00738}00738       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(q,STB\_\_FIXSIZE(sz)-\/4) = STB\_\_SIG+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00739}00739       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(q,STB\_\_FIXSIZE(sz)-\/8) = STB\_\_SIG+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00740}00740       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(q,STB\_\_FIXSIZE(sz)-\/12) = STB\_\_SIG+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00741}00741       * (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) STB\_\_ptr(q,STB\_\_FIXSIZE(sz)-\/16) = STB\_\_SIG+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00742}00742 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00743}00743       q = STB\_\_ptr(q, STB\_\_BIAS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00744}00744       p = STB\_\_ptr(p, STB\_\_BIAS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00745}00745 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00746}00746       stb\_wrapper\_realloc(p,q,sz,file,line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00747}00747       \textcolor{keywordflow}{return} q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00748}00748    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00749}00749 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00750}00750    STB\_EXTERN \textcolor{keywordtype}{int} stb\_log2\_ceil(\textcolor{keywordtype}{size\_t});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00751}00751    \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stb\_\_calloc(\textcolor{keywordtype}{size\_t} n, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00752}00752    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00753}00753       \textcolor{keywordtype}{void} *q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00754}00754       stb\_mcheck\_all();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00755}00755       \textcolor{keywordflow}{if} (n == 0 || sz == 0) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00756}00756       \textcolor{keywordflow}{if} (stb\_log2\_ceil(n) + stb\_log2\_ceil(sz) >= 32) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00757}00757       q = stb\_\_malloc(n*sz, file, line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00758}00758       \textcolor{keywordflow}{if} (q) memset(q, 0, n*sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00759}00759       \textcolor{keywordflow}{return} q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00760}00760    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00761}00761 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00762}00762    \textcolor{keywordtype}{char} * stb\_\_strdup(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00763}00763    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00764}00764       \textcolor{keywordtype}{char} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00765}00765       stb\_mcheck\_all();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00766}00766       p = stb\_\_malloc(strlen(s)+1, file, line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00767}00767       \textcolor{keywordflow}{if} (!p) \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00768}00768       stb\_p\_strcpy\_s(p, strlen(s)+1, s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00769}00769       \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00770}00770    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00771}00771 \textcolor{preprocessor}{   \#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00772}00772 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00773}00773 \textcolor{preprocessor}{   \#ifdef STB\_FASTMALLOC}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00774}00774 \textcolor{preprocessor}{   \#undef malloc}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00775}00775 \textcolor{preprocessor}{   \#undef realloc}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00776}00776 \textcolor{preprocessor}{   \#undef free}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00777}00777 \textcolor{preprocessor}{   \#undef strdup}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00778}00778 \textcolor{preprocessor}{   \#undef calloc}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00779}00779 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00780}00780 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00781}00781    \textcolor{comment}{// include everything that might define these, BEFORE making macros}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00782}00782 \textcolor{preprocessor}{   \#include <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00783}00783 \textcolor{preprocessor}{   \#include <string.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00784}00784 \textcolor{preprocessor}{   \#include <malloc.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00785}00785 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00786}00786 \textcolor{preprocessor}{   \#define malloc(s)      stb\_\_malloc (  s, \_\_FILE\_\_, \_\_LINE\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00787}00787 \textcolor{preprocessor}{   \#define realloc(p,s)   stb\_\_realloc(p,s, \_\_FILE\_\_, \_\_LINE\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00788}00788 \textcolor{preprocessor}{   \#define calloc(n,s)    stb\_\_calloc (n,s, \_\_FILE\_\_, \_\_LINE\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00789}00789 \textcolor{preprocessor}{   \#define free(p)        stb\_\_free   (p,   \_\_FILE\_\_, \_\_LINE\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00790}00790 \textcolor{preprocessor}{   \#define strdup(p)      stb\_\_strdup (p,   \_\_FILE\_\_, \_\_LINE\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00791}00791 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00792}00792 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00794}00794 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00795}00795 \textcolor{comment}{//                         Windows pretty display}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00796}00796 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00797}00797 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00798}00798 STB\_EXTERN \textcolor{keywordtype}{void} stbprint(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, ...);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00799}00799 STB\_EXTERN \textcolor{keywordtype}{char} *stb\_sprintf(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, ...);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00800}00800 STB\_EXTERN \textcolor{keywordtype}{char} *stb\_mprintf(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, ...);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00801}00801 STB\_EXTERN \textcolor{keywordtype}{int}  stb\_snprintf(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{size\_t} n, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, ...);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00802}00802 STB\_EXTERN \textcolor{keywordtype}{int}  stb\_vsnprintf(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{size\_t} n, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, va\_list v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00803}00803 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00804}00804 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00805}00805 \textcolor{keywordtype}{int} stb\_vsnprintf(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{size\_t} n, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, va\_list v)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00806}00806 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00807}00807    \textcolor{keywordtype}{int} res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00808}00808 \textcolor{preprocessor}{   \#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00809}00809 \textcolor{preprocessor}{      \#ifdef \_\_STDC\_WANT\_SECURE\_LIB\_\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00810}00810       res = \_vsnprintf\_s(s, n, \_TRUNCATE, fmt, v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00811}00811 \textcolor{preprocessor}{      \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00812}00812       res = stb\_p\_vsnprintf(s,n,fmt,v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00813}00813 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00814}00814 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00815}00815    res = vsnprintf(s,n,fmt,v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00816}00816 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00817}00817    \textcolor{keywordflow}{if} (n) s[n-\/1] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00818}00818    \textcolor{comment}{// Unix returns length output would require, Windows returns negative when truncated.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00819}00819    \textcolor{keywordflow}{return} (res >= (\textcolor{keywordtype}{int}) n || res < 0) ? -\/1 : res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00820}00820 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00821}00821 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00822}00822 \textcolor{keywordtype}{int} stb\_snprintf(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{size\_t} n, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, ...)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00823}00823 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00824}00824    \textcolor{keywordtype}{int} res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00825}00825    va\_list v;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00826}00826    va\_start(v,fmt);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00827}00827    res = stb\_vsnprintf(s, n, fmt, v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00828}00828    va\_end(v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00829}00829    \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00830}00830 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00831}00831 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00832}00832 \textcolor{keywordtype}{char} *stb\_sprintf(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, ...)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00833}00833 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00834}00834    \textcolor{keyword}{static} \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00835}00835    va\_list v;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00836}00836    va\_start(v,fmt);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00837}00837    stb\_vsnprintf(\mbox{\hyperlink{classbuffer}{buffer}},1024,fmt,v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00838}00838    va\_end(v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00839}00839    \textcolor{keywordflow}{return} \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00840}00840 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00841}00841 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00842}00842 \textcolor{keywordtype}{char} *stb\_mprintf(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, ...)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00843}00843 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00844}00844    \textcolor{keyword}{static} \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00845}00845    va\_list v;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00846}00846    va\_start(v,fmt);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00847}00847    stb\_vsnprintf(\mbox{\hyperlink{classbuffer}{buffer}},1024,fmt,v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00848}00848    va\_end(v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00849}00849    \textcolor{keywordflow}{return} stb\_p\_strdup(\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00850}00850 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00851}00851 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00852}00852 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00853}00853 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00854}00854 \textcolor{preprocessor}{\#ifndef \_WINDOWS\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00855}00855 STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{int} \_\_stdcall WriteConsoleA(\textcolor{keywordtype}{void} *, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *, \textcolor{keywordtype}{void} *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00856}00856 STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{void} * \_\_stdcall GetStdHandle(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00857}00857 STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{int} \_\_stdcall SetConsoleTextAttribute(\textcolor{keywordtype}{void} *, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00858}00858 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00859}00859 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00860}00860 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_print\_one(\textcolor{keywordtype}{void} *handle, \textcolor{keywordtype}{char} *s, ptrdiff\_t  len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00861}00861 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00862}00862    \textcolor{keywordflow}{if} (len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00863}00863       \textcolor{keywordflow}{if} (0==WriteConsoleA(handle, s, (\textcolor{keywordtype}{unsigned}) len, NULL,NULL))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00864}00864          \textcolor{comment}{// if it fails, maybe redirected, so output normally...}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00865}00865          \textcolor{comment}{// but it's supriously reporting failure now on Win7 and later}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00866}00866          \{\}\textcolor{comment}{//fwrite(s, 1, (unsigned) len, stdout);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00867}00867 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00868}00868 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00869}00869 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_print(\textcolor{keywordtype}{char} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00870}00870 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00871}00871    \textcolor{keywordtype}{void} *handle = GetStdHandle((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) -\/11); \textcolor{comment}{// STD\_OUTPUT\_HANDLE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00872}00872    \textcolor{keywordtype}{int} pad=0; \textcolor{comment}{// number of padding characters to add}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00873}00873 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00874}00874    \textcolor{keywordtype}{char} *t = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00875}00875    \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00876}00876       \textcolor{keywordtype}{int} lpad;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00877}00877       \textcolor{keywordflow}{while} (*s \&\& *s != \textcolor{charliteral}{'\{'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00878}00878          \textcolor{keywordflow}{if} (pad) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00879}00879             \textcolor{keywordflow}{if} (*s == \textcolor{charliteral}{'\(\backslash\)r'} || *s == \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00880}00880                pad = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00881}00881             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s[0] == \textcolor{charliteral}{' '} \&\& s[1] == \textcolor{charliteral}{' '}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00882}00882                stb\_\_print\_one(handle, t, s-\/t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00883}00883                t = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00884}00884                \textcolor{keywordflow}{while} (pad) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00885}00885                   stb\_\_print\_one(handle, t, 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00886}00886                   -\/-\/pad;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00887}00887                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00888}00888             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00889}00889          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00890}00890          ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00891}00891       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00892}00892       \textcolor{keywordflow}{if} (!*s) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00893}00893       stb\_\_print\_one(handle, t, s-\/t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00894}00894       \textcolor{keywordflow}{if} (s[1] == \textcolor{charliteral}{'\{'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00895}00895          ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00896}00896          \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00897}00897       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00898}00898 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00899}00899       \textcolor{keywordflow}{if} (s[1] == \textcolor{charliteral}{'\#'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00900}00900          t = s+3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00901}00901          \textcolor{keywordflow}{if} (isxdigit(s[2]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00902}00902             \textcolor{keywordflow}{if} (isdigit(s[2]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00903}00903                SetConsoleTextAttribute(handle, s[2] -\/ \textcolor{charliteral}{'0'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00904}00904             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00905}00905                SetConsoleTextAttribute(handle, tolower(s[2]) -\/ \textcolor{charliteral}{'a'} + 10);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00906}00906          \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00907}00907             SetConsoleTextAttribute(handle, 0x0f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00908}00908             t=s+2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00909}00909          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00910}00910       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s[1] == \textcolor{charliteral}{'!'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00911}00911          SetConsoleTextAttribute(handle, 0x0c);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00912}00912          t = s+2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00913}00913       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s[1] == \textcolor{charliteral}{'@'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00914}00914          SetConsoleTextAttribute(handle, 0x09);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00915}00915          t = s+2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00916}00916       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s[1] == \textcolor{charliteral}{'\$'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00917}00917          SetConsoleTextAttribute(handle, 0x0a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00918}00918          t = s+2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00919}00919       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00920}00920          SetConsoleTextAttribute(handle, 0x08); \textcolor{comment}{// 0,7,8,15 => shades of grey}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00921}00921          t = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00922}00922       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00923}00923 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00924}00924       lpad = (int) (t-\/s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00925}00925       s = t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00926}00926       \textcolor{keywordflow}{while} (*s \&\& *s != \textcolor{charliteral}{'\}'}) ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00927}00927       \textcolor{keywordflow}{if} (!*s) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00928}00928       stb\_\_print\_one(handle, t, s-\/t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00929}00929       \textcolor{keywordflow}{if} (s[1] == \textcolor{charliteral}{'\}'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00930}00930          t = s+2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00931}00931       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00932}00932          pad += 1+lpad;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00933}00933          t = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00934}00934       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00935}00935       s=t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00936}00936       SetConsoleTextAttribute(handle, 0x07);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00937}00937    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00938}00938    stb\_\_print\_one(handle, t, s-\/t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00939}00939    SetConsoleTextAttribute(handle, 0x07);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00940}00940 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00941}00941 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00942}00942 \textcolor{keywordtype}{void} stbprint(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, ...)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00943}00943 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00944}00944    \textcolor{keywordtype}{int} res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00945}00945    \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00946}00946    \textcolor{keywordtype}{char} *tbuf = \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00947}00947    va\_list v;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00948}00948 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00949}00949    va\_start(v,fmt);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00950}00950    res = stb\_vsnprintf(\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}}), fmt, v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00951}00951    va\_end(v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00952}00952 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00953}00953    \textcolor{keywordflow}{if} (res < 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00954}00954       tbuf = (\textcolor{keywordtype}{char} *) malloc(16384);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00955}00955       va\_start(v,fmt);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00956}00956       res = stb\_vsnprintf(tbuf,16384, fmt, v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00957}00957       va\_end(v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00958}00958       tbuf[16383] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00959}00959    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00960}00960 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00961}00961    stb\_\_print(tbuf);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00962}00962 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00963}00963    \textcolor{keywordflow}{if} (tbuf != \mbox{\hyperlink{classbuffer}{buffer}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00964}00964       free(tbuf);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00965}00965 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00966}00966 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00967}00967 \textcolor{preprocessor}{\#else  }\textcolor{comment}{// \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00968}00968 \textcolor{keywordtype}{void} stbprint(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, ...)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00969}00969 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00970}00970    va\_list v;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00971}00971    va\_start(v,fmt);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00972}00972    vprintf(fmt,v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00973}00973    va\_end(v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00974}00974 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00975}00975 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00976}00976 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00977}00977 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00978}00978 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00979}00979 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00981}00981 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00982}00982 \textcolor{comment}{//                         Windows UTF8 filename handling}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00983}00983 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00984}00984 \textcolor{comment}{// Windows stupidly treats 8-\/bit filenames as some dopey code page,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00985}00985 \textcolor{comment}{// rather than utf-\/8. If we want to use utf8 filenames, we have to}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00986}00986 \textcolor{comment}{// convert them to WCHAR explicitly and call WCHAR versions of the}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00987}00987 \textcolor{comment}{// file functions. So, ok, we do.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00988}00988 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00989}00989 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00990}00990 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00991}00991 \textcolor{preprocessor}{   \#define stb\_\_fopen(x,y)    stb\_p\_wfopen((const wchar\_t *)stb\_\_from\_utf8(x), (const wchar\_t *)stb\_\_from\_utf8\_alt(y))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00992}00992 \textcolor{preprocessor}{   \#define stb\_\_windows(x,y)  x}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00993}00993 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00994}00994 \textcolor{preprocessor}{   \#define stb\_\_fopen(x,y)    stb\_p\_fopen(x,y)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00995}00995 \textcolor{preprocessor}{   \#define stb\_\_windows(x,y)  y}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00996}00996 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00997}00997 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00998}00998 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l00999}00999 \textcolor{keyword}{typedef} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} stb\_\_wchar;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01000}01000 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01001}01001 STB\_EXTERN stb\_\_wchar * stb\_from\_utf8(stb\_\_wchar *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01002}01002 STB\_EXTERN \textcolor{keywordtype}{char}       * stb\_to\_utf8  (\textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keyword}{const} stb\_\_wchar *str, \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01003}01003 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01004}01004 STB\_EXTERN stb\_\_wchar *stb\_\_from\_utf8(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01005}01005 STB\_EXTERN stb\_\_wchar *stb\_\_from\_utf8\_alt(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01006}01006 STB\_EXTERN \textcolor{keywordtype}{char} *stb\_\_to\_utf8(\textcolor{keyword}{const} stb\_\_wchar *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01007}01007 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01008}01008 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01009}01009 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01010}01010 stb\_\_wchar * stb\_from\_utf8(stb\_\_wchar *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *ostr, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01011}01011 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01012}01012    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *str = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) ostr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01013}01013    stb\_uint32 c;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01014}01014    \textcolor{keywordtype}{int} i=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01015}01015    -\/-\/n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01016}01016    \textcolor{keywordflow}{while} (*str) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01017}01017       \textcolor{keywordflow}{if} (i >= n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01018}01018          \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01019}01019       \textcolor{keywordflow}{if} (!(*str \& 0x80))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01020}01020          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = *str++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01021}01021       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((*str \& 0xe0) == 0xc0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01022}01022          \textcolor{keywordflow}{if} (*str < 0xc2) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01023}01023          c = (*str++ \& 0x1f) << 6;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01024}01024          \textcolor{keywordflow}{if} ((*str \& 0xc0) != 0x80) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01025}01025          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = c + (*str++ \& 0x3f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01026}01026       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((*str \& 0xf0) == 0xe0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01027}01027          \textcolor{keywordflow}{if} (*str == 0xe0 \&\& (str[1] < 0xa0 || str[1] > 0xbf)) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01028}01028          \textcolor{keywordflow}{if} (*str == 0xed \&\& str[1] > 0x9f) \textcolor{keywordflow}{return} NULL; \textcolor{comment}{// str[1] < 0x80 is checked below}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01029}01029          c = (*str++ \& 0x0f) << 12;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01030}01030          \textcolor{keywordflow}{if} ((*str \& 0xc0) != 0x80) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01031}01031          c += (*str++ \& 0x3f) << 6;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01032}01032          \textcolor{keywordflow}{if} ((*str \& 0xc0) != 0x80) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01033}01033          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = c + (*str++ \& 0x3f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01034}01034       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((*str \& 0xf8) == 0xf0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01035}01035          \textcolor{keywordflow}{if} (*str > 0xf4) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01036}01036          \textcolor{keywordflow}{if} (*str == 0xf0 \&\& (str[1] < 0x90 || str[1] > 0xbf)) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01037}01037          \textcolor{keywordflow}{if} (*str == 0xf4 \&\& str[1] > 0x8f) \textcolor{keywordflow}{return} NULL; \textcolor{comment}{// str[1] < 0x80 is checked below}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01038}01038          c = (*str++ \& 0x07) << 18;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01039}01039          \textcolor{keywordflow}{if} ((*str \& 0xc0) != 0x80) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01040}01040          c += (*str++ \& 0x3f) << 12;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01041}01041          \textcolor{keywordflow}{if} ((*str \& 0xc0) != 0x80) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01042}01042          c += (*str++ \& 0x3f) << 6;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01043}01043          \textcolor{keywordflow}{if} ((*str \& 0xc0) != 0x80) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01044}01044          c += (*str++ \& 0x3f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01045}01045          \textcolor{comment}{// utf-\/8 encodings of values used in surrogate pairs are invalid}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01046}01046          \textcolor{keywordflow}{if} ((c \& 0xFFFFF800) == 0xD800) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01047}01047          \textcolor{keywordflow}{if} (c >= 0x10000) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01048}01048             c -\/= 0x10000;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01049}01049             \textcolor{keywordflow}{if} (i + 2 > n) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01050}01050             \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0xD800 | (0x3ff \& (c >> 10));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01051}01051             \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0xDC00 | (0x3ff \& (c      ));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01052}01052          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01053}01053       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01054}01054          \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01055}01055    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01056}01056    \mbox{\hyperlink{classbuffer}{buffer}}[i] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01057}01057    \textcolor{keywordflow}{return} \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01058}01058 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01059}01059 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01060}01060 \textcolor{keywordtype}{char} * stb\_to\_utf8(\textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keyword}{const} stb\_\_wchar *str, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01061}01061 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01062}01062    \textcolor{keywordtype}{int} i=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01063}01063    -\/-\/n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01064}01064    \textcolor{keywordflow}{while} (*str) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01065}01065       \textcolor{keywordflow}{if} (*str < 0x80) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01066}01066          \textcolor{keywordflow}{if} (i+1 > n) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01067}01067          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = (char) *str++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01068}01068       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*str < 0x800) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01069}01069          \textcolor{keywordflow}{if} (i+2 > n) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01070}01070          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0xc0 + (*str >> 6);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01071}01071          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0x80 + (*str \& 0x3f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01072}01072          str += 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01073}01073       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*str >= 0xd800 \&\& *str < 0xdc00) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01074}01074          stb\_uint32 c;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01075}01075          \textcolor{keywordflow}{if} (i+4 > n) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01076}01076          c = ((str[0] -\/ 0xd800) << 10) + ((str[1]) -\/ 0xdc00) + 0x10000;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01077}01077          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0xf0 + (c >> 18);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01078}01078          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0x80 + ((c >> 12) \& 0x3f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01079}01079          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0x80 + ((c >>  6) \& 0x3f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01080}01080          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0x80 + ((c      ) \& 0x3f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01081}01081          str += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01082}01082       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*str >= 0xdc00 \&\& *str < 0xe000) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01083}01083          \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01084}01084       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01085}01085          \textcolor{keywordflow}{if} (i+3 > n) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01086}01086          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0xe0 + (*str >> 12);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01087}01087          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0x80 + ((*str >> 6) \& 0x3f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01088}01088          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = 0x80 + ((*str     ) \& 0x3f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01089}01089          str += 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01090}01090       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01091}01091    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01092}01092    \mbox{\hyperlink{classbuffer}{buffer}}[i] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01093}01093    \textcolor{keywordflow}{return} \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01094}01094 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01095}01095 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01096}01096 stb\_\_wchar *stb\_\_from\_utf8(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01097}01097 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01098}01098    \textcolor{keyword}{static} stb\_\_wchar \mbox{\hyperlink{classbuffer}{buffer}}[4096];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01099}01099    \textcolor{keywordflow}{return} stb\_from\_utf8(\mbox{\hyperlink{classbuffer}{buffer}}, str, 4096);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01100}01100 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01101}01101 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01102}01102 stb\_\_wchar *stb\_\_from\_utf8\_alt(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01103}01103 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01104}01104    \textcolor{keyword}{static} stb\_\_wchar \mbox{\hyperlink{classbuffer}{buffer}}[4096];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01105}01105    \textcolor{keywordflow}{return} stb\_from\_utf8(\mbox{\hyperlink{classbuffer}{buffer}}, str, 4096);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01106}01106 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01107}01107 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01108}01108 \textcolor{keywordtype}{char} *stb\_\_to\_utf8(\textcolor{keyword}{const} stb\_\_wchar *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01109}01109 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01110}01110    \textcolor{keyword}{static} \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[4096];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01111}01111    \textcolor{keywordflow}{return} stb\_to\_utf8(\mbox{\hyperlink{classbuffer}{buffer}}, str, 4096);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01112}01112 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01113}01113 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01114}01114 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01115}01115 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01117}01117 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01118}01118 \textcolor{comment}{//                         Miscellany}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01119}01119 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01120}01120 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01121}01121 STB\_EXTERN \textcolor{keywordtype}{void} stb\_fatal(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *fmt, ...);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01122}01122 STB\_EXTERN \textcolor{keywordtype}{void} stb\_(\textcolor{keywordtype}{char} *fmt, ...);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01123}01123 STB\_EXTERN \textcolor{keywordtype}{void} stb\_append\_to\_file(\textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{char} *fmt, ...);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01124}01124 STB\_EXTERN \textcolor{keywordtype}{void} stb\_log(\textcolor{keywordtype}{int} active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01125}01125 STB\_EXTERN \textcolor{keywordtype}{void} stb\_log\_fileline(\textcolor{keywordtype}{int} active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01126}01126 STB\_EXTERN \textcolor{keywordtype}{void} stb\_log\_name(\textcolor{keywordtype}{char} *filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01127}01127 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01128}01128 STB\_EXTERN \textcolor{keywordtype}{void} stb\_swap(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{void} *q, \textcolor{keywordtype}{size\_t} sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01129}01129 STB\_EXTERN \textcolor{keywordtype}{void} *stb\_copy(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01130}01130 STB\_EXTERN \textcolor{keywordtype}{void} stb\_pointer\_array\_free(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01131}01131 STB\_EXTERN \textcolor{keywordtype}{void} **stb\_array\_block\_alloc(\textcolor{keywordtype}{int} count, \textcolor{keywordtype}{int} blocksize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01132}01132 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01133}01133 \textcolor{preprocessor}{\#define stb\_arrcount(x)   (sizeof(x)/sizeof((x)[0]))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01134}01134 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01135}01135 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01136}01136 STB\_EXTERN \textcolor{keywordtype}{int}  stb\_\_record\_fileline(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *f, \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01137}01137 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01138}01138 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01139}01139 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01140}01140 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stb\_\_file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01141}01141 \textcolor{keyword}{static} \textcolor{keywordtype}{int}   stb\_\_line;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01142}01142 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01143}01143 \textcolor{keywordtype}{int}  stb\_\_record\_fileline(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *f, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01144}01144 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01145}01145    stb\_\_file = (\textcolor{keywordtype}{char}*) f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01146}01146    stb\_\_line = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01147}01147    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01148}01148 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01149}01149 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01150}01150 \textcolor{keywordtype}{void} stb\_fatal(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *s, ...)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01151}01151 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01152}01152    va\_list a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01153}01153    \textcolor{keywordflow}{if} (stb\_\_file)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01154}01154       fprintf(stderr, \textcolor{stringliteral}{"{}[\%s:\%d] "{}}, stb\_\_file, stb\_\_line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01155}01155    va\_start(a,s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01156}01156    fputs(\textcolor{stringliteral}{"{}Fatal error: "{}}, stderr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01157}01157    vfprintf(stderr, s, a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01158}01158    va\_end(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01159}01159    fputs(\textcolor{stringliteral}{"{}\(\backslash\)n"{}}, stderr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01160}01160 \textcolor{preprocessor}{   \#ifdef STB\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01161}01161 \textcolor{preprocessor}{   \#ifdef \_MSC\_VER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01162}01162 \textcolor{preprocessor}{   \#ifndef STB\_PTR64}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01163}01163    \_\_asm \textcolor{keywordtype}{int} 3;   \textcolor{comment}{// trap to debugger!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01164}01164 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01165}01165    \_\_debugbreak();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01166}01166 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01167}01167 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01168}01168    \_\_builtin\_trap();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01169}01169 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01170}01170 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01171}01171    exit(1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01172}01172 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01173}01173 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01174}01174 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_log\_active=1, stb\_\_log\_fileline=1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01175}01175 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01176}01176 \textcolor{keywordtype}{void} stb\_log(\textcolor{keywordtype}{int} active)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01177}01177 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01178}01178    stb\_\_log\_active = active;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01179}01179 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01180}01180 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01181}01181 \textcolor{keywordtype}{void} stb\_log\_fileline(\textcolor{keywordtype}{int} active)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01182}01182 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01183}01183    stb\_\_log\_fileline = active;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01184}01184 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01185}01185 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01186}01186 \textcolor{preprocessor}{\#ifdef STB\_NO\_STB\_STRINGS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01187}01187 \textcolor{keyword}{const} \textcolor{keywordtype}{char} *stb\_\_log\_filename = \textcolor{stringliteral}{"{}temp.log"{}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01188}01188 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01189}01189 \textcolor{keyword}{const} \textcolor{keywordtype}{char} *stb\_\_log\_filename = \textcolor{stringliteral}{"{}stb.log"{}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01190}01190 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01191}01191 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01192}01192 \textcolor{keywordtype}{void} stb\_log\_name(\textcolor{keywordtype}{char} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01193}01193 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01194}01194    stb\_\_log\_filename = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01195}01195 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01196}01196 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01197}01197 \textcolor{keywordtype}{void} stb\_(\textcolor{keywordtype}{char} *s, ...)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01198}01198 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01199}01199    \textcolor{keywordflow}{if} (stb\_\_log\_active) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01200}01200       FILE *f = stb\_p\_fopen(stb\_\_log\_filename, \textcolor{stringliteral}{"{}a"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01201}01201       \textcolor{keywordflow}{if} (f) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01202}01202          va\_list a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01203}01203          \textcolor{keywordflow}{if} (stb\_\_log\_fileline \&\& stb\_\_file)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01204}01204             fprintf(f, \textcolor{stringliteral}{"{}[\%s:\%4d] "{}}, stb\_\_file, stb\_\_line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01205}01205          va\_start(a,s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01206}01206          vfprintf(f, s, a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01207}01207          va\_end(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01208}01208          fputs(\textcolor{stringliteral}{"{}\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01209}01209          fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01210}01210       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01211}01211    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01212}01212 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01213}01213 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01214}01214 \textcolor{keywordtype}{void} stb\_append\_to\_file(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *s, ...)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01215}01215 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01216}01216    FILE *f = stb\_p\_fopen(filename, \textcolor{stringliteral}{"{}a"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01217}01217    \textcolor{keywordflow}{if} (f) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01218}01218       va\_list a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01219}01219       va\_start(a,s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01220}01220       vfprintf(f, s, a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01221}01221       va\_end(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01222}01222       fputs(\textcolor{stringliteral}{"{}\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01223}01223       fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01224}01224    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01225}01225 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01226}01226 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01227}01227 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01228}01228 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{ \textcolor{keywordtype}{char} d[4]; \} stb\_\_4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01229}01229 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{ \textcolor{keywordtype}{char} d[8]; \} stb\_\_8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01230}01230 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01231}01231 \textcolor{comment}{// optimize the small cases, though you shouldn't be calling this for those!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01232}01232 \textcolor{keywordtype}{void} stb\_swap(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{void} *q, \textcolor{keywordtype}{size\_t} sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01233}01233 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01234}01234    \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01235}01235    \textcolor{keywordflow}{if} (p == q) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01236}01236    \textcolor{keywordflow}{if} (sz == 4) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01237}01237       stb\_\_4 temp    = * ( stb\_\_4 *) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01238}01238       * (stb\_\_4 *) p = * ( stb\_\_4 *) q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01239}01239       * (stb\_\_4 *) q = temp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01240}01240       \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01241}01241    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sz == 8) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01242}01242       stb\_\_8 temp    = * ( stb\_\_8 *) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01243}01243       * (stb\_\_8 *) p = * ( stb\_\_8 *) q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01244}01244       * (stb\_\_8 *) q = temp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01245}01245       \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01246}01246    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01247}01247 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01248}01248    \textcolor{keywordflow}{while} (sz > \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}})) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01249}01249       stb\_swap(p, q, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}}));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01250}01250       p = (\textcolor{keywordtype}{char} *) p + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01251}01251       q = (\textcolor{keywordtype}{char} *) q + \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01252}01252       sz -\/= \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01253}01253    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01254}01254 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01255}01255    memcpy(\mbox{\hyperlink{classbuffer}{buffer}}, p     , sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01256}01256    memcpy(p     , q     , sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01257}01257    memcpy(q     , \mbox{\hyperlink{classbuffer}{buffer}}, sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01258}01258 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01259}01259 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01260}01260 \textcolor{keywordtype}{void} *stb\_copy(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01261}01261 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01262}01262    \textcolor{keywordtype}{void} *q = malloc(sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01263}01263    memcpy(q, p, sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01264}01264    \textcolor{keywordflow}{return} q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01265}01265 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01266}01266 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01267}01267 \textcolor{keywordtype}{void} stb\_pointer\_array\_free(\textcolor{keywordtype}{void} *q, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01268}01268 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01269}01269    \textcolor{keywordtype}{void} **p = (\textcolor{keywordtype}{void} **) q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01270}01270    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01271}01271    \textcolor{keywordflow}{for} (i=0; i < len; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01272}01272       free(p[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01273}01273 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01274}01274 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01275}01275 \textcolor{keywordtype}{void} **stb\_array\_block\_alloc(\textcolor{keywordtype}{int} count, \textcolor{keywordtype}{int} blocksize)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01276}01276 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01277}01277    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01278}01278    \textcolor{keywordtype}{char} *p = (\textcolor{keywordtype}{char} *) malloc(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void} *) * count + count * blocksize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01279}01279    \textcolor{keywordtype}{void} **q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01280}01280    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01281}01281    q = (\textcolor{keywordtype}{void} **) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01282}01282    p += \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void} *) * count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01283}01283    \textcolor{keywordflow}{for} (i=0; i < count; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01284}01284       q[i] = p + i * blocksize;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01285}01285    \textcolor{keywordflow}{return} q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01286}01286 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01287}01287 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01288}01288 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01289}01289 \textcolor{preprocessor}{\#ifdef STB\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01290}01290    \textcolor{comment}{// tricky hack to allow recording FILE,LINE even in varargs functions}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01291}01291 \textcolor{preprocessor}{   \#define STB\_\_RECORD\_FILE(x)  (stb\_\_record\_fileline(\_\_FILE\_\_, \_\_LINE\_\_),(x))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01292}01292 \textcolor{preprocessor}{   \#define stb\_log              STB\_\_RECORD\_FILE(stb\_log)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01293}01293 \textcolor{preprocessor}{   \#define stb\_                 STB\_\_RECORD\_FILE(stb\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01294}01294 \textcolor{preprocessor}{   \#ifndef STB\_FATAL\_CLEAN}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01295}01295 \textcolor{preprocessor}{   \#define stb\_fatal            STB\_\_RECORD\_FILE(stb\_fatal)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01296}01296 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01297}01297 \textcolor{preprocessor}{   \#define STB\_\_DEBUG(x)        x}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01298}01298 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01299}01299 \textcolor{preprocessor}{   \#define STB\_\_DEBUG(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01300}01300 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01301}01301 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01303}01303 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01304}01304 \textcolor{comment}{//                         stb\_temp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01305}01305 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01306}01306 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01307}01307 \textcolor{preprocessor}{\#define stb\_temp(block, sz)     stb\_\_temp(block, sizeof(block), (sz))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01308}01308 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01309}01309 STB\_EXTERN \textcolor{keywordtype}{void} * stb\_\_temp(\textcolor{keywordtype}{void} *b, \textcolor{keywordtype}{int} b\_sz, \textcolor{keywordtype}{int} want\_sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01310}01310 STB\_EXTERN \textcolor{keywordtype}{void}   stb\_tempfree(\textcolor{keywordtype}{void} *block, \textcolor{keywordtype}{void} *ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01311}01311 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01312}01312 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01313}01313 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01314}01314 \textcolor{keywordtype}{void} * stb\_\_temp(\textcolor{keywordtype}{void} *b, \textcolor{keywordtype}{int} b\_sz, \textcolor{keywordtype}{int} want\_sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01315}01315 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01316}01316    \textcolor{keywordflow}{if} (b\_sz >= want\_sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01317}01317       \textcolor{keywordflow}{return} b;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01318}01318    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01319}01319       \textcolor{keywordflow}{return} malloc(want\_sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01320}01320 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01321}01321 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01322}01322 \textcolor{keywordtype}{void}   stb\_tempfree(\textcolor{keywordtype}{void} *b, \textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01323}01323 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01324}01324    \textcolor{keywordflow}{if} (p != b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01325}01325       free(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01326}01326 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01327}01327 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01328}01328 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01329}01329 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01331}01331 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01332}01332 \textcolor{comment}{//                      math/sampling operations}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01333}01333 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01334}01334 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01335}01335 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01336}01336 \textcolor{preprocessor}{\#define stb\_lerp(t,a,b)               ( (a) + (t) * (float) ((b)-\/(a)) )}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01337}01337 \textcolor{preprocessor}{\#define stb\_unlerp(t,a,b)             ( ((t) -\/ (a)) / (float) ((b) -\/ (a)) )}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01338}01338 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01339}01339 \textcolor{preprocessor}{\#define stb\_clamp(x,xmin,xmax)  ((x) < (xmin) ? (xmin) : (x) > (xmax) ? (xmax) : (x))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01340}01340 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01341}01341 STB\_EXTERN \textcolor{keywordtype}{void} stb\_newell\_normal(\textcolor{keywordtype}{float} *normal, \textcolor{keywordtype}{int} num\_vert, \textcolor{keywordtype}{float} **vert, \textcolor{keywordtype}{int} normalize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01342}01342 STB\_EXTERN \textcolor{keywordtype}{int} stb\_box\_face\_vertex\_axis\_side(\textcolor{keywordtype}{int} face\_number, \textcolor{keywordtype}{int} vertex\_number, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__gtc__quaternion_gacb991327b755ed51ce12605e4c541250}{axis}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01343}01343 STB\_EXTERN \textcolor{keywordtype}{void} stb\_linear\_controller(\textcolor{keywordtype}{float} *curpos, \textcolor{keywordtype}{float} target\_pos, \textcolor{keywordtype}{float} acc, \textcolor{keywordtype}{float} deacc, \textcolor{keywordtype}{float} dt);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01344}01344 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01345}01345 STB\_EXTERN \textcolor{keywordtype}{int} stb\_float\_eq(\textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keywordtype}{float} delta, \textcolor{keywordtype}{int} max\_ulps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01346}01346 STB\_EXTERN \textcolor{keywordtype}{int} stb\_is\_prime(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01347}01347 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_power\_of\_two\_nearest\_prime(\textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01348}01348 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01349}01349 STB\_EXTERN \textcolor{keywordtype}{float} stb\_smoothstep(\textcolor{keywordtype}{float} t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01350}01350 STB\_EXTERN \textcolor{keywordtype}{float} stb\_cubic\_bezier\_1d(\textcolor{keywordtype}{float} t, \textcolor{keywordtype}{float} p0, \textcolor{keywordtype}{float} p1, \textcolor{keywordtype}{float} p2, \textcolor{keywordtype}{float} p3);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01351}01351 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01352}01352 STB\_EXTERN \textcolor{keywordtype}{double} stb\_linear\_remap(\textcolor{keywordtype}{double} x, \textcolor{keywordtype}{double} a, \textcolor{keywordtype}{double} b,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01353}01353                                              \textcolor{keywordtype}{double} c, \textcolor{keywordtype}{double} d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01354}01354 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01355}01355 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01356}01356 \textcolor{keywordtype}{float} stb\_smoothstep(\textcolor{keywordtype}{float} t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01357}01357 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01358}01358    \textcolor{keywordflow}{return} (3 -\/ 2*t)*(t*t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01359}01359 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01360}01360 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01361}01361 \textcolor{keywordtype}{float} stb\_cubic\_bezier\_1d(\textcolor{keywordtype}{float} t, \textcolor{keywordtype}{float} p0, \textcolor{keywordtype}{float} p1, \textcolor{keywordtype}{float} p2, \textcolor{keywordtype}{float} p3)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01362}01362 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01363}01363    \textcolor{keywordtype}{float} it = 1-\/t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01364}01364    \textcolor{keywordflow}{return} it*it*it*p0 + 3*it*it*t*p1 + 3*it*t*t*p2 + t*t*t*p3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01365}01365 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01366}01366 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01367}01367 \textcolor{keywordtype}{void} stb\_newell\_normal(\textcolor{keywordtype}{float} *normal, \textcolor{keywordtype}{int} num\_vert, \textcolor{keywordtype}{float} **vert, \textcolor{keywordtype}{int} normalize)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01368}01368 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01369}01369    \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01370}01370    \textcolor{keywordtype}{float} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01371}01371    normal[0] = normal[1] = normal[2] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01372}01372    \textcolor{keywordflow}{for} (i=num\_vert-\/1,j=0; j < num\_vert; i=j++) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01373}01373       \textcolor{keywordtype}{float} *u = vert[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01374}01374       \textcolor{keywordtype}{float} *v = vert[j];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01375}01375       normal[0] += (u[1] -\/ v[1]) * (u[2] + v[2]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01376}01376       normal[1] += (u[2] -\/ v[2]) * (u[0] + v[0]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01377}01377       normal[2] += (u[0] -\/ v[0]) * (u[1] + v[1]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01378}01378    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01379}01379    \textcolor{keywordflow}{if} (normalize) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01380}01380       p = normal[0]*normal[0] + normal[1]*normal[1] + normal[2]*normal[2];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01381}01381       p = (float) (1.0 / \mbox{\hyperlink{group__core__func__exponential_ga1f904e09827e939a56e4158f45ca8ede}{sqrt}}(p));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01382}01382       normal[0] *= p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01383}01383       normal[1] *= p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01384}01384       normal[2] *= p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01385}01385    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01386}01386 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01387}01387 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01388}01388 \textcolor{keywordtype}{int} stb\_box\_face\_vertex\_axis\_side(\textcolor{keywordtype}{int} face\_number, \textcolor{keywordtype}{int} vertex\_number, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__gtc__quaternion_gacb991327b755ed51ce12605e4c541250}{axis}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01389}01389 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01390}01390    \textcolor{keyword}{static} \textcolor{keywordtype}{int} box\_vertices[6][4][3] =}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01391}01391    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01392}01392       \{ \{ 1,1,1 \}, \{ 1,0,1 \}, \{ 1,0,0 \}, \{ 1,1,0 \} \},}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01393}01393       \{ \{ 0,0,0 \}, \{ 0,0,1 \}, \{ 0,1,1 \}, \{ 0,1,0 \} \},}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01394}01394       \{ \{ 0,0,0 \}, \{ 0,1,0 \}, \{ 1,1,0 \}, \{ 1,0,0 \} \},}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01395}01395       \{ \{ 0,0,0 \}, \{ 1,0,0 \}, \{ 1,0,1 \}, \{ 0,0,1 \} \},}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01396}01396       \{ \{ 1,1,1 \}, \{ 0,1,1 \}, \{ 0,0,1 \}, \{ 1,0,1 \} \},}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01397}01397       \{ \{ 1,1,1 \}, \{ 1,1,0 \}, \{ 0,1,0 \}, \{ 0,1,1 \} \},}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01398}01398    \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01399}01399    assert(face\_number >= 0 \&\& face\_number < 6);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01400}01400    assert(vertex\_number >= 0 \&\& vertex\_number < 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01401}01401    assert(\mbox{\hyperlink{group__gtc__quaternion_gacb991327b755ed51ce12605e4c541250}{axis}} >= 0 \&\& \mbox{\hyperlink{group__gtc__quaternion_gacb991327b755ed51ce12605e4c541250}{axis}} < 3);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01402}01402    \textcolor{keywordflow}{return} box\_vertices[face\_number][vertex\_number][\mbox{\hyperlink{group__gtc__quaternion_gacb991327b755ed51ce12605e4c541250}{axis}}];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01403}01403 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01404}01404 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01405}01405 \textcolor{keywordtype}{void} stb\_linear\_controller(\textcolor{keywordtype}{float} *curpos, \textcolor{keywordtype}{float} target\_pos, \textcolor{keywordtype}{float} acc, \textcolor{keywordtype}{float} deacc, \textcolor{keywordtype}{float} dt)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01406}01406 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01407}01407    \textcolor{keywordtype}{float} \mbox{\hyperlink{group__core__func__common_gaf749e7f029eb88580a45493e41002629}{sign}} = 1, p, cp = *curpos;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01408}01408    \textcolor{keywordflow}{if} (cp == target\_pos) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01409}01409    \textcolor{keywordflow}{if} (target\_pos < cp) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01410}01410       target\_pos = -\/target\_pos;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01411}01411       cp = -\/cp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01412}01412       \mbox{\hyperlink{group__core__func__common_gaf749e7f029eb88580a45493e41002629}{sign}} = -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01413}01413    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01414}01414    \textcolor{comment}{// first decelerate}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01415}01415    \textcolor{keywordflow}{if} (cp < 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01416}01416       p = cp + deacc * dt;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01417}01417       \textcolor{keywordflow}{if} (p > 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01418}01418          p = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01419}01419          dt = dt -\/ cp / deacc;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01420}01420          \textcolor{keywordflow}{if} (dt < 0) dt = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01421}01421       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01422}01422          dt = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01423}01423       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01424}01424       cp = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01425}01425    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01426}01426    \textcolor{comment}{// now accelerate}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01427}01427    p = cp + acc*dt;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01428}01428    \textcolor{keywordflow}{if} (p > target\_pos) p = target\_pos;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01429}01429    *curpos = p * \mbox{\hyperlink{group__core__func__common_gaf749e7f029eb88580a45493e41002629}{sign}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01430}01430    \textcolor{comment}{// @TODO: testing}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01431}01431 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01432}01432 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01433}01433 \textcolor{keywordtype}{float} stb\_quadratic\_controller(\textcolor{keywordtype}{float} target\_pos, \textcolor{keywordtype}{float} curpos, \textcolor{keywordtype}{float} maxvel, \textcolor{keywordtype}{float} maxacc, \textcolor{keywordtype}{float} dt, \textcolor{keywordtype}{float} *curvel)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01434}01434 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01435}01435    \textcolor{keywordflow}{return} 0; \textcolor{comment}{// @TODO}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01436}01436 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01437}01437 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01438}01438 \textcolor{keywordtype}{int} stb\_float\_eq(\textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keywordtype}{float} delta, \textcolor{keywordtype}{int} max\_ulps)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01439}01439 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01440}01440    \textcolor{keywordflow}{if} (fabs(x-\/y) <= delta) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01441}01441    \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}(*(\textcolor{keywordtype}{int} *)\&x -\/ *(\textcolor{keywordtype}{int} *)\&y) <= max\_ulps) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01442}01442    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01443}01443 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01444}01444 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01445}01445 \textcolor{keywordtype}{int} stb\_is\_prime(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01446}01446 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01447}01447    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01448}01448    \textcolor{keywordflow}{if} (m < 2) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01449}01449    \textcolor{keywordflow}{if} (m == 2) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01450}01450    \textcolor{keywordflow}{if} (!(m \& 1)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01451}01451    \textcolor{keywordflow}{if} (m \% 3 == 0) \textcolor{keywordflow}{return} (m == 3);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01452}01452    \textcolor{keywordflow}{for} (i=5; (j=i*i), j <= m \&\& j > i; i += 6) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01453}01453       \textcolor{keywordflow}{if} (m \%   i   == 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01454}01454       \textcolor{keywordflow}{if} (m \% (i+2) == 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01455}01455    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01456}01456    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01457}01457 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01458}01458 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01459}01459 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_power\_of\_two\_nearest\_prime(\textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01460}01460 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01461}01461    \textcolor{keyword}{static} \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char} tab[32] = \{ 0,0,0,0,1,0,-\/1,0,1,-\/1,-\/1,3,-\/1,0,-\/1,2,1,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01462}01462                                    0,2,0,-\/1,-\/4,-\/1,5,-\/1,18,-\/2,15,2,-\/1,2,0 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01463}01463    \textcolor{keywordflow}{if} (!tab[0]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01464}01464       \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01465}01465       \textcolor{keywordflow}{for} (i=0; i < 32; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01466}01466          tab[i] = (1 << i) + 2*tab[i] -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01467}01467       tab[1] = 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01468}01468       tab[0] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01469}01469    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01470}01470    \textcolor{keywordflow}{if} (n >= 32) \textcolor{keywordflow}{return} 0xfffffffb;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01471}01471    \textcolor{keywordflow}{return} tab[n];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01472}01472 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01473}01473 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01474}01474 \textcolor{keywordtype}{double} stb\_linear\_remap(\textcolor{keywordtype}{double} x, \textcolor{keywordtype}{double} x\_min, \textcolor{keywordtype}{double} x\_max,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01475}01475                                   \textcolor{keywordtype}{double} out\_min, \textcolor{keywordtype}{double} out\_max)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01476}01476 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01477}01477    \textcolor{keywordflow}{return} stb\_lerp(stb\_unlerp(x,x\_min,x\_max),out\_min,out\_max);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01478}01478 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01479}01479 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01480}01480 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01481}01481 \textcolor{comment}{// create a macro so it's faster, but you can get at the function pointer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01482}01482 \textcolor{preprocessor}{\#define stb\_linear\_remap(t,a,b,c,d)   stb\_lerp(stb\_unlerp(t,a,b),c,d)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01483}01483 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01484}01484 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01486}01486 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01487}01487 \textcolor{comment}{//                         bit operations}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01488}01488 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01489}01489 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01490}01490 \textcolor{preprocessor}{\#define stb\_big32(c)    (((c)[0]<<24) + (c)[1]*65536 + (c)[2]*256 + (c)[3])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01491}01491 \textcolor{preprocessor}{\#define stb\_little32(c) (((c)[3]<<24) + (c)[2]*65536 + (c)[1]*256 + (c)[0])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01492}01492 \textcolor{preprocessor}{\#define stb\_big16(c)    ((c)[0]*256 + (c)[1])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01493}01493 \textcolor{preprocessor}{\#define stb\_little16(c) ((c)[1]*256 + (c)[0])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01494}01494 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01495}01495 STB\_EXTERN          \textcolor{keywordtype}{int} stb\_bitcount(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01496}01496 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_bitreverse8(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01497}01497 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_bitreverse(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01498}01498 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01499}01499 STB\_EXTERN          \textcolor{keywordtype}{int} stb\_is\_pow2(\textcolor{keywordtype}{size\_t});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01500}01500 STB\_EXTERN          \textcolor{keywordtype}{int} stb\_log2\_ceil(\textcolor{keywordtype}{size\_t});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01501}01501 STB\_EXTERN          \textcolor{keywordtype}{int} stb\_log2\_floor(\textcolor{keywordtype}{size\_t});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01502}01502 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01503}01503 STB\_EXTERN          \textcolor{keywordtype}{int} stb\_lowbit8(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01504}01504 STB\_EXTERN          \textcolor{keywordtype}{int} stb\_highbit8(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01505}01505 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01506}01506 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01507}01507 \textcolor{keywordtype}{int} stb\_bitcount(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} a)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01508}01508 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01509}01509    a = (a \& 0x55555555) + ((a >>  1) \& 0x55555555); \textcolor{comment}{// max 2}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01510}01510    a = (a \& 0x33333333) + ((a >>  2) \& 0x33333333); \textcolor{comment}{// max 4}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01511}01511    a = (a + (a >> 4)) \& 0x0f0f0f0f; \textcolor{comment}{// max 8 per 4, now 8 bits}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01512}01512    a = (a + (a >> 8)); \textcolor{comment}{// max 16 per 8 bits}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01513}01513    a = (a + (a >> 16)); \textcolor{comment}{// max 32 per 8 bits}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01514}01514    \textcolor{keywordflow}{return} a \& 0xff;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01515}01515 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01516}01516 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01517}01517 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_bitreverse8(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01518}01518 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01519}01519    n = ((n \& 0xAA) >> 1) + ((n \& 0x55) << 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01520}01520    n = ((n \& 0xCC) >> 2) + ((n \& 0x33) << 2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01521}01521    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}) ((n >> 4) + (n << 4));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01522}01522 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01523}01523 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01524}01524 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_bitreverse(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01525}01525 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01526}01526   n = ((n \& 0xAAAAAAAA) >>  1) | ((n \& 0x55555555) << 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01527}01527   n = ((n \& 0xCCCCCCCC) >>  2) | ((n \& 0x33333333) << 2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01528}01528   n = ((n \& 0xF0F0F0F0) >>  4) | ((n \& 0x0F0F0F0F) << 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01529}01529   n = ((n \& 0xFF00FF00) >>  8) | ((n \& 0x00FF00FF) << 8);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01530}01530   \textcolor{keywordflow}{return} (n >> 16) | (n << 16);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01531}01531 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01532}01532 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01533}01533 \textcolor{keywordtype}{int} stb\_is\_pow2(\textcolor{keywordtype}{size\_t} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01534}01534 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01535}01535    \textcolor{keywordflow}{return} (n \& (n-\/1)) == 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01536}01536 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01537}01537 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01538}01538 \textcolor{comment}{// tricky use of 4-\/bit table to identify 5 bit positions (note the '-\/1')}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01539}01539 \textcolor{comment}{// 3-\/bit table would require another tree level; 5-\/bit table wouldn't save one}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01540}01540 \textcolor{preprocessor}{\#if defined(\_WIN32) \&\& !defined(\_\_MINGW32\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01541}01541 \textcolor{preprocessor}{\#pragma warning(push)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01542}01542 \textcolor{preprocessor}{\#pragma warning(disable: 4035)  }\textcolor{comment}{// disable warning about no return value}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01543}01543 \textcolor{keywordtype}{int} stb\_log2\_floor(\textcolor{keywordtype}{size\_t} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01544}01544 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01545}01545 \textcolor{preprocessor}{   \#if \_MSC\_VER > 1700}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01546}01546    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01547}01547 \textcolor{preprocessor}{   \#ifdef STB\_PTR64}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01548}01548    \_BitScanReverse64(\&i, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01549}01549 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01550}01550    \_BitScanReverse(\&i, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01551}01551 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01552}01552    \textcolor{keywordflow}{return} i != 0 ? i : -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01553}01553 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01554}01554    \_\_asm \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01555}01555       bsr eax,n}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01556}01556       jnz done}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01557}01557       mov eax,-\/1}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01558}01558    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01559}01559    done:;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01560}01560 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01561}01561 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01562}01562 \textcolor{preprocessor}{\#pragma warning(pop)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01563}01563 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01564}01564 \textcolor{keywordtype}{int} stb\_log2\_floor(\textcolor{keywordtype}{size\_t} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01565}01565 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01566}01566    \textcolor{keyword}{static} \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char} log2\_4[16] = \{ -\/1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01567}01567 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01568}01568 \textcolor{preprocessor}{\#ifdef STB\_PTR64}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01569}01569    \textcolor{keywordflow}{if} (n >= ((\textcolor{keywordtype}{size\_t}) 1u << 32))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01570}01570         \textcolor{keywordflow}{return} stb\_log2\_floor(n >> 32);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01571}01571 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01572}01572 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01573}01573    \textcolor{comment}{// 2 compares if n < 16, 3 compares otherwise}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01574}01574    \textcolor{keywordflow}{if} (n < (1U << 14))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01575}01575         \textcolor{keywordflow}{if} (n < (1U <<  4))        \textcolor{keywordflow}{return}     0 + log2\_4[n      ];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01576}01576         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n < (1U <<  9))      \textcolor{keywordflow}{return}  5 + log2\_4[n >>  5];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01577}01577              \textcolor{keywordflow}{else}                     \textcolor{keywordflow}{return} 10 + log2\_4[n >> 10];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01578}01578    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n < (1U << 24))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01579}01579              \textcolor{keywordflow}{if} (n < (1U << 19))      \textcolor{keywordflow}{return} 15 + log2\_4[n >> 15];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01580}01580              \textcolor{keywordflow}{else}                     \textcolor{keywordflow}{return} 20 + log2\_4[n >> 20];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01581}01581         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n < (1U << 29))      \textcolor{keywordflow}{return} 25 + log2\_4[n >> 25];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01582}01582              \textcolor{keywordflow}{else}                     \textcolor{keywordflow}{return} 30 + log2\_4[n >> 30];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01583}01583 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01584}01584 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01585}01585 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01586}01586 \textcolor{comment}{// define ceil from floor}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01587}01587 \textcolor{keywordtype}{int} stb\_log2\_ceil(\textcolor{keywordtype}{size\_t} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01588}01588 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01589}01589    \textcolor{keywordflow}{if} (stb\_is\_pow2(n))  \textcolor{keywordflow}{return}     stb\_log2\_floor(n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01590}01590    \textcolor{keywordflow}{else}                 \textcolor{keywordflow}{return} 1 + stb\_log2\_floor(n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01591}01591 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01592}01592 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01593}01593 \textcolor{keywordtype}{int} stb\_highbit8(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01594}01594 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01595}01595    \textcolor{keywordflow}{return} stb\_log2\_ceil(n\&255);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01596}01596 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01597}01597 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01598}01598 \textcolor{keywordtype}{int} stb\_lowbit8(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01599}01599 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01600}01600    \textcolor{keyword}{static} \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char} lowbit4[16] = \{ -\/1,0,1,0, 2,0,1,0, 3,0,1,0, 2,0,1,0 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01601}01601    \textcolor{keywordtype}{int} k = lowbit4[n \& 15];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01602}01602    \textcolor{keywordflow}{if} (k >= 0) \textcolor{keywordflow}{return} k;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01603}01603    k = lowbit4[(n >> 4) \& 15];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01604}01604    \textcolor{keywordflow}{if} (k >= 0) \textcolor{keywordflow}{return} k+4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01605}01605    \textcolor{keywordflow}{return} k;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01606}01606 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01607}01607 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01608}01608 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01609}01609 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01610}01610 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01612}01612 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01613}01613 \textcolor{comment}{//                            qsort Compare Routines}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01614}01614 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01615}01615 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01616}01616 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01617}01617 \textcolor{preprocessor}{   \#define stb\_stricmp(a,b) stb\_p\_stricmp(a,b)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01618}01618 \textcolor{preprocessor}{   \#define stb\_strnicmp(a,b,n) stb\_p\_strnicmp(a,b,n)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01619}01619 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01620}01620 \textcolor{preprocessor}{   \#define stb\_stricmp(a,b) strcasecmp(a,b)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01621}01621 \textcolor{preprocessor}{   \#define stb\_strnicmp(a,b,n) strncasecmp(a,b,n)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01622}01622 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01623}01623 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01624}01624 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01625}01625 STB\_EXTERN int (*stb\_intcmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01626}01626 STB\_EXTERN int (*stb\_intcmprev(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01627}01627 STB\_EXTERN int (*stb\_qsort\_strcmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01628}01628 STB\_EXTERN int (*stb\_qsort\_stricmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01629}01629 STB\_EXTERN int (*stb\_floatcmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01630}01630 STB\_EXTERN int (*stb\_doublecmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01631}01631 STB\_EXTERN int (*stb\_charcmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01632}01632 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01633}01633 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01634}01634 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_intcmpoffset, stb\_\_ucharcmpoffset, stb\_\_strcmpoffset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01635}01635 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_floatcmpoffset, stb\_\_doublecmpoffset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01636}01636 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_memcmpoffset, stb\_\_memcmpsize;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01637}01637 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01638}01638 \textcolor{keywordtype}{int} stb\_\_intcmp(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01639}01639 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01640}01640    \textcolor{keyword}{const} \textcolor{keywordtype}{int} p = *(\textcolor{keyword}{const} \textcolor{keywordtype}{int} *) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) a + stb\_\_intcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01641}01641    \textcolor{keyword}{const} \textcolor{keywordtype}{int} q = *(\textcolor{keyword}{const} \textcolor{keywordtype}{int} *) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) b + stb\_\_intcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01642}01642    \textcolor{keywordflow}{return} p < q ? -\/1 : p > q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01643}01643 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01644}01644 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01645}01645 \textcolor{keywordtype}{int} stb\_\_intcmprev(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01646}01646 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01647}01647    \textcolor{keyword}{const} \textcolor{keywordtype}{int} p = *(\textcolor{keyword}{const} \textcolor{keywordtype}{int} *) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) a + stb\_\_intcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01648}01648    \textcolor{keyword}{const} \textcolor{keywordtype}{int} q = *(\textcolor{keyword}{const} \textcolor{keywordtype}{int} *) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) b + stb\_\_intcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01649}01649    \textcolor{keywordflow}{return} q < p ? -\/1 : q > p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01650}01650 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01651}01651 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01652}01652 \textcolor{keywordtype}{int} stb\_\_ucharcmp(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01653}01653 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01654}01654    \textcolor{keyword}{const} \textcolor{keywordtype}{int} p = *(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) a + stb\_\_ucharcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01655}01655    \textcolor{keyword}{const} \textcolor{keywordtype}{int} q = *(\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) b + stb\_\_ucharcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01656}01656    \textcolor{keywordflow}{return} p < q ? -\/1 : p > q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01657}01657 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01658}01658 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01659}01659 \textcolor{keywordtype}{int} stb\_\_floatcmp(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01660}01660 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01661}01661    \textcolor{keyword}{const} \textcolor{keywordtype}{float} p = *(\textcolor{keyword}{const} \textcolor{keywordtype}{float} *) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) a + stb\_\_floatcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01662}01662    \textcolor{keyword}{const} \textcolor{keywordtype}{float} q = *(\textcolor{keyword}{const} \textcolor{keywordtype}{float} *) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) b + stb\_\_floatcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01663}01663    \textcolor{keywordflow}{return} p < q ? -\/1 : p > q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01664}01664 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01665}01665 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01666}01666 \textcolor{keywordtype}{int} stb\_\_doublecmp(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01667}01667 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01668}01668    \textcolor{keyword}{const} \textcolor{keywordtype}{double} p = *(\textcolor{keyword}{const} \textcolor{keywordtype}{double} *) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) a + stb\_\_doublecmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01669}01669    \textcolor{keyword}{const} \textcolor{keywordtype}{double} q = *(\textcolor{keyword}{const} \textcolor{keywordtype}{double} *) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) b + stb\_\_doublecmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01670}01670    \textcolor{keywordflow}{return} p < q ? -\/1 : p > q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01671}01671 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01672}01672 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01673}01673 \textcolor{keywordtype}{int} stb\_\_qsort\_strcmp(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01674}01674 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01675}01675    \textcolor{keyword}{const} \textcolor{keywordtype}{char} *p = *(\textcolor{keyword}{const} \textcolor{keywordtype}{char} **) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) a + stb\_\_strcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01676}01676    \textcolor{keyword}{const} \textcolor{keywordtype}{char} *q = *(\textcolor{keyword}{const} \textcolor{keywordtype}{char} **) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) b + stb\_\_strcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01677}01677    \textcolor{keywordflow}{return} strcmp(p,q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01678}01678 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01679}01679 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01680}01680 \textcolor{keywordtype}{int} stb\_\_qsort\_stricmp(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01681}01681 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01682}01682    \textcolor{keyword}{const} \textcolor{keywordtype}{char} *p = *(\textcolor{keyword}{const} \textcolor{keywordtype}{char} **) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) a + stb\_\_strcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01683}01683    \textcolor{keyword}{const} \textcolor{keywordtype}{char} *q = *(\textcolor{keyword}{const} \textcolor{keywordtype}{char} **) ((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *) b + stb\_\_strcmpoffset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01684}01684    \textcolor{keywordflow}{return} stb\_stricmp(p,q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01685}01685 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01686}01686 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01687}01687 \textcolor{keywordtype}{int} stb\_\_memcmp(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01688}01688 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01689}01689    \textcolor{keywordflow}{return} memcmp((\textcolor{keywordtype}{char} *) a + stb\_\_memcmpoffset, (\textcolor{keywordtype}{char} *) b + stb\_\_memcmpoffset, stb\_\_memcmpsize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01690}01690 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01691}01691 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01692}01692 int (*stb\_intcmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01693}01693 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01694}01694    stb\_\_intcmpoffset = offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01695}01695    \textcolor{keywordflow}{return} \&stb\_\_intcmp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01696}01696 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01697}01697 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01698}01698 int (*stb\_intcmprev(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01699}01699 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01700}01700    stb\_\_intcmpoffset = offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01701}01701    \textcolor{keywordflow}{return} \&stb\_\_intcmprev;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01702}01702 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01703}01703 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01704}01704 int (*stb\_ucharcmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01705}01705 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01706}01706    stb\_\_ucharcmpoffset = offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01707}01707    \textcolor{keywordflow}{return} \&stb\_\_ucharcmp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01708}01708 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01709}01709 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01710}01710 int (*stb\_qsort\_strcmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01711}01711 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01712}01712    stb\_\_strcmpoffset = offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01713}01713    \textcolor{keywordflow}{return} \&stb\_\_qsort\_strcmp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01714}01714 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01715}01715 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01716}01716 int (*stb\_qsort\_stricmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01717}01717 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01718}01718    stb\_\_strcmpoffset = offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01719}01719    \textcolor{keywordflow}{return} \&stb\_\_qsort\_stricmp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01720}01720 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01721}01721 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01722}01722 int (*stb\_floatcmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01723}01723 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01724}01724    stb\_\_floatcmpoffset = offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01725}01725    \textcolor{keywordflow}{return} \&stb\_\_floatcmp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01726}01726 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01727}01727 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01728}01728 int (*stb\_doublecmp(\textcolor{keywordtype}{int} offset))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01729}01729 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01730}01730    stb\_\_doublecmpoffset = offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01731}01731    \textcolor{keywordflow}{return} \&stb\_\_doublecmp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01732}01732 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01733}01733 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01734}01734 int (*stb\_memcmp(\textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{int} size))(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01735}01735 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01736}01736    stb\_\_memcmpoffset = offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01737}01737    stb\_\_memcmpsize = size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01738}01738    \textcolor{keywordflow}{return} \&stb\_\_memcmp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01739}01739 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01740}01740 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01741}01741 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01743}01743 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01744}01744 \textcolor{comment}{//                           Binary Search Toolkit}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01745}01745 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01746}01746 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01747}\mbox{\hyperlink{structstb__search}{01747}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01748}01748 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01749}01749    \textcolor{keywordtype}{int} minval, maxval, guess;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01750}01750    \textcolor{keywordtype}{int} mode, \mbox{\hyperlink{group__core__func__common_ga015a1261ff23e12650211aa872863cce}{step}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01751}01751 \} \mbox{\hyperlink{structstb__search}{stb\_search}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01752}01752 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01753}01753 STB\_EXTERN \textcolor{keywordtype}{int} stb\_search\_binary(\mbox{\hyperlink{structstb__search}{stb\_search}} *s, \textcolor{keywordtype}{int} minv, \textcolor{keywordtype}{int} maxv, \textcolor{keywordtype}{int} find\_smallest);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01754}01754 STB\_EXTERN \textcolor{keywordtype}{int} stb\_search\_open(\mbox{\hyperlink{structstb__search}{stb\_search}} *s, \textcolor{keywordtype}{int} minv, \textcolor{keywordtype}{int} find\_smallest);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01755}01755 STB\_EXTERN \textcolor{keywordtype}{int} stb\_probe(\mbox{\hyperlink{structstb__search}{stb\_search}} *s, \textcolor{keywordtype}{int} compare, \textcolor{keywordtype}{int} *\mbox{\hyperlink{structresult}{result}}); \textcolor{comment}{// return 0 when done}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01756}01756 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01757}01757 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01758}01758 \textcolor{keyword}{enum}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01759}01759 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01760}01760    STB\_probe\_binary\_smallest,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01761}01761    STB\_probe\_binary\_largest,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01762}01762    STB\_probe\_open\_smallest,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01763}01763    STB\_probe\_open\_largest,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01764}01764 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01765}01765 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01766}01766 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_probe\_guess(\mbox{\hyperlink{structstb__search}{stb\_search}} *s, \textcolor{keywordtype}{int} *\mbox{\hyperlink{structresult}{result}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01767}01767 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01768}01768    \textcolor{keywordflow}{switch}(s-\/>mode) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01769}01769       \textcolor{keywordflow}{case} STB\_probe\_binary\_largest:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01770}01770          \textcolor{keywordflow}{if} (s-\/>minval == s-\/>maxval) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01771}01771             *\mbox{\hyperlink{structresult}{result}} = s-\/>minval;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01772}01772             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01773}01773          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01774}01774          assert(s-\/>minval < s-\/>maxval);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01775}01775          \textcolor{comment}{// if a < b, then a < p <= b}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01776}01776          s-\/>guess = s-\/>minval + (((unsigned) s-\/>maxval -\/ s-\/>minval + 1) >> 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01777}01777          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01778}01778 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01779}01779       \textcolor{keywordflow}{case} STB\_probe\_binary\_smallest:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01780}01780          \textcolor{keywordflow}{if} (s-\/>minval == s-\/>maxval) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01781}01781             *\mbox{\hyperlink{structresult}{result}} = s-\/>minval;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01782}01782             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01783}01783          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01784}01784          assert(s-\/>minval < s-\/>maxval);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01785}01785          \textcolor{comment}{// if a < b, then a <= p < b}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01786}01786          s-\/>guess = s-\/>minval + (((unsigned) s-\/>maxval -\/ s-\/>minval) >> 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01787}01787          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01788}01788       \textcolor{keywordflow}{case} STB\_probe\_open\_smallest:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01789}01789       \textcolor{keywordflow}{case} STB\_probe\_open\_largest:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01790}01790          s-\/>guess = s-\/>maxval;  \textcolor{comment}{// guess the current maxval}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01791}01791          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01792}01792    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01793}01793    *\mbox{\hyperlink{structresult}{result}} = s-\/>guess;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01794}01794    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01795}01795 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01796}01796 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01797}01797 \textcolor{keywordtype}{int} stb\_probe(\mbox{\hyperlink{structstb__search}{stb\_search}} *s, \textcolor{keywordtype}{int} compare, \textcolor{keywordtype}{int} *\mbox{\hyperlink{structresult}{result}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01798}01798 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01799}01799    \textcolor{keywordflow}{switch}(s-\/>mode) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01800}01800       \textcolor{keywordflow}{case} STB\_probe\_open\_smallest:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01801}01801       \textcolor{keywordflow}{case} STB\_probe\_open\_largest: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01802}01802          \textcolor{keywordflow}{if} (compare <= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01803}01803             \textcolor{comment}{// then it lies within minval \& maxval}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01804}01804             \textcolor{keywordflow}{if} (s-\/>mode == STB\_probe\_open\_smallest)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01805}01805                s-\/>mode = STB\_probe\_binary\_smallest;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01806}01806             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01807}01807                s-\/>mode = STB\_probe\_binary\_largest;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01808}01808          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01809}01809             \textcolor{comment}{// otherwise, we need to probe larger}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01810}01810             s-\/>minval  = s-\/>maxval + 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01811}01811             s-\/>maxval  = s-\/>minval + s-\/>step;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01812}01812             s-\/>step   += s-\/>step;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01813}01813          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01814}01814          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01815}01815       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01816}01816       \textcolor{keywordflow}{case} STB\_probe\_binary\_smallest: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01817}01817          \textcolor{comment}{// if compare < 0, then s-\/>minval <= a <  p}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01818}01818          \textcolor{comment}{// if compare = 0, then s-\/>minval <= a <= p}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01819}01819          \textcolor{comment}{// if compare > 0, then         p <  a <= s-\/>maxval}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01820}01820          \textcolor{keywordflow}{if} (compare <= 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01821}01821             s-\/>maxval = s-\/>guess;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01822}01822          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01823}01823             s-\/>minval = s-\/>guess+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01824}01824          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01825}01825       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01826}01826       \textcolor{keywordflow}{case} STB\_probe\_binary\_largest: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01827}01827          \textcolor{comment}{// if compare < 0, then s-\/>minval <= a < p}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01828}01828          \textcolor{comment}{// if compare = 0, then         p <= a <= s-\/>maxval}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01829}01829          \textcolor{comment}{// if compare > 0, then         p <  a <= s-\/>maxval}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01830}01830          \textcolor{keywordflow}{if} (compare < 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01831}01831             s-\/>maxval = s-\/>guess-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01832}01832          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01833}01833             s-\/>minval = s-\/>guess;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01834}01834          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01835}01835       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01836}01836    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01837}01837    \textcolor{keywordflow}{return} stb\_probe\_guess(s, \mbox{\hyperlink{structresult}{result}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01838}01838 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01839}01839 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01840}01840 \textcolor{keywordtype}{int} stb\_search\_binary(\mbox{\hyperlink{structstb__search}{stb\_search}} *s, \textcolor{keywordtype}{int} minv, \textcolor{keywordtype}{int} maxv, \textcolor{keywordtype}{int} find\_smallest)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01841}01841 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01842}01842    \textcolor{keywordtype}{int} r;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01843}01843    \textcolor{keywordflow}{if} (maxv < minv) \textcolor{keywordflow}{return} minv-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01844}01844    s-\/>minval = minv;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01845}01845    s-\/>maxval = maxv;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01846}01846    s-\/>mode = find\_smallest ? STB\_probe\_binary\_smallest : STB\_probe\_binary\_largest;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01847}01847    stb\_probe\_guess(s, \&r);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01848}01848    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01849}01849 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01850}01850 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01851}01851 \textcolor{keywordtype}{int} stb\_search\_open(\mbox{\hyperlink{structstb__search}{stb\_search}} *s, \textcolor{keywordtype}{int} minv, \textcolor{keywordtype}{int} find\_smallest)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01852}01852 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01853}01853    \textcolor{keywordtype}{int} r;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01854}01854    s-\/>step   = 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01855}01855    s-\/>minval = minv;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01856}01856    s-\/>maxval = minv+s-\/>step;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01857}01857    s-\/>mode = find\_smallest ? STB\_probe\_open\_smallest : STB\_probe\_open\_largest;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01858}01858    stb\_probe\_guess(s, \&r);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01859}01859    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01860}01860 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01861}01861 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01862}01862 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01864}01864 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01865}01865 \textcolor{comment}{//                           String Processing}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01866}01866 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01867}01867 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01868}01868 \textcolor{preprocessor}{\#define stb\_prefixi(s,t)  (0==stb\_strnicmp((s),(t),strlen(t)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01869}01869 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01870}01870 \textcolor{keyword}{enum} stb\_splitpath\_flag}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01871}01871 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01872}01872    STB\_PATH = 1,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01873}01873    STB\_FILE = 2,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01874}01874    STB\_EXT  = 4,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01875}01875    STB\_PATH\_FILE = STB\_PATH + STB\_FILE,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01876}01876    STB\_FILE\_EXT  = STB\_FILE + STB\_EXT,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01877}01877    STB\_EXT\_NO\_PERIOD = 8,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01878}01878 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01879}01879 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01880}01880 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_skipwhite(\textcolor{keywordtype}{char} *s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01881}01881 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_trimwhite(\textcolor{keywordtype}{char} *s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01882}01882 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_skipnewline(\textcolor{keywordtype}{char} *s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01883}01883 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_strncpy(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t, \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01884}01884 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_substr(\textcolor{keywordtype}{char} *t, \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01885}01885 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_duplower(\textcolor{keywordtype}{char} *s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01886}01886 STB\_EXTERN \textcolor{keywordtype}{void}   stb\_tolower (\textcolor{keywordtype}{char} *s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01887}01887 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_strchr2 (\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} p1, \textcolor{keywordtype}{char} p2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01888}01888 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_strrchr2(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} p1, \textcolor{keywordtype}{char} p2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01889}01889 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_strtok(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01890}01890 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_strtok\_keep(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01891}01891 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_strtok\_invert(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *allowed);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01892}01892 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_dupreplace(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *find, \textcolor{keywordtype}{char} *replace);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01893}01893 STB\_EXTERN \textcolor{keywordtype}{void}   stb\_replaceinplace(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *find, \textcolor{keywordtype}{char} *replace);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01894}01894 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_splitpath(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{int} flag);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01895}01895 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_splitpathdup(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{int} flag);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01896}01896 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_replacedir(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01897}01897 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_replaceext(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *ext);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01898}01898 STB\_EXTERN \textcolor{keywordtype}{void}   stb\_fixpath(\textcolor{keywordtype}{char} *path);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01899}01899 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_shorten\_path\_readable(\textcolor{keywordtype}{char} *path, \textcolor{keywordtype}{int} max\_len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01900}01900 STB\_EXTERN \textcolor{keywordtype}{int}    stb\_suffix (\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01901}01901 STB\_EXTERN \textcolor{keywordtype}{int}    stb\_suffixi(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01902}01902 STB\_EXTERN \textcolor{keywordtype}{int}    stb\_prefix (\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01903}01903 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_strichr(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01904}01904 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_stristr(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01905}01905 STB\_EXTERN \textcolor{keywordtype}{int}    stb\_prefix\_count(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01906}01906 STB\_EXTERN \textcolor{keyword}{const} \textcolor{keywordtype}{char} * stb\_plural(\textcolor{keywordtype}{int} n);  \textcolor{comment}{// "{}s"{} or "{}"{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01907}01907 STB\_EXTERN \textcolor{keywordtype}{size\_t} stb\_strscpy(\textcolor{keywordtype}{char} *d, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{size\_t} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01908}01908 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01909}01909 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_tokens(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01910}01910 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_tokens\_nested(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count, \textcolor{keywordtype}{char} *nest\_in, \textcolor{keywordtype}{char} *nest\_out);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01911}01911 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_tokens\_nested\_empty(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count, \textcolor{keywordtype}{char} *nest\_in, \textcolor{keywordtype}{char} *nest\_out);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01912}01912 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_tokens\_allowempty(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01913}01913 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_tokens\_stripwhite(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01914}01914 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_tokens\_withdelim(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01915}01915 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_tokens\_quoted(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01916}01916 \textcolor{comment}{// with 'quoted', allow delimiters to appear inside quotation marks, and don't}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01917}01917 \textcolor{comment}{// strip whitespace inside them (and we delete the quotation marks unless they}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01918}01918 \textcolor{comment}{// appear back to back, in which case they're considered escaped)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01919}01919 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01920}01920 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01921}01921 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01922}01922 \textcolor{keywordtype}{size\_t} stb\_strscpy(\textcolor{keywordtype}{char} *d, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{size\_t} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01923}01923 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01924}01924    \textcolor{keywordtype}{size\_t} len = strlen(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01925}01925    \textcolor{keywordflow}{if} (len >= n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01926}01926       \textcolor{keywordflow}{if} (n) d[0] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01927}01927       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01928}01928    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01929}01929    stb\_p\_strcpy\_s(d,n,s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01930}01930    \textcolor{keywordflow}{return} len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01931}01931 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01932}01932 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01933}01933 \textcolor{keyword}{const} \textcolor{keywordtype}{char} *stb\_plural(\textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01934}01934 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01935}01935    \textcolor{keywordflow}{return} n == 1 ? \textcolor{stringliteral}{"{}"{}} : \textcolor{stringliteral}{"{}s"{}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01936}01936 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01937}01937 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01938}01938 \textcolor{keywordtype}{int} stb\_prefix(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01939}01939 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01940}01940    \textcolor{keywordflow}{while} (*t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01941}01941       \textcolor{keywordflow}{if} (*s++ != *t++)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01942}01942          \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01943}01943    \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01944}01944 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01945}01945 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01946}01946 \textcolor{keywordtype}{int} stb\_prefix\_count(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01947}01947 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01948}01948    \textcolor{keywordtype}{int} c=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01949}01949    \textcolor{keywordflow}{while} (*t) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01950}01950       \textcolor{keywordflow}{if} (*s++ != *t++)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01951}01951          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01952}01952       ++c;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01953}01953    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01954}01954    \textcolor{keywordflow}{return} c;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01955}01955 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01956}01956 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01957}01957 \textcolor{keywordtype}{int} stb\_suffix(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01958}01958 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01959}01959    \textcolor{keywordtype}{size\_t} n = strlen(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01960}01960    \textcolor{keywordtype}{size\_t} m = strlen(t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01961}01961    \textcolor{keywordflow}{if} (m <= n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01962}01962       \textcolor{keywordflow}{return} 0 == strcmp(s+n-\/m, t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01963}01963    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01964}01964       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01965}01965 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01966}01966 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01967}01967 \textcolor{keywordtype}{int} stb\_suffixi(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01968}01968 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01969}01969    \textcolor{keywordtype}{size\_t} n = strlen(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01970}01970    \textcolor{keywordtype}{size\_t} m = strlen(t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01971}01971    \textcolor{keywordflow}{if} (m <= n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01972}01972       \textcolor{keywordflow}{return} 0 == stb\_stricmp(s+n-\/m, t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01973}01973    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01974}01974       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01975}01975 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01976}01976 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01977}01977 \textcolor{comment}{// originally I was using this table so that I could create known sentinel}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01978}01978 \textcolor{comment}{// values-\/-\/e.g. change whitetable[0] to be true if I was scanning for whitespace,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01979}01979 \textcolor{comment}{// and false if I was scanning for nonwhite. I don't appear to be using that}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01980}01980 \textcolor{comment}{// functionality anymore (I do for tokentable, though), so just replace it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01981}01981 \textcolor{comment}{// with isspace()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01982}01982 \textcolor{keywordtype}{char} *stb\_skipwhite(\textcolor{keywordtype}{char} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01983}01983 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01984}01984    \textcolor{keywordflow}{while} (isspace((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}) *s)) ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01985}01985    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01986}01986 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01987}01987 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01988}01988 \textcolor{keywordtype}{char} *stb\_skipnewline(\textcolor{keywordtype}{char} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01989}01989 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01990}01990    \textcolor{keywordflow}{if} (s[0] == \textcolor{charliteral}{'\(\backslash\)r'} || s[0] == \textcolor{charliteral}{'\(\backslash\)n'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01991}01991       \textcolor{keywordflow}{if} (s[0]+s[1] == \textcolor{charliteral}{'\(\backslash\)r'} + \textcolor{charliteral}{'\(\backslash\)n'}) ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01992}01992       ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01993}01993    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01994}01994    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01995}01995 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01996}01996 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01997}01997 \textcolor{keywordtype}{char} *stb\_trimwhite(\textcolor{keywordtype}{char} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01998}01998 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l01999}01999    \textcolor{keywordtype}{int} i,n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02000}02000    s = stb\_skipwhite(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02001}02001    n = (int) strlen(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02002}02002    \textcolor{keywordflow}{for} (i=n-\/1; i >= 0; -\/-\/i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02003}02003       \textcolor{keywordflow}{if} (!isspace(s[i]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02004}02004          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02005}02005    s[i+1] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02006}02006    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02007}02007 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02008}02008 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02009}02009 \textcolor{keywordtype}{char} *stb\_strncpy(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02010}02010 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02011}02011    stb\_p\_strncpy\_s(s,n+1,t,n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02012}02012    s[n] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02013}02013    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02014}02014 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02015}02015 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02016}02016 \textcolor{keywordtype}{char} *stb\_substr(\textcolor{keywordtype}{char} *t, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02017}02017 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02018}02018    \textcolor{keywordtype}{char} *a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02019}02019    \textcolor{keywordtype}{int} z = (int) strlen(t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02020}02020    \textcolor{keywordflow}{if} (z < n) n = z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02021}02021    a = (\textcolor{keywordtype}{char} *) malloc(n+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02022}02022    stb\_p\_strncpy\_s(a,n+1,t,n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02023}02023    a[n] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02024}02024    \textcolor{keywordflow}{return} a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02025}02025 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02026}02026 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02027}02027 \textcolor{keywordtype}{char} *stb\_duplower(\textcolor{keywordtype}{char} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02028}02028 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02029}02029    \textcolor{keywordtype}{char} *p = stb\_p\_strdup(s), *q = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02030}02030    \textcolor{keywordflow}{while} (*q) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02031}02031       *q = tolower(*q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02032}02032       ++q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02033}02033    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02034}02034    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02035}02035 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02036}02036 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02037}02037 \textcolor{keywordtype}{void} stb\_tolower(\textcolor{keywordtype}{char} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02038}02038 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02039}02039    \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02040}02040       *s = tolower(*s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02041}02041       ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02042}02042    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02043}02043 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02044}02044 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02045}02045 \textcolor{keywordtype}{char} *stb\_strchr2(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} x, \textcolor{keywordtype}{char} y)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02046}02046 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02047}02047    \textcolor{keywordflow}{for}(; *s; ++s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02048}02048       \textcolor{keywordflow}{if} (*s == x || *s == y)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02049}02049          \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02050}02050    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02051}02051 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02052}02052 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02053}02053 \textcolor{keywordtype}{char} *stb\_strrchr2(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} x, \textcolor{keywordtype}{char} y)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02054}02054 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02055}02055    \textcolor{keywordtype}{char} *r = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02056}02056    \textcolor{keywordflow}{for}(; *s; ++s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02057}02057       \textcolor{keywordflow}{if} (*s == x || *s == y)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02058}02058          r = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02059}02059    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02060}02060 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02061}02061 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02062}02062 \textcolor{keywordtype}{char} *stb\_strichr(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02063}02063 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02064}02064    \textcolor{keywordflow}{if} (tolower(t) == toupper(t))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02065}02065       \textcolor{keywordflow}{return} strchr(s,t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02066}02066    \textcolor{keywordflow}{return} stb\_strchr2(s, (\textcolor{keywordtype}{char}) tolower(t), (\textcolor{keywordtype}{char}) toupper(t));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02067}02067 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02068}02068 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02069}02069 \textcolor{keywordtype}{char} *stb\_stristr(\textcolor{keywordtype}{char} *s, \textcolor{keywordtype}{char} *t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02070}02070 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02071}02071    \textcolor{keywordtype}{size\_t} n = strlen(t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02072}02072    \textcolor{keywordtype}{char} *z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02073}02073    \textcolor{keywordflow}{if} (n==0) \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02074}02074    \textcolor{keywordflow}{while} ((z = stb\_strichr(s, *t)) != NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02075}02075       \textcolor{keywordflow}{if} (0==stb\_strnicmp(z, t, n))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02076}02076          \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02077}02077       s = z+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02078}02078    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02079}02079    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02080}02080 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02081}02081 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02082}02082 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stb\_strtok\_raw(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} keep, \textcolor{keywordtype}{int} invert)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02083}02083 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02084}02084    \textcolor{keywordflow}{if} (invert) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02085}02085       \textcolor{keywordflow}{while} (*src \&\& strchr(delimit, *src) != NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02086}02086          *\mbox{\hyperlink{structoutput}{output}}++ = *src++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02087}02087       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02088}02088    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02089}02089       \textcolor{keywordflow}{while} (*src \&\& strchr(delimit, *src) == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02090}02090          *\mbox{\hyperlink{structoutput}{output}}++ = *src++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02091}02091       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02092}02092    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02093}02093    *\mbox{\hyperlink{structoutput}{output}} = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02094}02094    \textcolor{keywordflow}{if} (keep)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02095}02095       \textcolor{keywordflow}{return} src;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02096}02096    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02097}02097       \textcolor{keywordflow}{return} *src ? src+1 : src;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02098}02098 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02099}02099 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02100}02100 \textcolor{keywordtype}{char} *stb\_strtok(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02101}02101 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02102}02102    \textcolor{keywordflow}{return} stb\_strtok\_raw(\mbox{\hyperlink{structoutput}{output}}, src, delimit, 0, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02103}02103 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02104}02104 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02105}02105 \textcolor{keywordtype}{char} *stb\_strtok\_keep(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02106}02106 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02107}02107    \textcolor{keywordflow}{return} stb\_strtok\_raw(\mbox{\hyperlink{structoutput}{output}}, src, delimit, 1, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02108}02108 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02109}02109 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02110}02110 \textcolor{keywordtype}{char} *stb\_strtok\_invert(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02111}02111 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02112}02112    \textcolor{keywordflow}{return} stb\_strtok\_raw(\mbox{\hyperlink{structoutput}{output}}, src, delimit, 1,1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02113}02113 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02114}02114 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02115}02115 \textcolor{keyword}{static} \textcolor{keywordtype}{char} **stb\_tokens\_raw(\textcolor{keywordtype}{char} *src\_, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02116}02116                              \textcolor{keywordtype}{int} stripwhite, \textcolor{keywordtype}{int} allow\_empty, \textcolor{keywordtype}{char} *start, \textcolor{keywordtype}{char} *end)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02117}02117 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02118}02118    \textcolor{keywordtype}{int} nested = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02119}02119    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *src = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) src\_;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02120}02120    \textcolor{keyword}{static} \textcolor{keywordtype}{char} stb\_tokentable[256]; \textcolor{comment}{// rely on static initializion to 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02121}02121    \textcolor{keyword}{static} \textcolor{keywordtype}{char} stable[256],etable[256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02122}02122    \textcolor{keywordtype}{char} *out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02123}02123    \textcolor{keywordtype}{char} **\mbox{\hyperlink{structresult}{result}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02124}02124    \textcolor{keywordtype}{int} num=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02125}02125    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02126}02126 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02127}02127    s = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) delimit; \textcolor{keywordflow}{while} (*s) stb\_tokentable[*s++] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02128}02128    \textcolor{keywordflow}{if} (start) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02129}02129       s = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) start;         \textcolor{keywordflow}{while} (*s) stable[*s++] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02130}02130       s = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) end;   \textcolor{keywordflow}{if} (s)  \textcolor{keywordflow}{while} (*s) stable[*s++] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02131}02131       s = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) end;   \textcolor{keywordflow}{if} (s)  \textcolor{keywordflow}{while} (*s) etable[*s++] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02132}02132    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02133}02133    stable[0] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02134}02134 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02135}02135    \textcolor{comment}{// two passes through: the first time, counting how many}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02136}02136    s = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) src;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02137}02137    \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02138}02138       \textcolor{comment}{// state: just found delimiter}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02139}02139       \textcolor{comment}{// skip further delimiters}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02140}02140       \textcolor{keywordflow}{if} (!allow\_empty) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02141}02141          stb\_tokentable[0] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02142}02142          \textcolor{keywordflow}{while} (stb\_tokentable[*s])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02143}02143             ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02144}02144          \textcolor{keywordflow}{if} (!*s) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02145}02145       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02146}02146       ++num;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02147}02147       \textcolor{comment}{// skip further non-\/delimiters}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02148}02148       stb\_tokentable[0] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02149}02149       \textcolor{keywordflow}{if} (stripwhite == 2) \{ \textcolor{comment}{// quoted strings}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02150}02150          \textcolor{keywordflow}{while} (!stb\_tokentable[*s]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02151}02151             \textcolor{keywordflow}{if} (*s != \textcolor{charliteral}{'"{}'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02152}02152                ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02153}02153             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02154}02154                ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02155}02155                \textcolor{keywordflow}{if} (*s == \textcolor{charliteral}{'"{}'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02156}02156                   ++s;   \textcolor{comment}{// "{}"{} -\/> "{}, not start a string}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02157}02157                \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02158}02158                   \textcolor{comment}{// begin a string}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02159}02159                   \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02160}02160                      \textcolor{keywordflow}{if} (s[0] == \textcolor{charliteral}{'"{}'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02161}02161                         \textcolor{keywordflow}{if} (s[1] == \textcolor{charliteral}{'"{}'}) s += 2; \textcolor{comment}{// "{}"{} -\/> "{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02162}02162                         \textcolor{keywordflow}{else} \{ ++s; \textcolor{keywordflow}{break}; \} \textcolor{comment}{// terminating "{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02163}02163                      \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02164}02164                         ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02165}02165                   \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02166}02166                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02167}02167             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02168}02168          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02169}02169       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02170}02170          \textcolor{keywordflow}{while} (nested || !stb\_tokentable[*s]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02171}02171             \textcolor{keywordflow}{if} (stable[*s]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02172}02172                \textcolor{keywordflow}{if} (!*s) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02173}02173                \textcolor{keywordflow}{if} (end ? etable[*s] : nested)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02174}02174                   -\/-\/nested;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02175}02175                \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02176}02176                   ++nested;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02177}02177             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02178}02178             ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02179}02179          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02180}02180       \textcolor{keywordflow}{if} (allow\_empty) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02181}02181          \textcolor{keywordflow}{if} (*s) ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02182}02182       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02183}02183    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02184}02184    \textcolor{comment}{// now num has the actual count... malloc our output structure}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02185}02185    \textcolor{comment}{// need space for all the strings: strings won't be any longer than}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02186}02186    \textcolor{comment}{// original input, since for every '\(\backslash\)0' there's at least one delimiter}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02187}02187    \mbox{\hyperlink{structresult}{result}} = (\textcolor{keywordtype}{char} **) malloc(\textcolor{keyword}{sizeof}(*\mbox{\hyperlink{structresult}{result}}) * (num+1) + (s-\/src+1));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02188}02188    \textcolor{keywordflow}{if} (\mbox{\hyperlink{structresult}{result}} == NULL) \textcolor{keywordflow}{return} \mbox{\hyperlink{structresult}{result}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02189}02189    out = (\textcolor{keywordtype}{char} *) (\mbox{\hyperlink{structresult}{result}} + (num+1));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02190}02190    \textcolor{comment}{// second pass: copy out the data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02191}02191    s = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) src;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02192}02192    num = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02193}02193    nested = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02194}02194    \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02195}02195       \textcolor{keywordtype}{char} *last\_nonwhite;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02196}02196       \textcolor{comment}{// state: just found delimiter}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02197}02197       \textcolor{comment}{// skip further delimiters}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02198}02198       \textcolor{keywordflow}{if} (!allow\_empty) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02199}02199          stb\_tokentable[0] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02200}02200          \textcolor{keywordflow}{if} (stripwhite)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02201}02201             \textcolor{keywordflow}{while} (stb\_tokentable[*s] || isspace(*s))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02202}02202                ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02203}02203          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02204}02204             \textcolor{keywordflow}{while} (stb\_tokentable[*s])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02205}02205                ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02206}02206       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (stripwhite) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02207}02207          \textcolor{keywordflow}{while} (isspace(*s)) ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02208}02208       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02209}02209       \textcolor{keywordflow}{if} (!*s) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02210}02210       \textcolor{comment}{// we're past any leading delimiters and whitespace}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02211}02211       \mbox{\hyperlink{structresult}{result}}[num] = out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02212}02212       ++num;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02213}02213       \textcolor{comment}{// copy non-\/delimiters}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02214}02214       stb\_tokentable[0] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02215}02215       last\_nonwhite = out-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02216}02216       \textcolor{keywordflow}{if} (stripwhite == 2) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02217}02217          \textcolor{keywordflow}{while} (!stb\_tokentable[*s]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02218}02218             \textcolor{keywordflow}{if} (*s != \textcolor{charliteral}{'"{}'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02219}02219                \textcolor{keywordflow}{if} (!isspace(*s)) last\_nonwhite = out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02220}02220                *out++ = *s++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02221}02221             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02222}02222                ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02223}02223                \textcolor{keywordflow}{if} (*s == \textcolor{charliteral}{'"{}'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02224}02224                   \textcolor{keywordflow}{if} (!isspace(*s)) last\_nonwhite = out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02225}02225                   *out++ = *s++; \textcolor{comment}{// "{}"{} -\/> "{}, not start string}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02226}02226                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02227}02227                   \textcolor{comment}{// begin a quoted string}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02228}02228                   \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02229}02229                      \textcolor{keywordflow}{if} (s[0] == \textcolor{charliteral}{'"{}'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02230}02230                         \textcolor{keywordflow}{if} (s[1] == \textcolor{charliteral}{'"{}'}) \{ *out++ = *s; s += 2; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02231}02231                         \textcolor{keywordflow}{else} \{ ++s; \textcolor{keywordflow}{break}; \} \textcolor{comment}{// terminating "{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02232}02232                      \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02233}02233                         *out++ = *s++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02234}02234                   \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02235}02235                   last\_nonwhite = out-\/1; \textcolor{comment}{// all in quotes counts as non-\/white}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02236}02236                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02237}02237             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02238}02238          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02239}02239       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02240}02240          \textcolor{keywordflow}{while} (nested || !stb\_tokentable[*s]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02241}02241             \textcolor{keywordflow}{if} (!isspace(*s)) last\_nonwhite = out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02242}02242             \textcolor{keywordflow}{if} (stable[*s]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02243}02243                \textcolor{keywordflow}{if} (!*s) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02244}02244                \textcolor{keywordflow}{if} (end ? etable[*s] : nested)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02245}02245                   -\/-\/nested;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02246}02246                \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02247}02247                   ++nested;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02248}02248             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02249}02249             *out++ = *s++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02250}02250          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02251}02251       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02252}02252 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02253}02253       \textcolor{keywordflow}{if} (stripwhite) \textcolor{comment}{// rewind to last non-\/whitespace char}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02254}02254          out = last\_nonwhite+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02255}02255       *out++ = \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02256}02256 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02257}02257       \textcolor{keywordflow}{if} (*s) ++s; \textcolor{comment}{// skip delimiter}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02258}02258    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02259}02259    s = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) delimit; \textcolor{keywordflow}{while} (*s) stb\_tokentable[*s++] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02260}02260    \textcolor{keywordflow}{if} (start) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02261}02261       s = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) start;         \textcolor{keywordflow}{while} (*s) stable[*s++] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02262}02262       s = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) end;   \textcolor{keywordflow}{if} (s)  \textcolor{keywordflow}{while} (*s) stable[*s++] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02263}02263       s = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) end;   \textcolor{keywordflow}{if} (s)  \textcolor{keywordflow}{while} (*s) etable[*s++] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02264}02264    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02265}02265    \textcolor{keywordflow}{if} (count != NULL) *count = num;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02266}02266    \mbox{\hyperlink{structresult}{result}}[num] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02267}02267    \textcolor{keywordflow}{return} \mbox{\hyperlink{structresult}{result}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02268}02268 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02269}02269 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02270}02270 \textcolor{keywordtype}{char} **stb\_tokens(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02271}02271 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02272}02272    \textcolor{keywordflow}{return} stb\_tokens\_raw(src,delimit,count,0,0,0,0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02273}02273 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02274}02274 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02275}02275 \textcolor{keywordtype}{char} **stb\_tokens\_nested(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count, \textcolor{keywordtype}{char} *nest\_in, \textcolor{keywordtype}{char} *nest\_out)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02276}02276 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02277}02277    \textcolor{keywordflow}{return} stb\_tokens\_raw(src,delimit,count,0,0,nest\_in,nest\_out);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02278}02278 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02279}02279 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02280}02280 \textcolor{keywordtype}{char} **stb\_tokens\_nested\_empty(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count, \textcolor{keywordtype}{char} *nest\_in, \textcolor{keywordtype}{char} *nest\_out)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02281}02281 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02282}02282    \textcolor{keywordflow}{return} stb\_tokens\_raw(src,delimit,count,0,1,nest\_in,nest\_out);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02283}02283 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02284}02284 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02285}02285 \textcolor{keywordtype}{char} **stb\_tokens\_allowempty(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02286}02286 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02287}02287    \textcolor{keywordflow}{return} stb\_tokens\_raw(src,delimit,count,0,1,0,0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02288}02288 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02289}02289 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02290}02290 \textcolor{keywordtype}{char} **stb\_tokens\_stripwhite(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02291}02291 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02292}02292    \textcolor{keywordflow}{return} stb\_tokens\_raw(src,delimit,count,1,1,0,0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02293}02293 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02294}02294 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02295}02295 \textcolor{keywordtype}{char} **stb\_tokens\_quoted(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *delimit, \textcolor{keywordtype}{int} *count)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02296}02296 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02297}02297    \textcolor{keywordflow}{return} stb\_tokens\_raw(src,delimit,count,2,1,0,0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02298}02298 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02299}02299 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02300}02300 \textcolor{keywordtype}{char} *stb\_dupreplace(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *find, \textcolor{keywordtype}{char} *replace)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02301}02301 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02302}02302    \textcolor{keywordtype}{size\_t} len\_find = strlen(find);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02303}02303    \textcolor{keywordtype}{size\_t} len\_replace = strlen(replace);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02304}02304    \textcolor{keywordtype}{int} count = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02305}02305 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02306}02306    \textcolor{keywordtype}{char} *s,*p,*q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02307}02307 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02308}02308    s = strstr(src, find);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02309}02309    \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} stb\_p\_strdup(src);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02310}02310    \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02311}02311       ++count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02312}02312       s = strstr(s + len\_find, find);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02313}02313    \} \textcolor{keywordflow}{while} (s != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02314}02314 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02315}02315    p = (\textcolor{keywordtype}{char} *)  malloc(strlen(src) + count * (len\_replace -\/ len\_find) + 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02316}02316    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02317}02317    q = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02318}02318    s = src;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02319}02319    \textcolor{keywordflow}{for} (;;) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02320}02320       \textcolor{keywordtype}{char} *t = strstr(s, find);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02321}02321       \textcolor{keywordflow}{if} (t == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02322}02322          stb\_p\_strcpy\_s(q,strlen(src)+count*(len\_replace-\/len\_find)+1,s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02323}02323          assert(strlen(p) == strlen(src) + count*(len\_replace-\/len\_find));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02324}02324          \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02325}02325       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02326}02326       memcpy(q, s, t-\/s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02327}02327       q += t-\/s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02328}02328       memcpy(q, replace, len\_replace);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02329}02329       q += len\_replace;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02330}02330       s = t + len\_find;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02331}02331    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02332}02332 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02333}02333 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02334}02334 \textcolor{keywordtype}{void} stb\_replaceinplace(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *find, \textcolor{keywordtype}{char} *replace)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02335}02335 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02336}02336    \textcolor{keywordtype}{size\_t} len\_find = strlen(find);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02337}02337    \textcolor{keywordtype}{size\_t} len\_replace = strlen(replace);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02338}02338    \textcolor{keywordtype}{int} delta;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02339}02339 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02340}02340    \textcolor{keywordtype}{char} *s,*p,*q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02341}02341 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02342}02342    delta = (int) (len\_replace -\/ len\_find);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02343}02343    assert(delta <= 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02344}02344    \textcolor{keywordflow}{if} (delta > 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02345}02345 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02346}02346    p = strstr(src, find);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02347}02347    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02348}02348 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02349}02349    s = q = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02350}02350    \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02351}02351       memcpy(q, replace, len\_replace);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02352}02352       p += len\_find;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02353}02353       q += len\_replace;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02354}02354       s = strstr(p, find);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02355}02355       \textcolor{keywordflow}{if} (s == NULL) s = p + strlen(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02356}02356       memmove(q, p, s-\/p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02357}02357       q += s-\/p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02358}02358       p = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02359}02359    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02360}02360    *q = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02361}02361 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02362}02362 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02363}02363 \textcolor{keywordtype}{void} stb\_fixpath(\textcolor{keywordtype}{char} *path)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02364}02364 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02365}02365    \textcolor{keywordflow}{for}(; *path; ++path)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02366}02366       \textcolor{keywordflow}{if} (*path == \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02367}02367          *path = \textcolor{charliteral}{'/'};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02368}02368 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02369}02369 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02370}02370 \textcolor{keywordtype}{void} stb\_\_add\_section(\textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{char} *data, ptrdiff\_t curlen, ptrdiff\_t newlen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02371}02371 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02372}02372    \textcolor{keywordflow}{if} (newlen < curlen) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02373}02373       ptrdiff\_t z1 = newlen >> 1, z2 = newlen-\/z1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02374}02374       memcpy(\mbox{\hyperlink{classbuffer}{buffer}}, data, z1-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02375}02375       \mbox{\hyperlink{classbuffer}{buffer}}[z1-\/1] = \textcolor{charliteral}{'.'};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02376}02376       \mbox{\hyperlink{classbuffer}{buffer}}[z1-\/0] = \textcolor{charliteral}{'.'};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02377}02377       memcpy(\mbox{\hyperlink{classbuffer}{buffer}}+z1+1, data+curlen-\/z2+1, z2-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02378}02378    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02379}02379       memcpy(\mbox{\hyperlink{classbuffer}{buffer}}, data, curlen);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02380}02380 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02381}02381 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02382}02382 \textcolor{keywordtype}{char} * stb\_shorten\_path\_readable(\textcolor{keywordtype}{char} *path, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02383}02383 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02384}02384    \textcolor{keyword}{static} \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02385}02385    ptrdiff\_t n = strlen(path),n1,n2,r1,r2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02386}02386    \textcolor{keywordtype}{char} *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02387}02387    \textcolor{keywordflow}{if} (n <= len) \textcolor{keywordflow}{return} path;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02388}02388    \textcolor{keywordflow}{if} (len > 1024) \textcolor{keywordflow}{return} path;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02389}02389    s = stb\_strrchr2(path, \textcolor{charliteral}{'/'}, \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02390}02390    \textcolor{keywordflow}{if} (s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02391}02391       n1 = s -\/ path + 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02392}02392       n2 = n -\/ n1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02393}02393       ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02394}02394    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02395}02395       n1 = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02396}02396       n2 = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02397}02397       s = path;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02398}02398    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02399}02399    \textcolor{comment}{// now we need to reduce r1 and r2 so that they fit in len}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02400}02400    \textcolor{keywordflow}{if} (n1 < len>>1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02401}02401       r1 = n1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02402}02402       r2 = len -\/ r1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02403}02403    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n2 < len >> 1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02404}02404       r2 = n2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02405}02405       r1 = len -\/ r2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02406}02406    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02407}02407       r1 = n1 * len / n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02408}02408       r2 = n2 * len / n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02409}02409       \textcolor{keywordflow}{if} (r1 < len>>2) r1 = len>>2, r2 = len-\/r1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02410}02410       \textcolor{keywordflow}{if} (r2 < len>>2) r2 = len>>2, r1 = len-\/r2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02411}02411    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02412}02412    assert(r1 <= n1 \&\& r2 <= n2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02413}02413    \textcolor{keywordflow}{if} (n1)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02414}02414       stb\_\_add\_section(\mbox{\hyperlink{classbuffer}{buffer}}, path, n1, r1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02415}02415    stb\_\_add\_section(\mbox{\hyperlink{classbuffer}{buffer}}+r1, s, n2, r2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02416}02416    \mbox{\hyperlink{classbuffer}{buffer}}[len] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02417}02417    \textcolor{keywordflow}{return} \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02418}02418 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02419}02419 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02420}02420 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stb\_\_splitpath\_raw(\textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{char} *path, \textcolor{keywordtype}{int} flag)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02421}02421 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02422}02422    ptrdiff\_t len=0,x,y, n = (int) strlen(path), f1,f2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02423}02423    \textcolor{keywordtype}{char} *s = stb\_strrchr2(path, \textcolor{charliteral}{'/'}, \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02424}02424    \textcolor{keywordtype}{char} *t = strrchr(path, \textcolor{charliteral}{'.'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02425}02425    \textcolor{keywordflow}{if} (s \&\& t \&\& t < s) t = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02426}02426 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02427}02427    \textcolor{keywordflow}{if} (!s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02428}02428       \textcolor{comment}{// check for drive}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02429}02429       \textcolor{keywordflow}{if} (isalpha(path[0]) \&\& path[1] == \textcolor{charliteral}{':'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02430}02430          s = \&path[1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02431}02431    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02432}02432    \textcolor{keywordflow}{if} (s) ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02433}02433 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02434}02434    \textcolor{keywordflow}{if} (flag == STB\_EXT\_NO\_PERIOD)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02435}02435       flag |= STB\_EXT;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02436}02436 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02437}02437    \textcolor{keywordflow}{if} (!(flag \& (STB\_PATH | STB\_FILE | STB\_EXT))) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02438}02438 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02439}02439    f1 = s == NULL ? 0 : s-\/path; \textcolor{comment}{// start of filename}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02440}02440    f2 = t == NULL ? n : t-\/path; \textcolor{comment}{// just past end of filename}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02441}02441 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02442}02442    \textcolor{keywordflow}{if} (flag \& STB\_PATH) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02443}02443       x = 0; \textcolor{keywordflow}{if} (f1 == 0 \&\& flag == STB\_PATH) len=2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02444}02444    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (flag \& STB\_FILE) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02445}02445       x = f1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02446}02446    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02447}02447       x = f2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02448}02448       \textcolor{keywordflow}{if} (flag \& STB\_EXT\_NO\_PERIOD)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02449}02449          \textcolor{keywordflow}{if} (path[x] == \textcolor{charliteral}{'.'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02450}02450             ++x;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02451}02451    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02452}02452 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02453}02453    \textcolor{keywordflow}{if} (flag \& STB\_EXT)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02454}02454       y = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02455}02455    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (flag \& STB\_FILE)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02456}02456       y = f2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02457}02457    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02458}02458       y = f1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02459}02459 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02460}02460    \textcolor{keywordflow}{if} (\mbox{\hyperlink{classbuffer}{buffer}} == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02461}02461       \mbox{\hyperlink{classbuffer}{buffer}} = (\textcolor{keywordtype}{char} *) malloc(y-\/x + len + 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02462}02462       \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classbuffer}{buffer}}) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02463}02463    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02464}02464 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02465}02465    \textcolor{keywordflow}{if} (len) \{ stb\_p\_strcpy\_s(\mbox{\hyperlink{classbuffer}{buffer}}, 3, \textcolor{stringliteral}{"{}./"{}}); \textcolor{keywordflow}{return} \mbox{\hyperlink{classbuffer}{buffer}}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02466}02466    stb\_strncpy(\mbox{\hyperlink{classbuffer}{buffer}}, path+(\textcolor{keywordtype}{int})x, (\textcolor{keywordtype}{int})(y-\/x));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02467}02467    \textcolor{keywordflow}{return} \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02468}02468 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02469}02469 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02470}02470 \textcolor{keywordtype}{char} *stb\_splitpath(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{int} flag)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02471}02471 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02472}02472    \textcolor{keywordflow}{return} stb\_\_splitpath\_raw(\mbox{\hyperlink{structoutput}{output}}, src, flag);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02473}02473 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02474}02474 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02475}02475 \textcolor{keywordtype}{char} *stb\_splitpathdup(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{int} flag)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02476}02476 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02477}02477    \textcolor{keywordflow}{return} stb\_\_splitpath\_raw(NULL, src, flag);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02478}02478 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02479}02479 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02480}02480 \textcolor{keywordtype}{char} *stb\_replacedir(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *dir)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02481}02481 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02482}02482    \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[4096];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02483}02483    stb\_splitpath(\mbox{\hyperlink{classbuffer}{buffer}}, src, STB\_FILE | STB\_EXT);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02484}02484    \textcolor{keywordflow}{if} (dir)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02485}02485       stb\_p\_sprintf(\mbox{\hyperlink{structoutput}{output}} stb\_p\_size(9999), \textcolor{stringliteral}{"{}\%s/\%s"{}}, dir, \mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02486}02486    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02487}02487       stb\_p\_strcpy\_s(\mbox{\hyperlink{structoutput}{output}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}}),  \mbox{\hyperlink{classbuffer}{buffer}}); \textcolor{comment}{// @UNSAFE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02488}02488    \textcolor{keywordflow}{return} \mbox{\hyperlink{structoutput}{output}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02489}02489 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02490}02490 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02491}02491 \textcolor{keywordtype}{char} *stb\_replaceext(\textcolor{keywordtype}{char} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *ext)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02492}02492 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02493}02493    \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[4096];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02494}02494    stb\_splitpath(\mbox{\hyperlink{classbuffer}{buffer}}, src, STB\_PATH | STB\_FILE);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02495}02495    \textcolor{keywordflow}{if} (ext)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02496}02496       stb\_p\_sprintf(\mbox{\hyperlink{structoutput}{output}} stb\_p\_size(9999), \textcolor{stringliteral}{"{}\%s.\%s"{}}, \mbox{\hyperlink{classbuffer}{buffer}}, ext[0] == \textcolor{charliteral}{'.'} ? ext+1 : ext);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02497}02497    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02498}02498       stb\_p\_strcpy\_s(\mbox{\hyperlink{structoutput}{output}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}}), \mbox{\hyperlink{classbuffer}{buffer}}); \textcolor{comment}{// @UNSAFE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02499}02499    \textcolor{keywordflow}{return} \mbox{\hyperlink{structoutput}{output}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02500}02500 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02501}02501 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02502}02502 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02504}02504 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02505}02505 \textcolor{comment}{//                   stb\_alloc -\/ hierarchical allocator}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02506}02506 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02507}02507 \textcolor{comment}{//                                     inspired by http://swapped.cc/halloc}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02508}02508 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02509}02509 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02510}02510 \textcolor{comment}{// When you alloc a given block through stb\_alloc, you have these choices:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02511}02511 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02512}02512 \textcolor{comment}{//       1. does it have a parent?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02513}02513 \textcolor{comment}{//       2. can it have children?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02514}02514 \textcolor{comment}{//       3. can it be freed directly?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02515}02515 \textcolor{comment}{//       4. is it transferrable?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02516}02516 \textcolor{comment}{//       5. what is its alignment?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02517}02517 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02518}02518 \textcolor{comment}{// Here are interesting combinations of those:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02519}02519 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02520}02520 \textcolor{comment}{//                              children   free    transfer     alignment}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02521}02521 \textcolor{comment}{//  arena                          Y         Y         N           n/a}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02522}02522 \textcolor{comment}{//  no-\/overhead, chunked           N         N         N         normal}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02523}02523 \textcolor{comment}{//  string pool alloc              N         N         N            1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02524}02524 \textcolor{comment}{//  parent-\/ptr, chunked            Y         N         N         normal}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02525}02525 \textcolor{comment}{//  low-\/overhead, unchunked        N         Y         Y         normal}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02526}02526 \textcolor{comment}{//  general purpose alloc          Y         Y         Y         normal}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02527}02527 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02528}02528 \textcolor{comment}{// Unchunked allocations will probably return 16-\/aligned pointers. If}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02529}02529 \textcolor{comment}{// we 16-\/align the results, we have room for 4 pointers. For smaller}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02530}02530 \textcolor{comment}{// allocations that allow finer alignment, we can reduce the pointers.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02531}02531 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02532}02532 \textcolor{comment}{// The strategy is that given a pointer, assuming it has a header (only}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02533}02533 \textcolor{comment}{// the no-\/overhead allocations have no header), we can determine the}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02534}02534 \textcolor{comment}{// type of the header fields, and the number of them, by stepping backwards}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02535}02535 \textcolor{comment}{// through memory and looking at the tags in the bottom bits.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02536}02536 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02537}02537 \textcolor{comment}{// Implementation strategy:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02538}02538 \textcolor{comment}{//     chunked allocations come from the middle of chunks, and can't}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02539}02539 \textcolor{comment}{//     be freed. thefore they do not need to be on a sibling chain.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02540}02540 \textcolor{comment}{//     they may need child pointers if they have children.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02541}02541 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02542}02542 \textcolor{comment}{// chunked, with-\/children}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02543}02543 \textcolor{comment}{//     void *parent;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02544}02544 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02545}02545 \textcolor{comment}{// unchunked, no-\/children -\/-\/ reduced storage}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02546}02546 \textcolor{comment}{//     void *next\_sibling;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02547}02547 \textcolor{comment}{//     void *prev\_sibling\_nextp;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02548}02548 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02549}02549 \textcolor{comment}{// unchunked, general}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02550}02550 \textcolor{comment}{//     void *first\_child;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02551}02551 \textcolor{comment}{//     void *next\_sibling;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02552}02552 \textcolor{comment}{//     void *prev\_sibling\_nextp;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02553}02553 \textcolor{comment}{//     void *chunks;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02554}02554 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02555}02555 \textcolor{comment}{// so, if we code each of these fields with different bit patterns}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02556}02556 \textcolor{comment}{// (actually same one for next/prev/child), then we can identify which}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02557}02557 \textcolor{comment}{// each one is from the last field.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02558}02558 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02559}02559 STB\_EXTERN \textcolor{keywordtype}{void}  stb\_free(\textcolor{keywordtype}{void} *p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02560}02560 STB\_EXTERN \textcolor{keywordtype}{void} *stb\_malloc\_global(\textcolor{keywordtype}{size\_t} size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02561}02561 STB\_EXTERN \textcolor{keywordtype}{void} *stb\_malloc(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{size\_t} size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02562}02562 STB\_EXTERN \textcolor{keywordtype}{void} *stb\_malloc\_nofree(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{size\_t} size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02563}02563 STB\_EXTERN \textcolor{keywordtype}{void} *stb\_malloc\_leaf(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{size\_t} size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02564}02564 STB\_EXTERN \textcolor{keywordtype}{void} *stb\_malloc\_raw(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{size\_t} size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02565}02565 STB\_EXTERN \textcolor{keywordtype}{void} *stb\_realloc(\textcolor{keywordtype}{void} *ptr, \textcolor{keywordtype}{size\_t} newsize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02566}02566 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02567}02567 STB\_EXTERN \textcolor{keywordtype}{void} stb\_reassign(\textcolor{keywordtype}{void} *new\_context, \textcolor{keywordtype}{void} *ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02568}02568 STB\_EXTERN \textcolor{keywordtype}{void} stb\_malloc\_validate(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{void} *parent);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02569}02569 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02570}02570 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} stb\_alloc\_chunk\_size ;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02571}02571 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} stb\_alloc\_count\_free ;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02572}02572 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} stb\_alloc\_count\_alloc;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02573}02573 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} stb\_alloc\_alignment  ;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02574}02574 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02575}02575 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02576}02576 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02577}02577 \textcolor{keywordtype}{int} stb\_alloc\_chunk\_size  = 65536;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02578}02578 \textcolor{keywordtype}{int} stb\_alloc\_count\_free  = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02579}02579 \textcolor{keywordtype}{int} stb\_alloc\_count\_alloc = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02580}02580 \textcolor{keywordtype}{int} stb\_alloc\_alignment   = -\/16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02581}02581 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02582}02582 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_\_chunk}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02583}02583 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02584}02584    \textcolor{keyword}{struct }stb\_\_chunk *next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02585}02585    \textcolor{keywordtype}{int}                data\_left;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02586}02586    \textcolor{keywordtype}{int}                alloc;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02587}02587 \} stb\_\_chunk;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02588}02588 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02589}02589 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02590}02590 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02591}02591    \textcolor{keywordtype}{void} *  next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02592}02592    \textcolor{keywordtype}{void} ** prevn;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02593}02593 \} stb\_\_nochildren;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02594}02594 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02595}02595 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02596}02596 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02597}02597    \textcolor{keywordtype}{void} ** prevn;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02598}02598    \textcolor{keywordtype}{void} *  child;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02599}02599    \textcolor{keywordtype}{void} *  next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02600}02600    stb\_\_chunk *chunks;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02601}02601 \} stb\_\_alloc;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02602}02602 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02603}02603 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02604}02604 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02605}02605    stb\_\_alloc *parent;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02606}02606 \} stb\_\_chunked;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02607}02607 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02608}02608 \textcolor{preprocessor}{\#define STB\_\_PARENT          1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02609}02609 \textcolor{preprocessor}{\#define STB\_\_CHUNKS          2}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02610}02610 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02611}02611 \textcolor{keyword}{typedef} \textcolor{keyword}{enum}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02612}02612 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02613}02613    STB\_\_nochildren = 0,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02614}02614    STB\_\_chunked    = STB\_\_PARENT,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02615}02615    STB\_\_alloc      = STB\_\_CHUNKS,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02616}02616 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02617}02617    STB\_\_chunk\_raw  = 4,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02618}02618 \} stb\_\_alloc\_type;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02619}02619 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02620}02620 \textcolor{comment}{// these functions set the bottom bits of a pointer efficiently}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02621}02621 \textcolor{preprocessor}{\#define STB\_\_DECODE(x,v)  ((void *) ((char *) (x) -\/ (v)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02622}02622 \textcolor{preprocessor}{\#define STB\_\_ENCODE(x,v)  ((void *) ((char *) (x) + (v)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02623}02623 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02624}02624 \textcolor{preprocessor}{\#define stb\_\_parent(z)       (stb\_\_alloc *) STB\_\_DECODE((z)-\/>parent, STB\_\_PARENT)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02625}02625 \textcolor{preprocessor}{\#define stb\_\_chunks(z)       (stb\_\_chunk *) STB\_\_DECODE((z)-\/>chunks, STB\_\_CHUNKS)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02626}02626 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02627}02627 \textcolor{preprocessor}{\#define stb\_\_setparent(z,p)  (z)-\/>parent = (stb\_\_alloc *) STB\_\_ENCODE((p), STB\_\_PARENT)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02628}02628 \textcolor{preprocessor}{\#define stb\_\_setchunks(z,c)  (z)-\/>chunks = (stb\_\_chunk *) STB\_\_ENCODE((c), STB\_\_CHUNKS)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02629}02629 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02630}02630 \textcolor{keyword}{static} stb\_\_alloc stb\_\_alloc\_global =}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02631}02631 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02632}02632    NULL,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02633}02633    NULL,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02634}02634    NULL,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02635}02635    (stb\_\_chunk *) STB\_\_ENCODE(NULL, STB\_\_CHUNKS)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02636}02636 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02637}02637 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02638}02638 \textcolor{keyword}{static} stb\_\_alloc\_type stb\_\_identify(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02639}02639 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02640}02640    \textcolor{keywordtype}{void} **q = (\textcolor{keywordtype}{void} **) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02641}02641    \textcolor{keywordflow}{return} (stb\_\_alloc\_type) ((stb\_uinta) q[-\/1] \& 3);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02642}02642 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02643}02643 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02644}02644 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *** stb\_\_prevn(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02645}02645 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02646}02646    \textcolor{keywordflow}{if} (stb\_\_identify(p) == STB\_\_alloc) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02647}02647       stb\_\_alloc      *s = (stb\_\_alloc *) p -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02648}02648       \textcolor{keywordflow}{return} \&s-\/>prevn;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02649}02649    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02650}02650       stb\_\_nochildren *s = (stb\_\_nochildren *) p -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02651}02651       \textcolor{keywordflow}{return} \&s-\/>prevn;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02652}02652    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02653}02653 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02654}02654 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02655}02655 \textcolor{keywordtype}{void} stb\_free(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02656}02656 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02657}02657    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02658}02658 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02659}02659    \textcolor{comment}{// count frees so that unit tests can see what's happening}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02660}02660    ++stb\_alloc\_count\_free;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02661}02661 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02662}02662    \textcolor{keywordflow}{switch}(stb\_\_identify(p)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02663}02663       \textcolor{keywordflow}{case} STB\_\_chunked:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02664}02664          \textcolor{comment}{// freeing a chunked-\/block with children does nothing;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02665}02665          \textcolor{comment}{// they only get freed when the parent does}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02666}02666          \textcolor{comment}{// surely this is wrong, and it should free them immediately?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02667}02667          \textcolor{comment}{// otherwise how are they getting put on the right chain?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02668}02668          \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02669}02669       \textcolor{keywordflow}{case} STB\_\_nochildren: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02670}02670          stb\_\_nochildren *s = (stb\_\_nochildren *) p -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02671}02671          \textcolor{comment}{// unlink from sibling chain}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02672}02672          *(s-\/>prevn) = s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02673}02673          if (s-\/>next)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02674}02674             *stb\_\_prevn(s-\/>next) = s-\/>prevn;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02675}02675          free(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02676}02676          \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02677}02677       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02678}02678       \textcolor{keywordflow}{case} STB\_\_alloc: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02679}02679          stb\_\_alloc *s = (stb\_\_alloc *) p -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02680}02680          stb\_\_chunk *c, *n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02681}02681          \textcolor{keywordtype}{void} *q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02682}02682 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02683}02683          \textcolor{comment}{// unlink from sibling chain, if any}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02684}02684          *(s-\/>prevn) = s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02685}02685          if (s-\/>next)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02686}02686             *stb\_\_prevn(s-\/>next) = s-\/>prevn;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02687}02687 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02688}02688          \textcolor{comment}{// first free chunks}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02689}02689          c = (stb\_\_chunk *) stb\_\_chunks(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02690}02690          \textcolor{keywordflow}{while} (c != NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02691}02691             n = c-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02692}02692             stb\_alloc\_count\_free += c-\/>alloc;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02693}02693             free(c);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02694}02694             c = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02695}02695          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02696}02696 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02697}02697          \textcolor{comment}{// validating}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02698}02698          stb\_\_setchunks(s,NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02699}02699          s-\/>prevn = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02700}02700          s-\/>next = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02701}02701 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02702}02702          \textcolor{comment}{// now free children}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02703}02703          \textcolor{keywordflow}{while} ((q = s-\/>child) != NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02704}02704             stb\_free(q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02705}02705          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02706}02706 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02707}02707          \textcolor{comment}{// now free self}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02708}02708          free(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02709}02709          \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02710}02710       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02711}02711       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02712}02712          assert(0); \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02713}02713    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02714}02714 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02715}02715 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02716}02716 \textcolor{keywordtype}{void} stb\_malloc\_validate(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{void} *parent)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02717}02717 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02718}02718    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02719}02719 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02720}02720    \textcolor{keywordflow}{switch}(stb\_\_identify(p)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02721}02721       \textcolor{keywordflow}{case} STB\_\_chunked:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02722}02722          \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02723}02723       \textcolor{keywordflow}{case} STB\_\_nochildren: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02724}02724          stb\_\_nochildren *n = (stb\_\_nochildren *) p -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02725}02725          \textcolor{keywordflow}{if} (n-\/>prevn)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02726}02726             assert(*n-\/>prevn == p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02727}02727          \textcolor{keywordflow}{if} (n-\/>next) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02728}02728             assert(*stb\_\_prevn(n-\/>next) == \&n-\/>next);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02729}02729             stb\_malloc\_validate(n, parent);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02730}02730          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02731}02731          \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02732}02732       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02733}02733       \textcolor{keywordflow}{case} STB\_\_alloc: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02734}02734          stb\_\_alloc *s = (stb\_\_alloc *) p -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02735}02735 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02736}02736          \textcolor{keywordflow}{if} (s-\/>prevn)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02737}02737             assert(*s-\/>prevn == p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02738}02738 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02739}02739          \textcolor{keywordflow}{if} (s-\/>child) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02740}02740             assert(*stb\_\_prevn(s-\/>child) == \&s-\/>child);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02741}02741             stb\_malloc\_validate(s-\/>child, p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02742}02742          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02743}02743 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02744}02744          \textcolor{keywordflow}{if} (s-\/>next) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02745}02745             assert(*stb\_\_prevn(s-\/>next) == \&s-\/>next);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02746}02746             stb\_malloc\_validate(s-\/>next, parent);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02747}02747          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02748}02748          \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02749}02749       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02750}02750       \textcolor{keywordflow}{default}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02751}02751          assert(0); \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02752}02752    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02753}02753 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02754}02754 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02755}02755 \textcolor{keyword}{static} \textcolor{keywordtype}{void} * stb\_\_try\_chunk(stb\_\_chunk *c, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} align, \textcolor{keywordtype}{int} pre\_align)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02756}02756 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02757}02757    \textcolor{keywordtype}{char} *memblock = (\textcolor{keywordtype}{char} *) (c+1), *q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02758}02758    stb\_inta iq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02759}02759    \textcolor{keywordtype}{int} start\_offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02760}02760 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02761}02761    \textcolor{comment}{// we going to allocate at the end of the chunk, not the start. confusing,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02762}02762    \textcolor{comment}{// but it means we don't need both a 'limit' and a 'cur', just a 'cur'.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02763}02763    \textcolor{comment}{// the block ends at: p + c-\/>data\_left}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02764}02764    \textcolor{comment}{//   then we move back by size}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02765}02765    start\_offset = c-\/>data\_left -\/ size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02766}02766 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02767}02767    \textcolor{comment}{// now we need to check the alignment of that}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02768}02768    q = memblock + start\_offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02769}02769    iq = (stb\_inta) q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02770}02770    assert(\textcolor{keyword}{sizeof}(q) == \textcolor{keyword}{sizeof}(iq));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02771}02771 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02772}02772    \textcolor{comment}{// suppose align = 2}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02773}02773    \textcolor{comment}{// then we need to retreat iq far enough that (iq \& (2-\/1)) == 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02774}02774    \textcolor{comment}{// to get (iq \& (align-\/1)) = 0 requires subtracting (iq \& (align-\/1))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02775}02775 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02776}02776    start\_offset -\/= iq \& (align-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02777}02777    assert(((stb\_uinta) (memblock+start\_offset) \& (align-\/1)) == 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02778}02778 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02779}02779    \textcolor{comment}{// now, if that + pre\_align works, go for it!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02780}02780    start\_offset -\/= pre\_align;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02781}02781 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02782}02782    \textcolor{keywordflow}{if} (start\_offset >= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02783}02783       c-\/>data\_left = start\_offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02784}02784       \textcolor{keywordflow}{return} memblock + start\_offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02785}02785    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02786}02786 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02787}02787    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02788}02788 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02789}02789 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02790}02790 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_sort\_chunks(stb\_\_alloc *src)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02791}02791 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02792}02792    \textcolor{comment}{// of the first two chunks, put the chunk with more data left in it first}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02793}02793    stb\_\_chunk *c = stb\_\_chunks(src), *d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02794}02794    \textcolor{keywordflow}{if} (c == NULL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02795}02795    d = c-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02796}02796    \textcolor{keywordflow}{if} (d == NULL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02797}02797    \textcolor{keywordflow}{if} (c-\/>data\_left > d-\/>data\_left) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02798}02798 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02799}02799    c-\/>next = d-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02800}02800    d-\/>next = c;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02801}02801    stb\_\_setchunks(src, d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02802}02802 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02803}02803 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02804}02804 \textcolor{keyword}{static} \textcolor{keywordtype}{void} * stb\_\_alloc\_chunk(stb\_\_alloc *src, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} align, \textcolor{keywordtype}{int} pre\_align)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02805}02805 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02806}02806    \textcolor{keywordtype}{void} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02807}02807    stb\_\_chunk *c = stb\_\_chunks(src);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02808}02808 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02809}02809    \textcolor{keywordflow}{if} (c \&\& size <= stb\_alloc\_chunk\_size) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02810}02810 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02811}02811       p = stb\_\_try\_chunk(c, size, align, pre\_align);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02812}02812       \textcolor{keywordflow}{if} (p) \{ ++c-\/>alloc; \textcolor{keywordflow}{return} p; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02813}02813 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02814}02814       \textcolor{comment}{// try a second chunk to reduce wastage}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02815}02815       \textcolor{keywordflow}{if} (c-\/>next) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02816}02816          p = stb\_\_try\_chunk(c-\/>next, size, align, pre\_align);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02817}02817          \textcolor{keywordflow}{if} (p) \{ ++c-\/>alloc; \textcolor{keywordflow}{return} p; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02818}02818 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02819}02819          \textcolor{comment}{// put the bigger chunk first, since the second will get buried}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02820}02820          \textcolor{comment}{// the upshot of this is that, until it gets allocated from, chunk \#2}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02821}02821          \textcolor{comment}{// is always the largest remaining chunk. (could formalize}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02822}02822          \textcolor{comment}{// this with a heap!)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02823}02823          stb\_\_sort\_chunks(src);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02824}02824          c = stb\_\_chunks(src);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02825}02825       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02826}02826    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02827}02827 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02828}02828    \textcolor{comment}{// allocate a new chunk}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02829}02829    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02830}02830       stb\_\_chunk *n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02831}02831 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02832}02832       \textcolor{keywordtype}{int} chunk\_size = stb\_alloc\_chunk\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02833}02833       \textcolor{comment}{// we're going to allocate a new chunk to put this in}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02834}02834       \textcolor{keywordflow}{if} (size > chunk\_size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02835}02835          chunk\_size = size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02836}02836 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02837}02837       assert(\textcolor{keyword}{sizeof}(*n) + pre\_align <= 16);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02838}02838 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02839}02839       \textcolor{comment}{// loop trying to allocate a large enough chunk}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02840}02840       \textcolor{comment}{// the loop is because the alignment may cause problems if it's big...}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02841}02841       \textcolor{comment}{// and we don't know what our chunk alignment is going to be}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02842}02842       \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02843}02843          n = (stb\_\_chunk *) malloc(16 + chunk\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02844}02844          \textcolor{keywordflow}{if} (n == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02845}02845 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02846}02846          n-\/>data\_left = chunk\_size -\/ \textcolor{keyword}{sizeof}(*n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02847}02847 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02848}02848          p = stb\_\_try\_chunk(n, size, align, pre\_align);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02849}02849          \textcolor{keywordflow}{if} (p != NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02850}02850             n-\/>next = c;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02851}02851             stb\_\_setchunks(src, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02852}02852 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02853}02853             \textcolor{comment}{// if we just used up the whole block immediately,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02854}02854             \textcolor{comment}{// move the following chunk up}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02855}02855             n-\/>alloc = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02856}02856             \textcolor{keywordflow}{if} (size == chunk\_size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02857}02857                stb\_\_sort\_chunks(src);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02858}02858 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02859}02859             \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02860}02860          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02861}02861 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02862}02862          free(n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02863}02863          chunk\_size += 16+align;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02864}02864       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02865}02865    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02866}02866 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02867}02867 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02868}02868 \textcolor{keyword}{static} stb\_\_alloc * stb\_\_get\_context(\textcolor{keywordtype}{void} *context)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02869}02869 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02870}02870    \textcolor{keywordflow}{if} (context == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02871}02871       \textcolor{keywordflow}{return} \&stb\_\_alloc\_global;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02872}02872    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02873}02873       \textcolor{keywordtype}{int} u = stb\_\_identify(context);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02874}02874       \textcolor{comment}{// if context is chunked, grab parent}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02875}02875       \textcolor{keywordflow}{if} (u == STB\_\_chunked) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02876}02876          stb\_\_chunked *s = (stb\_\_chunked *) context -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02877}02877          \textcolor{keywordflow}{return} stb\_\_parent(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02878}02878       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02879}02879          \textcolor{keywordflow}{return} (stb\_\_alloc *) context -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02880}02880       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02881}02881    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02882}02882 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02883}02883 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02884}02884 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_insert\_alloc(stb\_\_alloc *src, stb\_\_alloc *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02885}02885 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02886}02886    s-\/>prevn = \&src-\/>child;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02887}02887    s-\/>next  = src-\/>child;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02888}02888    src-\/>child = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02889}02889    \textcolor{keywordflow}{if} (s-\/>next)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02890}02890       *stb\_\_prevn(s-\/>next) = \&s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02891}02891 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02892}02892 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02893}02893 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_insert\_nochild(stb\_\_alloc *src, stb\_\_nochildren *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02894}02894 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02895}02895    s-\/>prevn = \&src-\/>child;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02896}02896    s-\/>next  = src-\/>child;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02897}02897    src-\/>child = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02898}02898    \textcolor{keywordflow}{if} (s-\/>next)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02899}02899       *stb\_\_prevn(s-\/>next) = \&s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02900}02900 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02901}02901 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02902}02902 \textcolor{keyword}{static} \textcolor{keywordtype}{void} * malloc\_base(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{size\_t} size, stb\_\_alloc\_type t, \textcolor{keywordtype}{int} align)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02903}02903 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02904}02904    \textcolor{keywordtype}{void} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02905}02905 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02906}02906    stb\_\_alloc *src = stb\_\_get\_context(context);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02907}02907 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02908}02908    \textcolor{keywordflow}{if} (align <= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02909}02909       \textcolor{comment}{// compute worst-\/case C packed alignment}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02910}02910       \textcolor{comment}{// e.g. a 24-\/byte struct is 8-\/aligned}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02911}02911       \textcolor{keywordtype}{int} align\_proposed = 1 << stb\_lowbit8((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02912}02912 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02913}02913       \textcolor{keywordflow}{if} (align\_proposed < 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02914}02914          align\_proposed = 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02915}02915 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02916}02916       \textcolor{keywordflow}{if} (align\_proposed == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02917}02917          \textcolor{keywordflow}{if} (size == 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02918}02918             align\_proposed = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02919}02919          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02920}02920             align\_proposed = 256;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02921}02921       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02922}02922 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02923}02923       \textcolor{comment}{// a negative alignment means 'don't align any larger}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02924}02924       \textcolor{comment}{// than this'; so -\/16 means we align 1,2,4,8, or 16}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02925}02925 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02926}02926       \textcolor{keywordflow}{if} (align < 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02927}02927          \textcolor{keywordflow}{if} (align\_proposed > -\/align)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02928}02928             align\_proposed = -\/align;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02929}02929       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02930}02930 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02931}02931       align = align\_proposed;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02932}02932    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02933}02933 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02934}02934    assert(stb\_is\_pow2(align));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02935}02935 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02936}02936    \textcolor{comment}{// don't cause misalignment when allocating nochildren}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02937}02937    \textcolor{keywordflow}{if} (t == STB\_\_nochildren \&\& align > 8)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02938}02938       t = STB\_\_alloc;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02939}02939 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02940}02940    \textcolor{keywordflow}{switch} (t) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02941}02941       \textcolor{keywordflow}{case} STB\_\_alloc: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02942}02942          stb\_\_alloc *s = (stb\_\_alloc *) malloc(size + \textcolor{keyword}{sizeof}(*s));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02943}02943          \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02944}02944          p = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02945}02945          s-\/>child = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02946}02946          stb\_\_insert\_alloc(src, s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02947}02947 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02948}02948          stb\_\_setchunks(s,NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02949}02949          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02950}02950       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02951}02951 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02952}02952       \textcolor{keywordflow}{case} STB\_\_nochildren: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02953}02953          stb\_\_nochildren *s = (stb\_\_nochildren *) malloc(size + \textcolor{keyword}{sizeof}(*s));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02954}02954          \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02955}02955          p = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02956}02956          stb\_\_insert\_nochild(src, s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02957}02957          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02958}02958       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02959}02959 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02960}02960       \textcolor{keywordflow}{case} STB\_\_chunk\_raw: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02961}02961          p = stb\_\_alloc\_chunk(src, (\textcolor{keywordtype}{int}) size, align, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02962}02962          \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02963}02963          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02964}02964       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02965}02965 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02966}02966       \textcolor{keywordflow}{case} STB\_\_chunked: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02967}02967          stb\_\_chunked *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02968}02968          \textcolor{keywordflow}{if} (align < \textcolor{keyword}{sizeof}(\mbox{\hyperlink{unionstb__uintptr}{stb\_uintptr}})) align = \textcolor{keyword}{sizeof}(\mbox{\hyperlink{unionstb__uintptr}{stb\_uintptr}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02969}02969          s = (stb\_\_chunked *) stb\_\_alloc\_chunk(src, (\textcolor{keywordtype}{int}) size, align, \textcolor{keyword}{sizeof}(*s));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02970}02970          \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02971}02971          stb\_\_setparent(s, src);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02972}02972          p = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02973}02973          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02974}02974       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02975}02975 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02976}02976       \textcolor{keywordflow}{default}: p = NULL; assert(0); \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02977}02977    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02978}02978 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02979}02979    ++stb\_alloc\_count\_alloc;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02980}02980    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02981}02981 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02982}02982 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02983}02983 \textcolor{keywordtype}{void} *stb\_malloc\_global(\textcolor{keywordtype}{size\_t} size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02984}02984 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02985}02985    \textcolor{keywordflow}{return} malloc\_base(NULL, size, STB\_\_alloc, stb\_alloc\_alignment);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02986}02986 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02987}02987 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02988}02988 \textcolor{keywordtype}{void} *stb\_malloc(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{size\_t} size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02989}02989 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02990}02990    \textcolor{keywordflow}{return} malloc\_base(context, size, STB\_\_alloc, stb\_alloc\_alignment);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02991}02991 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02992}02992 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02993}02993 \textcolor{keywordtype}{void} *stb\_malloc\_nofree(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{size\_t} size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02994}02994 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02995}02995    \textcolor{keywordflow}{return} malloc\_base(context, size, STB\_\_chunked, stb\_alloc\_alignment);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02996}02996 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02997}02997 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02998}02998 \textcolor{keywordtype}{void} *stb\_malloc\_leaf(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{size\_t} size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l02999}02999 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03000}03000    \textcolor{keywordflow}{return} malloc\_base(context, size, STB\_\_nochildren, stb\_alloc\_alignment);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03001}03001 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03002}03002 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03003}03003 \textcolor{keywordtype}{void} *stb\_malloc\_raw(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{size\_t} size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03004}03004 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03005}03005    \textcolor{keywordflow}{return} malloc\_base(context, size, STB\_\_chunk\_raw, stb\_alloc\_alignment);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03006}03006 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03007}03007 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03008}03008 \textcolor{keywordtype}{char} *stb\_malloc\_string(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{size\_t} size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03009}03009 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03010}03010    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{char} *) malloc\_base(context, size, STB\_\_chunk\_raw, 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03011}03011 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03012}03012 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03013}03013 \textcolor{keywordtype}{void} *stb\_realloc(\textcolor{keywordtype}{void} *ptr, \textcolor{keywordtype}{size\_t} newsize)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03014}03014 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03015}03015    stb\_\_alloc\_type t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03016}03016 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03017}03017    \textcolor{keywordflow}{if} (ptr == NULL) \textcolor{keywordflow}{return} stb\_malloc(NULL, newsize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03018}03018    \textcolor{keywordflow}{if} (newsize == 0) \{ stb\_free(ptr); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03019}03019 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03020}03020    t = stb\_\_identify(ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03021}03021    assert(t == STB\_\_alloc || t == STB\_\_nochildren);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03022}03022 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03023}03023    \textcolor{keywordflow}{if} (t == STB\_\_alloc) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03024}03024       stb\_\_alloc *s = (stb\_\_alloc *) ptr -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03025}03025 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03026}03026       s = (stb\_\_alloc *) realloc(s, newsize + \textcolor{keyword}{sizeof}(*s));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03027}03027       \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03028}03028 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03029}03029       ptr = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03030}03030 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03031}03031       \textcolor{comment}{// update pointers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03032}03032       (*s-\/>prevn) = ptr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03033}03033       \textcolor{keywordflow}{if} (s-\/>next)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03034}03034          *stb\_\_prevn(s-\/>next) = \&s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03035}03035 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03036}03036       \textcolor{keywordflow}{if} (s-\/>child)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03037}03037          *stb\_\_prevn(s-\/>child) = \&s-\/>child;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03038}03038 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03039}03039       \textcolor{keywordflow}{return} ptr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03040}03040    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03041}03041       stb\_\_nochildren *s = (stb\_\_nochildren *) ptr -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03042}03042 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03043}03043       s = (stb\_\_nochildren *) realloc(ptr, newsize + \textcolor{keyword}{sizeof}(s));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03044}03044       \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03045}03045 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03046}03046       \textcolor{comment}{// update pointers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03047}03047       (*s-\/>prevn) = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03048}03048       \textcolor{keywordflow}{if} (s-\/>next)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03049}03049          *stb\_\_prevn(s-\/>next) = \&s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03050}03050 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03051}03051       \textcolor{keywordflow}{return} s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03052}03052    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03053}03053 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03054}03054 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03055}03055 \textcolor{keywordtype}{void} *stb\_realloc\_c(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{void} *ptr, \textcolor{keywordtype}{size\_t} newsize)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03056}03056 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03057}03057    \textcolor{keywordflow}{if} (ptr == NULL) \textcolor{keywordflow}{return} stb\_malloc(context, newsize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03058}03058    \textcolor{keywordflow}{if} (newsize == 0) \{ stb\_free(ptr); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03059}03059    \textcolor{comment}{// @TODO: verify you haven't changed contexts}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03060}03060    \textcolor{keywordflow}{return} stb\_realloc(ptr, newsize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03061}03061 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03062}03062 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03063}03063 \textcolor{keywordtype}{void} stb\_reassign(\textcolor{keywordtype}{void} *new\_context, \textcolor{keywordtype}{void} *ptr)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03064}03064 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03065}03065    stb\_\_alloc *src = stb\_\_get\_context(new\_context);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03066}03066 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03067}03067    stb\_\_alloc\_type t = stb\_\_identify(ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03068}03068    assert(t == STB\_\_alloc || t == STB\_\_nochildren);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03069}03069 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03070}03070    \textcolor{keywordflow}{if} (t == STB\_\_alloc) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03071}03071       stb\_\_alloc *s = (stb\_\_alloc *) ptr -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03072}03072 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03073}03073       \textcolor{comment}{// unlink from old}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03074}03074       *(s-\/>prevn) = s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03075}03075       if (s-\/>next)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03076}03076          *stb\_\_prevn(s-\/>next) = s-\/>prevn;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03077}03077 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03078}03078       stb\_\_insert\_alloc(src, s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03079}03079    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03080}03080       stb\_\_nochildren *s = (stb\_\_nochildren *) ptr -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03081}03081 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03082}03082       \textcolor{comment}{// unlink from old}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03083}03083       *(s-\/>prevn) = s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03084}03084       if (s-\/>next)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03085}03085          *stb\_\_prevn(s-\/>next) = s-\/>prevn;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03086}03086 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03087}03087       stb\_\_insert\_nochild(src, s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03088}03088    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03089}03089 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03090}03090 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03091}03091 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03092}03092 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03093}03093 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03095}03095 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03096}03096 \textcolor{comment}{//                                stb\_arr}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03097}03097 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03098}03098 \textcolor{comment}{//  An stb\_arr is directly useable as a pointer (use the actual type in your}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03099}03099 \textcolor{comment}{//  definition), but when it resizes, it returns a new pointer and you can't}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03100}03100 \textcolor{comment}{//  use the old one, so you have to be careful to copy-\/in-\/out as necessary.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03101}03101 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03102}03102 \textcolor{comment}{//  Use a NULL pointer as a 0-\/length array.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03103}03103 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03104}03104 \textcolor{comment}{//     float *my\_array = NULL, *temp;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03105}03105 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03106}03106 \textcolor{comment}{//     // add elements on the end one at a time}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03107}03107 \textcolor{comment}{//     stb\_arr\_push(my\_array, 0.0f);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03108}03108 \textcolor{comment}{//     stb\_arr\_push(my\_array, 1.0f);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03109}03109 \textcolor{comment}{//     stb\_arr\_push(my\_array, 2.0f);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03110}03110 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03111}03111 \textcolor{comment}{//     assert(my\_array[1] == 2.0f);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03112}03112 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03113}03113 \textcolor{comment}{//     // add an uninitialized element at the end, then assign it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03114}03114 \textcolor{comment}{//     *stb\_arr\_add(my\_array) = 3.0f;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03115}03115 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03116}03116 \textcolor{comment}{//     // add three uninitialized elements at the end}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03117}03117 \textcolor{comment}{//     temp = stb\_arr\_addn(my\_array,3);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03118}03118 \textcolor{comment}{//     temp[0] = 4.0f;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03119}03119 \textcolor{comment}{//     temp[1] = 5.0f;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03120}03120 \textcolor{comment}{//     temp[2] = 6.0f;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03121}03121 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03122}03122 \textcolor{comment}{//     assert(my\_array[5] == 5.0f);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03123}03123 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03124}03124 \textcolor{comment}{//     // remove the last one}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03125}03125 \textcolor{comment}{//     stb\_arr\_pop(my\_array);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03126}03126 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03127}03127 \textcolor{comment}{//     assert(stb\_arr\_len(my\_array) == 6);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03128}03128 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03129}03129 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03130}03130 \textcolor{preprocessor}{\#ifdef STB\_MALLOC\_WRAPPER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03131}03131 \textcolor{preprocessor}{  \#define STB\_\_PARAMS    , char *file, int line}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03132}03132 \textcolor{preprocessor}{  \#define STB\_\_ARGS      ,       file,     line}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03133}03133 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03134}03134 \textcolor{preprocessor}{  \#define STB\_\_PARAMS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03135}03135 \textcolor{preprocessor}{  \#define STB\_\_ARGS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03136}03136 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03137}03137 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03138}03138 \textcolor{comment}{// calling this function allocates an empty stb\_arr attached to p}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03139}03139 \textcolor{comment}{// (whereas NULL isn't attached to anything)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03140}03140 STB\_EXTERN \textcolor{keywordtype}{void} stb\_arr\_malloc(\textcolor{keywordtype}{void} **target, \textcolor{keywordtype}{void} *context);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03141}03141 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03142}03142 \textcolor{comment}{// call this function with a non-\/NULL value to have all successive}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03143}03143 \textcolor{comment}{// stbs that are created be attached to the associated parent. Note}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03144}03144 \textcolor{comment}{// that once a given stb\_arr is non-\/empty, it stays attached to its}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03145}03145 \textcolor{comment}{// current parent, even if you call this function again.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03146}03146 \textcolor{comment}{// it turns the previous value, so you can restore it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03147}03147 STB\_EXTERN \textcolor{keywordtype}{void}* stb\_arr\_malloc\_parent(\textcolor{keywordtype}{void} *p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03148}03148 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03149}03149 \textcolor{comment}{// simple functions written on top of other functions}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03150}03150 \textcolor{preprocessor}{\#define stb\_arr\_empty(a)       (  stb\_arr\_len(a) == 0 )}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03151}03151 \textcolor{preprocessor}{\#define stb\_arr\_add(a)         (  stb\_arr\_addn((a),1) )}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03152}03152 \textcolor{preprocessor}{\#define stb\_arr\_push(a,v)      ( *stb\_arr\_add(a)=(v)  )}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03153}03153 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03154}\mbox{\hyperlink{structstb____arr}{03154}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03155}03155 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03156}03156    \textcolor{keywordtype}{int} len, limit;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03157}03157    \textcolor{keywordtype}{int} stb\_malloc;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03158}03158    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} signature;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03159}03159 \} \mbox{\hyperlink{structstb____arr}{stb\_\_arr}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03160}03160 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03161}03161 \textcolor{preprocessor}{\#define stb\_arr\_signature      0x51bada7b  }\textcolor{comment}{// ends with 0123 in decimal}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03162}03162 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03163}03163 \textcolor{comment}{// access the header block stored before the data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03164}03164 \textcolor{preprocessor}{\#define stb\_arrhead(a)         }\textcolor{comment}{/*lint -\/-\/e(826)*/}\textcolor{preprocessor}{ (((stb\_\_arr *) (a)) -\/ 1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03165}03165 \textcolor{preprocessor}{\#define stb\_arrhead2(a)        }\textcolor{comment}{/*lint -\/-\/e(826)*/}\textcolor{preprocessor}{ (((stb\_\_arr *) (a)) -\/ 1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03166}03166 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03167}03167 \textcolor{preprocessor}{\#ifdef STB\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03168}03168 \textcolor{preprocessor}{\#define stb\_arr\_check(a)       assert(!a || stb\_arrhead(a)-\/>signature == stb\_arr\_signature)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03169}03169 \textcolor{preprocessor}{\#define stb\_arr\_check2(a)      assert(!a || stb\_arrhead2(a)-\/>signature == stb\_arr\_signature)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03170}03170 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03171}03171 \textcolor{preprocessor}{\#define stb\_arr\_check(a)       ((void) 0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03172}03172 \textcolor{preprocessor}{\#define stb\_arr\_check2(a)      ((void) 0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03173}03173 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03174}03174 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03175}03175 \textcolor{comment}{// ARRAY LENGTH}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03176}03176 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03177}03177 \textcolor{comment}{// get the array length; special case if pointer is NULL}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03178}03178 \textcolor{preprocessor}{\#define stb\_arr\_len(a)         (a ? stb\_arrhead(a)-\/>len : 0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03179}03179 \textcolor{preprocessor}{\#define stb\_arr\_len2(a)        ((stb\_\_arr *) (a) ? stb\_arrhead2(a)-\/>len : 0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03180}03180 \textcolor{preprocessor}{\#define stb\_arr\_lastn(a)       (stb\_arr\_len(a)-\/1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03181}03181 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03182}03182 \textcolor{comment}{// check whether a given index is valid -\/-\/ tests 0 <= i < stb\_arr\_len(a)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03183}03183 \textcolor{preprocessor}{\#define stb\_arr\_valid(a,i)     (a ? (int) (i) < stb\_arrhead(a)-\/>len : 0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03184}03184 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03185}03185 \textcolor{comment}{// change the array length so is is exactly N entries long, creating}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03186}03186 \textcolor{comment}{// uninitialized entries as needed}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03187}03187 \textcolor{preprocessor}{\#define stb\_arr\_setlen(a,n)  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03188}03188 \textcolor{preprocessor}{            (stb\_\_arr\_setlen((void **) \&(a), sizeof(a[0]), (n)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03189}03189 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03190}03190 \textcolor{comment}{// change the array length so that N is a valid index (that is, so}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03191}03191 \textcolor{comment}{// it is at least N entries long), creating uninitialized entries as needed}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03192}03192 \textcolor{preprocessor}{\#define stb\_arr\_makevalid(a,n)  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03193}03193 \textcolor{preprocessor}{            (stb\_arr\_len(a) < (n)+1 ? stb\_arr\_setlen(a,(n)+1),(a) : (a))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03194}03194 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03195}03195 \textcolor{comment}{// remove the last element of the array, returning it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03196}03196 \textcolor{preprocessor}{\#define stb\_arr\_pop(a)         ((stb\_arr\_check(a), (a))[-\/-\/stb\_arrhead(a)-\/>len])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03197}03197 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03198}03198 \textcolor{comment}{// access the last element in the array}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03199}03199 \textcolor{preprocessor}{\#define stb\_arr\_last(a)        ((stb\_arr\_check(a), (a))[stb\_arr\_len(a)-\/1])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03200}03200 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03201}03201 \textcolor{comment}{// is iterator at end of list?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03202}03202 \textcolor{preprocessor}{\#define stb\_arr\_end(a,i)       ((i) >= \&(a)[stb\_arr\_len(a)])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03203}03203 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03204}03204 \textcolor{comment}{// (internal) change the allocated length of the array}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03205}03205 \textcolor{preprocessor}{\#define stb\_arr\_\_grow(a,n)     (stb\_arr\_check(a), stb\_arrhead(a)-\/>len += (n))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03206}03206 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03207}03207 \textcolor{comment}{// add N new uninitialized elements to the end of the array}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03208}03208 \textcolor{preprocessor}{\#define stb\_arr\_\_addn(a,n)     }\textcolor{comment}{/*lint -\/-\/e(826)*/}\textcolor{preprocessor}{ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03209}03209 \textcolor{preprocessor}{                               ((stb\_arr\_len(a)+(n) > stb\_arrcurmax(a))      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03210}03210 \textcolor{preprocessor}{                                 ? (stb\_\_arr\_addlen((void **) \&(a),sizeof(*a),(n)),0) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03211}03211 \textcolor{preprocessor}{                                 : ((stb\_arr\_\_grow(a,n), 0)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03212}03212 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03213}03213 \textcolor{comment}{// add N new uninitialized elements to the end of the array, and return}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03214}03214 \textcolor{comment}{// a pointer to the first new one}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03215}03215 \textcolor{preprocessor}{\#define stb\_arr\_addn(a,n)      (stb\_arr\_\_addn((a),n),(a)+stb\_arr\_len(a)-\/(n))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03216}03216 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03217}03217 \textcolor{comment}{// add N new uninitialized elements starting at index 'i'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03218}03218 \textcolor{preprocessor}{\#define stb\_arr\_insertn(a,i,n) (stb\_\_arr\_insertn((void **) \&(a), sizeof(*a), (i), (n)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03219}03219 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03220}03220 \textcolor{comment}{// insert an element at i}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03221}03221 \textcolor{preprocessor}{\#define stb\_arr\_insert(a,i,v)  (stb\_\_arr\_insertn((void **) \&(a), sizeof(*a), (i), (1)), ((a)[i] = v))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03222}03222 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03223}03223 \textcolor{comment}{// delete N elements from the middle starting at index 'i'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03224}03224 \textcolor{preprocessor}{\#define stb\_arr\_deleten(a,i,n) (stb\_\_arr\_deleten((void **) \&(a), sizeof(*a), (i), (n)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03225}03225 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03226}03226 \textcolor{comment}{// delete the i'th element}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03227}03227 \textcolor{preprocessor}{\#define stb\_arr\_delete(a,i)   stb\_arr\_deleten(a,i,1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03228}03228 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03229}03229 \textcolor{comment}{// delete the i'th element, swapping down from the end}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03230}03230 \textcolor{preprocessor}{\#define stb\_arr\_fastdelete(a,i)  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03231}03231 \textcolor{preprocessor}{   (stb\_swap(\&a[i], \&a[stb\_arrhead(a)-\/>len-\/1], sizeof(*a)), stb\_arr\_pop(a))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03232}03232 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03233}03233 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03234}03234 \textcolor{comment}{// ARRAY STORAGE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03235}03235 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03236}03236 \textcolor{comment}{// get the array maximum storage; special case if NULL}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03237}03237 \textcolor{preprocessor}{\#define stb\_arrcurmax(a)       (a ? stb\_arrhead(a)-\/>limit : 0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03238}03238 \textcolor{preprocessor}{\#define stb\_arrcurmax2(a)      (a ? stb\_arrhead2(a)-\/>limit : 0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03239}03239 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03240}03240 \textcolor{comment}{// set the maxlength of the array to n in anticipation of further growth}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03241}03241 \textcolor{preprocessor}{\#define stb\_arr\_setsize(a,n)   (stb\_arr\_check(a), stb\_\_arr\_setsize((void **) \&(a),sizeof((a)[0]),n))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03242}03242 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03243}03243 \textcolor{comment}{// make sure maxlength is large enough for at least N new allocations}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03244}03244 \textcolor{preprocessor}{\#define stb\_arr\_atleast(a,n)   (stb\_arr\_len(a)+(n) > stb\_arrcurmax(a)      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03245}03245 \textcolor{preprocessor}{                                 ? stb\_arr\_setsize((a), (n)) : 0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03246}03246 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03247}03247 \textcolor{comment}{// make a copy of a given array (copies contents via 'memcpy'!)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03248}03248 \textcolor{preprocessor}{\#define stb\_arr\_copy(a)        stb\_\_arr\_copy(a, sizeof((a)[0]))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03249}03249 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03250}03250 \textcolor{comment}{// compute the storage needed to store all the elements of the array}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03251}03251 \textcolor{preprocessor}{\#define stb\_arr\_storage(a)     (stb\_arr\_len(a) * sizeof((a)[0]))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03252}03252 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03253}03253 \textcolor{preprocessor}{\#define stb\_arr\_for(v,arr)     for((v)=(arr); (v) < (arr)+stb\_arr\_len(arr); ++(v))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03254}03254 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03255}03255 \textcolor{comment}{// IMPLEMENTATION}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03256}03256 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03257}03257 STB\_EXTERN \textcolor{keywordtype}{void} stb\_arr\_free\_(\textcolor{keywordtype}{void} **p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03258}03258 STB\_EXTERN \textcolor{keywordtype}{void} *stb\_\_arr\_copy\_(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{int} elem\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03259}03259 STB\_EXTERN \textcolor{keywordtype}{void} stb\_\_arr\_setsize\_(\textcolor{keywordtype}{void} **p, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} limit  STB\_\_PARAMS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03260}03260 STB\_EXTERN \textcolor{keywordtype}{void} stb\_\_arr\_setlen\_(\textcolor{keywordtype}{void} **p, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} newlen  STB\_\_PARAMS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03261}03261 STB\_EXTERN \textcolor{keywordtype}{void} stb\_\_arr\_addlen\_(\textcolor{keywordtype}{void} **p, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} addlen  STB\_\_PARAMS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03262}03262 STB\_EXTERN \textcolor{keywordtype}{void} stb\_\_arr\_deleten\_(\textcolor{keywordtype}{void} **p, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} loc, \textcolor{keywordtype}{int} n  STB\_\_PARAMS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03263}03263 STB\_EXTERN \textcolor{keywordtype}{void} stb\_\_arr\_insertn\_(\textcolor{keywordtype}{void} **p, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} loc, \textcolor{keywordtype}{int} n  STB\_\_PARAMS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03264}03264 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03265}03265 \textcolor{preprocessor}{\#define stb\_arr\_free(p)            stb\_arr\_free\_((void **) \&(p))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03266}03266 \textcolor{preprocessor}{\#define stb\_\_arr\_copy              stb\_\_arr\_copy\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03267}03267 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03268}03268 \textcolor{preprocessor}{\#ifndef STB\_MALLOC\_WRAPPER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03269}03269 \textcolor{preprocessor}{  \#define stb\_\_arr\_setsize         stb\_\_arr\_setsize\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03270}03270 \textcolor{preprocessor}{  \#define stb\_\_arr\_setlen          stb\_\_arr\_setlen\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03271}03271 \textcolor{preprocessor}{  \#define stb\_\_arr\_addlen          stb\_\_arr\_addlen\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03272}03272 \textcolor{preprocessor}{  \#define stb\_\_arr\_deleten         stb\_\_arr\_deleten\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03273}03273 \textcolor{preprocessor}{  \#define stb\_\_arr\_insertn         stb\_\_arr\_insertn\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03274}03274 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03275}03275 \textcolor{preprocessor}{  \#define stb\_\_arr\_addlen(p,s,n)    stb\_\_arr\_addlen\_(p,s,n,\_\_FILE\_\_,\_\_LINE\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03276}03276 \textcolor{preprocessor}{  \#define stb\_\_arr\_setlen(p,s,n)    stb\_\_arr\_setlen\_(p,s,n,\_\_FILE\_\_,\_\_LINE\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03277}03277 \textcolor{preprocessor}{  \#define stb\_\_arr\_setsize(p,s,n)   stb\_\_arr\_setsize\_(p,s,n,\_\_FILE\_\_,\_\_LINE\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03278}03278 \textcolor{preprocessor}{  \#define stb\_\_arr\_deleten(p,s,i,n) stb\_\_arr\_deleten\_(p,s,i,n,\_\_FILE\_\_,\_\_LINE\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03279}03279 \textcolor{preprocessor}{  \#define stb\_\_arr\_insertn(p,s,i,n) stb\_\_arr\_insertn\_(p,s,i,n,\_\_FILE\_\_,\_\_LINE\_\_)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03280}03280 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03281}03281 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03282}03282 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03283}03283 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stb\_\_arr\_context;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03284}03284 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03285}03285 \textcolor{keywordtype}{void} *stb\_arr\_malloc\_parent(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03286}03286 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03287}03287    \textcolor{keywordtype}{void} *q = stb\_\_arr\_context;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03288}03288    stb\_\_arr\_context = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03289}03289    \textcolor{keywordflow}{return} q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03290}03290 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03291}03291 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03292}03292 \textcolor{keywordtype}{void} stb\_arr\_malloc(\textcolor{keywordtype}{void} **target, \textcolor{keywordtype}{void} *context)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03293}03293 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03294}03294    \mbox{\hyperlink{structstb____arr}{stb\_\_arr}} *q = (\mbox{\hyperlink{structstb____arr}{stb\_\_arr}} *) stb\_malloc(context, \textcolor{keyword}{sizeof}(*q));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03295}03295    q-\/>len = q-\/>limit = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03296}03296    q-\/>stb\_malloc = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03297}03297    q-\/>signature = stb\_arr\_signature;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03298}03298    *target = (\textcolor{keywordtype}{void} *) (q+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03299}03299 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03300}03300 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03301}03301 \textcolor{keyword}{static} \textcolor{keywordtype}{void} * stb\_\_arr\_malloc(\textcolor{keywordtype}{int} size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03302}03302 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03303}03303    \textcolor{keywordflow}{if} (stb\_\_arr\_context)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03304}03304       \textcolor{keywordflow}{return} stb\_malloc(stb\_\_arr\_context, size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03305}03305    \textcolor{keywordflow}{return} malloc(size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03306}03306 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03307}03307 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03308}03308 \textcolor{keywordtype}{void} * stb\_\_arr\_copy\_(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{int} elem\_size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03309}03309 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03310}03310    \mbox{\hyperlink{structstb____arr}{stb\_\_arr}} *q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03311}03311    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03312}03312    q = (\mbox{\hyperlink{structstb____arr}{stb\_\_arr}} *) stb\_\_arr\_malloc(\textcolor{keyword}{sizeof}(*q) + elem\_size * stb\_arrhead2(p)-\/>limit);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03313}03313    stb\_arr\_check2(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03314}03314    memcpy(q, stb\_arrhead2(p), \textcolor{keyword}{sizeof}(*q) + elem\_size * stb\_arrhead2(p)-\/>len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03315}03315    q-\/>stb\_malloc = !!stb\_\_arr\_context;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03316}03316    \textcolor{keywordflow}{return} q+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03317}03317 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03318}03318 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03319}03319 \textcolor{keywordtype}{void} stb\_arr\_free\_(\textcolor{keywordtype}{void} **pp)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03320}03320 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03321}03321    \textcolor{keywordtype}{void} *p = *pp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03322}03322    stb\_arr\_check2(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03323}03323    \textcolor{keywordflow}{if} (p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03324}03324       \mbox{\hyperlink{structstb____arr}{stb\_\_arr}} *q = stb\_arrhead2(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03325}03325       \textcolor{keywordflow}{if} (q-\/>stb\_malloc)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03326}03326          stb\_free(q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03327}03327       \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03328}03328          free(q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03329}03329    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03330}03330    *pp = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03331}03331 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03332}03332 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03333}03333 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_arrsize\_(\textcolor{keywordtype}{void} **pp, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} limit, \textcolor{keywordtype}{int} len  STB\_\_PARAMS)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03334}03334 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03335}03335    \textcolor{keywordtype}{void} *p = *pp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03336}03336    \mbox{\hyperlink{structstb____arr}{stb\_\_arr}} *a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03337}03337    stb\_arr\_check2(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03338}03338    \textcolor{keywordflow}{if} (p == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03339}03339       \textcolor{keywordflow}{if} (len == 0 \&\& size == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03340}03340       a = (\mbox{\hyperlink{structstb____arr}{stb\_\_arr}} *) stb\_\_arr\_malloc(\textcolor{keyword}{sizeof}(*a) + size*limit);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03341}03341       a-\/>limit = limit;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03342}03342       a-\/>len   = len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03343}03343       a-\/>stb\_malloc = !!stb\_\_arr\_context;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03344}03344       a-\/>signature = stb\_arr\_signature;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03345}03345    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03346}03346       a = stb\_arrhead2(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03347}03347       a-\/>len = len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03348}03348       \textcolor{keywordflow}{if} (a-\/>limit < limit) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03349}03349          \textcolor{keywordtype}{void} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03350}03350          \textcolor{keywordflow}{if} (a-\/>limit >= 4 \&\& limit < a-\/>limit * 2)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03351}03351             limit = a-\/>limit * 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03352}03352          \textcolor{keywordflow}{if} (a-\/>stb\_malloc)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03353}03353             p = stb\_realloc(a, \textcolor{keyword}{sizeof}(*a) + limit*size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03354}03354          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03355}03355 \textcolor{preprocessor}{            \#ifdef STB\_MALLOC\_WRAPPER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03356}03356             p = stb\_\_realloc(a, \textcolor{keyword}{sizeof}(*a) + limit*size, file, line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03357}03357 \textcolor{preprocessor}{            \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03358}03358             p = realloc(a, \textcolor{keyword}{sizeof}(*a) + limit*size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03359}03359 \textcolor{preprocessor}{            \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03360}03360          \textcolor{keywordflow}{if} (p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03361}03361             a = (\mbox{\hyperlink{structstb____arr}{stb\_\_arr}} *) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03362}03362             a-\/>limit = limit;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03363}03363          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03364}03364             \textcolor{comment}{// throw an error!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03365}03365          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03366}03366       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03367}03367    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03368}03368    a-\/>len   = stb\_min(a-\/>len, a-\/>limit);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03369}03369    *pp = a+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03370}03370 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03371}03371 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03372}03372 \textcolor{keywordtype}{void} stb\_\_arr\_setsize\_(\textcolor{keywordtype}{void} **pp, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} limit  STB\_\_PARAMS)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03373}03373 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03374}03374    \textcolor{keywordtype}{void} *p = *pp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03375}03375    stb\_arr\_check2(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03376}03376    stb\_\_arrsize\_(pp, size, limit, stb\_arr\_len2(p)  STB\_\_ARGS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03377}03377 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03378}03378 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03379}03379 \textcolor{keywordtype}{void} stb\_\_arr\_setlen\_(\textcolor{keywordtype}{void} **pp, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} newlen  STB\_\_PARAMS)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03380}03380 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03381}03381    \textcolor{keywordtype}{void} *p = *pp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03382}03382    stb\_arr\_check2(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03383}03383    \textcolor{keywordflow}{if} (stb\_arrcurmax2(p) < newlen || p == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03384}03384       stb\_\_arrsize\_(pp, size, newlen, newlen  STB\_\_ARGS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03385}03385    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03386}03386       stb\_arrhead2(p)-\/>len = newlen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03387}03387    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03388}03388 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03389}03389 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03390}03390 \textcolor{keywordtype}{void} stb\_\_arr\_addlen\_(\textcolor{keywordtype}{void} **p, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} addlen  STB\_\_PARAMS)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03391}03391 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03392}03392    stb\_\_arr\_setlen\_(p, size, stb\_arr\_len2(*p) + addlen  STB\_\_ARGS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03393}03393 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03394}03394 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03395}03395 \textcolor{keywordtype}{void} stb\_\_arr\_insertn\_(\textcolor{keywordtype}{void} **pp, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} i, \textcolor{keywordtype}{int} n  STB\_\_PARAMS)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03396}03396 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03397}03397    \textcolor{keywordtype}{void} *p = *pp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03398}03398    \textcolor{keywordflow}{if} (n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03399}03399       \textcolor{keywordtype}{int} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03400}03400 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03401}03401       \textcolor{keywordflow}{if} (p == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03402}03402          stb\_\_arr\_addlen\_(pp, size, n  STB\_\_ARGS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03403}03403          \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03404}03404       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03405}03405 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03406}03406       z = stb\_arr\_len2(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03407}03407       stb\_\_arr\_addlen\_(\&p, size, n  STB\_\_ARGS);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03408}03408       memmove((\textcolor{keywordtype}{char} *) p + (i+n)*size, (\textcolor{keywordtype}{char} *) p + i*size, size * (z-\/i));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03409}03409    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03410}03410    *pp = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03411}03411 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03412}03412 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03413}03413 \textcolor{keywordtype}{void} stb\_\_arr\_deleten\_(\textcolor{keywordtype}{void} **pp, \textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} i, \textcolor{keywordtype}{int} n  STB\_\_PARAMS)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03414}03414 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03415}03415    \textcolor{keywordtype}{void} *p = *pp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03416}03416    \textcolor{keywordflow}{if} (n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03417}03417       memmove((\textcolor{keywordtype}{char} *) p + i*size, (\textcolor{keywordtype}{char} *) p + (i+n)*size, size * (stb\_arr\_len2(p)-\/(i+n)));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03418}03418       stb\_arrhead2(p)-\/>len -\/= n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03419}03419    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03420}03420    *pp = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03421}03421 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03422}03422 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03423}03423 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03424}03424 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03426}03426 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03427}03427 \textcolor{comment}{//                               Hashing}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03428}03428 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03429}03429 \textcolor{comment}{//      typical use for this is to make a power-\/of-\/two hash table.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03430}03430 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03431}03431 \textcolor{comment}{//      let N = size of table (2\string^n)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03432}03432 \textcolor{comment}{//      let H = stb\_hash(str)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03433}03433 \textcolor{comment}{//      let S = stb\_rehash(H) | 1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03434}03434 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03435}03435 \textcolor{comment}{//      then hash probe sequence P(i) for i=0..N-\/1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03436}03436 \textcolor{comment}{//         P(i) = (H + S*i) \& (N-\/1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03437}03437 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03438}03438 \textcolor{comment}{//      the idea is that H has 32 bits of hash information, but the}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03439}03439 \textcolor{comment}{//      table has only, say, 2\string^20 entries so only uses 20 of the bits.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03440}03440 \textcolor{comment}{//      then by rehashing the original H we get 2\string^12 different probe}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03441}03441 \textcolor{comment}{//      sequences for a given initial probe location. (So it's optimal}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03442}03442 \textcolor{comment}{//      for 64K tables and its optimality decreases past that.)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03443}03443 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03444}03444 \textcolor{comment}{//      ok, so I've added something that generates \_two separate\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03445}03445 \textcolor{comment}{//      32-\/bit hashes simultaneously which should scale better to}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03446}03446 \textcolor{comment}{//      very large tables.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03447}03447 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03448}03448 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03449}03449 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hash(\textcolor{keywordtype}{char} *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03450}03450 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hashptr(\textcolor{keywordtype}{void} *p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03451}03451 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hashlen(\textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03452}03452 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_rehash\_improved(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03453}03453 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hash\_fast(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03454}03454 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hash2(\textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *hash2\_ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03455}03455 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hash\_number(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} hash);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03456}03456 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03457}03457 \textcolor{preprocessor}{\#define stb\_rehash(x)  ((x) + ((x) >> 6) + ((x) >> 19))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03458}03458 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03459}03459 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03460}03460 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hash(\textcolor{keywordtype}{char} *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03461}03461 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03462}03462    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} hash = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03463}03463    \textcolor{keywordflow}{while} (*str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03464}03464       hash = (hash << 7) + (hash >> 25) + *str++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03465}03465    \textcolor{keywordflow}{return} hash + (hash >> 16);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03466}03466 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03467}03467 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03468}03468 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hashlen(\textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03469}03469 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03470}03470    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} hash = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03471}03471    \textcolor{keywordflow}{while} (len-\/-\/ > 0 \&\& *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03472}03472       hash = (hash << 7) + (hash >> 25) + *str++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03473}03473    \textcolor{keywordflow}{return} hash + (hash >> 16);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03474}03474 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03475}03475 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03476}03476 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hashptr(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03477}03477 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03478}03478     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} x = (\textcolor{keywordtype}{unsigned} int)(\textcolor{keywordtype}{size\_t}) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03479}03479 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03480}03480    \textcolor{comment}{// typically lacking in low bits and high bits}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03481}03481    x = stb\_rehash(x);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03482}03482    x += x << 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03483}03483 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03484}03484    \textcolor{comment}{// pearson's shuffle}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03485}03485    x \string^= x << 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03486}03486    x += x >> 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03487}03487    x \string^= x << 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03488}03488    x += x >> 15;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03489}03489    x \string^= x << 10;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03490}03490    \textcolor{keywordflow}{return} stb\_rehash(x);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03491}03491 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03492}03492 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03493}03493 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_rehash\_improved(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03494}03494 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03495}03495    \textcolor{keywordflow}{return} stb\_hashptr((\textcolor{keywordtype}{void} *)(\textcolor{keywordtype}{size\_t}) v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03496}03496 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03497}03497 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03498}03498 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hash2(\textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *hash2\_ptr)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03499}03499 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03500}03500    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} hash1 = 0x3141592c;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03501}03501    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} hash2 = 0x77f044ed;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03502}03502    \textcolor{keywordflow}{while} (*str) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03503}03503       hash1 = (hash1 << 7) + (hash1 >> 25) + *str;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03504}03504       hash2 = (hash2 << 11) + (hash2 >> 21) + *str;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03505}03505       ++str;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03506}03506    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03507}03507    *hash2\_ptr = hash2 + (hash1 >> 16);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03508}03508    \textcolor{keywordflow}{return}       hash1 + (hash2 >> 16);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03509}03509 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03510}03510 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03511}03511 \textcolor{comment}{// Paul Hsieh hash}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03512}03512 \textcolor{preprocessor}{\#define stb\_\_get16(p) ((p)[0] | ((p)[1] << 8))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03513}03513 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03514}03514 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hash\_fast(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03515}03515 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03516}03516    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *q = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03517}03517    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} hash = len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03518}03518 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03519}03519    \textcolor{keywordflow}{if} (len <= 0 || q == NULL) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03520}03520 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03521}03521    \textcolor{comment}{/* Main loop */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03522}03522    \textcolor{keywordflow}{for} (;len > 3; len -\/= 4) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03523}03523       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} val;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03524}03524       hash +=  stb\_\_get16(q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03525}03525       val   = (stb\_\_get16(q+2) << 11);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03526}03526       hash  = (hash << 16) \string^ hash \string^ val;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03527}03527       q    += 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03528}03528       hash += hash >> 11;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03529}03529    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03530}03530 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03531}03531    \textcolor{comment}{/* Handle end cases */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03532}03532    \textcolor{keywordflow}{switch} (len) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03533}03533       \textcolor{keywordflow}{case} 3: hash += stb\_\_get16(q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03534}03534               hash \string^= hash << 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03535}03535               hash \string^= q[2] << 18;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03536}03536               hash += hash >> 11;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03537}03537               \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03538}03538       \textcolor{keywordflow}{case} 2: hash += stb\_\_get16(q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03539}03539               hash \string^= hash << 11;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03540}03540               hash += hash >> 17;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03541}03541               \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03542}03542       \textcolor{keywordflow}{case} 1: hash += q[0];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03543}03543               hash \string^= hash << 10;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03544}03544               hash += hash >> 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03545}03545               \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03546}03546       \textcolor{keywordflow}{case} 0: \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03547}03547    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03548}03548 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03549}03549    \textcolor{comment}{/* Force "{}avalanching"{} of final 127 bits */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03550}03550    hash \string^= hash << 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03551}03551    hash += hash >> 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03552}03552    hash \string^= hash << 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03553}03553    hash += hash >> 17;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03554}03554    hash \string^= hash << 25;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03555}03555    hash += hash >> 6;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03556}03556 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03557}03557    \textcolor{keywordflow}{return} hash;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03558}03558 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03559}03559 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03560}03560 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_hash\_number(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} hash)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03561}03561 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03562}03562    hash \string^= hash << 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03563}03563    hash += hash >> 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03564}03564    hash \string^= hash << 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03565}03565    hash += hash >> 17;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03566}03566    hash \string^= hash << 25;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03567}03567    hash += hash >> 6;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03568}03568    \textcolor{keywordflow}{return} hash;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03569}03569 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03570}03570 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03571}03571 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03572}03572 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03573}03573 \textcolor{preprocessor}{\#ifdef STB\_PERFECT\_HASH}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03575}03575 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03576}03576 \textcolor{comment}{//                     Perfect hashing for ints/pointers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03577}03577 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03578}03578 \textcolor{comment}{//   This is mainly useful for making faster pointer-\/indexed tables}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03579}03579 \textcolor{comment}{//   that don't change frequently. E.g. for stb\_ischar().}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03580}03580 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03581}03581 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03582}03582 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03583}03583 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03584}03584    stb\_uint32  addend;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03585}03585    stb\_uint    multiplicand;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03586}03586    stb\_uint    b\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03587}03587    stb\_uint8   small\_bmap[16];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03588}03588    stb\_uint16  *large\_bmap;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03589}03589 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03590}03590    stb\_uint table\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03591}03591    stb\_uint32 *\mbox{\hyperlink{structtable}{table}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03592}03592 \} stb\_perfect;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03593}03593 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03594}03594 STB\_EXTERN \textcolor{keywordtype}{int} stb\_perfect\_create(stb\_perfect *,\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}*,\textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03595}03595 STB\_EXTERN \textcolor{keywordtype}{void} stb\_perfect\_destroy(stb\_perfect *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03596}03596 STB\_EXTERN \textcolor{keywordtype}{int} stb\_perfect\_hash(stb\_perfect *, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} x);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03597}03597 \textcolor{keyword}{extern} \textcolor{keywordtype}{int} stb\_perfect\_hash\_max\_failures;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03598}03598 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03599}03599 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03600}03600 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03601}03601 \textcolor{keywordtype}{int} stb\_perfect\_hash\_max\_failures;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03602}03602 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03603}03603 \textcolor{keywordtype}{int} stb\_perfect\_hash(stb\_perfect *p, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} x)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03604}03604 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03605}03605    stb\_uint m = x * p-\/>multiplicand;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03606}03606    stb\_uint y = x >> 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03607}03607    stb\_uint bv = (m >> 24) + y;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03608}03608    stb\_uint av = (m + y) >> 12;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03609}03609    \textcolor{keywordflow}{if} (p-\/>table == NULL) \textcolor{keywordflow}{return} -\/1;  \textcolor{comment}{// uninitialized table fails}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03610}03610    bv \&= p-\/>b\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03611}03611    av \&= p-\/>table\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03612}03612    \textcolor{keywordflow}{if} (p-\/>large\_bmap)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03613}03613       av \string^= p-\/>large\_bmap[bv];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03614}03614    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03615}03615       av \string^= p-\/>small\_bmap[bv];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03616}03616    \textcolor{keywordflow}{return} p-\/>table[av] == x ? av : -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03617}03617 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03618}03618 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03619}03619 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_perfect\_prehash(stb\_perfect *p, stb\_uint x, stb\_uint16 *a, stb\_uint16 *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03620}03620 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03621}03621    stb\_uint m = x * p-\/>multiplicand;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03622}03622    stb\_uint y = x >> 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03623}03623    stb\_uint bv = (m >> 24) + y;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03624}03624    stb\_uint av = (m + y) >> 12;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03625}03625    bv \&= p-\/>b\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03626}03626    av \&= p-\/>table\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03627}03627    *b = bv;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03628}03628    *a = av;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03629}03629 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03630}03630 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03631}03631 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} stb\_\_perfect\_rand(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03632}03632 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03633}03633    \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} stb\_\_rand;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03634}03634    stb\_\_rand = stb\_\_rand * 2147001325 + 715136305;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03635}03635    \textcolor{keywordflow}{return} 0x31415926 \string^ ((stb\_\_rand >> 16) + (stb\_\_rand << 16));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03636}03636 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03637}03637 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03638}03638 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03639}03639    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03640}03640    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} b;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03641}03641    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} map;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03642}03642    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *entries;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03643}03643 \} stb\_\_slot;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03644}03644 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03645}03645 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_slot\_compare(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *p, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *q)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03646}03646 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03647}03647    stb\_\_slot *a = (stb\_\_slot *) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03648}03648    stb\_\_slot *b = (stb\_\_slot *) q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03649}03649    \textcolor{keywordflow}{return} a-\/>count > b-\/>count ? -\/1 : a-\/>count < b-\/>count;  \textcolor{comment}{// sort large to small}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03650}03650 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03651}03651 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03652}03652 \textcolor{keywordtype}{int} stb\_perfect\_create(stb\_perfect *p, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *v, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03653}03653 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03654}03654    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} buffer1[64], buffer2[64], buffer3[64], buffer4[64], buffer5[32];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03655}03655    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *as = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *) stb\_temp(buffer1, \textcolor{keyword}{sizeof}(*v)*n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03656}03656    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *bs = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *) stb\_temp(buffer2, \textcolor{keyword}{sizeof}(*v)*n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03657}03657    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *entries = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *) stb\_temp(buffer4, \textcolor{keyword}{sizeof}(*entries) * n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03658}03658    \textcolor{keywordtype}{int} size = 1 << stb\_log2\_ceil(n), bsize=8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03659}03659    \textcolor{keywordtype}{int} failure = 0,i,j,k;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03660}03660 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03661}03661    assert(n <= 32768);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03662}03662    p-\/>large\_bmap = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03663}03663 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03664}03664    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03665}03665       stb\_\_slot *bcount = (stb\_\_slot *) stb\_temp(buffer3, \textcolor{keyword}{sizeof}(*bcount) * bsize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03666}03666       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *bloc = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *) stb\_temp(buffer5, \textcolor{keyword}{sizeof}(*bloc) * bsize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03667}03667       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03668}03668       \textcolor{keywordtype}{int} bad=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03669}03669 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03670}03670       p-\/>addend = stb\_\_perfect\_rand();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03671}03671       p-\/>multiplicand = stb\_\_perfect\_rand() | 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03672}03672       p-\/>table\_mask = size-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03673}03673       p-\/>b\_mask = bsize-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03674}03674       p-\/>table = (stb\_uint32 *) malloc(size * \textcolor{keyword}{sizeof}(*p-\/>table));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03675}03675 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03676}03676       \textcolor{keywordflow}{for} (i=0; i < bsize; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03677}03677          bcount[i].b     = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03678}03678          bcount[i].count = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03679}03679          bcount[i].map   = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03680}03680       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03681}03681       \textcolor{keywordflow}{for} (i=0; i < n; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03682}03682          stb\_\_perfect\_prehash(p, v[i], as+i, bs+i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03683}03683          ++bcount[bs[i]].count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03684}03684       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03685}03685       qsort(bcount, bsize, \textcolor{keyword}{sizeof}(*bcount), stb\_\_slot\_compare);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03686}03686       \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} = entries; \textcolor{comment}{// now setup up their entries index}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03687}03687       \textcolor{keywordflow}{for} (i=0; i < bsize; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03688}03688          bcount[i].entries = \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03689}03689          \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} += bcount[i].count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03690}03690          bcount[i].count = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03691}03691          bloc[bcount[i].b] = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03692}03692       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03693}03693       \textcolor{comment}{// now fill them out}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03694}03694       \textcolor{keywordflow}{for} (i=0; i < n; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03695}03695          \textcolor{keywordtype}{int} b = bs[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03696}03696          \textcolor{keywordtype}{int} w = bloc[b];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03697}03697          bcount[w].entries[bcount[w].count++] = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03698}03698       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03699}03699       stb\_tempfree(buffer5,bloc);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03700}03700       \textcolor{comment}{// verify}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03701}03701       \textcolor{keywordflow}{for} (i=0; i < bsize; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03702}03702          \textcolor{keywordflow}{for} (j=0; j < bcount[i].count; ++j)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03703}03703             assert(bs[bcount[i].entries[j]] == bcount[i].b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03704}03704       memset(p-\/>table, 0, size*\textcolor{keyword}{sizeof}(*p-\/>table));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03705}03705 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03706}03706       \textcolor{comment}{// check if any b has duplicate a}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03707}03707       \textcolor{keywordflow}{for} (i=0; i < bsize; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03708}03708          \textcolor{keywordflow}{if} (bcount[i].count > 1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03709}03709             \textcolor{keywordflow}{for} (j=0; j < bcount[i].count; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03710}03710                \textcolor{keywordflow}{if} (p-\/>table[as[bcount[i].entries[j]]])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03711}03711                   bad = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03712}03712                p-\/>table[as[bcount[i].entries[j]]] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03713}03713             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03714}03714             \textcolor{keywordflow}{for} (j=0; j < bcount[i].count; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03715}03715                p-\/>table[as[bcount[i].entries[j]]] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03716}03716             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03717}03717             \textcolor{keywordflow}{if} (bad) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03718}03718          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03719}03719       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03720}03720 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03721}03721       \textcolor{keywordflow}{if} (!bad) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03722}03722          \textcolor{comment}{// go through the bs and populate the table, first fit}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03723}03723          \textcolor{keywordflow}{for} (i=0; i < bsize; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03724}03724             \textcolor{keywordflow}{if} (bcount[i].count) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03725}03725                \textcolor{comment}{// go through the candidate table[b] values}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03726}03726                \textcolor{keywordflow}{for} (j=0; j < size; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03727}03727                   \textcolor{comment}{// go through the a values and see if they fit}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03728}03728                   \textcolor{keywordflow}{for} (k=0; k < bcount[i].count; ++k) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03729}03729                      \textcolor{keywordtype}{int} a = as[bcount[i].entries[k]];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03730}03730                      \textcolor{keywordflow}{if} (p-\/>table[(a\string^j)\&p-\/>table\_mask]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03731}03731                         \textcolor{keywordflow}{break}; \textcolor{comment}{// fails}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03732}03732                      \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03733}03733                   \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03734}03734                   \textcolor{comment}{// if succeeded, accept}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03735}03735                   \textcolor{keywordflow}{if} (k == bcount[i].count) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03736}03736                      bcount[i].map = j;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03737}03737                      \textcolor{keywordflow}{for} (k=0; k < bcount[i].count; ++k) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03738}03738                         \textcolor{keywordtype}{int} a = as[bcount[i].entries[k]];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03739}03739                         p-\/>table[(a\string^j)\&p-\/>table\_mask] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03740}03740                      \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03741}03741                      \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03742}03742                   \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03743}03743                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03744}03744                \textcolor{keywordflow}{if} (j == size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03745}03745                   \textcolor{keywordflow}{break}; \textcolor{comment}{// no match for i'th entry, so break out in failure}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03746}03746             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03747}03747          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03748}03748          \textcolor{keywordflow}{if} (i == bsize) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03749}03749             \textcolor{comment}{// success... fill out map}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03750}03750             \textcolor{keywordflow}{if} (bsize <= 16 \&\& size <= 256) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03751}03751                p-\/>large\_bmap = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03752}03752                \textcolor{keywordflow}{for} (i=0; i < bsize; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03753}03753                   p-\/>small\_bmap[bcount[i].b] = (stb\_uint8) bcount[i].map;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03754}03754             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03755}03755                p-\/>large\_bmap = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *) malloc(\textcolor{keyword}{sizeof}(*p-\/>large\_bmap) * bsize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03756}03756                \textcolor{keywordflow}{for} (i=0; i < bsize; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03757}03757                   p-\/>large\_bmap[bcount[i].b] = bcount[i].map;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03758}03758             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03759}03759 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03760}03760             \textcolor{comment}{// initialize table to v[0], so empty slots will fail}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03761}03761             \textcolor{keywordflow}{for} (i=0; i < size; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03762}03762                p-\/>table[i] = v[0];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03763}03763 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03764}03764             for (i=0; i < n; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03765}03765                \textcolor{keywordflow}{if} (p-\/>large\_bmap)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03766}03766                   p-\/>table[as[i] \string^ p-\/>large\_bmap[bs[i]]] = v[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03767}03767                \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03768}03768                   p-\/>table[as[i] \string^ p-\/>small\_bmap[bs[i]]] = v[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03769}03769 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03770}03770             \textcolor{comment}{// and now validate that none of them collided}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03771}03771             \textcolor{keywordflow}{for} (i=0; i < n; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03772}03772                assert(stb\_perfect\_hash(p, v[i]) >= 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03773}03773 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03774}03774             stb\_tempfree(buffer3, bcount);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03775}03775             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03776}03776          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03777}03777       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03778}03778       free(p-\/>table);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03779}03779       p-\/>table = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03780}03780       stb\_tempfree(buffer3, bcount);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03781}03781 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03782}03782       ++failure;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03783}03783       \textcolor{keywordflow}{if} (failure >= 4 \&\& bsize < size) bsize *= 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03784}03784       \textcolor{keywordflow}{if} (failure >= 8 \&\& (failure \& 3) == 0 \&\& size < 4*n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03785}03785          size *= 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03786}03786          bsize *= 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03787}03787       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03788}03788       \textcolor{keywordflow}{if} (failure == 6) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03789}03789          \textcolor{comment}{// make sure the input data is unique, so we don't infinite loop}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03790}03790          \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *data = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) stb\_temp(buffer3, n * \textcolor{keyword}{sizeof}(*data));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03791}03791          memcpy(data, v, \textcolor{keyword}{sizeof}(*data) * n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03792}03792          qsort(data, n, \textcolor{keyword}{sizeof}(*data), stb\_intcmp(0));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03793}03793          \textcolor{keywordflow}{for} (i=1; i < n; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03794}03794             \textcolor{keywordflow}{if} (data[i] == data[i-\/1])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03795}03795                size = 0; \textcolor{comment}{// size is return value, so 0 it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03796}03796          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03797}03797          stb\_tempfree(buffer3, data);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03798}03798          \textcolor{keywordflow}{if} (!size) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03799}03799       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03800}03800    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03801}03801 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03802}03802    \textcolor{keywordflow}{if} (failure > stb\_perfect\_hash\_max\_failures)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03803}03803       stb\_perfect\_hash\_max\_failures = failure;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03804}03804 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03805}03805    stb\_tempfree(buffer1, as);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03806}03806    stb\_tempfree(buffer2, bs);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03807}03807    stb\_tempfree(buffer4, entries);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03808}03808 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03809}03809    \textcolor{keywordflow}{return} size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03810}03810 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03811}03811 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03812}03812 \textcolor{keywordtype}{void} stb\_perfect\_destroy(stb\_perfect *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03813}03813 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03814}03814    \textcolor{keywordflow}{if} (p-\/>large\_bmap) free(p-\/>large\_bmap);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03815}03815    \textcolor{keywordflow}{if} (p-\/>table     ) free(p-\/>table);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03816}03816    p-\/>large\_bmap = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03817}03817    p-\/>table      = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03818}03818    p-\/>b\_mask     = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03819}03819    p-\/>table\_mask = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03820}03820 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03821}03821 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03822}03822 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03824}03824 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03825}03825 \textcolor{comment}{//                     Perfect hash clients}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03826}03826 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03827}03827 STB\_EXTERN \textcolor{keywordtype}{int}    stb\_ischar(\textcolor{keywordtype}{char} s, \textcolor{keywordtype}{char} *set);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03828}03828 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03829}03829 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03830}03830 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03831}03831 \textcolor{keywordtype}{int} stb\_ischar(\textcolor{keywordtype}{char} c, \textcolor{keywordtype}{char} *set)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03832}03832 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03833}03833    \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} bit[8] = \{ 1,2,4,8,16,32,64,128 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03834}03834    \textcolor{keyword}{static} stb\_perfect p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03835}03835    \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} char (*tables)[256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03836}03836    \textcolor{keyword}{static} \textcolor{keywordtype}{char} ** sets = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03837}03837 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03838}03838    \textcolor{keywordtype}{int} z = stb\_perfect\_hash(\&p, (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) set);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03839}03839    \textcolor{keywordflow}{if} (z < 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03840}03840       \textcolor{keywordtype}{int} i,k,n,j,f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03841}03841       \textcolor{comment}{// special code that means free all existing data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03842}03842       \textcolor{keywordflow}{if} (set == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03843}03843          stb\_arr\_free(sets);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03844}03844          free(tables);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03845}03845          tables = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03846}03846          stb\_perfect\_destroy(\&p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03847}03847          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03848}03848       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03849}03849       stb\_arr\_push(sets, set);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03850}03850       stb\_perfect\_destroy(\&p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03851}03851       n = stb\_perfect\_create(\&p, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) (\textcolor{keywordtype}{char} **) sets, stb\_arr\_len(sets));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03852}03852       assert(n != 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03853}03853       k = (n+7) >> 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03854}03854       tables = (\textcolor{keywordtype}{unsigned} char (*)[256]) realloc(tables, \textcolor{keyword}{sizeof}(*tables) * k);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03855}03855       memset(tables, 0, \textcolor{keyword}{sizeof}(*tables) * k);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03856}03856       \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(sets); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03857}03857           k = stb\_perfect\_hash(\&p, (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) sets[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03858}03858          assert(k >= 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03859}03859          n = k >> 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03860}03860          f = bit[k\&7];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03861}03861          \textcolor{keywordflow}{for} (j=0; !j || sets[i][j]; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03862}03862             tables[n][(\textcolor{keywordtype}{unsigned} char) sets[i][j]] |= f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03863}03863          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03864}03864       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03865}03865       z = stb\_perfect\_hash(\&p, (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) set);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03866}03866    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03867}03867    \textcolor{keywordflow}{return} tables[z >> 3][(\textcolor{keywordtype}{unsigned} char) c] \& bit[z \& 7];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03868}03868 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03869}03869 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03870}03870 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03871}03871 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03872}03872 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03874}03874 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03875}03875 \textcolor{comment}{//                     Instantiated data structures}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03876}03876 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03877}03877 \textcolor{comment}{// This is an attempt to implement a templated data structure.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03878}03878 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03879}03879 \textcolor{comment}{// Hash table: call stb\_define\_hash(TYPE,N,KEY,K1,K2,HASH,VALUE)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03880}03880 \textcolor{comment}{//     TYPE     -\/-\/ will define a structure type containing the hash table}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03881}03881 \textcolor{comment}{//     N        -\/-\/ the name, will prefix functions named:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03882}03882 \textcolor{comment}{//                        N create}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03883}03883 \textcolor{comment}{//                        N destroy}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03884}03884 \textcolor{comment}{//                        N get}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03885}03885 \textcolor{comment}{//                        N set, N add, N update,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03886}03886 \textcolor{comment}{//                        N remove}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03887}03887 \textcolor{comment}{//     KEY      -\/-\/ the type of the key. 'x == y' must be valid}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03888}03888 \textcolor{comment}{//       K1,K2  -\/-\/ keys never used by the app, used as flags in the hashtable}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03889}03889 \textcolor{comment}{//       HASH   -\/-\/ a piece of code ending with 'return' that hashes key 'k'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03890}03890 \textcolor{comment}{//     VALUE    -\/-\/ the type of the value. 'x = y' must be valid}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03891}03891 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03892}03892 \textcolor{comment}{//  Note that stb\_define\_hash\_base can be used to define more sophisticated}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03893}03893 \textcolor{comment}{//  hash tables, e.g. those that make copies of the key or use special}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03894}03894 \textcolor{comment}{//  comparisons (e.g. strcmp).}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03895}03895 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03896}03896 \textcolor{preprocessor}{\#define STB\_(prefix,name)     stb\_\_\#\#prefix\#\#name}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03897}03897 \textcolor{preprocessor}{\#define STB\_\_(prefix,name)    prefix\#\#name}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03898}03898 \textcolor{preprocessor}{\#define STB\_\_use(x)           x}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03899}03899 \textcolor{preprocessor}{\#define STB\_\_skip(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03900}03900 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03901}03901 \textcolor{preprocessor}{\#define stb\_declare\_hash(PREFIX,TYPE,N,KEY,VALUE) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03902}03902 \textcolor{preprocessor}{   typedef struct stb\_\_st\_\#\#TYPE TYPE;\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03903}03903 \textcolor{preprocessor}{   PREFIX int STB\_\_(N, init)(TYPE *h, int count);\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03904}03904 \textcolor{preprocessor}{   PREFIX int STB\_\_(N, memory\_usage)(TYPE *h);\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03905}03905 \textcolor{preprocessor}{   PREFIX TYPE * STB\_\_(N, create)(void);\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03906}03906 \textcolor{preprocessor}{   PREFIX TYPE * STB\_\_(N, copy)(TYPE *h);\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03907}03907 \textcolor{preprocessor}{   PREFIX void STB\_\_(N, destroy)(TYPE *h);\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03908}03908 \textcolor{preprocessor}{   PREFIX int STB\_\_(N,get\_flag)(TYPE *a, KEY k, VALUE *v);\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03909}03909 \textcolor{preprocessor}{   PREFIX VALUE STB\_\_(N,get)(TYPE *a, KEY k);\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03910}03910 \textcolor{preprocessor}{   PREFIX int STB\_\_(N, set)(TYPE *a, KEY k, VALUE v);\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03911}03911 \textcolor{preprocessor}{   PREFIX int STB\_\_(N, add)(TYPE *a, KEY k, VALUE v);\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03912}03912 \textcolor{preprocessor}{   PREFIX int STB\_\_(N, update)(TYPE*a,KEY k,VALUE v);\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03913}03913 \textcolor{preprocessor}{   PREFIX int STB\_\_(N, remove)(TYPE *a, KEY k, VALUE *v);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03914}03914 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03915}03915 \textcolor{preprocessor}{\#define STB\_nocopy(x)        (x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03916}03916 \textcolor{preprocessor}{\#define STB\_nodelete(x)      0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03917}03917 \textcolor{preprocessor}{\#define STB\_nofields}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03918}03918 \textcolor{preprocessor}{\#define STB\_nonullvalue(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03919}03919 \textcolor{preprocessor}{\#define STB\_nullvalue(x)     x}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03920}03920 \textcolor{preprocessor}{\#define STB\_safecompare(x)   x}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03921}03921 \textcolor{preprocessor}{\#define STB\_nosafe(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03922}03922 \textcolor{preprocessor}{\#define STB\_noprefix}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03923}03923 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03924}03924 \textcolor{preprocessor}{\#ifdef \_\_GNUC\_\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03925}03925 \textcolor{preprocessor}{\#define STB\_\_nogcc(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03926}03926 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03927}03927 \textcolor{preprocessor}{\#define STB\_\_nogcc(x)  x}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03928}03928 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03929}03929 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03930}03930 \textcolor{preprocessor}{\#define stb\_define\_hash\_base(PREFIX,TYPE,FIELDS,N,NC,LOAD\_FACTOR,             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03931}03931 \textcolor{preprocessor}{                             KEY,EMPTY,DEL,COPY,DISPOSE,SAFE,                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03932}03932 \textcolor{preprocessor}{                             VCOMPARE,CCOMPARE,HASH,                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03933}03933 \textcolor{preprocessor}{                             VALUE,HASVNULL,VNULL)                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03934}03934 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03935}03935 \textcolor{preprocessor}{typedef struct                                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03936}03936 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03937}03937 \textcolor{preprocessor}{   KEY   k;                                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03938}03938 \textcolor{preprocessor}{   VALUE v;                                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03939}03939 \textcolor{preprocessor}{\} STB\_(N,\_hashpair);                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03940}03940 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03941}03941 \textcolor{preprocessor}{STB\_\_nogcc( typedef struct stb\_\_st\_\#\#TYPE TYPE;  )                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03942}03942 \textcolor{preprocessor}{struct stb\_\_st\_\#\#TYPE \{                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03943}03943 \textcolor{preprocessor}{   FIELDS                                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03944}03944 \textcolor{preprocessor}{   STB\_(N,\_hashpair) *table;                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03945}03945 \textcolor{preprocessor}{   unsigned int mask;                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03946}03946 \textcolor{preprocessor}{   int count, limit;                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03947}03947 \textcolor{preprocessor}{   int deleted;                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03948}03948 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03949}03949 \textcolor{preprocessor}{   int delete\_threshhold;                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03950}03950 \textcolor{preprocessor}{   int grow\_threshhold;                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03951}03951 \textcolor{preprocessor}{   int shrink\_threshhold;                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03952}03952 \textcolor{preprocessor}{   unsigned char alloced, has\_empty, has\_del;                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03953}03953 \textcolor{preprocessor}{   VALUE ev; VALUE dv;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03954}03954 \textcolor{preprocessor}{\};                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03955}03955 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03956}03956 \textcolor{preprocessor}{static unsigned int STB\_(N, hash)(KEY k)                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03957}03957 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03958}03958 \textcolor{preprocessor}{   HASH                                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03959}03959 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03960}03960 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03961}03961 \textcolor{preprocessor}{PREFIX int STB\_\_(N, init)(TYPE *h, int count)                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03962}03962 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03963}03963 \textcolor{preprocessor}{   int i;                                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03964}03964 \textcolor{preprocessor}{   if (count < 4) count = 4;                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03965}03965 \textcolor{preprocessor}{   h-\/>limit = count;                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03966}03966 \textcolor{preprocessor}{   h-\/>count = 0;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03967}03967 \textcolor{preprocessor}{   h-\/>mask  = count-\/1;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03968}03968 \textcolor{preprocessor}{   h-\/>deleted = 0;                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03969}03969 \textcolor{preprocessor}{   h-\/>grow\_threshhold = (int) (count * LOAD\_FACTOR);                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03970}03970 \textcolor{preprocessor}{   h-\/>has\_empty = h-\/>has\_del = 0;                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03971}03971 \textcolor{preprocessor}{   h-\/>alloced = 0;                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03972}03972 \textcolor{preprocessor}{   if (count <= 64)                                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03973}03973 \textcolor{preprocessor}{      h-\/>shrink\_threshhold = 0;                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03974}03974 \textcolor{preprocessor}{   else                                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03975}03975 \textcolor{preprocessor}{      h-\/>shrink\_threshhold = (int) (count * (LOAD\_FACTOR/2.25));              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03976}03976 \textcolor{preprocessor}{   h-\/>delete\_threshhold = (int) (count * (1-\/LOAD\_FACTOR)/2);                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03977}03977 \textcolor{preprocessor}{   h-\/>table = (STB\_(N,\_hashpair)*) malloc(sizeof(h-\/>table[0]) * count);       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03978}03978 \textcolor{preprocessor}{   if (h-\/>table == NULL) return 0;                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03979}03979 \textcolor{preprocessor}{   }\textcolor{comment}{/* ideally this gets turned into a memset32 automatically */}\textcolor{preprocessor}{               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03980}03980 \textcolor{preprocessor}{   for (i=0; i < count; ++i)                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03981}03981 \textcolor{preprocessor}{      h-\/>table[i].k = EMPTY;                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03982}03982 \textcolor{preprocessor}{   return 1;                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03983}03983 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03984}03984 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03985}03985 \textcolor{preprocessor}{PREFIX int STB\_\_(N, memory\_usage)(TYPE *h)                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03986}03986 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03987}03987 \textcolor{preprocessor}{   return sizeof(*h) + h-\/>limit * sizeof(h-\/>table[0]);                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03988}03988 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03989}03989 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03990}03990 \textcolor{preprocessor}{PREFIX TYPE * STB\_\_(N, create)(void)                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03991}03991 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03992}03992 \textcolor{preprocessor}{   TYPE *h = (TYPE *) malloc(sizeof(*h));                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03993}03993 \textcolor{preprocessor}{   if (h) \{                                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03994}03994 \textcolor{preprocessor}{      if (STB\_\_(N, init)(h, 16))                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03995}03995 \textcolor{preprocessor}{         h-\/>alloced = 1;                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03996}03996 \textcolor{preprocessor}{      else \{ free(h); h=NULL; \}                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03997}03997 \textcolor{preprocessor}{   \}                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03998}03998 \textcolor{preprocessor}{   return h;                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l03999}03999 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04000}04000 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04001}04001 \textcolor{preprocessor}{PREFIX void STB\_\_(N, destroy)(TYPE *a)                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04002}04002 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04003}04003 \textcolor{preprocessor}{   int i;                                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04004}04004 \textcolor{preprocessor}{   for (i=0; i < a-\/>limit; ++i)                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04005}04005 \textcolor{preprocessor}{      if (!CCOMPARE(a-\/>table[i].k,EMPTY) \&\& !CCOMPARE(a-\/>table[i].k, DEL))    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04006}04006 \textcolor{preprocessor}{         DISPOSE(a-\/>table[i].k);                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04007}04007 \textcolor{preprocessor}{   free(a-\/>table);                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04008}04008 \textcolor{preprocessor}{   if (a-\/>alloced)                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04009}04009 \textcolor{preprocessor}{      free(a);                                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04010}04010 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04011}04011 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04012}04012 \textcolor{preprocessor}{static void STB\_(N, rehash)(TYPE *a, int count);                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04013}04013 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04014}04014 \textcolor{preprocessor}{PREFIX int STB\_\_(N,get\_flag)(TYPE *a, KEY k, VALUE *v)                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04015}04015 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04016}04016 \textcolor{preprocessor}{   unsigned int h = STB\_(N, hash)(k);                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04017}04017 \textcolor{preprocessor}{   unsigned int n = h \& a-\/>mask, s;                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04018}04018 \textcolor{preprocessor}{   if (CCOMPARE(k,EMPTY))\{ if (a-\/>has\_empty) *v = a-\/>ev; return a-\/>has\_empty;\}\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04019}04019 \textcolor{preprocessor}{   if (CCOMPARE(k,DEL)) \{ if (a-\/>has\_del  ) *v = a-\/>dv; return a-\/>has\_del;   \}\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04020}04020 \textcolor{preprocessor}{   if (CCOMPARE(a-\/>table[n].k,EMPTY)) return 0;                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04021}04021 \textcolor{preprocessor}{   SAFE(if (!CCOMPARE(a-\/>table[n].k,DEL)))                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04022}04022 \textcolor{preprocessor}{   if (VCOMPARE(a-\/>table[n].k,k)) \{ *v = a-\/>table[n].v; return 1; \}            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04023}04023 \textcolor{preprocessor}{   s = stb\_rehash(h) | 1;                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04024}04024 \textcolor{preprocessor}{   for(;;) \{                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04025}04025 \textcolor{preprocessor}{      n = (n + s) \& a-\/>mask;                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04026}04026 \textcolor{preprocessor}{      if (CCOMPARE(a-\/>table[n].k,EMPTY)) return 0;                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04027}04027 \textcolor{preprocessor}{      SAFE(if (CCOMPARE(a-\/>table[n].k,DEL)) continue;)                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04028}04028 \textcolor{preprocessor}{      if (VCOMPARE(a-\/>table[n].k,k))                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04029}04029 \textcolor{preprocessor}{         \{ *v = a-\/>table[n].v; return 1; \}                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04030}04030 \textcolor{preprocessor}{   \}                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04031}04031 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04032}04032 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04033}04033 \textcolor{preprocessor}{HASVNULL(                                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04034}04034 \textcolor{preprocessor}{   PREFIX VALUE STB\_\_(N,get)(TYPE *a, KEY k)                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04035}04035 \textcolor{preprocessor}{   \{                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04036}04036 \textcolor{preprocessor}{      VALUE v;                                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04037}04037 \textcolor{preprocessor}{      if (STB\_\_(N,get\_flag)(a,k,\&v)) return v;                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04038}04038 \textcolor{preprocessor}{      else                           return VNULL;                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04039}04039 \textcolor{preprocessor}{   \}                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04040}04040 \textcolor{preprocessor}{)                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04041}04041 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04042}04042 \textcolor{preprocessor}{PREFIX int STB\_\_(N,getkey)(TYPE *a, KEY k, KEY *kout)                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04043}04043 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04044}04044 \textcolor{preprocessor}{   unsigned int h = STB\_(N, hash)(k);                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04045}04045 \textcolor{preprocessor}{   unsigned int n = h \& a-\/>mask, s;                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04046}04046 \textcolor{preprocessor}{   if (CCOMPARE(k,EMPTY)||CCOMPARE(k,DEL)) return 0;                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04047}04047 \textcolor{preprocessor}{   if (CCOMPARE(a-\/>table[n].k,EMPTY)) return 0;                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04048}04048 \textcolor{preprocessor}{   SAFE(if (!CCOMPARE(a-\/>table[n].k,DEL)))                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04049}04049 \textcolor{preprocessor}{   if (VCOMPARE(a-\/>table[n].k,k)) \{ *kout = a-\/>table[n].k; return 1; \}         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04050}04050 \textcolor{preprocessor}{   s = stb\_rehash(h) | 1;                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04051}04051 \textcolor{preprocessor}{   for(;;) \{                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04052}04052 \textcolor{preprocessor}{      n = (n + s) \& a-\/>mask;                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04053}04053 \textcolor{preprocessor}{      if (CCOMPARE(a-\/>table[n].k,EMPTY)) return 0;                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04054}04054 \textcolor{preprocessor}{      SAFE(if (CCOMPARE(a-\/>table[n].k,DEL)) continue;)                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04055}04055 \textcolor{preprocessor}{      if (VCOMPARE(a-\/>table[n].k,k))                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04056}04056 \textcolor{preprocessor}{         \{ *kout = a-\/>table[n].k; return 1; \}                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04057}04057 \textcolor{preprocessor}{   \}                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04058}04058 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04059}04059 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04060}04060 \textcolor{preprocessor}{static int STB\_(N,addset)(TYPE *a, KEY k, VALUE v,                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04061}04061 \textcolor{preprocessor}{                             int allow\_new, int allow\_old, int copy)          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04062}04062 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04063}04063 \textcolor{preprocessor}{   unsigned int h = STB\_(N, hash)(k);                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04064}04064 \textcolor{preprocessor}{   unsigned int n = h \& a-\/>mask;                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04065}04065 \textcolor{preprocessor}{   int b = -\/1;                                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04066}04066 \textcolor{preprocessor}{   if (CCOMPARE(k,EMPTY)) \{                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04067}04067 \textcolor{preprocessor}{      if (a-\/>has\_empty ? allow\_old : allow\_new) \{                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04068}04068 \textcolor{preprocessor}{          n=a-\/>has\_empty; a-\/>ev = v; a-\/>has\_empty = 1; return !n;             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04069}04069 \textcolor{preprocessor}{      \} else return 0;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04070}04070 \textcolor{preprocessor}{   \}                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04071}04071 \textcolor{preprocessor}{   if (CCOMPARE(k,DEL)) \{                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04072}04072 \textcolor{preprocessor}{      if (a-\/>has\_del ? allow\_old : allow\_new) \{                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04073}04073 \textcolor{preprocessor}{          n=a-\/>has\_del; a-\/>dv = v; a-\/>has\_del = 1; return !n;                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04074}04074 \textcolor{preprocessor}{      \} else return 0;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04075}04075 \textcolor{preprocessor}{   \}                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04076}04076 \textcolor{preprocessor}{   if (!CCOMPARE(a-\/>table[n].k, EMPTY)) \{                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04077}04077 \textcolor{preprocessor}{      unsigned int s;                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04078}04078 \textcolor{preprocessor}{      if (CCOMPARE(a-\/>table[n].k, DEL))                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04079}04079 \textcolor{preprocessor}{         b = n;                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04080}04080 \textcolor{preprocessor}{      else if (VCOMPARE(a-\/>table[n].k,k)) \{                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04081}04081 \textcolor{preprocessor}{         if (allow\_old)                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04082}04082 \textcolor{preprocessor}{            a-\/>table[n].v = v;                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04083}04083 \textcolor{preprocessor}{         return !allow\_new;                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04084}04084 \textcolor{preprocessor}{      \}                                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04085}04085 \textcolor{preprocessor}{      s = stb\_rehash(h) | 1;                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04086}04086 \textcolor{preprocessor}{      for(;;) \{                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04087}04087 \textcolor{preprocessor}{         n = (n + s) \& a-\/>mask;                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04088}04088 \textcolor{preprocessor}{         if (CCOMPARE(a-\/>table[n].k, EMPTY)) break;                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04089}04089 \textcolor{preprocessor}{         if (CCOMPARE(a-\/>table[n].k, DEL)) \{                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04090}04090 \textcolor{preprocessor}{            if (b < 0) b = n;                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04091}04091 \textcolor{preprocessor}{         \} else if (VCOMPARE(a-\/>table[n].k,k)) \{                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04092}04092 \textcolor{preprocessor}{            if (allow\_old)                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04093}04093 \textcolor{preprocessor}{               a-\/>table[n].v = v;                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04094}04094 \textcolor{preprocessor}{            return !allow\_new;                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04095}04095 \textcolor{preprocessor}{         \}                                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04096}04096 \textcolor{preprocessor}{      \}                                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04097}04097 \textcolor{preprocessor}{   \}                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04098}04098 \textcolor{preprocessor}{   if (!allow\_new) return 0;                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04099}04099 \textcolor{preprocessor}{   if (b < 0) b = n; else -\/-\/a-\/>deleted;                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04100}04100 \textcolor{preprocessor}{   a-\/>table[b].k = copy ? COPY(k) : k;                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04101}04101 \textcolor{preprocessor}{   a-\/>table[b].v = v;                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04102}04102 \textcolor{preprocessor}{   ++a-\/>count;                                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04103}04103 \textcolor{preprocessor}{   if (a-\/>count > a-\/>grow\_threshhold)                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04104}04104 \textcolor{preprocessor}{      STB\_(N,rehash)(a, a-\/>limit*2);                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04105}04105 \textcolor{preprocessor}{   return 1;                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04106}04106 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04107}04107 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04108}04108 \textcolor{preprocessor}{PREFIX int STB\_\_(N, set)(TYPE *a, KEY k, VALUE v)\{return STB\_(N,addset)(a,k,v,1,1,1);\}\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04109}04109 \textcolor{preprocessor}{PREFIX int STB\_\_(N, add)(TYPE *a, KEY k, VALUE v)\{return STB\_(N,addset)(a,k,v,1,0,1);\}\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04110}04110 \textcolor{preprocessor}{PREFIX int STB\_\_(N, update)(TYPE*a,KEY k,VALUE v)\{return STB\_(N,addset)(a,k,v,0,1,1);\}\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04111}04111 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04112}04112 \textcolor{preprocessor}{PREFIX int STB\_\_(N, remove)(TYPE *a, KEY k, VALUE *v)                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04113}04113 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04114}04114 \textcolor{preprocessor}{   unsigned int h = STB\_(N, hash)(k);                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04115}04115 \textcolor{preprocessor}{   unsigned int n = h \& a-\/>mask, s;                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04116}04116 \textcolor{preprocessor}{   if (CCOMPARE(k,EMPTY)) \{ if (a-\/>has\_empty) \{ if(v)*v = a-\/>ev; a-\/>has\_empty=0; return 1; \} return 0; \} \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04117}04117 \textcolor{preprocessor}{   if (CCOMPARE(k,DEL))   \{ if (a-\/>has\_del  ) \{ if(v)*v = a-\/>dv; a-\/>has\_del  =0; return 1; \} return 0; \} \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04118}04118 \textcolor{preprocessor}{   if (CCOMPARE(a-\/>table[n].k,EMPTY)) return 0;                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04119}04119 \textcolor{preprocessor}{   if (SAFE(CCOMPARE(a-\/>table[n].k,DEL) || ) !VCOMPARE(a-\/>table[n].k,k)) \{     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04120}04120 \textcolor{preprocessor}{      s = stb\_rehash(h) | 1;                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04121}04121 \textcolor{preprocessor}{      for(;;) \{                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04122}04122 \textcolor{preprocessor}{         n = (n + s) \& a-\/>mask;                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04123}04123 \textcolor{preprocessor}{         if (CCOMPARE(a-\/>table[n].k,EMPTY)) return 0;                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04124}04124 \textcolor{preprocessor}{         SAFE(if (CCOMPARE(a-\/>table[n].k, DEL)) continue;)                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04125}04125 \textcolor{preprocessor}{         if (VCOMPARE(a-\/>table[n].k,k)) break;                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04126}04126 \textcolor{preprocessor}{      \}                                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04127}04127 \textcolor{preprocessor}{   \}                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04128}04128 \textcolor{preprocessor}{   DISPOSE(a-\/>table[n].k);                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04129}04129 \textcolor{preprocessor}{   a-\/>table[n].k = DEL;                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04130}04130 \textcolor{preprocessor}{   -\/-\/a-\/>count;                                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04131}04131 \textcolor{preprocessor}{   ++a-\/>deleted;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04132}04132 \textcolor{preprocessor}{   if (v != NULL)                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04133}04133 \textcolor{preprocessor}{      *v = a-\/>table[n].v;                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04134}04134 \textcolor{preprocessor}{   if (a-\/>count < a-\/>shrink\_threshhold)                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04135}04135 \textcolor{preprocessor}{      STB\_(N, rehash)(a, a-\/>limit >> 1);                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04136}04136 \textcolor{preprocessor}{   else if (a-\/>deleted > a-\/>delete\_threshhold)                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04137}04137 \textcolor{preprocessor}{      STB\_(N, rehash)(a, a-\/>limit);                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04138}04138 \textcolor{preprocessor}{   return 1;                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04139}04139 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04140}04140 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04141}04141 \textcolor{preprocessor}{PREFIX TYPE * STB\_\_(NC, copy)(TYPE *a)                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04142}04142 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04143}04143 \textcolor{preprocessor}{   int i;                                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04144}04144 \textcolor{preprocessor}{   TYPE *h = (TYPE *) malloc(sizeof(*h));                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04145}04145 \textcolor{preprocessor}{   if (!h) return NULL;                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04146}04146 \textcolor{preprocessor}{   if (!STB\_\_(N, init)(h, a-\/>limit)) \{ free(h); return NULL; \}                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04147}04147 \textcolor{preprocessor}{   h-\/>count = a-\/>count;                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04148}04148 \textcolor{preprocessor}{   h-\/>deleted = a-\/>deleted;                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04149}04149 \textcolor{preprocessor}{   h-\/>alloced = 1;                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04150}04150 \textcolor{preprocessor}{   h-\/>ev = a-\/>ev; h-\/>dv = a-\/>dv;                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04151}04151 \textcolor{preprocessor}{   h-\/>has\_empty = a-\/>has\_empty; h-\/>has\_del = a-\/>has\_del;                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04152}04152 \textcolor{preprocessor}{   memcpy(h-\/>table, a-\/>table, h-\/>limit * sizeof(h-\/>table[0]));                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04153}04153 \textcolor{preprocessor}{   for (i=0; i < a-\/>limit; ++i)                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04154}04154 \textcolor{preprocessor}{      if (!CCOMPARE(h-\/>table[i].k,EMPTY) \&\& !CCOMPARE(h-\/>table[i].k,DEL))     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04155}04155 \textcolor{preprocessor}{         h-\/>table[i].k = COPY(h-\/>table[i].k);                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04156}04156 \textcolor{preprocessor}{   return h;                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04157}04157 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04158}04158 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04159}04159 \textcolor{preprocessor}{static void STB\_(N, rehash)(TYPE *a, int count)                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04160}04160 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04161}04161 \textcolor{preprocessor}{   int i;                                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04162}04162 \textcolor{preprocessor}{   TYPE b;                                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04163}04163 \textcolor{preprocessor}{   STB\_\_(N, init)(\&b, count);                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04164}04164 \textcolor{preprocessor}{   for (i=0; i < a-\/>limit; ++i)                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04165}04165 \textcolor{preprocessor}{      if (!CCOMPARE(a-\/>table[i].k,EMPTY) \&\& !CCOMPARE(a-\/>table[i].k,DEL))     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04166}04166 \textcolor{preprocessor}{         STB\_(N,addset)(\&b, a-\/>table[i].k, a-\/>table[i].v,1,1,0);              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04167}04167 \textcolor{preprocessor}{   free(a-\/>table);                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04168}04168 \textcolor{preprocessor}{   a-\/>table = b.table;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04169}04169 \textcolor{preprocessor}{   a-\/>mask = b.mask;                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04170}04170 \textcolor{preprocessor}{   a-\/>count = b.count;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04171}04171 \textcolor{preprocessor}{   a-\/>limit = b.limit;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04172}04172 \textcolor{preprocessor}{   a-\/>deleted = b.deleted;                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04173}04173 \textcolor{preprocessor}{   a-\/>delete\_threshhold = b.delete\_threshhold;                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04174}04174 \textcolor{preprocessor}{   a-\/>grow\_threshhold = b.grow\_threshhold;                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04175}04175 \textcolor{preprocessor}{   a-\/>shrink\_threshhold = b.shrink\_threshhold;                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04176}04176 \textcolor{preprocessor}{\}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04177}04177 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04178}04178 \textcolor{preprocessor}{\#define STB\_equal(a,b)  ((a) == (b))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04179}04179 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04180}04180 \textcolor{preprocessor}{\#define stb\_define\_hash(TYPE,N,KEY,EMPTY,DEL,HASH,VALUE)                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04181}04181 \textcolor{preprocessor}{   stb\_define\_hash\_base(STB\_noprefix, TYPE,STB\_nofields,N,NC,0.85f,           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04182}04182 \textcolor{preprocessor}{              KEY,EMPTY,DEL,STB\_nocopy,STB\_nodelete,STB\_nosafe,               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04183}04183 \textcolor{preprocessor}{              STB\_equal,STB\_equal,HASH,                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04184}04184 \textcolor{preprocessor}{              VALUE,STB\_nonullvalue,0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04185}04185 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04186}04186 \textcolor{preprocessor}{\#define stb\_define\_hash\_vnull(TYPE,N,KEY,EMPTY,DEL,HASH,VALUE,VNULL)          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04187}04187 \textcolor{preprocessor}{   stb\_define\_hash\_base(STB\_noprefix, TYPE,STB\_nofields,N,NC,0.85f,           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04188}04188 \textcolor{preprocessor}{              KEY,EMPTY,DEL,STB\_nocopy,STB\_nodelete,STB\_nosafe,               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04189}04189 \textcolor{preprocessor}{              STB\_equal,STB\_equal,HASH,                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04190}04190 \textcolor{preprocessor}{              VALUE,STB\_nullvalue,VNULL)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04191}04191 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04193}04193 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04194}04194 \textcolor{comment}{//                        stb\_ptrmap}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04195}04195 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04196}04196 \textcolor{comment}{// An stb\_ptrmap data structure is an O(1) hash table between pointers. One}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04197}04197 \textcolor{comment}{// application is to let you store "{}extra"{} data associated with pointers,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04198}04198 \textcolor{comment}{// which is why it was originally called stb\_extra.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04199}04199 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04200}04200 stb\_declare\_hash(STB\_EXTERN, stb\_ptrmap, stb\_ptrmap\_, \textcolor{keywordtype}{void} *, \textcolor{keywordtype}{void} *)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04201}04201 stb\_declare\_hash(STB\_EXTERN, stb\_idict, stb\_idict\_, stb\_int32, stb\_int32)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04202}04202 stb\_declare\_hash(STB\_EXTERN, stb\_uidict, stbi\_uidict\_, stb\_uint32, stb\_uint32)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04203}04203 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04204}04204 STB\_EXTERN \textcolor{keywordtype}{void}        stb\_ptrmap\_delete(stb\_ptrmap *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}, \textcolor{keywordtype}{void} (*free\_func)(\textcolor{keywordtype}{void} *));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04205}04205 STB\_EXTERN stb\_ptrmap *stb\_ptrmap\_new(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04206}04206 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04207}04207 STB\_EXTERN stb\_idict * stb\_idict\_new\_size(\textcolor{keywordtype}{int} size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04208}04208 STB\_EXTERN \textcolor{keywordtype}{void}        stb\_idict\_remove\_all(stb\_idict *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04209}04209 STB\_EXTERN \textcolor{keywordtype}{void}        stb\_uidict\_reset(stb\_uidict *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04210}04210 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04211}04211 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04212}04212 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04213}04213 \textcolor{preprocessor}{\#define STB\_EMPTY ((void *) 2)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04214}04214 \textcolor{preprocessor}{\#define STB\_EDEL  ((void *) 6)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04215}04215 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04216}04216 stb\_define\_hash\_base(STB\_noprefix,stb\_ptrmap, STB\_nofields, stb\_ptrmap\_,stb\_ptrmap\_,0.85f,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04217}04217               \textcolor{keywordtype}{void} *,STB\_EMPTY,STB\_EDEL,STB\_nocopy,STB\_nodelete,STB\_nosafe,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04218}04218               STB\_equal,STB\_equal,\textcolor{keywordflow}{return} stb\_hashptr(k);,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04219}04219               \textcolor{keywordtype}{void} *,STB\_nullvalue,NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04220}04220 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04221}04221 stb\_ptrmap *stb\_ptrmap\_new(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04222}04222 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04223}04223    \textcolor{keywordflow}{return} stb\_ptrmap\_create();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04224}04224 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04225}04225 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04226}04226 \textcolor{keywordtype}{void} stb\_ptrmap\_delete(stb\_ptrmap *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}, \textcolor{keywordtype}{void} (*free\_func)(\textcolor{keywordtype}{void} *))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04227}04227 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04228}04228    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04229}04229    \textcolor{keywordflow}{if} (free\_func)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04230}04230       \textcolor{keywordflow}{for} (i=0; i < \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>limit; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04231}04231          \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>table[i].k != STB\_EMPTY \&\& \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>table[i].k != STB\_EDEL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04232}04232             \textcolor{keywordflow}{if} (free\_func == free)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04233}04233                free(\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>table[i].v); \textcolor{comment}{// allow STB\_MALLOC\_WRAPPER to operate}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04234}04234             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04235}04235                free\_func(\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>table[i].v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04236}04236          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04237}04237    stb\_ptrmap\_destroy(\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04238}04238 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04239}04239 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04240}04240 \textcolor{comment}{// extra fields needed for stua\_dict}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04241}04241 \textcolor{preprocessor}{\#define STB\_IEMPTY  ((int) 1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04242}04242 \textcolor{preprocessor}{\#define STB\_IDEL    ((int) 3)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04243}04243 stb\_define\_hash\_base(STB\_noprefix, stb\_idict, \textcolor{keywordtype}{short} type; \textcolor{keywordtype}{short} gc; STB\_nofields, stb\_idict\_,stb\_idict\_,0.95f,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04244}04244               stb\_int32,STB\_IEMPTY,STB\_IDEL,STB\_nocopy,STB\_nodelete,STB\_nosafe,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04245}04245               STB\_equal,STB\_equal,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04246}04246               \textcolor{keywordflow}{return} stb\_rehash\_improved(k);,stb\_int32,STB\_nonullvalue,0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04247}04247 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04248}04248 stb\_idict * stb\_idict\_new\_size(\textcolor{keywordtype}{int} size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04249}04249 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04250}04250    stb\_idict *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} = (stb\_idict *) malloc(\textcolor{keyword}{sizeof}(*\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04251}04251    \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04252}04252       \textcolor{keywordflow}{if} (!stb\_is\_pow2(size))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04253}04253          size = 1 << stb\_log2\_ceil(size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04254}04254       stb\_idict\_init(\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}, size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04255}04255       \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>alloced = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04256}04256    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04257}04257    \textcolor{keywordflow}{return} \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04258}04258 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04259}04259 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04260}04260 \textcolor{keywordtype}{void} stb\_idict\_remove\_all(stb\_idict *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04261}04261 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04262}04262    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04263}04263    \textcolor{keywordflow}{for} (n=0; n < \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>limit; ++n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04264}04264       \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>table[n].k = STB\_IEMPTY;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04265}04265    \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>has\_empty = \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>has\_del = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04266}04266    \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>count = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04267}04267    \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>deleted = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04268}04268 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04269}04269 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04270}04270 stb\_define\_hash\_base(STB\_noprefix, stb\_uidict, STB\_nofields, stb\_uidict\_,stb\_uidict\_,0.85f,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04271}04271               stb\_int32,0xffffffff,0xfffffffe,STB\_nocopy,STB\_nodelete,STB\_nosafe,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04272}04272               STB\_equal,STB\_equal,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04273}04273               \textcolor{keywordflow}{return} stb\_rehash\_improved(k);,stb\_uint32,STB\_nonullvalue,0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04274}04274 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04275}04275 \textcolor{keywordtype}{void} stb\_uidict\_reset(stb\_uidict *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04276}04276 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04277}04277    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04278}04278    \textcolor{keywordflow}{for} (n=0; n < \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>limit; ++n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04279}04279       \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>table[n].k = 0xffffffff;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04280}04280    \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>has\_empty = \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>has\_del = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04281}04281    \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>count = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04282}04282    \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>deleted = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04283}04283 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04284}04284 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04285}04285 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04287}04287 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04288}04288 \textcolor{comment}{//                        stb\_sparse\_ptr\_matrix}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04289}04289 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04290}04290 \textcolor{comment}{// An stb\_ptrmap data structure is an O(1) hash table storing an arbitrary}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04291}04291 \textcolor{comment}{// block of data for a given pair of pointers.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04292}04292 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04293}04293 \textcolor{comment}{// If create=0, returns}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04294}04294 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04295}04295 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_\_st\_stb\_spmatrix stb\_spmatrix;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04296}04296 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04297}04297 STB\_EXTERN stb\_spmatrix * stb\_sparse\_ptr\_matrix\_new(\textcolor{keywordtype}{int} val\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04298}04298 STB\_EXTERN \textcolor{keywordtype}{void}           stb\_sparse\_ptr\_matrix\_free(stb\_spmatrix *z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04299}04299 STB\_EXTERN \textcolor{keywordtype}{void}         * stb\_sparse\_ptr\_matrix\_get(stb\_spmatrix *z, \textcolor{keywordtype}{void} *a, \textcolor{keywordtype}{void} *b, \textcolor{keywordtype}{int} create);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04300}04300 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04301}04301 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04302}04302 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04303}04303 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04304}04304    \textcolor{keywordtype}{void} *a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04305}04305    \textcolor{keywordtype}{void} *b;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04306}04306 \} stb\_\_ptrpair;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04307}04307 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04308}04308 \textcolor{keyword}{static} stb\_\_ptrpair stb\_\_ptrpair\_empty = \{ (\textcolor{keywordtype}{void} *) 1, (\textcolor{keywordtype}{void} *) 1 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04309}04309 \textcolor{keyword}{static} stb\_\_ptrpair stb\_\_ptrpair\_del   = \{ (\textcolor{keywordtype}{void} *) 2, (\textcolor{keywordtype}{void} *) 2 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04310}04310 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04311}04311 \textcolor{preprocessor}{\#define STB\_\_equal\_ptrpair(x,y) ((x).a == (y).a \&\& (x).b == (y).b)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04312}04312 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04313}04313 stb\_define\_hash\_base(STB\_noprefix, stb\_spmatrix, \textcolor{keywordtype}{int} val\_size; \textcolor{keywordtype}{void} *arena;, stb\_\_spmatrix\_,stb\_\_spmatrix\_, 0.85,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04314}04314      stb\_\_ptrpair, stb\_\_ptrpair\_empty, stb\_\_ptrpair\_del,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04315}04315      STB\_nocopy, STB\_nodelete, STB\_nosafe,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04316}04316      STB\_\_equal\_ptrpair, STB\_\_equal\_ptrpair, \textcolor{keywordflow}{return} stb\_rehash(stb\_hashptr(k.a))+stb\_hashptr(k.b);,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04317}04317      \textcolor{keywordtype}{void} *, STB\_nullvalue, 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04318}04318 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04319}04319 stb\_spmatrix *stb\_sparse\_ptr\_matrix\_new(\textcolor{keywordtype}{int} val\_size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04320}04320 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04321}04321    stb\_spmatrix *m = stb\_\_spmatrix\_create();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04322}04322    \textcolor{keywordflow}{if} (m) m-\/>val\_size = val\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04323}04323    \textcolor{keywordflow}{if} (m) m-\/>arena = stb\_malloc\_global(1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04324}04324    \textcolor{keywordflow}{return} m;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04325}04325 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04326}04326 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04327}04327 \textcolor{keywordtype}{void} stb\_sparse\_ptr\_matrix\_free(stb\_spmatrix *z)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04328}04328 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04329}04329    \textcolor{keywordflow}{if} (z-\/>arena) stb\_free(z-\/>arena);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04330}04330    stb\_\_spmatrix\_destroy(z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04331}04331 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04332}04332 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04333}04333 \textcolor{keywordtype}{void} *stb\_sparse\_ptr\_matrix\_get(stb\_spmatrix *z, \textcolor{keywordtype}{void} *a, \textcolor{keywordtype}{void} *b, \textcolor{keywordtype}{int} create)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04334}04334 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04335}04335    stb\_\_ptrpair t = \{ a,b \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04336}04336    \textcolor{keywordtype}{void} *data = stb\_\_spmatrix\_get(z, t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04337}04337    \textcolor{keywordflow}{if} (!data \&\& create) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04338}04338       data = stb\_malloc\_raw(z-\/>arena, z-\/>val\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04339}04339       \textcolor{keywordflow}{if} (!data) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04340}04340       memset(data, 0, z-\/>val\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04341}04341       stb\_\_spmatrix\_add(z, t, data);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04342}04342    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04343}04343    \textcolor{keywordflow}{return} data;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04344}04344 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04345}04345 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04346}04346 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04347}04347 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04348}04348 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04350}04350 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04351}04351 \textcolor{comment}{//                  SDICT: Hash Table for Strings (symbol table)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04352}04352 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04353}04353 \textcolor{comment}{//           if "{}use\_arena=1"{}, then strings will be copied}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04354}04354 \textcolor{comment}{//           into blocks and never freed until the sdict is freed;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04355}04355 \textcolor{comment}{//           otherwise they're malloc()ed and free()d on the fly.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04356}04356 \textcolor{comment}{//           (specify use\_arena=1 if you never stb\_sdict\_remove)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04357}04357 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04358}04358 stb\_declare\_hash(STB\_EXTERN, stb\_sdict, stb\_sdict\_, \textcolor{keywordtype}{char} *, \textcolor{keywordtype}{void} *)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04359}04359 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04360}04360 STB\_EXTERN stb\_sdict * stb\_sdict\_new(\textcolor{keywordtype}{int} use\_arena);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04361}04361 STB\_EXTERN stb\_sdict * stb\_sdict\_copy(stb\_sdict*);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04362}04362 STB\_EXTERN \textcolor{keywordtype}{void}        stb\_sdict\_delete(stb\_sdict *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04363}04363 STB\_EXTERN \textcolor{keywordtype}{void} *      stb\_sdict\_change(stb\_sdict *, \textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{void} *p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04364}04364 STB\_EXTERN \textcolor{keywordtype}{int}         stb\_sdict\_count(stb\_sdict *d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04365}04365 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04366}04366 STB\_EXTERN \textcolor{keywordtype}{int}         stb\_sdict\_internal\_limit(stb\_sdict *d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04367}04367 STB\_EXTERN \textcolor{keywordtype}{char} *      stb\_sdict\_internal\_key(stb\_sdict *d, \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04368}04368 STB\_EXTERN \textcolor{keywordtype}{void} *      stb\_sdict\_internal\_value(stb\_sdict *d, \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04369}04369 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04370}04370 \textcolor{preprocessor}{\#define stb\_sdict\_for(d,i,q,z)                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04371}04371 \textcolor{preprocessor}{   for(i=0; i < stb\_sdict\_internal\_limit(d) ? (q=stb\_sdict\_internal\_key(d,i),z=stb\_sdict\_internal\_value(d,i),1) : 0; ++i)    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04372}04372 \textcolor{preprocessor}{      if (q==NULL||q==(void *) 1);else   }\textcolor{comment}{// reversed makes macro friendly}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04373}04373 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04374}04374 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04375}04375 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04376}04376 \textcolor{comment}{// if in same translation unit, for speed, don't call accessors}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04377}04377 \textcolor{preprocessor}{\#undef stb\_sdict\_for}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04378}04378 \textcolor{preprocessor}{\#define stb\_sdict\_for(d,i,q,z)                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04379}04379 \textcolor{preprocessor}{   for(i=0; i < (d)-\/>limit ? (q=(d)-\/>table[i].k,z=(d)-\/>table[i].v,1) : 0; ++i)    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04380}04380 \textcolor{preprocessor}{      if (q==NULL||q==(void *) 1);else   }\textcolor{comment}{// reversed makes macro friendly}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04381}04381 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04382}04382 \textcolor{preprocessor}{\#define STB\_DEL ((void *) 1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04383}04383 \textcolor{preprocessor}{\#define STB\_SDEL  ((char *) 1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04384}04384 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04385}04385 \textcolor{preprocessor}{\#define stb\_sdict\_\_copy(x)                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04386}04386 \textcolor{preprocessor}{   stb\_p\_strcpy\_s(a-\/>arena ? stb\_malloc\_string(a-\/>arena, strlen(x)+1)    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04387}04387 \textcolor{preprocessor}{                         : (char *) malloc(strlen(x)+1), strlen(x)+1, x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04388}04388 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04389}04389 \textcolor{preprocessor}{\#define stb\_sdict\_\_dispose(x)  if (!a-\/>arena) free(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04390}04390 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04391}04391 stb\_define\_hash\_base(STB\_noprefix, stb\_sdict, \textcolor{keywordtype}{void}*arena;, stb\_sdict\_,stb\_sdictinternal\_, 0.85f,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04392}04392         \textcolor{keywordtype}{char} *, NULL, STB\_SDEL, stb\_sdict\_\_copy, stb\_sdict\_\_dispose,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04393}04393                         STB\_safecompare, !strcmp, STB\_equal, \textcolor{keywordflow}{return} stb\_hash(k);,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04394}04394         \textcolor{keywordtype}{void} *, STB\_nullvalue, NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04395}04395 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04396}04396 \textcolor{keywordtype}{int} stb\_sdict\_count(stb\_sdict *a)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04397}04397 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04398}04398    \textcolor{keywordflow}{return} a-\/>count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04399}04399 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04400}04400 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04401}04401 \textcolor{keywordtype}{int} stb\_sdict\_internal\_limit(stb\_sdict *a)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04402}04402 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04403}04403    \textcolor{keywordflow}{return} a-\/>limit;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04404}04404 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04405}04405 \textcolor{keywordtype}{char}* stb\_sdict\_internal\_key(stb\_sdict *a, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04406}04406 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04407}04407    \textcolor{keywordflow}{return} a-\/>table[n].k;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04408}04408 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04409}04409 \textcolor{keywordtype}{void}* stb\_sdict\_internal\_value(stb\_sdict *a, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04410}04410 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04411}04411    \textcolor{keywordflow}{return} a-\/>table[n].v;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04412}04412 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04413}04413 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04414}04414 stb\_sdict * stb\_sdict\_new(\textcolor{keywordtype}{int} use\_arena)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04415}04415 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04416}04416    stb\_sdict *d = stb\_sdict\_create();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04417}04417    \textcolor{keywordflow}{if} (d == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04418}04418    d-\/>arena = use\_arena ? stb\_malloc\_global(1) : NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04419}04419    \textcolor{keywordflow}{return} d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04420}04420 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04421}04421 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04422}04422 stb\_sdict* stb\_sdict\_copy(stb\_sdict *old)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04423}04423 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04424}04424    stb\_sdict *n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04425}04425    \textcolor{keywordtype}{void} *old\_arena = old-\/>arena;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04426}04426    \textcolor{keywordtype}{void} *new\_arena = old\_arena ? stb\_malloc\_global(1) : NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04427}04427    old-\/>arena = new\_arena;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04428}04428    n = stb\_sdictinternal\_copy(old);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04429}04429    old-\/>arena = old\_arena;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04430}04430    \textcolor{keywordflow}{if} (n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04431}04431       n-\/>arena = new\_arena;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04432}04432    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (new\_arena)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04433}04433       stb\_free(new\_arena);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04434}04434    \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04435}04435 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04436}04436 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04437}04437 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04438}04438 \textcolor{keywordtype}{void} stb\_sdict\_delete(stb\_sdict *d)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04439}04439 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04440}04440    \textcolor{keywordflow}{if} (d-\/>arena)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04441}04441       stb\_free(d-\/>arena);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04442}04442    stb\_sdict\_destroy(d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04443}04443 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04444}04444 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04445}04445 \textcolor{keywordtype}{void} * stb\_sdict\_change(stb\_sdict *d, \textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04446}04446 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04447}04447    \textcolor{keywordtype}{void} *q = stb\_sdict\_get(d, str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04448}04448    stb\_sdict\_set(d, str, p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04449}04449    \textcolor{keywordflow}{return} q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04450}04450 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04451}04451 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04452}04452 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04454}04454 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04455}04455 \textcolor{comment}{//                     Instantiated data structures}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04456}04456 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04457}04457 \textcolor{comment}{// This is an attempt to implement a templated data structure.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04458}04458 \textcolor{comment}{// What you do is define a struct foo, and then include several}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04459}04459 \textcolor{comment}{// pointer fields to struct foo in your struct. Then you call}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04460}04460 \textcolor{comment}{// the instantiator, which creates the functions that implement}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04461}04461 \textcolor{comment}{// the data structure. This requires massive undebuggable \#defines,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04462}04462 \textcolor{comment}{// so we limit the cases where we do this.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04463}04463 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04464}04464 \textcolor{comment}{// AA tree is an encoding of a 2-\/3 tree whereas RB trees encode a 2-\/3-\/4 tree;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04465}04465 \textcolor{comment}{// much simpler code due to fewer cases.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04466}04466 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04467}04467 \textcolor{preprocessor}{\#define stb\_\_bst\_parent(x)    x}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04468}04468 \textcolor{preprocessor}{\#define stb\_\_bst\_noparent(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04469}04469 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04470}04470 \textcolor{preprocessor}{\#define stb\_bst\_fields(N)                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04471}04471 \textcolor{preprocessor}{    *STB\_(N,left), *STB\_(N,right);                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04472}04472 \textcolor{preprocessor}{    unsigned char STB\_(N,level)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04473}04473 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04474}04474 \textcolor{preprocessor}{\#define stb\_bst\_fields\_parent(N)                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04475}04475 \textcolor{preprocessor}{    *STB\_(N,left), *STB\_(N,right),  *STB\_(N,parent);        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04476}04476 \textcolor{preprocessor}{    unsigned char STB\_(N,level)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04477}04477 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04478}04478 \textcolor{preprocessor}{\#define STB\_\_level(N,x)         ((x) ? (x)-\/>STB\_(N,level) : 0)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04479}04479 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04480}04480 \textcolor{preprocessor}{\#define stb\_bst\_base(TYPE, N, TREE, M, compare, PAR)                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04481}04481 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04482}04482 \textcolor{preprocessor}{static int STB\_(N,\_compare)(TYPE *p, TYPE *q)                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04483}04483 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04484}04484 \textcolor{preprocessor}{   compare                                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04485}04485 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04486}04486 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04487}04487 \textcolor{preprocessor}{static void STB\_(N,setleft)(TYPE *q, TYPE *v)                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04488}04488 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04489}04489 \textcolor{preprocessor}{   q-\/>STB\_(N,left) = v;                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04490}04490 \textcolor{preprocessor}{   PAR(if (v) v-\/>STB\_(N,parent) = q;)                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04491}04491 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04492}04492 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04493}04493 \textcolor{preprocessor}{static void STB\_(N,setright)(TYPE *q, TYPE *v)                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04494}04494 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04495}04495 \textcolor{preprocessor}{   q-\/>STB\_(N,right) = v;                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04496}04496 \textcolor{preprocessor}{   PAR(if (v) v-\/>STB\_(N,parent) = q;)                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04497}04497 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04498}04498 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04499}04499 \textcolor{preprocessor}{static TYPE *STB\_(N,skew)(TYPE *q)                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04500}04500 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04501}04501 \textcolor{preprocessor}{   if (q == NULL) return q;                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04502}04502 \textcolor{preprocessor}{   if (q-\/>STB\_(N,left)                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04503}04503 \textcolor{preprocessor}{        \&\& q-\/>STB\_(N,left)-\/>STB\_(N,level) == q-\/>STB\_(N,level)) \{             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04504}04504 \textcolor{preprocessor}{      TYPE *p       = q-\/>STB\_(N,left);                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04505}04505 \textcolor{preprocessor}{      STB\_(N,setleft)(q, p-\/>STB\_(N,right));                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04506}04506 \textcolor{preprocessor}{      STB\_(N,setright)(p, q);                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04507}04507 \textcolor{preprocessor}{      return p;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04508}04508 \textcolor{preprocessor}{   \}                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04509}04509 \textcolor{preprocessor}{   return q;                                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04510}04510 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04511}04511 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04512}04512 \textcolor{preprocessor}{static TYPE *STB\_(N,split)(TYPE *p)                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04513}04513 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04514}04514 \textcolor{preprocessor}{   TYPE *q = p-\/>STB\_(N,right);                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04515}04515 \textcolor{preprocessor}{   if (q \&\& q-\/>STB\_(N,right)                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04516}04516 \textcolor{preprocessor}{         \&\& q-\/>STB\_(N,right)-\/>STB\_(N,level) == p-\/>STB\_(N,level)) \{           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04517}04517 \textcolor{preprocessor}{      STB\_(N,setright)(p, q-\/>STB\_(N,left));                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04518}04518 \textcolor{preprocessor}{      STB\_(N,setleft)(q,p);                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04519}04519 \textcolor{preprocessor}{      ++q-\/>STB\_(N,level);                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04520}04520 \textcolor{preprocessor}{      return q;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04521}04521 \textcolor{preprocessor}{   \}                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04522}04522 \textcolor{preprocessor}{   return p;                                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04523}04523 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04524}04524 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04525}04525 \textcolor{preprocessor}{TYPE *STB\_\_(N,insert)(TYPE *tree, TYPE *item)                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04526}04526 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04527}04527 \textcolor{preprocessor}{   int c;                                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04528}04528 \textcolor{preprocessor}{   if (tree == NULL) \{                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04529}04529 \textcolor{preprocessor}{      item-\/>STB\_(N,left) = NULL;                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04530}04530 \textcolor{preprocessor}{      item-\/>STB\_(N,right) = NULL;                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04531}04531 \textcolor{preprocessor}{      item-\/>STB\_(N,level) = 1;                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04532}04532 \textcolor{preprocessor}{      PAR(item-\/>STB\_(N,parent) = NULL;)                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04533}04533 \textcolor{preprocessor}{      return item;                                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04534}04534 \textcolor{preprocessor}{   \}                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04535}04535 \textcolor{preprocessor}{   c = STB\_(N,\_compare)(item,tree);                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04536}04536 \textcolor{preprocessor}{   if (c == 0) \{                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04537}04537 \textcolor{preprocessor}{      if (item != tree) \{                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04538}04538 \textcolor{preprocessor}{         STB\_(N,setleft)(item, tree-\/>STB\_(N,left));                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04539}04539 \textcolor{preprocessor}{         STB\_(N,setright)(item, tree-\/>STB\_(N,right));                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04540}04540 \textcolor{preprocessor}{         item-\/>STB\_(N,level) = tree-\/>STB\_(N,level);                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04541}04541 \textcolor{preprocessor}{         PAR(item-\/>STB\_(N,parent) = NULL;)                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04542}04542 \textcolor{preprocessor}{      \}                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04543}04543 \textcolor{preprocessor}{      return item;                                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04544}04544 \textcolor{preprocessor}{   \}                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04545}04545 \textcolor{preprocessor}{   if (c < 0)                                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04546}04546 \textcolor{preprocessor}{      STB\_(N,setleft )(tree, STB\_\_(N,insert)(tree-\/>STB\_(N,left), item));     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04547}04547 \textcolor{preprocessor}{   else                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04548}04548 \textcolor{preprocessor}{      STB\_(N,setright)(tree, STB\_\_(N,insert)(tree-\/>STB\_(N,right), item));    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04549}04549 \textcolor{preprocessor}{   tree = STB\_(N,skew)(tree);                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04550}04550 \textcolor{preprocessor}{   tree = STB\_(N,split)(tree);                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04551}04551 \textcolor{preprocessor}{   PAR(tree-\/>STB\_(N,parent) = NULL;)                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04552}04552 \textcolor{preprocessor}{   return tree;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04553}04553 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04554}04554 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04555}04555 \textcolor{preprocessor}{TYPE *STB\_\_(N,remove)(TYPE *tree, TYPE *item)                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04556}04556 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04557}04557 \textcolor{preprocessor}{   static TYPE *delnode, *leaf, *restore;                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04558}04558 \textcolor{preprocessor}{   if (tree == NULL) return NULL;                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04559}04559 \textcolor{preprocessor}{   leaf = tree;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04560}04560 \textcolor{preprocessor}{   if (STB\_(N,\_compare)(item, tree) < 0) \{                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04561}04561 \textcolor{preprocessor}{      STB\_(N,setleft)(tree, STB\_\_(N,remove)(tree-\/>STB\_(N,left), item));      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04562}04562 \textcolor{preprocessor}{   \} else \{                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04563}04563 \textcolor{preprocessor}{      TYPE *r;                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04564}04564 \textcolor{preprocessor}{      delnode = tree;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04565}04565 \textcolor{preprocessor}{      r = STB\_\_(N,remove)(tree-\/>STB\_(N,right), item);                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04566}04566 \textcolor{preprocessor}{      }\textcolor{comment}{/* maybe move 'leaf' up to this location */}\textcolor{preprocessor}{                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04567}04567 \textcolor{preprocessor}{      if (restore == tree) \{ tree = leaf; leaf = restore = NULL;  \}          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04568}04568 \textcolor{preprocessor}{      STB\_(N,setright)(tree,r);                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04569}04569 \textcolor{preprocessor}{      assert(tree-\/>STB\_(N,right) != tree);                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04570}04570 \textcolor{preprocessor}{   \}                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04571}04571 \textcolor{preprocessor}{   if (tree == leaf) \{                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04572}04572 \textcolor{preprocessor}{      if (delnode == item) \{                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04573}04573 \textcolor{preprocessor}{         tree = tree-\/>STB\_(N,right);                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04574}04574 \textcolor{preprocessor}{         assert(leaf-\/>STB\_(N,left) == NULL);                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04575}04575 \textcolor{preprocessor}{         }\textcolor{comment}{/* move leaf (the right sibling) up to delnode */}\textcolor{preprocessor}{                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04576}04576 \textcolor{preprocessor}{         STB\_(N,setleft )(leaf, item-\/>STB\_(N,left ));                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04577}04577 \textcolor{preprocessor}{         STB\_(N,setright)(leaf, item-\/>STB\_(N,right));                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04578}04578 \textcolor{preprocessor}{         leaf-\/>STB\_(N,level) = item-\/>STB\_(N,level);                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04579}04579 \textcolor{preprocessor}{         if (leaf != item)                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04580}04580 \textcolor{preprocessor}{            restore = delnode;                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04581}04581 \textcolor{preprocessor}{      \}                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04582}04582 \textcolor{preprocessor}{      delnode = NULL;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04583}04583 \textcolor{preprocessor}{   \} else \{                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04584}04584 \textcolor{preprocessor}{      if (STB\_\_level(N,tree-\/>STB\_(N,left) ) < tree-\/>STB\_(N,level)-\/1 ||       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04585}04585 \textcolor{preprocessor}{          STB\_\_level(N,tree-\/>STB\_(N,right)) < tree-\/>STB\_(N,level)-\/1) \{       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04586}04586 \textcolor{preprocessor}{         -\/-\/tree-\/>STB\_(N,level);                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04587}04587 \textcolor{preprocessor}{         if (STB\_\_level(N,tree-\/>STB\_(N,right)) > tree-\/>STB\_(N,level))        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04588}04588 \textcolor{preprocessor}{            tree-\/>STB\_(N,right)-\/>STB\_(N,level) = tree-\/>STB\_(N,level);        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04589}04589 \textcolor{preprocessor}{         tree = STB\_(N,skew)(tree);                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04590}04590 \textcolor{preprocessor}{         STB\_(N,setright)(tree, STB\_(N,skew)(tree-\/>STB\_(N,right)));          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04591}04591 \textcolor{preprocessor}{         if (tree-\/>STB\_(N,right))                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04592}04592 \textcolor{preprocessor}{            STB\_(N,setright)(tree-\/>STB\_(N,right),                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04593}04593 \textcolor{preprocessor}{                  STB\_(N,skew)(tree-\/>STB\_(N,right)-\/>STB\_(N,right)));         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04594}04594 \textcolor{preprocessor}{         tree = STB\_(N,split)(tree);                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04595}04595 \textcolor{preprocessor}{         if (tree-\/>STB\_(N,right))                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04596}04596 \textcolor{preprocessor}{            STB\_(N,setright)(tree,  STB\_(N,split)(tree-\/>STB\_(N,right)));     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04597}04597 \textcolor{preprocessor}{      \}                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04598}04598 \textcolor{preprocessor}{   \}                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04599}04599 \textcolor{preprocessor}{   PAR(if (tree) tree-\/>STB\_(N,parent) = NULL;)                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04600}04600 \textcolor{preprocessor}{   return tree;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04601}04601 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04602}04602 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04603}04603 \textcolor{preprocessor}{TYPE *STB\_\_(N,last)(TYPE *tree)                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04604}04604 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04605}04605 \textcolor{preprocessor}{   if (tree)                                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04606}04606 \textcolor{preprocessor}{      while (tree-\/>STB\_(N,right)) tree = tree-\/>STB\_(N,right);                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04607}04607 \textcolor{preprocessor}{   return tree;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04608}04608 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04609}04609 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04610}04610 \textcolor{preprocessor}{TYPE *STB\_\_(N,first)(TYPE *tree)                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04611}04611 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04612}04612 \textcolor{preprocessor}{   if (tree)                                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04613}04613 \textcolor{preprocessor}{      while (tree-\/>STB\_(N,left)) tree = tree-\/>STB\_(N,left);                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04614}04614 \textcolor{preprocessor}{   return tree;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04615}04615 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04616}04616 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04617}04617 \textcolor{preprocessor}{TYPE *STB\_\_(N,next)(TYPE *tree, TYPE *item)                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04618}04618 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04619}04619 \textcolor{preprocessor}{   TYPE *next = NULL;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04620}04620 \textcolor{preprocessor}{   if (item-\/>STB\_(N,right))                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04621}04621 \textcolor{preprocessor}{      return STB\_\_(N,first)(item-\/>STB\_(N,right));                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04622}04622 \textcolor{preprocessor}{   PAR(                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04623}04623 \textcolor{preprocessor}{      while(item-\/>STB\_(N,parent)) \{                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04624}04624 \textcolor{preprocessor}{         TYPE *up = item-\/>STB\_(N,parent);                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04625}04625 \textcolor{preprocessor}{         if (up-\/>STB\_(N,left) == item) return up;                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04626}04626 \textcolor{preprocessor}{         item = up;                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04627}04627 \textcolor{preprocessor}{      \}                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04628}04628 \textcolor{preprocessor}{      return NULL;                                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04629}04629 \textcolor{preprocessor}{   )                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04630}04630 \textcolor{preprocessor}{   while (tree != item) \{                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04631}04631 \textcolor{preprocessor}{      if (STB\_(N,\_compare)(item, tree) < 0) \{                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04632}04632 \textcolor{preprocessor}{         next = tree;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04633}04633 \textcolor{preprocessor}{         tree = tree-\/>STB\_(N,left);                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04634}04634 \textcolor{preprocessor}{      \} else \{                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04635}04635 \textcolor{preprocessor}{         tree = tree-\/>STB\_(N,right);                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04636}04636 \textcolor{preprocessor}{      \}                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04637}04637 \textcolor{preprocessor}{   \}                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04638}04638 \textcolor{preprocessor}{   return next;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04639}04639 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04640}04640 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04641}04641 \textcolor{preprocessor}{TYPE *STB\_\_(N,prev)(TYPE *tree, TYPE *item)                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04642}04642 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04643}04643 \textcolor{preprocessor}{   TYPE *next = NULL;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04644}04644 \textcolor{preprocessor}{   if (item-\/>STB\_(N,left))                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04645}04645 \textcolor{preprocessor}{      return STB\_\_(N,last)(item-\/>STB\_(N,left));                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04646}04646 \textcolor{preprocessor}{   PAR(                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04647}04647 \textcolor{preprocessor}{      while(item-\/>STB\_(N,parent)) \{                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04648}04648 \textcolor{preprocessor}{         TYPE *up = item-\/>STB\_(N,parent);                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04649}04649 \textcolor{preprocessor}{         if (up-\/>STB\_(N,right) == item) return up;                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04650}04650 \textcolor{preprocessor}{         item = up;                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04651}04651 \textcolor{preprocessor}{      \}                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04652}04652 \textcolor{preprocessor}{      return NULL;                                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04653}04653 \textcolor{preprocessor}{   )                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04654}04654 \textcolor{preprocessor}{   while (tree != item) \{                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04655}04655 \textcolor{preprocessor}{      if (STB\_(N,\_compare)(item, tree) < 0) \{                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04656}04656 \textcolor{preprocessor}{         tree = tree-\/>STB\_(N,left);                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04657}04657 \textcolor{preprocessor}{      \} else \{                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04658}04658 \textcolor{preprocessor}{         next = tree;                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04659}04659 \textcolor{preprocessor}{         tree = tree-\/>STB\_(N,right);                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04660}04660 \textcolor{preprocessor}{      \}                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04661}04661 \textcolor{preprocessor}{   \}                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04662}04662 \textcolor{preprocessor}{   return next;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04663}04663 \textcolor{preprocessor}{\}                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04664}04664 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04665}04665 \textcolor{preprocessor}{STB\_\_DEBUG(                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04666}04666 \textcolor{preprocessor}{   void STB\_\_(N,\_validate)(TYPE *tree, int root)                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04667}04667 \textcolor{preprocessor}{   \{                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04668}04668 \textcolor{preprocessor}{      if (tree == NULL) return;                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04669}04669 \textcolor{preprocessor}{      PAR(if(root) assert(tree-\/>STB\_(N,parent) == NULL);)                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04670}04670 \textcolor{preprocessor}{      assert(STB\_\_level(N,tree-\/>STB\_(N,left) ) == tree-\/>STB\_(N,level)-\/1);    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04671}04671 \textcolor{preprocessor}{      assert(STB\_\_level(N,tree-\/>STB\_(N,right)) <= tree-\/>STB\_(N,level));      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04672}04672 \textcolor{preprocessor}{      assert(STB\_\_level(N,tree-\/>STB\_(N,right)) >= tree-\/>STB\_(N,level)-\/1);    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04673}04673 \textcolor{preprocessor}{      if (tree-\/>STB\_(N,right)) \{                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04674}04674 \textcolor{preprocessor}{        assert(STB\_\_level(N,tree-\/>STB\_(N,right)-\/>STB\_(N,right))              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04675}04675 \textcolor{preprocessor}{                                               !=    tree-\/>STB\_(N,level));   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04676}04676 \textcolor{preprocessor}{        PAR(assert(tree-\/>STB\_(N,right)-\/>STB\_(N,parent) == tree);)            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04677}04677 \textcolor{preprocessor}{      \}                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04678}04678 \textcolor{preprocessor}{      PAR(if(tree-\/>STB\_(N,left)) assert(tree-\/>STB\_(N,left)-\/>STB\_(N,parent) == tree);) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04679}04679 \textcolor{preprocessor}{      STB\_\_(N,\_validate)(tree-\/>STB\_(N,left) ,0);                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04680}04680 \textcolor{preprocessor}{      STB\_\_(N,\_validate)(tree-\/>STB\_(N,right),0);                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04681}04681 \textcolor{preprocessor}{   \}                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04682}04682 \textcolor{preprocessor}{)                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04683}04683 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04684}04684 \textcolor{preprocessor}{typedef struct                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04685}04685 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04686}04686 \textcolor{preprocessor}{   TYPE *root;                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04687}04687 \textcolor{preprocessor}{\} TREE;                                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04688}04688 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04689}04689 \textcolor{preprocessor}{void  STB\_\_(M,Insert)(TREE *tree, TYPE *item)                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04690}04690 \textcolor{preprocessor}{\{ tree-\/>root = STB\_\_(N,insert)(tree-\/>root, item); \}                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04691}04691 \textcolor{preprocessor}{void  STB\_\_(M,Remove)(TREE *tree, TYPE *item)                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04692}04692 \textcolor{preprocessor}{\{ tree-\/>root = STB\_\_(N,remove)(tree-\/>root, item); \}                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04693}04693 \textcolor{preprocessor}{TYPE *STB\_\_(M,Next)(TREE *tree, TYPE *item)                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04694}04694 \textcolor{preprocessor}{\{ return STB\_\_(N,next)(tree-\/>root, item); \}                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04695}04695 \textcolor{preprocessor}{TYPE *STB\_\_(M,Prev)(TREE *tree, TYPE *item)                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04696}04696 \textcolor{preprocessor}{\{ return STB\_\_(N,prev)(tree-\/>root, item); \}                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04697}04697 \textcolor{preprocessor}{TYPE *STB\_\_(M,First)(TREE *tree) \{ return STB\_\_(N,first)(tree-\/>root); \}      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04698}04698 \textcolor{preprocessor}{TYPE *STB\_\_(M,Last) (TREE *tree) \{ return STB\_\_(N,last) (tree-\/>root); \}      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04699}04699 \textcolor{preprocessor}{void STB\_\_(M,Init)(TREE *tree) \{ tree-\/>root = NULL; \}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04700}04700 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04701}04701 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04702}04702 \textcolor{preprocessor}{\#define stb\_bst\_find(N,tree,fcompare)                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04703}04703 \textcolor{preprocessor}{\{                                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04704}04704 \textcolor{preprocessor}{   int c;                                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04705}04705 \textcolor{preprocessor}{   while (tree != NULL) \{                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04706}04706 \textcolor{preprocessor}{      fcompare                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04707}04707 \textcolor{preprocessor}{      if (c == 0) return tree;                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04708}04708 \textcolor{preprocessor}{      if (c < 0)  tree = tree-\/>STB\_(N,left);                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04709}04709 \textcolor{preprocessor}{      else        tree = tree-\/>STB\_(N,right);                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04710}04710 \textcolor{preprocessor}{   \}                                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04711}04711 \textcolor{preprocessor}{   return NULL;                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04712}04712 \textcolor{preprocessor}{\}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04713}04713 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04714}04714 \textcolor{preprocessor}{\#define stb\_bst\_raw(TYPE,N,TREE,M,vfield,VTYPE,compare,PAR)                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04715}04715 \textcolor{preprocessor}{   stb\_bst\_base(TYPE,N,TREE,M,                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04716}04716 \textcolor{preprocessor}{         VTYPE a = p-\/>vfield; VTYPE b = q-\/>vfield; return (compare);, PAR )  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04717}04717 \textcolor{preprocessor}{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04718}04718 \textcolor{preprocessor}{TYPE *STB\_\_(N,find)(TYPE *tree, VTYPE a)                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04719}04719 \textcolor{preprocessor}{   stb\_bst\_find(N,tree,VTYPE b = tree-\/>vfield; c = (compare);)               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04720}04720 \textcolor{preprocessor}{TYPE *STB\_\_(M,Find)(TREE *tree, VTYPE a)                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04721}04721 \textcolor{preprocessor}{\{ return STB\_\_(N,find)(tree-\/>root, a); \}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04722}04722 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04723}04723 \textcolor{preprocessor}{\#define stb\_bst(TYPE,N,TREE,M,vfield,VTYPE,compare) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04724}04724 \textcolor{preprocessor}{   stb\_bst\_raw(TYPE,N,TREE,M,vfield,VTYPE,compare,stb\_\_bst\_noparent)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04725}04725 \textcolor{preprocessor}{\#define stb\_bst\_parent(TYPE,N,TREE,M,vfield,VTYPE,compare) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04726}04726 \textcolor{preprocessor}{   stb\_bst\_raw(TYPE,N,TREE,M,vfield,VTYPE,compare,stb\_\_bst\_parent)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04727}04727 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04728}04728 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04729}04729 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04731}04731 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04732}04732 \textcolor{comment}{//                             Pointer Nulling}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04733}04733 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04734}04734 \textcolor{comment}{//  This lets you automatically NULL dangling pointers to "{}registered"{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04735}04735 \textcolor{comment}{//  objects. Note that you have to make sure you call the appropriate}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04736}04736 \textcolor{comment}{//  functions when you free or realloc blocks of memory that contain}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04737}04737 \textcolor{comment}{//  pointers or pointer targets. stb.h can automatically do this for}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04738}04738 \textcolor{comment}{//  stb\_arr, or for all frees/reallocs if it's wrapping them.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04739}04739 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04740}04740 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04741}04741 \textcolor{preprocessor}{\#ifdef STB\_NPTR}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04742}04742 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04743}04743 STB\_EXTERN \textcolor{keywordtype}{void} stb\_nptr\_set(\textcolor{keywordtype}{void} *address\_of\_pointer, \textcolor{keywordtype}{void} *value\_to\_write);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04744}04744 STB\_EXTERN \textcolor{keywordtype}{void} stb\_nptr\_didset(\textcolor{keywordtype}{void} *address\_of\_pointer);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04745}04745 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04746}04746 STB\_EXTERN \textcolor{keywordtype}{void} stb\_nptr\_didfree(\textcolor{keywordtype}{void} *address\_being\_freed, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04747}04747 STB\_EXTERN \textcolor{keywordtype}{void} stb\_nptr\_free(\textcolor{keywordtype}{void} *address\_being\_freed, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04748}04748 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04749}04749 STB\_EXTERN \textcolor{keywordtype}{void} stb\_nptr\_didrealloc(\textcolor{keywordtype}{void} *new\_address, \textcolor{keywordtype}{void} *old\_address, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04750}04750 STB\_EXTERN \textcolor{keywordtype}{void} stb\_nptr\_recache(\textcolor{keywordtype}{void}); \textcolor{comment}{// recache all known pointers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04751}04751                                        \textcolor{comment}{// do this after pointer sets outside your control, slow}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04752}04752 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04753}04753 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04754}04754 \textcolor{comment}{// for fast updating on free/realloc, we need to be able to find}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04755}04755 \textcolor{comment}{// all the objects (pointers and targets) within a given block;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04756}04756 \textcolor{comment}{// this precludes hashing}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04757}04757 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04758}04758 \textcolor{comment}{// we use a three-\/level hierarchy of memory to minimize storage:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04759}04759 \textcolor{comment}{//   level 1: 65536 pointers to stb\_\_memory\_node (always uses 256 KB)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04760}04760 \textcolor{comment}{//   level 2: each stb\_\_memory\_node represents a 64K block of memory}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04761}04761 \textcolor{comment}{//            with 256 stb\_\_memory\_leafs (worst case 64MB)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04762}04762 \textcolor{comment}{//   level 3: each stb\_\_memory\_leaf represents 256 bytes of memory}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04763}04763 \textcolor{comment}{//            using a list of target locations and a list of pointers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04764}04764 \textcolor{comment}{//            (which are hopefully fairly short normally!)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04765}04765 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04766}04766 \textcolor{comment}{// this approach won't work in 64-\/bit, which has a much larger address}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04767}04767 \textcolor{comment}{// space. need to redesign}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04768}04768 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04769}04769 \textcolor{preprocessor}{\#define STB\_\_NPTR\_ROOT\_LOG2   16}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04770}04770 \textcolor{preprocessor}{\#define STB\_\_NPTR\_ROOT\_NUM    (1 << STB\_\_NPTR\_ROOT\_LOG2)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04771}04771 \textcolor{preprocessor}{\#define STB\_\_NPTR\_ROOT\_SHIFT  (32 -\/ STB\_\_NPTR\_ROOT\_LOG2)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04772}04772 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04773}04773 \textcolor{preprocessor}{\#define STB\_\_NPTR\_NODE\_LOG2   5}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04774}04774 \textcolor{preprocessor}{\#define STB\_\_NPTR\_NODE\_NUM    (1 << STB\_\_NPTR\_NODE\_LOG2)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04775}04775 \textcolor{preprocessor}{\#define STB\_\_NPTR\_NODE\_MASK   (STB\_\_NPTR\_NODE\_NUM-\/1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04776}04776 \textcolor{preprocessor}{\#define STB\_\_NPTR\_NODE\_SHIFT  (STB\_\_NPTR\_ROOT\_SHIFT -\/ STB\_\_NPTR\_NODE\_LOG2)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04777}04777 \textcolor{preprocessor}{\#define STB\_\_NPTR\_NODE\_OFFSET(x)   (((x) >> STB\_\_NPTR\_NODE\_SHIFT) \& STB\_\_NPTR\_NODE\_MASK)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04778}04778 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04779}04779 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_\_st\_nptr}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04780}04780 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04781}04781    \textcolor{keywordtype}{void} *ptr;   \textcolor{comment}{// address of actual pointer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04782}04782    \textcolor{keyword}{struct }stb\_\_st\_nptr *next;   \textcolor{comment}{// next pointer with same target}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04783}04783    \textcolor{keyword}{struct }stb\_\_st\_nptr **prev;  \textcolor{comment}{// prev pointer with same target, address of 'next' field (or first)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04784}04784    \textcolor{keyword}{struct }stb\_\_st\_nptr *next\_in\_block;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04785}04785 \} stb\_\_nptr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04786}04786 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04787}04787 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_\_st\_nptr\_target}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04788}04788 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04789}04789    \textcolor{keywordtype}{void} *ptr;   \textcolor{comment}{// address of target}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04790}04790    stb\_\_nptr *first; \textcolor{comment}{// address of first nptr pointing to this}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04791}04791    \textcolor{keyword}{struct }stb\_\_st\_nptr\_target *next\_in\_block;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04792}04792 \} stb\_\_nptr\_target;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04793}04793 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04794}04794 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04795}04795 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04796}04796    stb\_\_nptr *pointers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04797}04797    stb\_\_nptr\_target *targets;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04798}04798 \} stb\_\_memory\_leaf;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04799}04799 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04800}04800 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04801}04801 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04802}04802    stb\_\_memory\_leaf *children[STB\_\_NPTR\_NODE\_NUM];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04803}04803 \} stb\_\_memory\_node;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04804}04804 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04805}04805 stb\_\_memory\_node *stb\_\_memtab\_root[STB\_\_NPTR\_ROOT\_NUM];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04806}04806 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04807}04807 \textcolor{keyword}{static} stb\_\_memory\_leaf *stb\_\_nptr\_find\_leaf(\textcolor{keywordtype}{void} *mem)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04808}04808 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04809}04809    stb\_uint32 address = (stb\_uint32) mem;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04810}04810    stb\_\_memory\_node *z = stb\_\_memtab\_root[address >> STB\_\_NPTR\_ROOT\_SHIFT];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04811}04811    \textcolor{keywordflow}{if} (z)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04812}04812       \textcolor{keywordflow}{return} z-\/>children[STB\_\_NPTR\_NODE\_OFFSET(address)];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04813}04813    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04814}04814       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04815}04815 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04816}04816 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04817}04817 \textcolor{keyword}{static} \textcolor{keywordtype}{void} * stb\_\_nptr\_alloc(\textcolor{keywordtype}{int} size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04818}04818 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04819}04819    \textcolor{keywordflow}{return} stb\_\_realloc\_raw(0,size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04820}04820 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04821}04821 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04822}04822 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_nptr\_free(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04823}04823 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04824}04824    stb\_\_realloc\_raw(p,0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04825}04825 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04826}04826 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04827}04827 \textcolor{keyword}{static} stb\_\_memory\_leaf *stb\_\_nptr\_make\_leaf(\textcolor{keywordtype}{void} *mem)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04828}04828 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04829}04829    stb\_uint32 address = (stb\_uint32) mem;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04830}04830    stb\_\_memory\_node *z = stb\_\_memtab\_root[address >> STB\_\_NPTR\_ROOT\_SHIFT];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04831}04831    stb\_\_memory\_leaf *f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04832}04832    \textcolor{keywordflow}{if} (!z) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04833}04833       \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04834}04834       z = (stb\_\_memory\_node *) stb\_\_nptr\_alloc(\textcolor{keyword}{sizeof}(*stb\_\_memtab\_root[0]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04835}04835       stb\_\_memtab\_root[address >> STB\_\_NPTR\_ROOT\_SHIFT] = z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04836}04836       \textcolor{keywordflow}{for} (i=0; i < 256; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04837}04837          z-\/>children[i] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04838}04838    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04839}04839    f = (stb\_\_memory\_leaf *) stb\_\_nptr\_alloc(\textcolor{keyword}{sizeof}(*f));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04840}04840    z-\/>children[STB\_\_NPTR\_NODE\_OFFSET(address)] = f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04841}04841    f-\/>pointers = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04842}04842    f-\/>targets = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04843}04843    \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04844}04844 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04845}04845 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04846}04846 \textcolor{keyword}{static} stb\_\_nptr\_target *stb\_\_nptr\_find\_target(\textcolor{keywordtype}{void} *target, \textcolor{keywordtype}{int} force)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04847}04847 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04848}04848    stb\_\_memory\_leaf *p = stb\_\_nptr\_find\_leaf(target);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04849}04849    \textcolor{keywordflow}{if} (p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04850}04850       stb\_\_nptr\_target *t = p-\/>targets;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04851}04851       \textcolor{keywordflow}{while} (t) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04852}04852          \textcolor{keywordflow}{if} (t-\/>ptr == target)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04853}04853             \textcolor{keywordflow}{return} t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04854}04854          t = t-\/>next\_in\_block;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04855}04855       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04856}04856    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04857}04857    \textcolor{keywordflow}{if} (force) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04858}04858       stb\_\_nptr\_target *t = (stb\_\_nptr\_target*) stb\_\_nptr\_alloc(\textcolor{keyword}{sizeof}(*t));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04859}04859       \textcolor{keywordflow}{if} (!p) p = stb\_\_nptr\_make\_leaf(target);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04860}04860       t-\/>ptr = target;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04861}04861       t-\/>first = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04862}04862       t-\/>next\_in\_block = p-\/>targets;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04863}04863       p-\/>targets = t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04864}04864       \textcolor{keywordflow}{return} t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04865}04865    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04866}04866       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04867}04867 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04868}04868 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04869}04869 \textcolor{keyword}{static} stb\_\_nptr *stb\_\_nptr\_find\_pointer(\textcolor{keywordtype}{void} *ptr, \textcolor{keywordtype}{int} force)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04870}04870 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04871}04871    stb\_\_memory\_leaf *p = stb\_\_nptr\_find\_leaf(ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04872}04872    \textcolor{keywordflow}{if} (p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04873}04873       stb\_\_nptr *t = p-\/>pointers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04874}04874       \textcolor{keywordflow}{while} (t) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04875}04875          \textcolor{keywordflow}{if} (t-\/>ptr == ptr)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04876}04876             \textcolor{keywordflow}{return} t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04877}04877          t = t-\/>next\_in\_block;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04878}04878       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04879}04879    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04880}04880    \textcolor{keywordflow}{if} (force) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04881}04881       stb\_\_nptr *t = (stb\_\_nptr *) stb\_\_nptr\_alloc(\textcolor{keyword}{sizeof}(*t));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04882}04882       \textcolor{keywordflow}{if} (!p) p = stb\_\_nptr\_make\_leaf(ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04883}04883       t-\/>ptr = ptr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04884}04884       t-\/>next = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04885}04885       t-\/>prev = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04886}04886       t-\/>next\_in\_block = p-\/>pointers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04887}04887       p-\/>pointers = t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04888}04888       \textcolor{keywordflow}{return} t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04889}04889    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04890}04890       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04891}04891 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04892}04892 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04893}04893 \textcolor{keywordtype}{void} stb\_nptr\_set(\textcolor{keywordtype}{void} *address\_of\_pointer, \textcolor{keywordtype}{void} *value\_to\_write)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04894}04894 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04895}04895    \textcolor{keywordflow}{if} (*(\textcolor{keywordtype}{void} **)address\_of\_pointer != value\_to\_write) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04896}04896       *(\textcolor{keywordtype}{void} **) address\_of\_pointer = value\_to\_write;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04897}04897       stb\_nptr\_didset(address\_of\_pointer);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04898}04898    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04899}04899 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04900}04900 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04901}04901 \textcolor{keywordtype}{void} stb\_nptr\_didset(\textcolor{keywordtype}{void} *address\_of\_pointer)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04902}04902 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04903}04903    \textcolor{comment}{// first unlink from old chain}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04904}04904    \textcolor{keywordtype}{void} *new\_address;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04905}04905    stb\_\_nptr *p = stb\_\_nptr\_find\_pointer(address\_of\_pointer, 1); \textcolor{comment}{// force building if doesn't exist}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04906}04906    \textcolor{keywordflow}{if} (p-\/>prev) \{ \textcolor{comment}{// if p-\/>prev is NULL, we just built it, or it was NULL}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04907}04907       *(p-\/>prev) = p-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04908}04908       if (p-\/>next) p-\/>next-\/>prev = p-\/>prev;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04909}04909    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04910}04910    \textcolor{comment}{// now add to new chain}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04911}04911    new\_address = *(\textcolor{keywordtype}{void} **)address\_of\_pointer;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04912}04912    \textcolor{keywordflow}{if} (new\_address != NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04913}04913       stb\_\_nptr\_target *t = stb\_\_nptr\_find\_target(new\_address, 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04914}04914       p-\/>next = t-\/>first;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04915}04915       \textcolor{keywordflow}{if} (p-\/>next) p-\/>next-\/>prev = \&p-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04916}04916       p-\/>prev = \&t-\/>first;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04917}04917       t-\/>first = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04918}04918    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04919}04919       p-\/>prev = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04920}04920       p-\/>next = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04921}04921    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04922}04922 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04923}04923 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04924}04924 \textcolor{keywordtype}{void} stb\_\_nptr\_block(\textcolor{keywordtype}{void} *address, \textcolor{keywordtype}{int} len, \textcolor{keywordtype}{void} (*\textcolor{keyword}{function})(stb\_\_memory\_leaf *f, \textcolor{keywordtype}{int} datum, \textcolor{keywordtype}{void} *start, \textcolor{keywordtype}{void} *end), \textcolor{keywordtype}{int} datum)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04925}04925 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04926}04926    \textcolor{keywordtype}{void} *end\_address = (\textcolor{keywordtype}{void} *) ((\textcolor{keywordtype}{char} *) address + len -\/ 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04927}04927    stb\_\_memory\_node *n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04928}04928    stb\_uint32 start = (stb\_uint32) address;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04929}04929    stb\_uint32 end   = start + len -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04930}04930 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04931}04931    \textcolor{keywordtype}{int} b0 = start >> STB\_\_NPTR\_ROOT\_SHIFT;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04932}04932    \textcolor{keywordtype}{int} b1 = end >> STB\_\_NPTR\_ROOT\_SHIFT;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04933}04933    \textcolor{keywordtype}{int} b=b0,i,e0,e1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04934}04934 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04935}04935    e0 = STB\_\_NPTR\_NODE\_OFFSET(start);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04936}04936 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04937}04937    \textcolor{keywordflow}{if} (datum <= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04938}04938       \textcolor{comment}{// first block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04939}04939       n = stb\_\_memtab\_root[b0];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04940}04940       \textcolor{keywordflow}{if} (n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04941}04941          \textcolor{keywordflow}{if} (b0 != b1)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04942}04942             e1 = STB\_\_NPTR\_NODE\_NUM-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04943}04943          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04944}04944             e1 = STB\_\_NPTR\_NODE\_OFFSET(end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04945}04945          \textcolor{keywordflow}{for} (i=e0; i <= e1; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04946}04946             \textcolor{keywordflow}{if} (n-\/>children[i])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04947}04947                \textcolor{keyword}{function}(n-\/>children[i], datum, address, end\_address);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04948}04948       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04949}04949       \textcolor{keywordflow}{if} (b1 > b0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04950}04950          \textcolor{comment}{// blocks other than the first and last block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04951}04951          \textcolor{keywordflow}{for} (b=b0+1; b < b1; ++b) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04952}04952             n = stb\_\_memtab\_root[b];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04953}04953             \textcolor{keywordflow}{if} (n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04954}04954                \textcolor{keywordflow}{for} (i=0; i <= STB\_\_NPTR\_NODE\_NUM-\/1; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04955}04955                   \textcolor{keywordflow}{if} (n-\/>children[i])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04956}04956                      \textcolor{keyword}{function}(n-\/>children[i], datum, address, end\_address);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04957}04957          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04958}04958          \textcolor{comment}{// last block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04959}04959          n = stb\_\_memtab\_root[b1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04960}04960          \textcolor{keywordflow}{if} (n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04961}04961             e1 = STB\_\_NPTR\_NODE\_OFFSET(end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04962}04962             \textcolor{keywordflow}{for} (i=0; i <= e1; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04963}04963                \textcolor{keywordflow}{if} (n-\/>children[i])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04964}04964                   \textcolor{keyword}{function}(n-\/>children[i], datum, address, end\_address);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04965}04965          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04966}04966       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04967}04967    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04968}04968       \textcolor{keywordflow}{if} (b1 > b0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04969}04969          \textcolor{comment}{// last block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04970}04970          n = stb\_\_memtab\_root[b1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04971}04971          \textcolor{keywordflow}{if} (n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04972}04972             e1 = STB\_\_NPTR\_NODE\_OFFSET(end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04973}04973             \textcolor{keywordflow}{for} (i=e1; i >= 0; -\/-\/i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04974}04974                \textcolor{keywordflow}{if} (n-\/>children[i])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04975}04975                   \textcolor{keyword}{function}(n-\/>children[i], datum, address, end\_address);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04976}04976          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04977}04977          \textcolor{comment}{// blocks other than the first and last block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04978}04978          \textcolor{keywordflow}{for} (b=b1-\/1; b > b0; -\/-\/b) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04979}04979             n = stb\_\_memtab\_root[b];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04980}04980             \textcolor{keywordflow}{if} (n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04981}04981                \textcolor{keywordflow}{for} (i=STB\_\_NPTR\_NODE\_NUM-\/1; i >= 0; -\/-\/i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04982}04982                   \textcolor{keywordflow}{if} (n-\/>children[i])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04983}04983                      \textcolor{keyword}{function}(n-\/>children[i], datum, address, end\_address);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04984}04984          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04985}04985       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04986}04986       \textcolor{comment}{// first block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04987}04987       n = stb\_\_memtab\_root[b0];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04988}04988       \textcolor{keywordflow}{if} (n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04989}04989          \textcolor{keywordflow}{if} (b0 != b1)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04990}04990             e1 = STB\_\_NPTR\_NODE\_NUM-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04991}04991          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04992}04992             e1 = STB\_\_NPTR\_NODE\_OFFSET(end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04993}04993          \textcolor{keywordflow}{for} (i=e1; i >= e0; -\/-\/i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04994}04994             \textcolor{keywordflow}{if} (n-\/>children[i])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04995}04995                \textcolor{keyword}{function}(n-\/>children[i], datum, address, end\_address);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04996}04996       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04997}04997    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04998}04998 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l04999}04999 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05000}05000 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_nptr\_delete\_pointers(stb\_\_memory\_leaf *f, \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{void} *start, \textcolor{keywordtype}{void} *end)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05001}05001 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05002}05002    stb\_\_nptr **p = \&f-\/>pointers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05003}05003    \textcolor{keywordflow}{while} (*p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05004}05004       stb\_\_nptr *n = *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05005}05005       \textcolor{keywordflow}{if} (n-\/>ptr >= start \&\& n-\/>ptr <= end) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05006}05006          \textcolor{comment}{// unlink}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05007}05007          \textcolor{keywordflow}{if} (n-\/>prev) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05008}05008             *(n-\/>prev) = n-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05009}05009             if (n-\/>next) n-\/>next-\/>prev = n-\/>prev;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05010}05010          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05011}05011          *p = n-\/>next\_in\_block;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05012}05012          stb\_\_nptr\_free(n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05013}05013       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05014}05014          p = \&(n-\/>next\_in\_block);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05015}05015    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05016}05016 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05017}05017 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05018}05018 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_nptr\_delete\_targets(stb\_\_memory\_leaf *f, \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{void} *start, \textcolor{keywordtype}{void} *end)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05019}05019 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05020}05020    stb\_\_nptr\_target **p = \&f-\/>targets;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05021}05021    \textcolor{keywordflow}{while} (*p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05022}05022       stb\_\_nptr\_target *n = *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05023}05023       \textcolor{keywordflow}{if} (n-\/>ptr >= start \&\& n-\/>ptr <= end) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05024}05024          \textcolor{comment}{// null pointers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05025}05025          stb\_\_nptr *z = n-\/>first;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05026}05026          \textcolor{keywordflow}{while} (z) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05027}05027             stb\_\_nptr *y = z-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05028}05028             z-\/>prev = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05029}05029             z-\/>next = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05030}05030             *(\textcolor{keywordtype}{void} **) z-\/>ptr = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05031}05031             z = y;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05032}05032          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05033}05033          \textcolor{comment}{// unlink this target}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05034}05034          *p = n-\/>next\_in\_block;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05035}05035          stb\_\_nptr\_free(n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05036}05036       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05037}05037          p = \&(n-\/>next\_in\_block);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05038}05038    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05039}05039 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05040}05040 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05041}05041 \textcolor{keywordtype}{void} stb\_nptr\_didfree(\textcolor{keywordtype}{void} *address\_being\_freed, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05042}05042 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05043}05043    \textcolor{comment}{// step one: delete all pointers in this block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05044}05044    stb\_\_nptr\_block(address\_being\_freed, len, stb\_\_nptr\_delete\_pointers, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05045}05045    \textcolor{comment}{// step two: NULL all pointers to this block; do this second to avoid NULLing deleted pointers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05046}05046    stb\_\_nptr\_block(address\_being\_freed, len, stb\_\_nptr\_delete\_targets, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05047}05047 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05048}05048 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05049}05049 \textcolor{keywordtype}{void} stb\_nptr\_free(\textcolor{keywordtype}{void} *address\_being\_freed, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05050}05050 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05051}05051    free(address\_being\_freed);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05052}05052    stb\_nptr\_didfree(address\_being\_freed, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05053}05053 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05054}05054 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05055}05055 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_nptr\_move\_targets(stb\_\_memory\_leaf *f, \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{void} *start, \textcolor{keywordtype}{void} *end)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05056}05056 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05057}05057    stb\_\_nptr\_target **t = \&f-\/>targets;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05058}05058    \textcolor{keywordflow}{while} (*t) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05059}05059       stb\_\_nptr\_target *n = *t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05060}05060       \textcolor{keywordflow}{if} (n-\/>ptr >= start \&\& n-\/>ptr <= end) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05061}05061          stb\_\_nptr *z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05062}05062          stb\_\_memory\_leaf *f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05063}05063          \textcolor{comment}{// unlink n}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05064}05064          *t = n-\/>next\_in\_block;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05065}05065          \textcolor{comment}{// update n to new address}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05066}05066          n-\/>ptr = (\textcolor{keywordtype}{void} *) ((\textcolor{keywordtype}{char} *) n-\/>ptr + offset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05067}05067          f = stb\_\_nptr\_find\_leaf(n-\/>ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05068}05068          \textcolor{keywordflow}{if} (!f) f = stb\_\_nptr\_make\_leaf(n-\/>ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05069}05069          n-\/>next\_in\_block = f-\/>targets;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05070}05070          f-\/>targets = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05071}05071          \textcolor{comment}{// now go through all pointers and make them point here}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05072}05072          z = n-\/>first;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05073}05073          \textcolor{keywordflow}{while} (z) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05074}05074             *(\textcolor{keywordtype}{void}**) z-\/>ptr = n-\/>ptr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05075}05075             z = z-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05076}05076          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05077}05077       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05078}05078          t = \&(n-\/>next\_in\_block);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05079}05079    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05080}05080 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05081}05081 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05082}05082 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_nptr\_move\_pointers(stb\_\_memory\_leaf *f, \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{void} *start, \textcolor{keywordtype}{void} *end)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05083}05083 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05084}05084    stb\_\_nptr **p = \&f-\/>pointers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05085}05085    \textcolor{keywordflow}{while} (*p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05086}05086       stb\_\_nptr *n = *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05087}05087       \textcolor{keywordflow}{if} (n-\/>ptr >= start \&\& n-\/>ptr <= end) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05088}05088          \textcolor{comment}{// unlink}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05089}05089          *p = n-\/>next\_in\_block;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05090}05090          n-\/>ptr = (\textcolor{keywordtype}{void} *) ((\textcolor{keywordtype}{int}) n-\/>ptr + offset);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05091}05091          \textcolor{comment}{// move to new block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05092}05092          f = stb\_\_nptr\_find\_leaf(n-\/>ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05093}05093          \textcolor{keywordflow}{if} (!f) f = stb\_\_nptr\_make\_leaf(n-\/>ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05094}05094          n-\/>next\_in\_block = f-\/>pointers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05095}05095          f-\/>pointers = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05096}05096       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05097}05097          p = \&(n-\/>next\_in\_block);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05098}05098    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05099}05099 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05100}05100 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05101}05101 \textcolor{keywordtype}{void} stb\_nptr\_realloc(\textcolor{keywordtype}{void} *new\_address, \textcolor{keywordtype}{void} *old\_address, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05102}05102 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05103}05103    \textcolor{keywordflow}{if} (new\_address == old\_address) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05104}05104 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05105}05105    \textcolor{comment}{// have to move the pointers first, because moving the targets}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05106}05106    \textcolor{comment}{//      requires writing to the pointers-\/to-\/the-\/targets, and if some of those moved too,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05107}05107    \textcolor{comment}{//      we need to make sure we don't write to the old memory}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05108}05108 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05109}05109    \textcolor{comment}{// step one: move all pointers within the block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05110}05110    stb\_\_nptr\_block(old\_address, len, stb\_\_nptr\_move\_pointers, (\textcolor{keywordtype}{char} *) new\_address -\/ (\textcolor{keywordtype}{char} *) old\_address);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05111}05111    \textcolor{comment}{// step two: move all targets within the block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05112}05112    stb\_\_nptr\_block(old\_address, len, stb\_\_nptr\_move\_targets, (\textcolor{keywordtype}{char} *) new\_address -\/ (\textcolor{keywordtype}{char} *) old\_address);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05113}05113 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05114}05114 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05115}05115 \textcolor{keywordtype}{void} stb\_nptr\_move(\textcolor{keywordtype}{void} *new\_address, \textcolor{keywordtype}{void} *old\_address)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05116}05116 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05117}05117    stb\_nptr\_realloc(new\_address, old\_address, 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05118}05118 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05119}05119 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05120}05120 \textcolor{keywordtype}{void} stb\_nptr\_recache(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05121}05121 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05122}05122    \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05123}05123    \textcolor{keywordflow}{for} (i=0; i < STB\_\_NPTR\_ROOT\_NUM; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05124}05124       \textcolor{keywordflow}{if} (stb\_\_memtab\_root[i])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05125}05125          \textcolor{keywordflow}{for} (j=0; j < STB\_\_NPTR\_NODE\_NUM; ++j)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05126}05126             \textcolor{keywordflow}{if} (stb\_\_memtab\_root[i]-\/>children[j]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05127}05127                stb\_\_nptr *p = stb\_\_memtab\_root[i]-\/>children[j]-\/>pointers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05128}05128                \textcolor{keywordflow}{while} (p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05129}05129                   stb\_nptr\_didset(p-\/>ptr);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05130}05130                   p = p-\/>next\_in\_block;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05131}05131                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05132}05132             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05133}05133 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05134}05134 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05135}05135 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05136}05136 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_NPTR}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05137}05137 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05138}05138 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05140}05140 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05141}05141 \textcolor{comment}{//                             File Processing}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05142}05142 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05143}05143 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05144}05144 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05145}05145 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05146}05146 \textcolor{preprocessor}{  \#define stb\_rename(x,y)   \_wrename((const wchar\_t *)stb\_\_from\_utf8(x), (const wchar\_t *)stb\_\_from\_utf8\_alt(y))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05147}05147 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05148}05148 \textcolor{preprocessor}{  \#define stb\_rename   rename}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05149}05149 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05150}05150 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05151}05151 STB\_EXTERN \textcolor{keywordtype}{void}     stb\_fput\_varlen64(FILE *f, stb\_uint64 v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05152}05152 STB\_EXTERN stb\_uint64  stb\_fget\_varlen64(FILE *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05153}05153 STB\_EXTERN \textcolor{keywordtype}{int}      stb\_size\_varlen64(stb\_uint64 v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05154}05154 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05155}05155 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05156}05156 \textcolor{preprocessor}{\#define stb\_filec    (char *) stb\_file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05157}05157 \textcolor{preprocessor}{\#define stb\_fileu    (unsigned char *) stb\_file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05158}05158 STB\_EXTERN \textcolor{keywordtype}{void} *  stb\_file(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{size\_t} *length);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05159}05159 STB\_EXTERN \textcolor{keywordtype}{void} *  stb\_file\_max(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{size\_t} *length);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05160}05160 STB\_EXTERN \textcolor{keywordtype}{size\_t}  stb\_filelen(FILE *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05161}05161 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_filewrite(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{size\_t} length);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05162}05162 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_filewritestr(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *data);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05163}05163 STB\_EXTERN \textcolor{keywordtype}{char} ** stb\_stringfile(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{int} *len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05164}05164 STB\_EXTERN \textcolor{keywordtype}{char} ** stb\_stringfile\_trimmed(\textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{int} *len, \textcolor{keywordtype}{char} comm);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05165}05165 STB\_EXTERN \textcolor{keywordtype}{char} *  stb\_fgets(\textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} buflen, FILE *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05166}05166 STB\_EXTERN \textcolor{keywordtype}{char} *  stb\_fgets\_malloc(FILE *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05167}05167 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_fexists(\textcolor{keywordtype}{char} *filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05168}05168 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_fcmp(\textcolor{keywordtype}{char} *s1, \textcolor{keywordtype}{char} *s2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05169}05169 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_feq(\textcolor{keywordtype}{char} *s1, \textcolor{keywordtype}{char} *s2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05170}05170 STB\_EXTERN time\_t  stb\_ftimestamp(\textcolor{keywordtype}{char} *filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05171}05171 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05172}05172 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_fullpath(\textcolor{keywordtype}{char} *\mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}, \textcolor{keywordtype}{int} abs\_size, \textcolor{keywordtype}{char} *rel);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05173}05173 STB\_EXTERN FILE *  stb\_fopen(\textcolor{keywordtype}{char} *filename, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *mode);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05174}05174 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_fclose(FILE *f, \textcolor{keywordtype}{int} keep);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05175}05175 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05176}05176 \textcolor{keyword}{enum}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05177}05177 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05178}05178    stb\_keep\_no = 0,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05179}05179    stb\_keep\_yes = 1,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05180}05180    stb\_keep\_if\_different = 2,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05181}05181 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05182}05182 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05183}05183 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_copyfile(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *dest);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05184}05184 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05185}05185 STB\_EXTERN \textcolor{keywordtype}{void}     stb\_fput\_varlen64(FILE *f, stb\_uint64 v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05186}05186 STB\_EXTERN stb\_uint64  stb\_fget\_varlen64(FILE *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05187}05187 STB\_EXTERN \textcolor{keywordtype}{int}      stb\_size\_varlen64(stb\_uint64 v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05188}05188 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05189}05189 STB\_EXTERN \textcolor{keywordtype}{void}    stb\_fwrite32(FILE *f, stb\_uint32 datum);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05190}05190 STB\_EXTERN \textcolor{keywordtype}{void}    stb\_fput\_varlen (FILE *f, \textcolor{keywordtype}{int} v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05191}05191 STB\_EXTERN \textcolor{keywordtype}{void}    stb\_fput\_varlenu(FILE *f, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05192}05192 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_fget\_varlen (FILE *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05193}05193 STB\_EXTERN stb\_uint stb\_fget\_varlenu(FILE *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05194}05194 STB\_EXTERN \textcolor{keywordtype}{void}    stb\_fput\_ranged (FILE *f, \textcolor{keywordtype}{int} v, \textcolor{keywordtype}{int} b, stb\_uint n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05195}05195 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_fget\_ranged (FILE *f, \textcolor{keywordtype}{int} b, stb\_uint n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05196}05196 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_size\_varlen (\textcolor{keywordtype}{int} v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05197}05197 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_size\_varlenu(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05198}05198 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_size\_ranged (\textcolor{keywordtype}{int} b, stb\_uint n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05199}05199 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05200}05200 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_fread(\textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{size\_t} len, \textcolor{keywordtype}{size\_t} count, \textcolor{keywordtype}{void} *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05201}05201 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_fwrite(\textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{size\_t} len, \textcolor{keywordtype}{size\_t} count, \textcolor{keywordtype}{void} *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05202}05202 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05203}05203 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05204}05204 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05205}05205 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05206}05206    FILE  *base\_file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05207}05207    \textcolor{keywordtype}{char}  *\mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05208}05208    \textcolor{keywordtype}{int}    buffer\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05209}05209    \textcolor{keywordtype}{int}    buffer\_off;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05210}05210    \textcolor{keywordtype}{int}    buffer\_left;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05211}05211 \} STBF;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05212}05212 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05213}05213 STB\_EXTERN STBF *stb\_tfopen(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *mode);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05214}05214 STB\_EXTERN \textcolor{keywordtype}{int} stb\_tfread(\textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{size\_t} len, \textcolor{keywordtype}{size\_t} count, STBF *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05215}05215 STB\_EXTERN \textcolor{keywordtype}{int} stb\_tfwrite(\textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{size\_t} len, \textcolor{keywordtype}{size\_t} count, STBF *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05216}05216 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05217}05217 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05218}05218 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05219}05219 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05220}05220 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05221}05221 STBF *stb\_tfopen(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *mode)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05222}05222 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05223}05223    STBF *z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05224}05224    FILE *f = stb\_p\_fopen(filename, mode);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05225}05225    \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05226}05226    z = (STBF *) malloc(\textcolor{keyword}{sizeof}(*z));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05227}05227    \textcolor{keywordflow}{if} (!z) \{ fclose(f); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05228}05228    z-\/>base\_file = f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05229}05229    \textcolor{keywordflow}{if} (!strcmp(mode, \textcolor{stringliteral}{"{}rb"{}}) || !strcmp(mode, \textcolor{stringliteral}{"{}wb"{}})) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05230}05230       z-\/>buffer\_size = 4096;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05231}05231       z-\/>buffer\_off = z-\/>buffer\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05232}05232       z-\/>buffer\_left = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05233}05233       z-\/>buffer = malloc(z-\/>buffer\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05234}05234       \textcolor{keywordflow}{if} (!z-\/>buffer) \{ free(z); fclose(f); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05235}05235    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05236}05236       z-\/>buffer = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05237}05237       z-\/>buffer\_size = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05238}05238       z-\/>buffer\_left = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05239}05239    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05240}05240    \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05241}05241 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05242}05242 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05243}05243 \textcolor{keywordtype}{int} stb\_tfread(\textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{size\_t} len, \textcolor{keywordtype}{size\_t} count, STBF *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05244}05244 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05245}05245    \textcolor{keywordtype}{int} total = len*count, done=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05246}05246    \textcolor{keywordflow}{if} (!total) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05247}05247    \textcolor{keywordflow}{if} (total <= z-\/>buffer\_left) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05248}05248       memcpy(data, z-\/>buffer + z-\/>buffer\_off, total);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05249}05249       z-\/>buffer\_off += total;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05250}05250       z-\/>buffer\_left -\/= total;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05251}05251       \textcolor{keywordflow}{return} count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05252}05252    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05253}05253       \textcolor{keywordtype}{char} *out = (\textcolor{keywordtype}{char} *) data;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05254}05254 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05255}05255       \textcolor{comment}{// consume all buffered data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05256}05256       memcpy(data, z-\/>buffer + z-\/>buffer\_off, z-\/>buffer\_left);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05257}05257       done = z-\/>buffer\_left;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05258}05258       out += z-\/>buffer\_left;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05259}05259       z-\/>buffer\_left=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05260}05260 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05261}05261       \textcolor{keywordflow}{if} (total-\/done > (z-\/>buffer\_size >> 1)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05262}05262          done += fread(out}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05263}05263       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05264}05264    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05265}05265 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05266}05266 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05267}05267 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05268}05268 \textcolor{keywordtype}{void} stb\_fwrite32(FILE *f, stb\_uint32 x)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05269}05269 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05270}05270    fwrite(\&x, 4, 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05271}05271 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05272}05272 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05273}05273 \textcolor{preprocessor}{\#if defined(\_WIN32)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05274}05274 \textcolor{preprocessor}{   \#define stb\_\_stat   \_stat}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05275}05275 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05276}05276 \textcolor{preprocessor}{   \#define stb\_\_stat   stat}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05277}05277 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05278}05278 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05279}05279 \textcolor{keywordtype}{int} stb\_fexists(\textcolor{keywordtype}{char} *filename)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05280}05280 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05281}05281    \textcolor{keyword}{struct }stb\_\_stat buf;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05282}05282    \textcolor{keywordflow}{return} stb\_\_windows(}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05283}05283              \_wstat((\textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t} *)stb\_\_from\_utf8(filename), \&buf),}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05284}05284                stat(filename,\&buf)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05285}05285           ) == 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05286}05286 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05287}05287 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05288}05288 time\_t stb\_ftimestamp(\textcolor{keywordtype}{char} *filename)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05289}05289 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05290}05290    \textcolor{keyword}{struct }stb\_\_stat buf;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05291}05291    \textcolor{keywordflow}{if} (stb\_\_windows(}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05292}05292              \_wstat((\textcolor{keyword}{const} \textcolor{keywordtype}{wchar\_t} *)stb\_\_from\_utf8(filename), \&buf),}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05293}05293                stat(filename,\&buf)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05294}05294           ) == 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05295}05295    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05296}05296       \textcolor{keywordflow}{return} buf.st\_mtime;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05297}05297    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05298}05298       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05299}05299    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05300}05300 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05301}05301 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05302}05302 \textcolor{keywordtype}{size\_t}  stb\_filelen(FILE *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05303}05303 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05304}05304    \textcolor{keywordtype}{long} len, pos;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05305}05305    pos = ftell(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05306}05306    fseek(f, 0, SEEK\_END);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05307}05307    len = ftell(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05308}05308    fseek(f, pos, SEEK\_SET);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05309}05309    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{size\_t}) len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05310}05310 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05311}05311 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05312}05312 \textcolor{keywordtype}{void} *stb\_file(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{size\_t} *length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05313}05313 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05314}05314    FILE *f = stb\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05315}05315    \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05316}05316    \textcolor{keywordtype}{size\_t} len, len2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05317}05317    \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05318}05318    len = stb\_filelen(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05319}05319    \mbox{\hyperlink{classbuffer}{buffer}} = (\textcolor{keywordtype}{char} *) malloc(len+2); \textcolor{comment}{// nul + extra}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05320}05320    len2 = fread(\mbox{\hyperlink{classbuffer}{buffer}}, 1, len, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05321}05321    \textcolor{keywordflow}{if} (len2 == len) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05322}05322       \textcolor{keywordflow}{if} (length) *length = len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05323}05323       \mbox{\hyperlink{classbuffer}{buffer}}[len] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05324}05324    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05325}05325       free(\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05326}05326       \mbox{\hyperlink{classbuffer}{buffer}} = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05327}05327    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05328}05328    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05329}05329    \textcolor{keywordflow}{return} \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05330}05330 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05331}05331 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05332}05332 \textcolor{keywordtype}{int} stb\_filewrite(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{size\_t} length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05333}05333 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05334}05334    FILE *f = stb\_fopen(filename, \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05335}05335    \textcolor{keywordflow}{if} (f) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05336}05336       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data\_ptr = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) data;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05337}05337       \textcolor{keywordtype}{size\_t} remaining = length;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05338}05338       \textcolor{keywordflow}{while} (remaining > 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05339}05339          \textcolor{keywordtype}{size\_t} len2 = remaining > 65536 ? 65536 : remaining;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05340}05340          \textcolor{keywordtype}{size\_t} len3 = fwrite(data\_ptr, 1, len2, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05341}05341          \textcolor{keywordflow}{if} (len2 != len3) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05342}05342             fprintf(stderr, \textcolor{stringliteral}{"{}Failed while writing \%s\(\backslash\)n"{}}, filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05343}05343             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05344}05344          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05345}05345          remaining -\/= len2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05346}05346          data\_ptr += len2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05347}05347       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05348}05348       stb\_fclose(f, stb\_keep\_if\_different);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05349}05349    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05350}05350    \textcolor{keywordflow}{return} f != NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05351}05351 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05352}05352 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05353}05353 \textcolor{keywordtype}{int} stb\_filewritestr(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *data)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05354}05354 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05355}05355    \textcolor{keywordflow}{return} stb\_filewrite(filename, data, strlen(data));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05356}05356 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05357}05357 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05358}05358 \textcolor{keywordtype}{void} *  stb\_file\_max(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{size\_t} *length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05359}05359 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05360}05360    FILE *f = stb\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05361}05361    \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05362}05362    \textcolor{keywordtype}{size\_t} len, maxlen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05363}05363    \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05364}05364    maxlen = *length;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05365}05365    \mbox{\hyperlink{classbuffer}{buffer}} = (\textcolor{keywordtype}{char} *) malloc(maxlen+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05366}05366    len = fread(\mbox{\hyperlink{classbuffer}{buffer}}, 1, maxlen, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05367}05367    \mbox{\hyperlink{classbuffer}{buffer}}[len] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05368}05368    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05369}05369    *length = len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05370}05370    \textcolor{keywordflow}{return} \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05371}05371 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05372}05372 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05373}05373 \textcolor{keywordtype}{char} ** stb\_stringfile(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{int} *plen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05374}05374 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05375}05375    FILE *f = stb\_\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05376}05376    \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, **list=NULL, *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05377}05377    \textcolor{keywordtype}{size\_t} len, count, i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05378}05378 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05379}05379    \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05380}05380    len = stb\_filelen(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05381}05381    \mbox{\hyperlink{classbuffer}{buffer}} = (\textcolor{keywordtype}{char} *) malloc(len+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05382}05382    len = fread(\mbox{\hyperlink{classbuffer}{buffer}}, 1, len, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05383}05383    \mbox{\hyperlink{classbuffer}{buffer}}[len] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05384}05384    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05385}05385 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05386}05386    \textcolor{comment}{// two passes through: first time count lines, second time set them}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05387}05387    \textcolor{keywordflow}{for} (i=0; i < 2; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05388}05388       s = \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05389}05389       \textcolor{keywordflow}{if} (i == 1)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05390}05390          list[0] = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05391}05391       count = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05392}05392       \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05393}05393          \textcolor{keywordflow}{if} (*s == \textcolor{charliteral}{'\(\backslash\)n'} || *s == \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05394}05394             \textcolor{comment}{// detect if both cr \& lf are together}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05395}05395             \textcolor{keywordtype}{int} crlf = (s[0] + s[1]) == (\textcolor{charliteral}{'\(\backslash\)n'} + \textcolor{charliteral}{'\(\backslash\)r'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05396}05396             \textcolor{keywordflow}{if} (i == 1) *s = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05397}05397             \textcolor{keywordflow}{if} (crlf) ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05398}05398             \textcolor{keywordflow}{if} (s[1]) \{  \textcolor{comment}{// it's not over yet}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05399}05399                \textcolor{keywordflow}{if} (i == 1) list[count] = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05400}05400                ++count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05401}05401             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05402}05402          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05403}05403          ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05404}05404       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05405}05405       \textcolor{keywordflow}{if} (i == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05406}05406          list = (\textcolor{keywordtype}{char} **) malloc(\textcolor{keyword}{sizeof}(*list) * (count+1) + len+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05407}05407          \textcolor{keywordflow}{if} (!list) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05408}05408          list[count] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05409}05409          \textcolor{comment}{// recopy the file so there's just a single allocation to free}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05410}05410          memcpy(\&list[count+1], \mbox{\hyperlink{classbuffer}{buffer}}, len+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05411}05411          free(\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05412}05412          \mbox{\hyperlink{classbuffer}{buffer}} = (\textcolor{keywordtype}{char} *) \&list[count+1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05413}05413          \textcolor{keywordflow}{if} (plen) *plen = (int) count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05414}05414       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05415}05415    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05416}05416    \textcolor{keywordflow}{return} list;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05417}05417 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05418}05418 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05419}05419 \textcolor{keywordtype}{char} ** stb\_stringfile\_trimmed(\textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{int} *len, \textcolor{keywordtype}{char} comment)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05420}05420 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05421}05421    \textcolor{keywordtype}{int} i,n,o=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05422}05422    \textcolor{keywordtype}{char} **s = stb\_stringfile(name, \&n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05423}05423    \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05424}05424    \textcolor{keywordflow}{for} (i=0; i < n; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05425}05425       \textcolor{keywordtype}{char} *p = stb\_skipwhite(s[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05426}05426       \textcolor{keywordflow}{if} (*p \&\& *p != comment)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05427}05427          s[o++] = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05428}05428    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05429}05429    s[o] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05430}05430    \textcolor{keywordflow}{if} (len) *len = o;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05431}05431    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05432}05432 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05433}05433 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05434}05434 \textcolor{keywordtype}{char} * stb\_fgets(\textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} buflen, FILE *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05435}05435 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05436}05436    \textcolor{keywordtype}{char} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05437}05437    \mbox{\hyperlink{classbuffer}{buffer}}[0] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05438}05438    p = fgets(\mbox{\hyperlink{classbuffer}{buffer}}, buflen, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05439}05439    \textcolor{keywordflow}{if} (p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05440}05440       \textcolor{keywordtype}{int} n = (int) (strlen(p)-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05441}05441       \textcolor{keywordflow}{if} (n >= 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05442}05442          \textcolor{keywordflow}{if} (p[n] == \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05443}05443             p[n] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05444}05444    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05445}05445    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05446}05446 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05447}05447 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05448}05448 \textcolor{keywordtype}{char} * stb\_fgets\_malloc(FILE *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05449}05449 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05450}05450    \textcolor{comment}{// avoid reallocing for small strings}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05451}05451    \textcolor{keywordtype}{char} quick\_buffer[800];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05452}05452    quick\_buffer[\textcolor{keyword}{sizeof}(quick\_buffer)-\/2] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05453}05453    \textcolor{keywordflow}{if} (!fgets(quick\_buffer, \textcolor{keyword}{sizeof}(quick\_buffer), f))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05454}05454       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05455}05455 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05456}05456    \textcolor{keywordflow}{if} (quick\_buffer[\textcolor{keyword}{sizeof}(quick\_buffer)-\/2] == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05457}05457       \textcolor{keywordtype}{size\_t} n = strlen(quick\_buffer);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05458}05458       \textcolor{keywordflow}{if} (n > 0 \&\& quick\_buffer[n-\/1] == \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05459}05459          quick\_buffer[n-\/1] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05460}05460       \textcolor{keywordflow}{return} stb\_p\_strdup(quick\_buffer);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05461}05461    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05462}05462       \textcolor{keywordtype}{char} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05463}05463       \textcolor{keywordtype}{char} *a = stb\_p\_strdup(quick\_buffer);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05464}05464       \textcolor{keywordtype}{size\_t} len = \textcolor{keyword}{sizeof}(quick\_buffer)-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05465}05465 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05466}05466       \textcolor{keywordflow}{while} (!feof(f)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05467}05467          \textcolor{keywordflow}{if} (a[len-\/1] == \textcolor{charliteral}{'\(\backslash\)n'}) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05468}05468          a = (\textcolor{keywordtype}{char} *) realloc(a, len*2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05469}05469          p = \&a[len];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05470}05470          p[len-\/2] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05471}05471          \textcolor{keywordflow}{if} (!fgets(p, (\textcolor{keywordtype}{int}) len, f))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05472}05472             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05473}05473          \textcolor{keywordflow}{if} (p[len-\/2] == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05474}05474             len += strlen(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05475}05475             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05476}05476          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05477}05477          len = len + (len-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05478}05478       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05479}05479       \textcolor{keywordflow}{if} (a[len-\/1] == \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05480}05480          a[len-\/1] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05481}05481       \textcolor{keywordflow}{return} a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05482}05482    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05483}05483 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05484}05484 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05485}05485 \textcolor{keywordtype}{int} stb\_fullpath(\textcolor{keywordtype}{char} *\mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}, \textcolor{keywordtype}{int} abs\_size, \textcolor{keywordtype}{char} *rel)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05486}05486 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05487}05487 \textcolor{preprocessor}{   \#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05488}05488    \textcolor{keywordflow}{return} \_fullpath(\mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}, rel, abs\_size) != NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05489}05489 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05490}05490    \textcolor{keywordflow}{if} (rel[0] == \textcolor{charliteral}{'/'} || rel[0] == \textcolor{charliteral}{'\string~'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05491}05491       \textcolor{keywordflow}{if} ((\textcolor{keywordtype}{int}) strlen(rel) >= abs\_size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05492}05492          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05493}05493       stb\_p\_strcpy\_s(\mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}},65536,rel);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05494}05494       \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05495}05495    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05496}05496       \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05497}05497       getcwd(\mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}, abs\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05498}05498       n = strlen(\mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05499}05499       \textcolor{keywordflow}{if} (n+(\textcolor{keywordtype}{int}) strlen(rel)+2 <= abs\_size) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05500}05500          \mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}[n] = \textcolor{charliteral}{'/'};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05501}05501          stb\_p\_strcpy\_s(\mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}+n+1, 65536,rel);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05502}05502          \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05503}05503       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05504}05504          \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05505}05505       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05506}05506    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05507}05507 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05508}05508 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05509}05509 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05510}05510 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_fcmp\_core(FILE *f, FILE *g)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05511}05511 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05512}05512    \textcolor{keywordtype}{char} buf1[1024],buf2[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05513}05513    \textcolor{keywordtype}{int} n1,n2, res=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05514}05514 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05515}05515    \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05516}05516       n1 = (int) fread(buf1, 1, \textcolor{keyword}{sizeof}(buf1), f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05517}05517       n2 = (int) fread(buf2, 1, \textcolor{keyword}{sizeof}(buf2), g);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05518}05518       res = memcmp(buf1,buf2,stb\_min(n1,n2));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05519}05519       \textcolor{keywordflow}{if} (res)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05520}05520          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05521}05521       \textcolor{keywordflow}{if} (n1 != n2) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05522}05522          res = n1 < n2 ? -\/1 : 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05523}05523          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05524}05524       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05525}05525       \textcolor{keywordflow}{if} (n1 == 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05526}05526          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05527}05527    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05528}05528 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05529}05529    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05530}05530    fclose(g);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05531}05531    \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05532}05532 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05533}05533 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05534}05534 \textcolor{keywordtype}{int} stb\_fcmp(\textcolor{keywordtype}{char} *s1, \textcolor{keywordtype}{char} *s2)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05535}05535 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05536}05536    FILE *f = stb\_\_fopen(s1, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05537}05537    FILE *g = stb\_\_fopen(s2, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05538}05538 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05539}05539    \textcolor{keywordflow}{if} (f == NULL || g == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05540}05540       \textcolor{keywordflow}{if} (f) fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05541}05541       \textcolor{keywordflow}{if} (g) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05542}05542          fclose(g);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05543}05543          \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05544}05544       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05545}05545       \textcolor{keywordflow}{return} f != NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05546}05546    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05547}05547 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05548}05548    \textcolor{keywordflow}{return} stb\_fcmp\_core(f,g);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05549}05549 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05550}05550 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05551}05551 \textcolor{keywordtype}{int} stb\_feq(\textcolor{keywordtype}{char} *s1, \textcolor{keywordtype}{char} *s2)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05552}05552 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05553}05553    FILE *f = stb\_\_fopen(s1, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05554}05554    FILE *g = stb\_\_fopen(s2, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05555}05555 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05556}05556    \textcolor{keywordflow}{if} (f == NULL || g == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05557}05557       \textcolor{keywordflow}{if} (f) fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05558}05558       \textcolor{keywordflow}{if} (g) fclose(g);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05559}05559       \textcolor{keywordflow}{return} f == g;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05560}05560    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05561}05561 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05562}05562    \textcolor{comment}{// feq is faster because it shortcuts if they're different length}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05563}05563    \textcolor{keywordflow}{if} (stb\_filelen(f) != stb\_filelen(g)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05564}05564       fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05565}05565       fclose(g);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05566}05566       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05567}05567    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05568}05568 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05569}05569    \textcolor{keywordflow}{return} !stb\_fcmp\_core(f,g);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05570}05570 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05571}05571 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05572}05572 \textcolor{keyword}{static} stb\_ptrmap *stb\_\_files;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05573}05573 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05574}05574 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05575}05575 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05576}05576    \textcolor{keywordtype}{char} *temp\_name;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05577}05577    \textcolor{keywordtype}{char} *name;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05578}05578    \textcolor{keywordtype}{int}   errors;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05579}05579 \} stb\_\_file\_data;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05580}05580 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05581}05581 \textcolor{keyword}{static} FILE *stb\_\_open\_temp\_file(\textcolor{keywordtype}{char} *temp\_name, \textcolor{keywordtype}{char} *src\_name, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *mode)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05582}05582 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05583}05583    \textcolor{keywordtype}{size\_t} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05584}05584 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05585}05585    \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05586}05586 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05587}05587    FILE *f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05588}05588    \textcolor{comment}{// try to generate a temporary file in the same directory}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05589}05589    p = strlen(src\_name)-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05590}05590    \textcolor{keywordflow}{while} (p > 0 \&\& src\_name[p] != \textcolor{charliteral}{'/'} \&\& src\_name[p] != \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05591}05591                 \&\& src\_name[p] != \textcolor{charliteral}{':'} \&\& src\_name[p] != \textcolor{charliteral}{'\string~'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05592}05592       -\/-\/p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05593}05593    ++p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05594}05594 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05595}05595    memcpy(temp\_name, src\_name, p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05596}05596 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05597}05597 \textcolor{preprocessor}{   \#ifdef \_MSC\_VER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05598}05598    \textcolor{comment}{// try multiple times to make a temp file... just in}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05599}05599    \textcolor{comment}{// case some other process makes the name first}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05600}05600    \textcolor{keywordflow}{for} (j=0; j < 32; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05601}05601       stb\_p\_strcpy\_s(temp\_name+p, 65536, \textcolor{stringliteral}{"{}stmpXXXXXX"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05602}05602       \textcolor{keywordflow}{if} (!stb\_p\_mktemp(temp\_name))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05603}05603          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05604}05604 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05605}05605       f = stb\_p\_fopen(temp\_name, mode);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05606}05606       \textcolor{keywordflow}{if} (f != NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05607}05607          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05608}05608    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05609}05609 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05610}05610    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05611}05611       stb\_p\_strcpy\_s(temp\_name+p, 65536, \textcolor{stringliteral}{"{}stmpXXXXXX"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05612}05612 \textcolor{preprocessor}{      \#ifdef \_\_MINGW32\_\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05613}05613          \textcolor{keywordtype}{int} fd = open(stb\_p\_mktemp(temp\_name), O\_RDWR);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05614}05614 \textcolor{preprocessor}{      \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05615}05615          \textcolor{keywordtype}{int} fd = mkstemp(temp\_name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05616}05616 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05617}05617       \textcolor{keywordflow}{if} (fd == -\/1) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05618}05618       f = fdopen(fd, mode);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05619}05619       \textcolor{keywordflow}{if} (f == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05620}05620          unlink(temp\_name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05621}05621          close(fd);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05622}05622          \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05623}05623       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05624}05624    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05625}05625 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05626}05626    \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05627}05627 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05628}05628 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05629}05629 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05630}05630 FILE *  stb\_fopen(\textcolor{keywordtype}{char} *filename, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *mode)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05631}05631 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05632}05632    FILE *f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05633}05633    \textcolor{keywordtype}{char} name\_full[4096];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05634}05634    \textcolor{keywordtype}{char} temp\_full[\textcolor{keyword}{sizeof}(name\_full) + 12];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05635}05635 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05636}05636    \textcolor{comment}{// @TODO: if the file doesn't exist, we can also use the fastpath here}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05637}05637    \textcolor{keywordflow}{if} (mode[0] != \textcolor{charliteral}{'w'} \&\& !strchr(mode, \textcolor{charliteral}{'+'}))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05638}05638       \textcolor{keywordflow}{return} stb\_\_fopen(filename, mode);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05639}05639 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05640}05640    \textcolor{comment}{// save away the full path to the file so if the program}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05641}05641    \textcolor{comment}{// changes the cwd everything still works right! unix has}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05642}05642    \textcolor{comment}{// better ways to do this, but we have to work in windows}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05643}05643    name\_full[0] = \textcolor{charliteral}{'\(\backslash\)0'}; \textcolor{comment}{// stb\_fullpath reads name\_full[0]}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05644}05644    \textcolor{keywordflow}{if} (stb\_fullpath(name\_full, \textcolor{keyword}{sizeof}(name\_full), filename)==0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05645}05645       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05646}05646 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05647}05647    f = stb\_\_open\_temp\_file(temp\_full, name\_full, mode);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05648}05648    \textcolor{keywordflow}{if} (f != NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05649}05649       stb\_\_file\_data *d = (stb\_\_file\_data *) malloc(\textcolor{keyword}{sizeof}(*d));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05650}05650       \textcolor{keywordflow}{if} (!d) \{ assert(0);  \textcolor{comment}{/* NOTREACHED */}fclose(f); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05651}05651       \textcolor{keywordflow}{if} (stb\_\_files == NULL) stb\_\_files = stb\_ptrmap\_create();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05652}05652       d-\/>temp\_name = stb\_p\_strdup(temp\_full);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05653}05653       d-\/>name      = stb\_p\_strdup(name\_full);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05654}05654       d-\/>errors    = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05655}05655       stb\_ptrmap\_add(stb\_\_files, f, d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05656}05656       \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05657}05657    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05658}05658 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05659}05659    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05660}05660 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05661}05661 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05662}05662 \textcolor{keywordtype}{int}     stb\_fclose(FILE *f, \textcolor{keywordtype}{int} keep)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05663}05663 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05664}05664    stb\_\_file\_data *d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05665}05665 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05666}05666    \textcolor{keywordtype}{int} ok = STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05667}05667    \textcolor{keywordflow}{if} (f == NULL) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05668}05668 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05669}05669    \textcolor{keywordflow}{if} (ferror(f))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05670}05670       keep = stb\_keep\_no;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05671}05671 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05672}05672    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05673}05673 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05674}05674    \textcolor{keywordflow}{if} (stb\_\_files \&\& stb\_ptrmap\_remove(stb\_\_files, f, (\textcolor{keywordtype}{void} **) \&d)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05675}05675       \textcolor{keywordflow}{if} (stb\_\_files-\/>count == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05676}05676          stb\_ptrmap\_destroy(stb\_\_files);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05677}05677          stb\_\_files = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05678}05678       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05679}05679    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05680}05680       \textcolor{keywordflow}{return} STB\_TRUE; \textcolor{comment}{// not special}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05681}05681 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05682}05682    \textcolor{keywordflow}{if} (keep == stb\_keep\_if\_different) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05683}05683       \textcolor{comment}{// check if the files are identical}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05684}05684       \textcolor{keywordflow}{if} (stb\_feq(d-\/>name, d-\/>temp\_name)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05685}05685          keep = stb\_keep\_no;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05686}05686          ok = STB\_TRUE;  \textcolor{comment}{// report success if no change}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05687}05687       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05688}05688    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05689}05689 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05690}05690    \textcolor{keywordflow}{if} (keep == stb\_keep\_no) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05691}05691       remove(d-\/>temp\_name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05692}05692    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05693}05693       \textcolor{keywordflow}{if} (!stb\_fexists(d-\/>name)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05694}05694          \textcolor{comment}{// old file doesn't exist, so just move the new file over it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05695}05695          stb\_rename(d-\/>temp\_name, d-\/>name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05696}05696       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05697}05697          \textcolor{comment}{// don't delete the old file yet in case there are troubles! First rename it!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05698}05698          \textcolor{keywordtype}{char} preserved\_old\_file[4096];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05699}05699 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05700}05700          \textcolor{comment}{// generate a temp filename in the same directory (also creates it, which we don't need)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05701}05701          FILE *dummy = stb\_\_open\_temp\_file(preserved\_old\_file, d-\/>name, \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05702}05702          \textcolor{keywordflow}{if} (dummy != NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05703}05703             \textcolor{comment}{// we don't actually want the open file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05704}05704             fclose(dummy);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05705}05705 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05706}05706             \textcolor{comment}{// discard what we just created}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05707}05707             remove(preserved\_old\_file);  \textcolor{comment}{// if this fails, there's nothing we can do, and following logic handles it as best as possible anyway}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05708}05708 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05709}05709             \textcolor{comment}{// move the existing file to the preserved name}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05710}05710             \textcolor{keywordflow}{if} (0 != stb\_rename(d-\/>name, preserved\_old\_file)) \{  \textcolor{comment}{// 0 on success}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05711}05711                \textcolor{comment}{// failed, state is:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05712}05712                \textcolor{comment}{//    filename  -\/> old file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05713}05713                \textcolor{comment}{//    tempname  -\/> new file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05714}05714                \textcolor{comment}{// keep tempname around so we don't lose data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05715}05715             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05716}05716                \textcolor{comment}{//  state is:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05717}05717                \textcolor{comment}{//    preserved -\/> old file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05718}05718                \textcolor{comment}{//    tempname  -\/> new file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05719}05719                \textcolor{comment}{// move the new file to the old name}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05720}05720                \textcolor{keywordflow}{if} (0 == stb\_rename(d-\/>temp\_name, d-\/>name)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05721}05721                   \textcolor{comment}{//  state is:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05722}05722                   \textcolor{comment}{//    preserved -\/> old file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05723}05723                   \textcolor{comment}{//    filename  -\/> new file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05724}05724                   ok = STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05725}05725 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05726}05726                   \textcolor{comment}{// 'filename -\/> new file' has always been the goal, so clean up}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05727}05727                   remove(preserved\_old\_file); \textcolor{comment}{// nothing to be done if it fails}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05728}05728                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05729}05729                   \textcolor{comment}{// couldn't rename, so try renaming preserved file back}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05730}05730 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05731}05731                   \textcolor{comment}{//  state is:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05732}05732                   \textcolor{comment}{//    preserved -\/> old file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05733}05733                   \textcolor{comment}{//    tempname  -\/> new file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05734}05734                   stb\_rename(preserved\_old\_file, d-\/>name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05735}05735                   \textcolor{comment}{// if the rename failed, there's nothing more we can do}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05736}05736                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05737}05737             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05738}05738          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05739}05739             \textcolor{comment}{// we couldn't get a temp filename. do this the naive way; the worst case failure here}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05740}05740             \textcolor{comment}{// leaves the filename pointing to nothing and the new file as a tempfile}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05741}05741             remove(d-\/>name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05742}05742             stb\_rename(d-\/>temp\_name, d-\/>name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05743}05743          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05744}05744       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05745}05745    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05746}05746 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05747}05747    free(d-\/>temp\_name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05748}05748    free(d-\/>name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05749}05749    free(d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05750}05750 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05751}05751    \textcolor{keywordflow}{return} ok;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05752}05752 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05753}05753 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05754}05754 \textcolor{keywordtype}{int} stb\_copyfile(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} *dest)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05755}05755 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05756}05756    \textcolor{keywordtype}{char} raw\_buffer[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05757}05757    \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05758}05758    \textcolor{keywordtype}{int} buf\_size = 65536;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05759}05759 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05760}05760    FILE *f, *g;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05761}05761 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05762}05762    \textcolor{comment}{// if file already exists at destination, do nothing}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05763}05763    \textcolor{keywordflow}{if} (stb\_feq(src, dest)) \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05764}05764 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05765}05765    \textcolor{comment}{// open file}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05766}05766    f = stb\_\_fopen(src, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05767}05767    \textcolor{keywordflow}{if} (f == NULL) \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05768}05768 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05769}05769    \textcolor{comment}{// open file for writing}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05770}05770    g = stb\_\_fopen(dest, \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05771}05771    \textcolor{keywordflow}{if} (g == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05772}05772       fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05773}05773       \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05774}05774    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05775}05775 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05776}05776    \mbox{\hyperlink{classbuffer}{buffer}} = (\textcolor{keywordtype}{char} *) malloc(buf\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05777}05777    \textcolor{keywordflow}{if} (\mbox{\hyperlink{classbuffer}{buffer}} == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05778}05778       \mbox{\hyperlink{classbuffer}{buffer}} = raw\_buffer;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05779}05779       buf\_size = \textcolor{keyword}{sizeof}(raw\_buffer);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05780}05780    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05781}05781 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05782}05782    \textcolor{keywordflow}{while} (!feof(f)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05783}05783       \textcolor{keywordtype}{size\_t} n = fread(\mbox{\hyperlink{classbuffer}{buffer}}, 1, buf\_size, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05784}05784       \textcolor{keywordflow}{if} (n != 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05785}05785          fwrite(\mbox{\hyperlink{classbuffer}{buffer}}, 1, n, g);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05786}05786    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05787}05787 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05788}05788    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05789}05789    \textcolor{keywordflow}{if} (\mbox{\hyperlink{classbuffer}{buffer}} != raw\_buffer)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05790}05790       free(\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05791}05791 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05792}05792    fclose(g);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05793}05793    \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05794}05794 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05795}05795 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05796}05796 \textcolor{comment}{// varlen:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05797}05797 \textcolor{comment}{//    v' = (v >> 31) + (v < 0 ? \string~v : v)<<1;  // small abs(v) => small v'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05798}05798 \textcolor{comment}{// output v as big endian v'+k for v' <= k:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05799}05799 \textcolor{comment}{//   1 byte :  v' <= 0x00000080          (  -\/64 <= v <   64)   7 bits}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05800}05800 \textcolor{comment}{//   2 bytes:  v' <= 0x00004000          (-\/8192 <= v < 8192)  14 bits}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05801}05801 \textcolor{comment}{//   3 bytes:  v' <= 0x00200000                               21 bits}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05802}05802 \textcolor{comment}{//   4 bytes:  v' <= 0x10000000                               28 bits}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05803}05803 \textcolor{comment}{// the number of most significant 1-\/bits in the first byte}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05804}05804 \textcolor{comment}{// equals the number of bytes after the first}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05805}05805 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05806}05806 \textcolor{preprocessor}{\#define stb\_\_varlen\_xform(v)     (v<0 ? (\string~v << 1)+1 : (v << 1))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05807}05807 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05808}05808 \textcolor{keywordtype}{int} stb\_size\_varlen(\textcolor{keywordtype}{int} v) \{ \textcolor{keywordflow}{return} stb\_size\_varlenu(stb\_\_varlen\_xform(v)); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05809}05809 \textcolor{keywordtype}{int} stb\_size\_varlenu(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05810}05810 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05811}05811    \textcolor{keywordflow}{if} (v < 0x00000080) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05812}05812    \textcolor{keywordflow}{if} (v < 0x00004000) \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05813}05813    \textcolor{keywordflow}{if} (v < 0x00200000) \textcolor{keywordflow}{return} 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05814}05814    \textcolor{keywordflow}{if} (v < 0x10000000) \textcolor{keywordflow}{return} 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05815}05815    \textcolor{keywordflow}{return} 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05816}05816 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05817}05817 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05818}05818 \textcolor{keywordtype}{void}    stb\_fput\_varlen(FILE *f, \textcolor{keywordtype}{int} v) \{ stb\_fput\_varlenu(f, stb\_\_varlen\_xform(v)); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05819}05819 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05820}05820 \textcolor{keywordtype}{void}    stb\_fput\_varlenu(FILE *f, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} z)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05821}05821 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05822}05822    \textcolor{keywordflow}{if} (z >= 0x10000000) fputc(0xF0,f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05823}05823    \textcolor{keywordflow}{if} (z >= 0x00200000) fputc((z < 0x10000000 ? 0xE0 : 0)+(z>>24),f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05824}05824    \textcolor{keywordflow}{if} (z >= 0x00004000) fputc((z < 0x00200000 ? 0xC0 : 0)+(z>>16),f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05825}05825    \textcolor{keywordflow}{if} (z >= 0x00000080) fputc((z < 0x00004000 ? 0x80 : 0)+(z>> 8),f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05826}05826    fputc(z,f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05827}05827 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05828}05828 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05829}05829 \textcolor{preprocessor}{\#define stb\_fgetc(f)    ((unsigned char) fgetc(f))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05830}05830 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05831}05831 \textcolor{keywordtype}{int}     stb\_fget\_varlen(FILE *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05832}05832 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05833}05833    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} z = stb\_fget\_varlenu(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05834}05834    \textcolor{keywordflow}{return} (z \& 1) ? \string~(z>>1) : (z>>1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05835}05835 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05836}05836 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05837}05837 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_fget\_varlenu(FILE *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05838}05838 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05839}05839    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05840}05840    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05841}05841    d = stb\_fgetc(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05842}05842 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05843}05843    \textcolor{keywordflow}{if} (d >= 0x80) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05844}05844       \textcolor{keywordflow}{if} (d >= 0xc0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05845}05845          \textcolor{keywordflow}{if} (d >= 0xe0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05846}05846             \textcolor{keywordflow}{if} (d == 0xf0) z = stb\_fgetc(f) << 24;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05847}05847             \textcolor{keywordflow}{else}           z = (d -\/ 0xe0) << 24;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05848}05848             z += stb\_fgetc(f) << 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05849}05849          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05850}05850          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05851}05851             z = (d -\/ 0xc0) << 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05852}05852          z += stb\_fgetc(f) << 8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05853}05853       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05854}05854          z = (d -\/ 0x80) <<  8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05855}05855       z += stb\_fgetc(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05856}05856    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05857}05857       z = d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05858}05858    \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05859}05859 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05860}05860 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05861}05861 stb\_uint64   stb\_fget\_varlen64(FILE *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05862}05862 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05863}05863    stb\_uint64 z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05864}05864    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05865}05865    d = stb\_fgetc(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05866}05866 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05867}05867    \textcolor{keywordflow}{if} (d >= 0x80) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05868}05868       \textcolor{keywordflow}{if} (d >= 0xc0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05869}05869          \textcolor{keywordflow}{if} (d >= 0xe0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05870}05870             \textcolor{keywordflow}{if} (d >= 0xf0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05871}05871                \textcolor{keywordflow}{if} (d >= 0xf8) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05872}05872                   \textcolor{keywordflow}{if} (d >= 0xfc) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05873}05873                      \textcolor{keywordflow}{if} (d >= 0xfe) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05874}05874                         \textcolor{keywordflow}{if} (d >= 0xff)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05875}05875                            z = (stb\_uint64) stb\_fgetc(f) << 56;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05876}05876                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05877}05877                            z = (stb\_uint64) (d -\/ 0xfe) << 56;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05878}05878                         z |= (stb\_uint64) stb\_fgetc(f) << 48;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05879}05879                      \} \textcolor{keywordflow}{else} z = (stb\_uint64) (d -\/ 0xfc) << 48;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05880}05880                      z |= (stb\_uint64) stb\_fgetc(f) << 40;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05881}05881                   \} \textcolor{keywordflow}{else} z = (stb\_uint64) (d -\/ 0xf8) << 40;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05882}05882                   z |= (stb\_uint64) stb\_fgetc(f) << 32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05883}05883                \} \textcolor{keywordflow}{else} z = (stb\_uint64) (d -\/ 0xf0) << 32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05884}05884                z |= (stb\_uint) stb\_fgetc(f) << 24;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05885}05885             \} \textcolor{keywordflow}{else} z = (stb\_uint) (d -\/ 0xe0) << 24;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05886}05886             z |= (stb\_uint) stb\_fgetc(f) << 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05887}05887          \} \textcolor{keywordflow}{else} z = (stb\_uint) (d -\/ 0xc0) << 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05888}05888          z |= (stb\_uint) stb\_fgetc(f) << 8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05889}05889       \} \textcolor{keywordflow}{else} z = (stb\_uint) (d -\/ 0x80) << 8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05890}05890       z |= stb\_fgetc(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05891}05891    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05892}05892       z = d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05893}05893 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05894}05894    \textcolor{keywordflow}{return} (z \& 1) ? \string~(z >> 1) : (z >> 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05895}05895 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05896}05896 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05897}05897 \textcolor{keywordtype}{int} stb\_size\_varlen64(stb\_uint64 v)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05898}05898 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05899}05899    \textcolor{keywordflow}{if} (v < 0x00000080) \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05900}05900    \textcolor{keywordflow}{if} (v < 0x00004000) \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05901}05901    \textcolor{keywordflow}{if} (v < 0x00200000) \textcolor{keywordflow}{return} 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05902}05902    \textcolor{keywordflow}{if} (v < 0x10000000) \textcolor{keywordflow}{return} 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05903}05903    \textcolor{keywordflow}{if} (v < STB\_IMM\_UINT64(0x0000000800000000)) \textcolor{keywordflow}{return} 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05904}05904    \textcolor{keywordflow}{if} (v < STB\_IMM\_UINT64(0x0000040000000000)) \textcolor{keywordflow}{return} 6;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05905}05905    \textcolor{keywordflow}{if} (v < STB\_IMM\_UINT64(0x0002000000000000)) \textcolor{keywordflow}{return} 7;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05906}05906    \textcolor{keywordflow}{if} (v < STB\_IMM\_UINT64(0x0100000000000000)) \textcolor{keywordflow}{return} 8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05907}05907    \textcolor{keywordflow}{return} 9;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05908}05908 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05909}05909 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05910}05910 \textcolor{keywordtype}{void}    stb\_fput\_varlen64(FILE *f, stb\_uint64 v)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05911}05911 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05912}05912    stb\_uint64 z = stb\_\_varlen\_xform(v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05913}05913    \textcolor{keywordtype}{int} first=1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05914}05914    \textcolor{keywordflow}{if} (z >= STB\_IMM\_UINT64(0x100000000000000)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05915}05915       fputc(0xff,f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05916}05916       first=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05917}05917    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05918}05918    \textcolor{keywordflow}{if} (z >= STB\_IMM\_UINT64(0x02000000000000)) fputc((first ? 0xFE : 0)+(\textcolor{keywordtype}{char})(z>>56),f), first=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05919}05919    \textcolor{keywordflow}{if} (z >= STB\_IMM\_UINT64(0x00040000000000)) fputc((first ? 0xFC : 0)+(\textcolor{keywordtype}{char})(z>>48),f), first=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05920}05920    \textcolor{keywordflow}{if} (z >= STB\_IMM\_UINT64(0x00000800000000)) fputc((first ? 0xF8 : 0)+(\textcolor{keywordtype}{char})(z>>40),f), first=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05921}05921    \textcolor{keywordflow}{if} (z >= STB\_IMM\_UINT64(0x00000010000000)) fputc((first ? 0xF0 : 0)+(\textcolor{keywordtype}{char})(z>>32),f), first=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05922}05922    \textcolor{keywordflow}{if} (z >= STB\_IMM\_UINT64(0x00000000200000)) fputc((first ? 0xE0 : 0)+(\textcolor{keywordtype}{char})(z>>24),f), first=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05923}05923    \textcolor{keywordflow}{if} (z >= STB\_IMM\_UINT64(0x00000000004000)) fputc((first ? 0xC0 : 0)+(\textcolor{keywordtype}{char})(z>>16),f), first=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05924}05924    \textcolor{keywordflow}{if} (z >= STB\_IMM\_UINT64(0x00000000000080)) fputc((first ? 0x80 : 0)+(\textcolor{keywordtype}{char})(z>> 8),f), first=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05925}05925    fputc((\textcolor{keywordtype}{char})z,f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05926}05926 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05927}05927 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05928}05928 \textcolor{keywordtype}{void}    stb\_fput\_ranged(FILE *f, \textcolor{keywordtype}{int} v, \textcolor{keywordtype}{int} b, stb\_uint n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05929}05929 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05930}05930    v -\/= b;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05931}05931    \textcolor{keywordflow}{if} (n <= (1 << 31))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05932}05932       assert((stb\_uint) v < n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05933}05933    \textcolor{keywordflow}{if} (n > (1 << 24)) fputc(v >> 24, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05934}05934    \textcolor{keywordflow}{if} (n > (1 << 16)) fputc(v >> 16, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05935}05935    \textcolor{keywordflow}{if} (n > (1 <<  8)) fputc(v >>  8, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05936}05936    fputc(v,f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05937}05937 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05938}05938 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05939}05939 \textcolor{keywordtype}{int}     stb\_fget\_ranged(FILE *f, \textcolor{keywordtype}{int} b, stb\_uint n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05940}05940 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05941}05941    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} v=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05942}05942    \textcolor{keywordflow}{if} (n > (1 << 24)) v += stb\_fgetc(f) << 24;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05943}05943    \textcolor{keywordflow}{if} (n > (1 << 16)) v += stb\_fgetc(f) << 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05944}05944    \textcolor{keywordflow}{if} (n > (1 <<  8)) v += stb\_fgetc(f) <<  8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05945}05945    v += stb\_fgetc(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05946}05946    \textcolor{keywordflow}{return} b+v;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05947}05947 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05948}05948 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05949}05949 \textcolor{keywordtype}{int}     stb\_size\_ranged(\textcolor{keywordtype}{int} b, stb\_uint n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05950}05950 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05951}05951    \textcolor{keywordflow}{if} (n > (1 << 24)) \textcolor{keywordflow}{return} 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05952}05952    \textcolor{keywordflow}{if} (n > (1 << 16)) \textcolor{keywordflow}{return} 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05953}05953    \textcolor{keywordflow}{if} (n > (1 <<  8)) \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05954}05954    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05955}05955 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05956}05956 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05957}05957 \textcolor{keywordtype}{void} stb\_fput\_string(FILE *f, \textcolor{keywordtype}{char} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05958}05958 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05959}05959    \textcolor{keywordtype}{size\_t} len = strlen(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05960}05960    stb\_fput\_varlenu(f, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05961}05961    fwrite(s, 1, len, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05962}05962 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05963}05963 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05964}05964 \textcolor{comment}{// inverse of the above algorithm}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05965}05965 \textcolor{keywordtype}{char} *stb\_fget\_string(FILE *f, \textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05966}05966 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05967}05967    \textcolor{keywordtype}{char} *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05968}05968    \textcolor{keywordtype}{int} len = stb\_fget\_varlenu(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05969}05969    \textcolor{keywordflow}{if} (len > 4096) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05970}05970    s = p ? stb\_malloc\_string(p, len+1) : (char *) malloc(len+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05971}05971    fread(s, 1, len, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05972}05972    s[len] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05973}05973    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05974}05974 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05975}05975 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05976}05976 \textcolor{keywordtype}{char} *stb\_strdup(\textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{void} *pool)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05977}05977 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05978}05978    \textcolor{keywordtype}{size\_t} len = strlen(str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05979}05979    \textcolor{keywordtype}{char} *p = stb\_malloc\_string(pool, len+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05980}05980    stb\_p\_strcpy\_s(p, len+1, str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05981}05981    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05982}05982 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05983}05983 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05984}05984 \textcolor{comment}{// strip the trailing '/' or '\(\backslash\)\(\backslash\)' from a directory so we can refer to it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05985}05985 \textcolor{comment}{// as a file for \_stat()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05986}05986 \textcolor{keywordtype}{char} *stb\_strip\_final\_slash(\textcolor{keywordtype}{char} *t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05987}05987 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05988}05988    \textcolor{keywordflow}{if} (t[0]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05989}05989       \textcolor{keywordtype}{char} *z = t + strlen(t) -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05990}05990       \textcolor{comment}{// *z is the last character}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05991}05991       \textcolor{keywordflow}{if} (*z == \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'} || *z == \textcolor{charliteral}{'/'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05992}05992          \textcolor{keywordflow}{if} (z != t+2 || t[1] != \textcolor{charliteral}{':'}) \textcolor{comment}{// but don't strip it if it's e.g. "{}c:/"{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05993}05993             *z = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05994}05994       \textcolor{keywordflow}{if} (*z == \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05995}05995          *z = \textcolor{charliteral}{'/'}; \textcolor{comment}{// canonicalize to make sure it matches db}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05996}05996    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05997}05997    \textcolor{keywordflow}{return} t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05998}05998 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l05999}05999 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06000}06000 \textcolor{keywordtype}{char} *stb\_strip\_final\_slash\_regardless(\textcolor{keywordtype}{char} *t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06001}06001 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06002}06002    \textcolor{keywordflow}{if} (t[0]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06003}06003       \textcolor{keywordtype}{char} *z = t + strlen(t) -\/ 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06004}06004       \textcolor{comment}{// *z is the last character}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06005}06005       \textcolor{keywordflow}{if} (*z == \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'} || *z == \textcolor{charliteral}{'/'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06006}06006          *z = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06007}06007       \textcolor{keywordflow}{if} (*z == \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06008}06008          *z = \textcolor{charliteral}{'/'}; \textcolor{comment}{// canonicalize to make sure it matches db}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06009}06009    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06010}06010    \textcolor{keywordflow}{return} t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06011}06011 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06012}06012 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06013}06013 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06015}06015 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06016}06016 \textcolor{comment}{//                 Options parsing}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06017}06017 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06018}06018 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06019}06019 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_getopt\_param(\textcolor{keywordtype}{int} *argc, \textcolor{keywordtype}{char} **argv, \textcolor{keywordtype}{char} *param);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06020}06020 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_getopt(\textcolor{keywordtype}{int} *argc, \textcolor{keywordtype}{char} **argv);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06021}06021 STB\_EXTERN \textcolor{keywordtype}{void}   stb\_getopt\_free(\textcolor{keywordtype}{char} **opts);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06022}06022 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06023}06023 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06024}06024 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06025}06025 \textcolor{keywordtype}{void}   stb\_getopt\_free(\textcolor{keywordtype}{char} **opts)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06026}06026 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06027}06027    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06028}06028    \textcolor{keywordtype}{char} ** o2 = opts;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06029}06029    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(o2); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06030}06030       free(o2[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06031}06031    stb\_arr\_free(o2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06032}06032 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06033}06033 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06034}06034 \textcolor{keywordtype}{char} **stb\_getopt(\textcolor{keywordtype}{int} *argc, \textcolor{keywordtype}{char} **argv)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06035}06035 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06036}06036    \textcolor{keywordflow}{return} stb\_getopt\_param(argc, argv, (\textcolor{keywordtype}{char}*) \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06037}06037 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06038}06038 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06039}06039 \textcolor{keywordtype}{char} **stb\_getopt\_param(\textcolor{keywordtype}{int} *argc, \textcolor{keywordtype}{char} **argv, \textcolor{keywordtype}{char} *param)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06040}06040 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06041}06041    \textcolor{keywordtype}{char} ** opts=NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06042}06042    \textcolor{keywordtype}{int} i,j=1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06043}06043    \textcolor{keywordflow}{for} (i=1; i < *argc; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06044}06044       \textcolor{keywordflow}{if} (argv[i][0] != \textcolor{charliteral}{'-\/'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06045}06045          argv[j++] = argv[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06046}06046       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06047}06047          \textcolor{keywordflow}{if} (argv[i][1] == 0) \{ \textcolor{comment}{// plain -\/ == don't parse further options}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06048}06048             ++i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06049}06049             \textcolor{keywordflow}{while} (i < *argc)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06050}06050                argv[j++] = argv[i++];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06051}06051             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06052}06052          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (argv[i][1] == \textcolor{charliteral}{'-\/'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06053}06053             \textcolor{comment}{// copy argument through including initial '-\/' for clarity}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06054}06054             stb\_arr\_push(opts, stb\_p\_strdup(argv[i]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06055}06055          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06056}06056             \textcolor{keywordtype}{int} k;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06057}06057             \textcolor{keywordtype}{char} *q = argv[i];  \textcolor{comment}{// traverse options list}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06058}06058             \textcolor{keywordflow}{for} (k=1; q[k]; ++k) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06059}06059                \textcolor{keywordtype}{char} *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06060}06060                \textcolor{keywordflow}{if} (strchr(param, q[k])) \{  \textcolor{comment}{// does it take a parameter?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06061}06061                   \textcolor{keywordtype}{char} *t = \&q[k+1], z = q[k];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06062}06062                   \textcolor{keywordtype}{size\_t} len=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06063}06063                   \textcolor{keywordflow}{if} (*t == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06064}06064                      \textcolor{keywordflow}{if} (i == *argc-\/1) \{ \textcolor{comment}{// takes a parameter, but none found}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06065}06065                         *argc = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06066}06066                         stb\_getopt\_free(opts);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06067}06067                         \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06068}06068                      \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06069}06069                      t = argv[++i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06070}06070                   \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06071}06071                      k += (int) strlen(t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06072}06072                   len = strlen(t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06073}06073                   s = (\textcolor{keywordtype}{char} *) malloc(len+2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06074}06074                   \textcolor{keywordflow}{if} (!s) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06075}06075                   s[0] = z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06076}06076                   stb\_p\_strcpy\_s(s+1, len+2, t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06077}06077                \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06078}06078                   \textcolor{comment}{// no parameter}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06079}06079                   s = (\textcolor{keywordtype}{char} *) malloc(2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06080}06080                   \textcolor{keywordflow}{if} (!s) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06081}06081                   s[0] = q[k];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06082}06082                   s[1] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06083}06083                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06084}06084                stb\_arr\_push(opts, s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06085}06085             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06086}06086          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06087}06087       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06088}06088    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06089}06089    stb\_arr\_push(opts, NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06090}06090    *argc = j;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06091}06091    \textcolor{keywordflow}{return} opts;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06092}06092 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06093}06093 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06094}06094 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06095}06095 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06097}06097 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06098}06098 \textcolor{comment}{//                 Portable directory reading}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06099}06099 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06100}06100 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06101}06101 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_readdir\_files  (\textcolor{keywordtype}{char} *dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06102}06102 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_readdir\_files\_mask(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *wild);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06103}06103 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_readdir\_subdirs(\textcolor{keywordtype}{char} *dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06104}06104 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_readdir\_subdirs\_mask(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *wild);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06105}06105 STB\_EXTERN \textcolor{keywordtype}{void}   stb\_readdir\_free   (\textcolor{keywordtype}{char} **files);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06106}06106 STB\_EXTERN \textcolor{keywordtype}{char} **stb\_readdir\_recursive(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *filespec);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06107}06107 STB\_EXTERN \textcolor{keywordtype}{void} stb\_delete\_directory\_recursive(\textcolor{keywordtype}{char} *dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06108}06108 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06109}06109 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06110}06110 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06111}06111 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06112}06112 \textcolor{preprocessor}{\#include <io.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06113}06113 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06114}06114 \textcolor{preprocessor}{\#include <unistd.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06115}06115 \textcolor{preprocessor}{\#include <dirent.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06116}06116 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06117}06117 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06118}06118 \textcolor{keywordtype}{void} stb\_readdir\_free(\textcolor{keywordtype}{char} **files)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06119}06119 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06120}06120    \textcolor{keywordtype}{char} **f2 = files;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06121}06121    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06122}06122    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(f2); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06123}06123       free(f2[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06124}06124    stb\_arr\_free(f2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06125}06125 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06126}06126 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06127}06127 \textcolor{keyword}{static} \textcolor{keywordtype}{int} isdotdirname(\textcolor{keywordtype}{char} *name)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06128}06128 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06129}06129    \textcolor{keywordflow}{if} (name[0] == \textcolor{charliteral}{'.'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06130}06130       \textcolor{keywordflow}{return} (name[1] == \textcolor{charliteral}{'.'}) ? !name[2] : !name[1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06131}06131    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06132}06132 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06133}06133 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06134}06134 STB\_EXTERN \textcolor{keywordtype}{int} stb\_wildmatchi(\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06135}06135 \textcolor{keyword}{static} \textcolor{keywordtype}{char} **readdir\_raw(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{int} return\_subdirs, \textcolor{keywordtype}{char} *\mbox{\hyperlink{structmask}{mask}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06136}06136 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06137}06137    \textcolor{keywordtype}{char} **results = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06138}06138    \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[4096], with\_slash[4096];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06139}06139    \textcolor{keywordtype}{size\_t} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06140}06140 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06141}06141 \textcolor{preprocessor}{   \#ifdef WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06142}06142       stb\_\_wchar *ws;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06143}06143       \textcolor{keyword}{struct }\_wfinddata\_t data;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06144}06144 \textcolor{preprocessor}{   \#ifdef \_WIN64}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06145}06145       \textcolor{keyword}{const} intptr\_t none = -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06146}06146       intptr\_t z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06147}06147 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06148}06148       \textcolor{keyword}{const} \textcolor{keywordtype}{long} none = -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06149}06149       \textcolor{keywordtype}{long} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06150}06150 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06151}06151 \textcolor{preprocessor}{   \#else }\textcolor{comment}{// !WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06152}06152       \textcolor{keyword}{const} DIR *none = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06153}06153       DIR *z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06154}06154 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06155}06155 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06156}06156    n = stb\_strscpy(\mbox{\hyperlink{classbuffer}{buffer}},dir,\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}}));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06157}06157    \textcolor{keywordflow}{if} (!n || n >= \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}}))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06158}06158       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06159}06159    stb\_fixpath(\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06160}06160 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06161}06161    \textcolor{keywordflow}{if} (n > 0 \&\& (\mbox{\hyperlink{classbuffer}{buffer}}[n-\/1] != \textcolor{charliteral}{'/'})) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06162}06162       \mbox{\hyperlink{classbuffer}{buffer}}[n++] = \textcolor{charliteral}{'/'};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06163}06163    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06164}06164    \mbox{\hyperlink{classbuffer}{buffer}}[n] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06165}06165    \textcolor{keywordflow}{if} (!stb\_strscpy(with\_slash,\mbox{\hyperlink{classbuffer}{buffer}},\textcolor{keyword}{sizeof}(with\_slash)))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06166}06166       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06167}06167 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06168}06168 \textcolor{preprocessor}{   \#ifdef WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06169}06169       \textcolor{keywordflow}{if} (!stb\_strscpy(\mbox{\hyperlink{classbuffer}{buffer}}+n,\textcolor{stringliteral}{"{}*.*"{}},\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}})-\/n))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06170}06170          \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06171}06171       ws = stb\_\_from\_utf8(\mbox{\hyperlink{classbuffer}{buffer}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06172}06172       z = \_wfindfirst((\textcolor{keywordtype}{wchar\_t} *)ws, \&data);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06173}06173 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06174}06174       z = opendir(dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06175}06175 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06176}06176 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06177}06177    \textcolor{keywordflow}{if} (z != none) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06178}06178       \textcolor{keywordtype}{int} nonempty = STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06179}06179 \textcolor{preprocessor}{      \#ifndef WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06180}06180       \textcolor{keyword}{struct }dirent *data = readdir(z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06181}06181       nonempty = (data != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06182}06182 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06183}06183 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06184}06184       \textcolor{keywordflow}{if} (nonempty) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06185}06185 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06186}06186          \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06187}06187             \textcolor{keywordtype}{int} is\_subdir;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06188}06188 \textcolor{preprocessor}{            \#ifdef WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06189}06189             \textcolor{keywordtype}{char} *name = stb\_\_to\_utf8((stb\_\_wchar *)data.name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06190}06190             \textcolor{keywordflow}{if} (name == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06191}06191                fprintf(stderr, \textcolor{stringliteral}{"{}\%s to convert '\%S' to \%s!\(\backslash\)n"{}}, \textcolor{stringliteral}{"{}Unable"{}}, data.name, \textcolor{stringliteral}{"{}utf8"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06192}06192                \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06193}06193             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06194}06194             is\_subdir = !!(data.attrib \& \_A\_SUBDIR);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06195}06195 \textcolor{preprocessor}{            \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06196}06196             \textcolor{keywordtype}{char} *name = data-\/>d\_name;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06197}06197             \textcolor{keywordflow}{if} (!stb\_strscpy(\mbox{\hyperlink{classbuffer}{buffer}}+n,name,\textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}})-\/n))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06198}06198                \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06199}06199             \textcolor{comment}{// Could follow DT\_LNK, but would need to check for recursive links.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06200}06200             is\_subdir = !!(data-\/>d\_type \& DT\_DIR);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06201}06201 \textcolor{preprocessor}{            \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06202}06202 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06203}06203             \textcolor{keywordflow}{if} (is\_subdir == return\_subdirs) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06204}06204                \textcolor{keywordflow}{if} (!is\_subdir || !isdotdirname(name)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06205}06205                   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{structmask}{mask}} || stb\_wildmatchi(\mbox{\hyperlink{structmask}{mask}}, name)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06206}06206                      \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[4096],*p=\mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06207}06207                      \textcolor{keywordflow}{if} ( stb\_snprintf(\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{classbuffer}{buffer}}), \textcolor{stringliteral}{"{}\%s\%s"{}}, with\_slash, name) < 0 )}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06208}06208                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06209}06209                      \textcolor{keywordflow}{if} (\mbox{\hyperlink{classbuffer}{buffer}}[0] == \textcolor{charliteral}{'.'} \&\& \mbox{\hyperlink{classbuffer}{buffer}}[1] == \textcolor{charliteral}{'/'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06210}06210                         p = \mbox{\hyperlink{classbuffer}{buffer}}+2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06211}06211                      stb\_arr\_push(results, stb\_p\_strdup(p));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06212}06212                   \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06213}06213                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06214}06214             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06215}06215          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06216}06216 \textcolor{preprocessor}{         \#ifdef WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06217}06217          \textcolor{keywordflow}{while} (0 == \_wfindnext(z, \&data));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06218}06218 \textcolor{preprocessor}{         \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06219}06219          \textcolor{keywordflow}{while} ((data = readdir(z)) != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06220}06220 \textcolor{preprocessor}{         \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06221}06221       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06222}06222 \textcolor{preprocessor}{      \#ifdef WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06223}06223          \_findclose(z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06224}06224 \textcolor{preprocessor}{      \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06225}06225          closedir(z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06226}06226 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06227}06227    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06228}06228    \textcolor{keywordflow}{return} results;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06229}06229 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06230}06230 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06231}06231 \textcolor{keywordtype}{char} **stb\_readdir\_files  (\textcolor{keywordtype}{char} *dir) \{ \textcolor{keywordflow}{return} readdir\_raw(dir, 0, NULL); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06232}06232 \textcolor{keywordtype}{char} **stb\_readdir\_subdirs(\textcolor{keywordtype}{char} *dir) \{ \textcolor{keywordflow}{return} readdir\_raw(dir, 1, NULL); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06233}06233 \textcolor{keywordtype}{char} **stb\_readdir\_files\_mask(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *wild) \{ \textcolor{keywordflow}{return} readdir\_raw(dir, 0, wild); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06234}06234 \textcolor{keywordtype}{char} **stb\_readdir\_subdirs\_mask(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *wild) \{ \textcolor{keywordflow}{return} readdir\_raw(dir, 1, wild); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06235}06235 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06236}06236 \textcolor{keywordtype}{int} stb\_\_rec\_max=0x7fffffff;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06237}06237 \textcolor{keyword}{static} \textcolor{keywordtype}{char} **stb\_readdir\_rec(\textcolor{keywordtype}{char} **sofar, \textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *filespec)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06238}06238 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06239}06239    \textcolor{keywordtype}{char} **files;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06240}06240    \textcolor{keywordtype}{char} ** dirs;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06241}06241    \textcolor{keywordtype}{char} **p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06242}06242 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06243}06243    \textcolor{keywordflow}{if} (stb\_arr\_len(sofar) >= stb\_\_rec\_max) \textcolor{keywordflow}{return} sofar;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06244}06244 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06245}06245    files = stb\_readdir\_files\_mask(dir, filespec);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06246}06246    stb\_arr\_for(p, files) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06247}06247       stb\_arr\_push(sofar, stb\_p\_strdup(*p));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06248}06248       \textcolor{keywordflow}{if} (stb\_arr\_len(sofar) >= stb\_\_rec\_max) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06249}06249    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06250}06250    stb\_readdir\_free(files);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06251}06251    \textcolor{keywordflow}{if} (stb\_arr\_len(sofar) >= stb\_\_rec\_max) \textcolor{keywordflow}{return} sofar;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06252}06252 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06253}06253    dirs = stb\_readdir\_subdirs(dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06254}06254    stb\_arr\_for(p, dirs)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06255}06255       sofar = stb\_readdir\_rec(sofar, *p, filespec);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06256}06256    stb\_readdir\_free(dirs);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06257}06257    \textcolor{keywordflow}{return} sofar;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06258}06258 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06259}06259 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06260}06260 \textcolor{keywordtype}{char} **stb\_readdir\_recursive(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *filespec)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06261}06261 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06262}06262    \textcolor{keywordflow}{return} stb\_readdir\_rec(NULL, dir, filespec);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06263}06263 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06264}06264 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06265}06265 \textcolor{keywordtype}{void} stb\_delete\_directory\_recursive(\textcolor{keywordtype}{char} *dir)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06266}06266 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06267}06267    \textcolor{keywordtype}{char} **list = stb\_readdir\_subdirs(dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06268}06268    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06269}06269    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(list); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06270}06270       stb\_delete\_directory\_recursive(list[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06271}06271    stb\_arr\_free(list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06272}06272    list = stb\_readdir\_files(dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06273}06273    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(list); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06274}06274       \textcolor{keywordflow}{if} (!remove(list[i])) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06275}06275          \textcolor{comment}{// on windows, try again after making it writeable; don't ALWAYS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06276}06276          \textcolor{comment}{// do this first since that would be slow in the normal case}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06277}06277 \textcolor{preprocessor}{         \#ifdef \_MSC\_VER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06278}06278          \_chmod(list[i], \_S\_IWRITE);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06279}06279          remove(list[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06280}06280 \textcolor{preprocessor}{         \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06281}06281       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06282}06282    stb\_arr\_free(list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06283}06283    stb\_\_windows(\_rmdir,rmdir)(dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06284}06284 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06285}06285 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06286}06286 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06287}06287 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06289}06289 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06290}06290 \textcolor{comment}{//   construct trees from filenames; useful for cmirror summaries}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06291}06291 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06292}06292 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}} \mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06293}06293 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06294}\mbox{\hyperlink{structstb__dirtree2}{06294}} \textcolor{keyword}{struct }\mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06295}06295 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06296}06296    \mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}} **subdirs;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06297}06297 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06298}06298    \textcolor{comment}{// make convenient for stb\_summarize\_tree}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06299}06299    \textcolor{keywordtype}{int} num\_subdir;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06300}06300    \textcolor{keywordtype}{float} weight;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06301}06301 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06302}06302    \textcolor{comment}{// actual data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06303}06303    \textcolor{keywordtype}{char} *fullpath;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06304}06304    \textcolor{keywordtype}{char} *relpath;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06305}06305    \textcolor{keywordtype}{char} **files;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06306}06306 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06307}06307 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06308}06308 STB\_EXTERN \mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}} *stb\_dirtree2\_from\_files\_relative(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} **filelist, \textcolor{keywordtype}{int} count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06309}06309 STB\_EXTERN \mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}} *stb\_dirtree2\_from\_files(\textcolor{keywordtype}{char} **filelist, \textcolor{keywordtype}{int} count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06310}06310 STB\_EXTERN \textcolor{keywordtype}{int} stb\_dir\_is\_prefix(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{int} dirlen, \textcolor{keywordtype}{char} *file);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06311}06311 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06312}06312 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06313}06313 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06314}06314 \textcolor{keywordtype}{int} stb\_dir\_is\_prefix(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{int} dirlen, \textcolor{keywordtype}{char} *file)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06315}06315 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06316}06316    \textcolor{keywordflow}{if} (dirlen == 0) \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06317}06317    \textcolor{keywordflow}{if} (stb\_strnicmp(dir, file, dirlen)) \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06318}06318    \textcolor{keywordflow}{if} (file[dirlen] == \textcolor{charliteral}{'/'} || file[dirlen] == \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}) \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06319}06319    \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06320}06320 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06321}06321 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06322}06322 \mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}} *stb\_dirtree2\_from\_files\_relative(\textcolor{keywordtype}{char} *src, \textcolor{keywordtype}{char} **filelist, \textcolor{keywordtype}{int} count)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06323}06323 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06324}06324    \textcolor{keywordtype}{char} buffer1[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06325}06325    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06326}06326    \textcolor{keywordtype}{int} dlen = (int) strlen(src), elen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06327}06327    \mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}} *d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06328}06328    \textcolor{keywordtype}{char} ** descendents = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06329}06329    \textcolor{keywordtype}{char} ** files = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06330}06330    \textcolor{keywordtype}{char} *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06331}06331    \textcolor{keywordflow}{if} (!count) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06332}06332    \textcolor{comment}{// first find all the ones that belong here... note this is will take O(NM) with N files and M subdirs}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06333}06333    \textcolor{keywordflow}{for} (i=0; i < count; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06334}06334       \textcolor{keywordflow}{if} (stb\_dir\_is\_prefix(src, dlen, filelist[i])) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06335}06335          stb\_arr\_push(descendents, filelist[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06336}06336       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06337}06337    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06338}06338    \textcolor{keywordflow}{if} (descendents == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06339}06339       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06340}06340    elen = dlen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06341}06341    \textcolor{comment}{// skip a leading slash}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06342}06342    \textcolor{keywordflow}{if} (elen == 0 \&\& (descendents[0][0] == \textcolor{charliteral}{'/'} || descendents[0][0] == \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06343}06343       ++elen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06344}06344    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (elen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06345}06345       ++elen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06346}06346    \textcolor{comment}{// now extract all the ones that have their root here}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06347}06347    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(descendents);) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06348}06348       \textcolor{keywordflow}{if} (!stb\_strchr2(descendents[i]+elen, \textcolor{charliteral}{'/'}, \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'})) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06349}06349          stb\_arr\_push(files, descendents[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06350}06350          descendents[i] = descendents[stb\_arr\_len(descendents)-\/1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06351}06351          stb\_arr\_pop(descendents);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06352}06352       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06353}06353          ++i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06354}06354    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06355}06355    \textcolor{comment}{// now create a record}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06356}06356    d = (\mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}} *) malloc(\textcolor{keyword}{sizeof}(*d));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06357}06357    d-\/>files = files;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06358}06358    d-\/>subdirs = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06359}06359    d-\/>fullpath = stb\_p\_strdup(src);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06360}06360    s = stb\_strrchr2(d-\/>fullpath, \textcolor{charliteral}{'/'}, \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06361}06361    \textcolor{keywordflow}{if} (s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06362}06362       ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06363}06363    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06364}06364       s = d-\/>fullpath;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06365}06365    d-\/>relpath = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06366}06366    \textcolor{comment}{// now create the children}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06367}06367    qsort(descendents, stb\_arr\_len(descendents), \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char} *), stb\_qsort\_stricmp(0));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06368}06368    buffer1[0] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06369}06369    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(descendents); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06370}06370       \textcolor{keywordtype}{char} buffer2[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06371}06371       \textcolor{keywordtype}{char} *s = descendents[i] + elen, *t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06372}06372       t = stb\_strchr2(s, \textcolor{charliteral}{'/'}, \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06373}06373       assert(t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06374}06374       stb\_strncpy(buffer2, descendents[i], (\textcolor{keywordtype}{int}) (t-\/descendents[i]+1));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06375}06375       \textcolor{keywordflow}{if} (stb\_stricmp(buffer1, buffer2)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06376}06376          \mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}} *t = stb\_dirtree2\_from\_files\_relative(buffer2, descendents, stb\_arr\_len(descendents));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06377}06377          assert(t != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06378}06378          stb\_p\_strcpy\_s(buffer1, \textcolor{keyword}{sizeof}(buffer1), buffer2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06379}06379          stb\_arr\_push(d-\/>subdirs, t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06380}06380       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06381}06381    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06382}06382    d-\/>num\_subdir = stb\_arr\_len(d-\/>subdirs);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06383}06383    d-\/>weight = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06384}06384    \textcolor{keywordflow}{return} d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06385}06385 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06386}06386 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06387}06387 \mbox{\hyperlink{structstb__dirtree2}{stb\_dirtree2}} *stb\_dirtree2\_from\_files(\textcolor{keywordtype}{char} **filelist, \textcolor{keywordtype}{int} count)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06388}06388 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06389}06389    \textcolor{keywordflow}{return} stb\_dirtree2\_from\_files\_relative((\textcolor{keywordtype}{char}*) \textcolor{stringliteral}{"{}"{}}, filelist, count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06390}06390 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06391}06391 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06392}06392 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06394}06394 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06395}06395 \textcolor{comment}{//                 Checksums: CRC-\/32, ADLER32, SHA-\/1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06396}06396 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06397}06397 \textcolor{comment}{//    CRC-\/32 and ADLER32 allow streaming blocks}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06398}06398 \textcolor{comment}{//    SHA-\/1 requires either a complete buffer, max size 2\string^32 -\/ 73}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06399}06399 \textcolor{comment}{//          or it can checksum directly from a file, max 2\string^61}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06400}06400 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06401}06401 \textcolor{preprocessor}{\#define STB\_ADLER32\_SEED   1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06402}06402 \textcolor{preprocessor}{\#define STB\_CRC32\_SEED     0    }\textcolor{comment}{// note that we logical NOT this in the code}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06403}06403 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06404}06404 STB\_EXTERN stb\_uint}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06405}06405   stb\_adler32(stb\_uint adler32, stb\_uchar *\mbox{\hyperlink{classbuffer}{buffer}}, stb\_uint buflen);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06406}06406 STB\_EXTERN stb\_uint}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06407}06407   stb\_crc32\_block(stb\_uint crc32, stb\_uchar *\mbox{\hyperlink{classbuffer}{buffer}}, stb\_uint len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06408}06408 STB\_EXTERN stb\_uint stb\_crc32(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, stb\_uint len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06409}06409 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06410}06410 STB\_EXTERN \textcolor{keywordtype}{void} stb\_sha1(}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06411}06411   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{structoutput}{output}}[20], \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06412}06412 STB\_EXTERN \textcolor{keywordtype}{int} stb\_sha1\_file(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{structoutput}{output}}[20], \textcolor{keywordtype}{char} *file);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06413}06413 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06414}06414 STB\_EXTERN \textcolor{keywordtype}{void} stb\_sha1\_readable(\textcolor{keywordtype}{char} display[27], \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} sha[20]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06415}06415 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06416}06416 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06417}06417 stb\_uint stb\_crc32\_block(stb\_uint crc, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, stb\_uint len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06418}06418 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06419}06419    \textcolor{keyword}{static} stb\_uint crc\_table[256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06420}06420    stb\_uint i,j,s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06421}06421    crc = \string~crc;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06422}06422 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06423}06423    \textcolor{keywordflow}{if} (crc\_table[1] == 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06424}06424       \textcolor{keywordflow}{for}(i=0; i < 256; i++) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06425}06425          \textcolor{keywordflow}{for} (s=i, j=0; j < 8; ++j)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06426}06426             s = (s >> 1) \string^ (s \& 1 ? 0xedb88320 : 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06427}06427          crc\_table[i] = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06428}06428       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06429}06429    \textcolor{keywordflow}{for} (i=0; i < len; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06430}06430       crc = (crc >> 8) \string^ crc\_table[\mbox{\hyperlink{classbuffer}{buffer}}[i] \string^ (crc \& 0xff)];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06431}06431    \textcolor{keywordflow}{return} \string~crc;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06432}06432 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06433}06433 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06434}06434 stb\_uint stb\_crc32(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, stb\_uint len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06435}06435 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06436}06436    \textcolor{keywordflow}{return} stb\_crc32\_block(0, \mbox{\hyperlink{classbuffer}{buffer}}, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06437}06437 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06438}06438 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06439}06439 stb\_uint stb\_adler32(stb\_uint adler32, stb\_uchar *\mbox{\hyperlink{classbuffer}{buffer}}, stb\_uint buflen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06440}06440 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06441}06441    \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} ADLER\_MOD = 65521;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06442}06442    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} s1 = adler32 \& 0xffff, s2 = adler32 >> 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06443}06443    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} blocklen, i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06444}06444 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06445}06445    blocklen = buflen \% 5552;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06446}06446    \textcolor{keywordflow}{while} (buflen) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06447}06447       \textcolor{keywordflow}{for} (i=0; i + 7 < blocklen; i += 8) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06448}06448          s1 += \mbox{\hyperlink{classbuffer}{buffer}}[0], s2 += s1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06449}06449          s1 += \mbox{\hyperlink{classbuffer}{buffer}}[1], s2 += s1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06450}06450          s1 += \mbox{\hyperlink{classbuffer}{buffer}}[2], s2 += s1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06451}06451          s1 += \mbox{\hyperlink{classbuffer}{buffer}}[3], s2 += s1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06452}06452          s1 += \mbox{\hyperlink{classbuffer}{buffer}}[4], s2 += s1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06453}06453          s1 += \mbox{\hyperlink{classbuffer}{buffer}}[5], s2 += s1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06454}06454          s1 += \mbox{\hyperlink{classbuffer}{buffer}}[6], s2 += s1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06455}06455          s1 += \mbox{\hyperlink{classbuffer}{buffer}}[7], s2 += s1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06456}06456 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06457}06457          \mbox{\hyperlink{classbuffer}{buffer}} += 8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06458}06458       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06459}06459 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06460}06460       \textcolor{keywordflow}{for} (; i < blocklen; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06461}06461          s1 += *\mbox{\hyperlink{classbuffer}{buffer}}++, s2 += s1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06462}06462 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06463}06463       s1 \%= ADLER\_MOD, s2 \%= ADLER\_MOD;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06464}06464       buflen -\/= blocklen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06465}06465       blocklen = 5552;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06466}06466    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06467}06467    \textcolor{keywordflow}{return} (s2 << 16) + s1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06468}06468 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06469}06469 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06470}06470 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_sha1(stb\_uchar *\mbox{\hyperlink{structchunk}{chunk}}, stb\_uint h[5])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06471}06471 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06472}06472    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06473}06473    stb\_uint a,b,c,d,\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06474}06474    stb\_uint w[80];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06475}06475 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06476}06476    \textcolor{keywordflow}{for} (i=0; i < 16; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06477}06477       w[i] = stb\_big32(\&\mbox{\hyperlink{structchunk}{chunk}}[i*4]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06478}06478    \textcolor{keywordflow}{for} (i=16; i < 80; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06479}06479       stb\_uint t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06480}06480       t = w[i-\/3] \string^ w[i-\/8] \string^ w[i-\/14] \string^ w[i-\/16];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06481}06481       w[i] = (t + t) | (t >> 31);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06482}06482    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06483}06483 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06484}06484    a = h[0];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06485}06485    b = h[1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06486}06486    c = h[2];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06487}06487    d = h[3];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06488}06488    \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} = h[4];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06489}06489 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06490}06490 \textcolor{preprocessor}{   \#define STB\_\_SHA1(k,f)                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06491}06491 \textcolor{preprocessor}{   \{                                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06492}06492 \textcolor{preprocessor}{      stb\_uint temp = (a << 5) + (a >> 27) + (f) + e + (k) + w[i];  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06493}06493 \textcolor{preprocessor}{      e = d;                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06494}06494 \textcolor{preprocessor}{      d = c;                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06495}06495 \textcolor{preprocessor}{      c = (b << 30) + (b >> 2);                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06496}06496 \textcolor{preprocessor}{      b = a;                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06497}06497 \textcolor{preprocessor}{      a = temp;                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06498}06498 \textcolor{preprocessor}{   \}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06499}06499 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06500}06500    i=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06501}06501    \textcolor{keywordflow}{for} (; i < 20; ++i) STB\_\_SHA1(0x5a827999, d \string^ (b \& (c \string^ d))       );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06502}06502    \textcolor{keywordflow}{for} (; i < 40; ++i) STB\_\_SHA1(0x6ed9eba1, b \string^ c \string^ d               );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06503}06503    \textcolor{keywordflow}{for} (; i < 60; ++i) STB\_\_SHA1(0x8f1bbcdc, (b \& c) + (d \& (b \string^ c)) );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06504}06504    \textcolor{keywordflow}{for} (; i < 80; ++i) STB\_\_SHA1(0xca62c1d6, b \string^ c \string^ d               );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06505}06505 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06506}06506 \textcolor{preprocessor}{   \#undef STB\_\_SHA1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06507}06507 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06508}06508    h[0] += a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06509}06509    h[1] += b;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06510}06510    h[2] += c;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06511}06511    h[3] += d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06512}06512    h[4] += \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06513}06513 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06514}06514 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06515}06515 \textcolor{keywordtype}{void} stb\_sha1(stb\_uchar \mbox{\hyperlink{structoutput}{output}}[20], stb\_uchar *\mbox{\hyperlink{classbuffer}{buffer}}, stb\_uint len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06516}06516 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06517}06517    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} final\_block[128];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06518}06518    stb\_uint end\_start, final\_len, j;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06519}06519    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06520}06520 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06521}06521    stb\_uint h[5];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06522}06522 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06523}06523    h[0] = 0x67452301;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06524}06524    h[1] = 0xefcdab89;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06525}06525    h[2] = 0x98badcfe;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06526}06526    h[3] = 0x10325476;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06527}06527    h[4] = 0xc3d2e1f0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06528}06528 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06529}06529    \textcolor{comment}{// we need to write padding to the last one or two}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06530}06530    \textcolor{comment}{// blocks, so build those first into 'final\_block'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06531}06531 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06532}06532    \textcolor{comment}{// we have to write one special byte, plus the 8-\/byte length}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06533}06533 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06534}06534    \textcolor{comment}{// compute the block where the data runs out}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06535}06535    end\_start = len \& \string~63;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06536}06536 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06537}06537    \textcolor{comment}{// compute the earliest we can encode the length}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06538}06538    \textcolor{keywordflow}{if} (((len+9) \& \string~63) == end\_start) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06539}06539       \textcolor{comment}{// it all fits in one block, so fill a second-\/to-\/last block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06540}06540       end\_start -\/= 64;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06541}06541    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06542}06542 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06543}06543    final\_len = end\_start + 128;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06544}06544 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06545}06545    \textcolor{comment}{// now we need to copy the data in}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06546}06546    assert(end\_start + 128 >= len+9);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06547}06547    assert(end\_start < len || len < 64-\/9);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06548}06548 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06549}06549    j = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06550}06550    \textcolor{keywordflow}{if} (end\_start > len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06551}06551       j = (stb\_uint) -\/ (\textcolor{keywordtype}{int}) end\_start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06552}06552 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06553}06553    \textcolor{keywordflow}{for} (; end\_start + j < len; ++j)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06554}06554       final\_block[j] = \mbox{\hyperlink{classbuffer}{buffer}}[end\_start + j];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06555}06555    final\_block[j++] = 0x80;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06556}06556    \textcolor{keywordflow}{while} (j < 128-\/5) \textcolor{comment}{// 5 byte length, so write 4 extra padding bytes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06557}06557       final\_block[j++] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06558}06558    \textcolor{comment}{// big-\/endian size}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06559}06559    final\_block[j++] = len >> 29;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06560}06560    final\_block[j++] = len >> 21;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06561}06561    final\_block[j++] = len >> 13;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06562}06562    final\_block[j++] = len >>  5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06563}06563    final\_block[j++] = len <<  3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06564}06564    assert(j == 128 \&\& end\_start + j == final\_len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06565}06565 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06566}06566    \textcolor{keywordflow}{for} (j=0; j < final\_len; j += 64) \{ \textcolor{comment}{// 512-\/bit chunks}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06567}06567       \textcolor{keywordflow}{if} (j+64 >= end\_start+64)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06568}06568          stb\_\_sha1(\&final\_block[j -\/ end\_start], h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06569}06569       \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06570}06570          stb\_\_sha1(\&\mbox{\hyperlink{classbuffer}{buffer}}[j], h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06571}06571    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06572}06572 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06573}06573    \textcolor{keywordflow}{for} (i=0; i < 5; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06574}06574       \mbox{\hyperlink{structoutput}{output}}[i*4 + 0] = h[i] >> 24;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06575}06575       \mbox{\hyperlink{structoutput}{output}}[i*4 + 1] = h[i] >> 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06576}06576       \mbox{\hyperlink{structoutput}{output}}[i*4 + 2] = h[i] >>  8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06577}06577       \mbox{\hyperlink{structoutput}{output}}[i*4 + 3] = h[i] >>  0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06578}06578    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06579}06579 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06580}06580 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06581}06581 \textcolor{preprocessor}{\#ifdef \_MSC\_VER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06582}06582 \textcolor{keywordtype}{int} stb\_sha1\_file(stb\_uchar \mbox{\hyperlink{structoutput}{output}}[20], \textcolor{keywordtype}{char} *file)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06583}06583 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06584}06584    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06585}06585    stb\_uint64 length=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06586}06586    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[128];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06587}06587 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06588}06588    FILE *f = stb\_\_fopen(file, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06589}06589    stb\_uint h[5];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06590}06590 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06591}06591    \textcolor{keywordflow}{if} (f == NULL) \textcolor{keywordflow}{return} 0; \textcolor{comment}{// file not found}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06592}06592 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06593}06593    h[0] = 0x67452301;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06594}06594    h[1] = 0xefcdab89;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06595}06595    h[2] = 0x98badcfe;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06596}06596    h[3] = 0x10325476;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06597}06597    h[4] = 0xc3d2e1f0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06598}06598 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06599}06599    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06600}06600       \textcolor{keywordtype}{size\_t} n = fread(\mbox{\hyperlink{classbuffer}{buffer}}, 1, 64, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06601}06601       \textcolor{keywordflow}{if} (n == 64) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06602}06602          stb\_\_sha1(\mbox{\hyperlink{classbuffer}{buffer}}, h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06603}06603          length += n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06604}06604       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06605}06605          \textcolor{keywordtype}{int} block = 64;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06606}06606 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06607}06607          length += n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06608}06608 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06609}06609          \mbox{\hyperlink{classbuffer}{buffer}}[n++] = 0x80;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06610}06610 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06611}06611          \textcolor{comment}{// if there isn't enough room for the length, double the block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06612}06612          \textcolor{keywordflow}{if} (n + 8 > 64)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06613}06613             block = 128;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06614}06614 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06615}06615          \textcolor{comment}{// pad to end}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06616}06616          memset(\mbox{\hyperlink{classbuffer}{buffer}}+n, 0, block-\/8-\/n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06617}06617 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06618}06618          i = block -\/ 8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06619}06619          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = (stb\_uchar) (length >> 53);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06620}06620          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = (stb\_uchar) (length >> 45);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06621}06621          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = (stb\_uchar) (length >> 37);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06622}06622          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = (stb\_uchar) (length >> 29);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06623}06623          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = (stb\_uchar) (length >> 21);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06624}06624          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = (stb\_uchar) (length >> 13);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06625}06625          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = (stb\_uchar) (length >>  5);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06626}06626          \mbox{\hyperlink{classbuffer}{buffer}}[i++] = (stb\_uchar) (length <<  3);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06627}06627          assert(i == block);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06628}06628          stb\_\_sha1(\mbox{\hyperlink{classbuffer}{buffer}}, h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06629}06629          \textcolor{keywordflow}{if} (block == 128)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06630}06630             stb\_\_sha1(\mbox{\hyperlink{classbuffer}{buffer}}+64, h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06631}06631          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06632}06632             assert(block == 64);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06633}06633          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06634}06634       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06635}06635    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06636}06636    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06637}06637 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06638}06638    \textcolor{keywordflow}{for} (i=0; i < 5; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06639}06639       \mbox{\hyperlink{structoutput}{output}}[i*4 + 0] = h[i] >> 24;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06640}06640       \mbox{\hyperlink{structoutput}{output}}[i*4 + 1] = h[i] >> 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06641}06641       \mbox{\hyperlink{structoutput}{output}}[i*4 + 2] = h[i] >>  8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06642}06642       \mbox{\hyperlink{structoutput}{output}}[i*4 + 3] = h[i] >>  0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06643}06643    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06644}06644 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06645}06645    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06646}06646 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06647}06647 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// \_MSC\_VER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06648}06648 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06649}06649 \textcolor{comment}{// client can truncate this wherever they like}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06650}06650 \textcolor{keywordtype}{void} stb\_sha1\_readable(\textcolor{keywordtype}{char} display[27], \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} sha[20])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06651}06651 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06652}06652    \textcolor{keywordtype}{char} encoding[65] = \textcolor{stringliteral}{"{}0123456789abcdefghijklmnopqrstuv"{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06653}06653                        \textcolor{stringliteral}{"{}wxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\%\$"{}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06654}06654    \textcolor{keywordtype}{int} num\_bits = 0, acc=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06655}06655    \textcolor{keywordtype}{int} i=0,o=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06656}06656    \textcolor{keywordflow}{while} (o < 26) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06657}06657       \textcolor{keywordtype}{int} v;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06658}06658       \textcolor{comment}{// expand the accumulator}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06659}06659       \textcolor{keywordflow}{if} (num\_bits < 6) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06660}06660          assert(i != 20);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06661}06661          acc += sha[i++] << num\_bits;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06662}06662          num\_bits += 8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06663}06663       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06664}06664       v = acc \& ((1 << 6) -\/ 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06665}06665       display[o++] = encoding[v];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06666}06666       acc >>= 6;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06667}06667       num\_bits -\/= 6;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06668}06668    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06669}06669    assert(num\_bits == 20*8 -\/ 26*6);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06670}06670    display[o++] = encoding[acc];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06671}06671 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06672}06672 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06673}06673 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06674}06674 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06676}06676 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06677}06677 \textcolor{comment}{// simplified WINDOWS registry interface... hopefully}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06678}06678 \textcolor{comment}{// we'll never actually use this?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06679}06679 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06680}06680 \textcolor{preprocessor}{\#if defined(\_WIN32)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06681}06681 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06682}06682 STB\_EXTERN \textcolor{keywordtype}{void} * stb\_reg\_open(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *mode, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *where); \textcolor{comment}{// mode: "{}rHKLM"{} or "{}rHKCU"{} or "{}w.."{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06683}06683 STB\_EXTERN \textcolor{keywordtype}{void}   stb\_reg\_close(\textcolor{keywordtype}{void} *reg);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06684}06684 STB\_EXTERN \textcolor{keywordtype}{int}    stb\_reg\_read(\textcolor{keywordtype}{void} *zreg, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06685}06685 STB\_EXTERN \textcolor{keywordtype}{int}    stb\_reg\_read\_string(\textcolor{keywordtype}{void} *zreg, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06686}06686 STB\_EXTERN \textcolor{keywordtype}{void}   stb\_reg\_write(\textcolor{keywordtype}{void} *zreg, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *str, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06687}06687 STB\_EXTERN \textcolor{keywordtype}{void}   stb\_reg\_write\_string(\textcolor{keywordtype}{void} *zreg, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *str, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *data);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06688}06688 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06689}06689 \textcolor{preprocessor}{\#if defined(STB\_DEFINE) \&\& !defined(STB\_NO\_REGISTRY)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06690}06690 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06691}06691 \textcolor{preprocessor}{\#define STB\_HAS\_REGISTRY}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06692}06692 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06693}06693 \textcolor{preprocessor}{\#ifndef \_WINDOWS\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06694}06694 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06695}06695 \textcolor{preprocessor}{\#define HKEY void *}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06696}06696 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06697}06697 STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{long} \_\_stdcall RegCloseKey ( HKEY hKey );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06698}06698 STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{long} \_\_stdcall RegCreateKeyExA ( HKEY hKey, \textcolor{keyword}{const} \textcolor{keywordtype}{char} * lpSubKey,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06699}06699     \textcolor{keywordtype}{int}  Reserved, \textcolor{keywordtype}{char} * lpClass, \textcolor{keywordtype}{int}  dwOptions,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06700}06700     \textcolor{keywordtype}{int} samDesired, \textcolor{keywordtype}{void} *lpSecurityAttributes,     HKEY * phkResult,     \textcolor{keywordtype}{int} * lpdwDisposition );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06701}06701 STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{long} \_\_stdcall RegDeleteKeyA ( HKEY hKey, \textcolor{keyword}{const} \textcolor{keywordtype}{char} * lpSubKey );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06702}06702 STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{long} \_\_stdcall RegQueryValueExA ( HKEY hKey, \textcolor{keyword}{const} \textcolor{keywordtype}{char} * lpValueName,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06703}06703     \textcolor{keywordtype}{int} * lpReserved, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} * lpType, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * lpData, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} * lpcbData );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06704}06704 STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{long} \_\_stdcall RegSetValueExA ( HKEY hKey, \textcolor{keyword}{const} \textcolor{keywordtype}{char} * lpValueName,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06705}06705     \textcolor{keywordtype}{int}  Reserved, \textcolor{keywordtype}{int}  dwType, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* lpData, \textcolor{keywordtype}{int}  cbData );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06706}06706 STB\_EXTERN \_\_declspec(dllimport) \textcolor{keywordtype}{long} \_\_stdcall  RegOpenKeyExA ( HKEY hKey, \textcolor{keyword}{const} \textcolor{keywordtype}{char} * lpSubKey,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06707}06707     \textcolor{keywordtype}{int} ulOptions, \textcolor{keywordtype}{int} samDesired, HKEY * phkResult );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06708}06708 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06709}06709 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// \_WINDOWS\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06710}06710 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06711}06711 \textcolor{preprocessor}{\#define STB\_\_REG\_OPTION\_NON\_VOLATILE  0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06712}06712 \textcolor{preprocessor}{\#define STB\_\_REG\_KEY\_ALL\_ACCESS       0x000f003f}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06713}06713 \textcolor{preprocessor}{\#define STB\_\_REG\_KEY\_READ             0x00020019}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06714}06714 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06715}06715 \textcolor{preprocessor}{\#ifdef \_M\_AMD64}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06716}06716 \textcolor{preprocessor}{\#define STB\_\_HKEY\_CURRENT\_USER        0x80000001ull}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06717}06717 \textcolor{preprocessor}{\#define STB\_\_HKEY\_LOCAL\_MACHINE       0x80000002ull}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06718}06718 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06719}06719 \textcolor{preprocessor}{\#define STB\_\_HKEY\_CURRENT\_USER        0x80000001}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06720}06720 \textcolor{preprocessor}{\#define STB\_\_HKEY\_LOCAL\_MACHINE       0x80000002}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06721}06721 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06722}06722 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06723}06723 \textcolor{keywordtype}{void} *stb\_reg\_open(\textcolor{keyword}{const} \textcolor{keywordtype}{char} *mode, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *where)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06724}06724 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06725}06725    \textcolor{keywordtype}{long} res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06726}06726    HKEY base;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06727}06727    HKEY zreg;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06728}06728    \textcolor{keywordflow}{if} (!stb\_stricmp(mode+1, \textcolor{stringliteral}{"{}cu"{}}) || !stb\_stricmp(mode+1, \textcolor{stringliteral}{"{}hkcu"{}}))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06729}06729       base = (HKEY) STB\_\_HKEY\_CURRENT\_USER;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06730}06730    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!stb\_stricmp(mode+1, \textcolor{stringliteral}{"{}lm"{}}) || !stb\_stricmp(mode+1, \textcolor{stringliteral}{"{}hklm"{}}))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06731}06731       base = (HKEY) STB\_\_HKEY\_LOCAL\_MACHINE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06732}06732    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06733}06733       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06734}06734 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06735}06735    \textcolor{keywordflow}{if} (mode[0] == \textcolor{charliteral}{'r'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06736}06736       res = RegOpenKeyExA(base, where, 0, STB\_\_REG\_KEY\_READ, \&zreg);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06737}06737    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (mode[0] == \textcolor{charliteral}{'w'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06738}06738       res = RegCreateKeyExA(base, where,  0, NULL, STB\_\_REG\_OPTION\_NON\_VOLATILE, STB\_\_REG\_KEY\_ALL\_ACCESS, NULL, \&zreg, NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06739}06739    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06740}06740       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06741}06741 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06742}06742    \textcolor{keywordflow}{return} res ? NULL : zreg;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06743}06743 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06744}06744 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06745}06745 \textcolor{keywordtype}{void} stb\_reg\_close(\textcolor{keywordtype}{void} *reg)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06746}06746 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06747}06747    RegCloseKey((HKEY) reg);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06748}06748 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06749}06749 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06750}06750 \textcolor{preprocessor}{\#define STB\_\_REG\_SZ         1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06751}06751 \textcolor{preprocessor}{\#define STB\_\_REG\_BINARY     3}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06752}06752 \textcolor{preprocessor}{\#define STB\_\_REG\_DWORD      4}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06753}06753 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06754}06754 \textcolor{keywordtype}{int} stb\_reg\_read(\textcolor{keywordtype}{void} *zreg, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06755}06755 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06756}06756    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} type;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06757}06757    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} alen = len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06758}06758    \textcolor{keywordflow}{if} (0 == RegQueryValueExA((HKEY) zreg, str, 0, \&type, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) data, \&len))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06759}06759       \textcolor{keywordflow}{if} (type == STB\_\_REG\_BINARY || type == STB\_\_REG\_SZ || type == STB\_\_REG\_DWORD) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06760}06760          \textcolor{keywordflow}{if} (len < alen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06761}06761             *((\textcolor{keywordtype}{char} *) data + len) = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06762}06762          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06763}06763       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06764}06764    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06765}06765 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06766}06766 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06767}06767 \textcolor{keywordtype}{void} stb\_reg\_write(\textcolor{keywordtype}{void} *zreg, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *str, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06768}06768 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06769}06769    \textcolor{keywordflow}{if} (zreg)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06770}06770       RegSetValueExA((HKEY) zreg, str, 0, STB\_\_REG\_BINARY, (\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) data, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06771}06771 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06772}06772 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06773}06773 \textcolor{keywordtype}{int} stb\_reg\_read\_string(\textcolor{keywordtype}{void} *zreg, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06774}06774 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06775}06775    \textcolor{keywordflow}{if} (!stb\_reg\_read(zreg, str, data, len)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06776}06776    data[len-\/1] = 0; \textcolor{comment}{// force a 0 at the end of the string no matter what}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06777}06777    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06778}06778 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06779}06779 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06780}06780 \textcolor{keywordtype}{void} stb\_reg\_write\_string(\textcolor{keywordtype}{void} *zreg, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *str, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *data)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06781}06781 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06782}06782    \textcolor{keywordflow}{if} (zreg)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06783}06783       RegSetValueExA((HKEY) zreg, str, 0, STB\_\_REG\_SZ, (\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *)  data, (\textcolor{keywordtype}{int}) strlen(data)+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06784}06784 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06785}06785 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06786}06786 \textcolor{preprocessor}{\#endif  }\textcolor{comment}{// \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06787}06787 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06788}06788 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06790}06790 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06791}06791 \textcolor{comment}{//     stb\_cfg -\/ This is like the registry, but the config info}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06792}06792 \textcolor{comment}{//               is all stored in plain old files where we can}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06793}06793 \textcolor{comment}{//               backup and restore them easily. The LOCATION of}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06794}06794 \textcolor{comment}{//               the config files is gotten from... the registry!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06795}06795 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06796}06796 \textcolor{preprocessor}{\#ifndef STB\_NO\_STB\_STRINGS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06797}06797 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_cfg\_st stb\_cfg;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06798}06798 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06799}06799 STB\_EXTERN stb\_cfg * stb\_cfg\_open(\textcolor{keywordtype}{char} *config, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *mode); \textcolor{comment}{// mode = "{}r"{}, "{}w"{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06800}06800 STB\_EXTERN \textcolor{keywordtype}{void}      stb\_cfg\_close(stb\_cfg *cfg);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06801}06801 STB\_EXTERN \textcolor{keywordtype}{int}       stb\_cfg\_read(stb\_cfg *cfg, \textcolor{keywordtype}{char} *key, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}}, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06802}06802 STB\_EXTERN \textcolor{keywordtype}{void}      stb\_cfg\_write(stb\_cfg *cfg, \textcolor{keywordtype}{char} *key, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}}, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06803}06803 STB\_EXTERN \textcolor{keywordtype}{int}       stb\_cfg\_read\_string(stb\_cfg *cfg, \textcolor{keywordtype}{char} *key, \textcolor{keywordtype}{char} *\mbox{\hyperlink{classvalue}{value}}, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06804}06804 STB\_EXTERN \textcolor{keywordtype}{void}      stb\_cfg\_write\_string(stb\_cfg *cfg, \textcolor{keywordtype}{char} *key, \textcolor{keywordtype}{char} *\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06805}06805 STB\_EXTERN \textcolor{keywordtype}{int}       stb\_cfg\_delete(stb\_cfg *cfg, \textcolor{keywordtype}{char} *key);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06806}06806 STB\_EXTERN \textcolor{keywordtype}{void}      stb\_cfg\_set\_directory(\textcolor{keywordtype}{char} *dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06807}06807 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06808}06808 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06809}06809 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06810}06810 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06811}06811 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06812}06812    \textcolor{keywordtype}{char} *key;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06813}06813    \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06814}06814    \textcolor{keywordtype}{int} value\_len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06815}06815 \} stb\_\_cfg\_item;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06816}06816 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06817}06817 \textcolor{keyword}{struct }stb\_cfg\_st}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06818}06818 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06819}06819    stb\_\_cfg\_item *data;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06820}06820    \textcolor{keywordtype}{char} *loaded\_file;   \textcolor{comment}{// this needs to be freed}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06821}06821    FILE *f; \textcolor{comment}{// write the data to this file on close}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06822}06822 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06823}06823 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06824}06824 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{char} *stb\_\_cfg\_sig = \textcolor{stringliteral}{"{}sTbCoNfIg!\(\backslash\)0\(\backslash\)0"{}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06825}06825 \textcolor{keyword}{static} \textcolor{keywordtype}{char} stb\_\_cfg\_dir[512];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06826}06826 STB\_EXTERN \textcolor{keywordtype}{void} stb\_cfg\_set\_directory(\textcolor{keywordtype}{char} *dir)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06827}06827 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06828}06828    stb\_p\_strcpy\_s(stb\_\_cfg\_dir, \textcolor{keyword}{sizeof}(stb\_\_cfg\_dir), dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06829}06829 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06830}06830 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06831}06831 STB\_EXTERN stb\_cfg * stb\_cfg\_open(\textcolor{keywordtype}{char} *config, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *mode)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06832}06832 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06833}06833    \textcolor{keywordtype}{size\_t} len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06834}06834    stb\_cfg *z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06835}06835    \textcolor{keywordtype}{char} file[512];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06836}06836    \textcolor{keywordflow}{if} (mode[0] != \textcolor{charliteral}{'r'} \&\& mode[0] != \textcolor{charliteral}{'w'}) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06837}06837 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06838}06838    \textcolor{keywordflow}{if} (!stb\_\_cfg\_dir[0]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06839}06839 \textcolor{preprocessor}{      \#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06840}06840       stb\_p\_strcpy\_s(stb\_\_cfg\_dir, \textcolor{keyword}{sizeof}(stb\_\_cfg\_dir), \textcolor{stringliteral}{"{}c:/stb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06841}06841 \textcolor{preprocessor}{      \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06842}06842       strcpy(stb\_\_cfg\_dir, \textcolor{stringliteral}{"{}\string~/.stbconfig"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06843}06843 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06844}06844 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06845}06845 \textcolor{preprocessor}{      \#ifdef STB\_HAS\_REGISTRY}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06846}06846       \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06847}06847          \textcolor{keywordtype}{void} *reg = stb\_reg\_open(\textcolor{stringliteral}{"{}rHKLM"{}}, \textcolor{stringliteral}{"{}Software\(\backslash\)\(\backslash\)SilverSpaceship\(\backslash\)\(\backslash\)stb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06848}06848          \textcolor{keywordflow}{if} (reg) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06849}06849             stb\_reg\_read\_string(reg, \textcolor{stringliteral}{"{}config\_dir"{}}, stb\_\_cfg\_dir, \textcolor{keyword}{sizeof}(stb\_\_cfg\_dir));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06850}06850             stb\_reg\_close(reg);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06851}06851          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06852}06852       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06853}06853 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06854}06854    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06855}06855 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06856}06856    stb\_p\_sprintf(file stb\_p\_size(\textcolor{keyword}{sizeof}(file)), \textcolor{stringliteral}{"{}\%s/\%s.cfg"{}}, stb\_\_cfg\_dir, config);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06857}06857 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06858}06858    z = (stb\_cfg *) stb\_malloc(0, \textcolor{keyword}{sizeof}(*z));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06859}06859    z-\/>data = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06860}06860 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06861}06861    z-\/>loaded\_file = stb\_filec(file, \&len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06862}06862    \textcolor{keywordflow}{if} (z-\/>loaded\_file) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06863}06863       \textcolor{keywordtype}{char} *s = z-\/>loaded\_file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06864}06864       \textcolor{keywordflow}{if} (!memcmp(s, stb\_\_cfg\_sig, 12)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06865}06865          \textcolor{keywordtype}{char} *s = z-\/>loaded\_file + 12;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06866}06866          \textcolor{keywordflow}{while} (s < z-\/>loaded\_file + len) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06867}06867             stb\_\_cfg\_item a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06868}06868             \textcolor{keywordtype}{int} n = *(stb\_int16 *) s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06869}06869             a.key = s+2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06870}06870             s = s+2 + n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06871}06871             a.value\_len = *(\textcolor{keywordtype}{int} *) s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06872}06872             s += 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06873}06873             a.value = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06874}06874             s += a.value\_len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06875}06875             stb\_arr\_push(z-\/>data, a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06876}06876          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06877}06877          assert(s == z-\/>loaded\_file + len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06878}06878       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06879}06879    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06880}06880 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06881}06881    \textcolor{keywordflow}{if} (mode[0] == \textcolor{charliteral}{'w'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06882}06882       z-\/>f = stb\_p\_fopen(file, \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06883}06883    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06884}06884       z-\/>f = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06885}06885 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06886}06886    \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06887}06887 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06888}06888 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06889}06889 \textcolor{keywordtype}{void} stb\_cfg\_close(stb\_cfg *z)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06890}06890 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06891}06891    \textcolor{keywordflow}{if} (z-\/>f) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06892}06892       \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06893}06893       \textcolor{comment}{// write the file out}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06894}06894       fwrite(stb\_\_cfg\_sig, 12, 1, z-\/>f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06895}06895       \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(z-\/>data); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06896}06896          stb\_int16 n = (stb\_int16) strlen(z-\/>data[i].key)+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06897}06897          fwrite(\&n, 2, 1, z-\/>f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06898}06898          fwrite(z-\/>data[i].key, n, 1, z-\/>f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06899}06899          fwrite(\&z-\/>data[i].value\_len, 4, 1, z-\/>f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06900}06900          fwrite(z-\/>data[i].value, z-\/>data[i].value\_len, 1, z-\/>f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06901}06901       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06902}06902       fclose(z-\/>f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06903}06903    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06904}06904    stb\_arr\_free(z-\/>data);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06905}06905    stb\_free(z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06906}06906 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06907}06907 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06908}06908 \textcolor{keywordtype}{int} stb\_cfg\_read(stb\_cfg *z, \textcolor{keywordtype}{char} *key, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}}, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06909}06909 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06910}06910    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06911}06911    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(z-\/>data); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06912}06912       \textcolor{keywordflow}{if} (!stb\_stricmp(z-\/>data[i].key, key)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06913}06913          \textcolor{keywordtype}{int} n = stb\_min(len, z-\/>data[i].value\_len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06914}06914          memcpy(\mbox{\hyperlink{classvalue}{value}}, z-\/>data[i].value, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06915}06915          \textcolor{keywordflow}{if} (n < len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06916}06916             *((\textcolor{keywordtype}{char} *) \mbox{\hyperlink{classvalue}{value}} + n) = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06917}06917          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06918}06918       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06919}06919    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06920}06920    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06921}06921 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06922}06922 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06923}06923 \textcolor{keywordtype}{void} stb\_cfg\_write(stb\_cfg *z, \textcolor{keywordtype}{char} *key, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}}, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06924}06924 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06925}06925    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06926}06926    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(z-\/>data); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06927}06927       \textcolor{keywordflow}{if} (!stb\_stricmp(z-\/>data[i].key, key))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06928}06928          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06929}06929    \textcolor{keywordflow}{if} (i == stb\_arr\_len(z-\/>data)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06930}06930       stb\_\_cfg\_item p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06931}06931       p.key = stb\_strdup(key, z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06932}06932       p.value = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06933}06933       p.value\_len = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06934}06934       stb\_arr\_push(z-\/>data, p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06935}06935    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06936}06936    z-\/>data[i].value = stb\_malloc(z, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06937}06937    z-\/>data[i].value\_len = len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06938}06938    memcpy(z-\/>data[i].value, \mbox{\hyperlink{classvalue}{value}}, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06939}06939 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06940}06940 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06941}06941 \textcolor{keywordtype}{int} stb\_cfg\_delete(stb\_cfg *z, \textcolor{keywordtype}{char} *key)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06942}06942 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06943}06943    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06944}06944    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(z-\/>data); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06945}06945       \textcolor{keywordflow}{if} (!stb\_stricmp(z-\/>data[i].key, key)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06946}06946          stb\_arr\_fastdelete(z-\/>data, i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06947}06947          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06948}06948       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06949}06949    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06950}06950 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06951}06951 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06952}06952 \textcolor{keywordtype}{int} stb\_cfg\_read\_string(stb\_cfg *z, \textcolor{keywordtype}{char} *key, \textcolor{keywordtype}{char} *\mbox{\hyperlink{classvalue}{value}}, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06953}06953 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06954}06954    \textcolor{keywordflow}{if} (!stb\_cfg\_read(z, key, \mbox{\hyperlink{classvalue}{value}}, len)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06955}06955    \mbox{\hyperlink{classvalue}{value}}[len-\/1] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06956}06956    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06957}06957 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06958}06958 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06959}06959 \textcolor{keywordtype}{void} stb\_cfg\_write\_string(stb\_cfg *z, \textcolor{keywordtype}{char} *key, \textcolor{keywordtype}{char} *\mbox{\hyperlink{classvalue}{value}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06960}06960 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06961}06961    stb\_cfg\_write(z, key, \mbox{\hyperlink{classvalue}{value}}, (\textcolor{keywordtype}{int}) strlen(\mbox{\hyperlink{classvalue}{value}})+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06962}06962 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06963}06963 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06964}06964 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06966}06966 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06967}06967 \textcolor{comment}{//     stb\_dirtree  -\/ load a description of a directory tree}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06968}06968 \textcolor{comment}{//                      uses a cache and stat()s the directories for changes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06969}06969 \textcolor{comment}{//                      MUCH faster on NTFS, \_wrong\_ on FAT32, so should}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06970}06970 \textcolor{comment}{//                      ignore the db on FAT32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06971}06971 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06972}06972 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06973}06973 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06974}06974 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06975}06975 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06976}06976    \textcolor{keywordtype}{char}   * path;           \textcolor{comment}{// full path from passed-\/in root}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06977}06977    time\_t   last\_modified;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06978}06978    \textcolor{keywordtype}{int}      num\_files;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06979}06979    \textcolor{keywordtype}{int}      flag;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06980}06980 \} stb\_dirtree\_dir;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06981}06981 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06982}06982 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06983}06983 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06984}06984    \textcolor{keywordtype}{char} *name;              \textcolor{comment}{// name relative to path}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06985}06985    \textcolor{keywordtype}{int}   dir;               \textcolor{comment}{// index into dirs[] array}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06986}06986    stb\_int64 size;      \textcolor{comment}{// size, max 4GB}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06987}06987    time\_t   last\_modified;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06988}06988    \textcolor{keywordtype}{int}      flag;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06989}06989 \} stb\_dirtree\_file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06990}06990 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06991}06991 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06992}06992 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06993}06993    stb\_dirtree\_dir  *dirs;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06994}06994    stb\_dirtree\_file *files;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06995}06995 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06996}06996    \textcolor{comment}{// internal use}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06997}06997    \textcolor{keywordtype}{void}             * string\_pool;   \textcolor{comment}{// used to free data en masse}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06998}06998 \} stb\_dirtree;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l06999}06999 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07000}07000 \textcolor{keyword}{extern} \textcolor{keywordtype}{void}         stb\_dirtree\_free          ( stb\_dirtree *d );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07001}07001 \textcolor{keyword}{extern} stb\_dirtree *stb\_dirtree\_get           ( \textcolor{keywordtype}{char} *dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07002}07002 \textcolor{keyword}{extern} stb\_dirtree *stb\_dirtree\_get\_dir       ( \textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *cache\_dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07003}07003 \textcolor{keyword}{extern} stb\_dirtree *stb\_dirtree\_get\_with\_file ( \textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *cache\_file);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07004}07004 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07005}07005 \textcolor{comment}{// get a list of all the files recursively underneath 'dir'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07006}07006 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07007}07007 \textcolor{comment}{// cache\_file is used to store a copy of the directory tree to speed up}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07008}07008 \textcolor{comment}{// later calls. It must be unique to 'dir' and the current working}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07009}07009 \textcolor{comment}{// directory! Otherwise who knows what will happen (a good solution}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07010}07010 \textcolor{comment}{// is to put it \_in\_ dir, but this API doesn't force that).}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07011}07011 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07012}07012 \textcolor{comment}{// Also, it might be possible to break this if you have two different processes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07013}07013 \textcolor{comment}{// do a call to stb\_dirtree\_get() with the same cache file at about the same}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07014}07014 \textcolor{comment}{// time, but I \_think\_ it might just work.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07015}07015 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07016}07016 \textcolor{comment}{// i needed to build an identical data structure representing the state of}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07017}07017 \textcolor{comment}{// a mirrored copy WITHOUT bothering to rescan it (i.e. we're mirroring to}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07018}07018 \textcolor{comment}{// it WITHOUT scanning it, e.g. it's over the net), so this requires access}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07019}07019 \textcolor{comment}{// to all of the innards.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07020}07020 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} stb\_dirtree\_db\_add\_dir(stb\_dirtree *active, \textcolor{keywordtype}{char} *path, time\_t last);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07021}07021 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} stb\_dirtree\_db\_add\_file(stb\_dirtree *active, \textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{int} dir, stb\_int64 size, time\_t last);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07022}07022 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} stb\_dirtree\_db\_read(stb\_dirtree *target, \textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07023}07023 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} stb\_dirtree\_db\_write(stb\_dirtree *target, \textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07024}07024 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07025}07025 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07026}07026 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_dirtree\_add\_dir(\textcolor{keywordtype}{char} *path, time\_t last, stb\_dirtree *active)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07027}07027 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07028}07028    stb\_dirtree\_dir d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07029}07029    d.last\_modified = last;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07030}07030    d.num\_files = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07031}07031    d.path = stb\_strdup(path, active-\/>string\_pool);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07032}07032    stb\_arr\_push(active-\/>dirs, d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07033}07033 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07034}07034 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07035}07035 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_dirtree\_add\_file(\textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{int} dir, stb\_int64 size, time\_t last, stb\_dirtree *active)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07036}07036 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07037}07037    stb\_dirtree\_file f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07038}07038    f.dir = dir;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07039}07039    f.size = size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07040}07040    f.last\_modified = last;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07041}07041    f.name = stb\_strdup(name, active-\/>string\_pool);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07042}07042    ++active-\/>dirs[dir].num\_files;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07043}07043    stb\_arr\_push(active-\/>files, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07044}07044 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07045}07045 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07046}07046 \textcolor{comment}{// version 02 supports > 4GB files}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07047}07047 \textcolor{keyword}{static} \textcolor{keywordtype}{char} stb\_\_signature[12] = \{ \textcolor{charliteral}{'s'}, \textcolor{charliteral}{'T'}, \textcolor{charliteral}{'b'}, \textcolor{charliteral}{'D'}, \textcolor{charliteral}{'i'}, \textcolor{charliteral}{'R'}, \textcolor{charliteral}{'t'}, \textcolor{charliteral}{'R'}, \textcolor{charliteral}{'e'}, \textcolor{charliteral}{'E'}, \textcolor{charliteral}{'0'}, \textcolor{charliteral}{'2'} \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07048}07048 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07049}07049 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_dirtree\_save\_db(\textcolor{keywordtype}{char} *filename, stb\_dirtree *data, \textcolor{keywordtype}{char} *root)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07050}07050 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07051}07051    \textcolor{keywordtype}{int} i, num\_dirs\_final=0, num\_files\_final;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07052}07052    \textcolor{keywordtype}{char} *\mbox{\hyperlink{structinfo}{info}} = root ? root : (\textcolor{keywordtype}{char}*)\textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07053}07053    \textcolor{keywordtype}{int} *remap;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07054}07054    FILE *f = stb\_p\_fopen(filename, \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07055}07055    \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07056}07056 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07057}07057    fwrite(stb\_\_signature, \textcolor{keyword}{sizeof}(stb\_\_signature), 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07058}07058    fwrite(\mbox{\hyperlink{structinfo}{info}}, strlen(\mbox{\hyperlink{structinfo}{info}})+1, 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07059}07059    \textcolor{comment}{// need to be slightly tricky and not write out NULLed directories, nor the root}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07060}07060 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07061}07061    \textcolor{comment}{// build remapping table of all dirs we'll be writing out}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07062}07062    remap = (\textcolor{keywordtype}{int} *) malloc(\textcolor{keyword}{sizeof}(remap[0]) * stb\_arr\_len(data-\/>dirs));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07063}07063    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(data-\/>dirs); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07064}07064       \textcolor{keywordflow}{if} (data-\/>dirs[i].path == NULL || (root \&\& 0==stb\_stricmp(data-\/>dirs[i].path, root))) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07065}07065          remap[i] = -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07066}07066       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07067}07067          remap[i] = num\_dirs\_final++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07068}07068       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07069}07069    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07070}07070 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07071}07071    fwrite(\&num\_dirs\_final, 4, 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07072}07072    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(data-\/>dirs); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07073}07073       \textcolor{keywordflow}{if} (remap[i] >= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07074}07074          fwrite(\&data-\/>dirs[i].last\_modified, 4, 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07075}07075          stb\_fput\_string(f, data-\/>dirs[i].path);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07076}07076       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07077}07077    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07078}07078 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07079}07079    num\_files\_final = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07080}07080    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(data-\/>files); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07081}07081       \textcolor{keywordflow}{if} (remap[data-\/>files[i].dir] >= 0 \&\& data-\/>files[i].name)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07082}07082          ++num\_files\_final;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07083}07083 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07084}07084    fwrite(\&num\_files\_final, 4, 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07085}07085    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(data-\/>files); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07086}07086       \textcolor{keywordflow}{if} (remap[data-\/>files[i].dir] >= 0 \&\& data-\/>files[i].name) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07087}07087          stb\_fput\_ranged(f, remap[data-\/>files[i].dir], 0, num\_dirs\_final);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07088}07088          stb\_fput\_varlen64(f, data-\/>files[i].size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07089}07089          fwrite(\&data-\/>files[i].last\_modified, 4, 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07090}07090          stb\_fput\_string(f, data-\/>files[i].name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07091}07091       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07092}07092    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07093}07093 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07094}07094    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07095}07095 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07096}07096 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07097}07097 \textcolor{comment}{// note: stomps any existing data, rather than appending}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07098}07098 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_dirtree\_load\_db(\textcolor{keywordtype}{char} *filename, stb\_dirtree *data, \textcolor{keywordtype}{char} *dir)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07099}07099 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07100}07100    \textcolor{keywordtype}{char} sig[2048];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07101}07101    \textcolor{keywordtype}{int} i,n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07102}07102    FILE *f = stb\_p\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07103}07103 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07104}07104    \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07105}07105 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07106}07106    data-\/>string\_pool = stb\_malloc(0,1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07107}07107 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07108}07108    fread(sig, \textcolor{keyword}{sizeof}(stb\_\_signature), 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07109}07109    \textcolor{keywordflow}{if} (memcmp(stb\_\_signature, sig, \textcolor{keyword}{sizeof}(stb\_\_signature))) \{ fclose(f); \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07110}07110    \textcolor{keywordflow}{if} (!fread(sig, strlen(dir)+1, 1, f))                    \{ fclose(f); \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07111}07111    \textcolor{keywordflow}{if} (stb\_stricmp(sig,dir))                                \{ fclose(f); \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07112}07112 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07113}07113    \textcolor{comment}{// we can just read them straight in, because they're guaranteed to be valid}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07114}07114    fread(\&n, 4, 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07115}07115    stb\_arr\_setlen(data-\/>dirs, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07116}07116    \textcolor{keywordflow}{for}(i=0; i < stb\_arr\_len(data-\/>dirs); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07117}07117       fread(\&data-\/>dirs[i].last\_modified, 4, 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07118}07118       data-\/>dirs[i].path = stb\_fget\_string(f, data-\/>string\_pool);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07119}07119       \textcolor{keywordflow}{if} (data-\/>dirs[i].path == NULL) \textcolor{keywordflow}{goto} bail;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07120}07120    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07121}07121    fread(\&n, 4, 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07122}07122    stb\_arr\_setlen(data-\/>files, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07123}07123    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(data-\/>files); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07124}07124       data-\/>files[i].dir  = stb\_fget\_ranged(f, 0, stb\_arr\_len(data-\/>dirs));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07125}07125       data-\/>files[i].size = stb\_fget\_varlen64(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07126}07126       fread(\&data-\/>files[i].last\_modified, 4, 1, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07127}07127       data-\/>files[i].name = stb\_fget\_string(f, data-\/>string\_pool);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07128}07128       \textcolor{keywordflow}{if} (data-\/>files[i].name == NULL) \textcolor{keywordflow}{goto} bail;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07129}07129    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07130}07130 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07131}07131    \textcolor{keywordflow}{if} (0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07132}07132       bail:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07133}07133          stb\_arr\_free(data-\/>dirs);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07134}07134          stb\_arr\_free(data-\/>files);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07135}07135    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07136}07136    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07137}07137 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07138}07138 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07139}07139 FILE *hlog;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07140}07140 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07141}07141 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_dircount, stb\_\_dircount\_mask, stb\_\_showfile;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07142}07142 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_dirtree\_scandir(\textcolor{keywordtype}{char} *path, time\_t last\_time, stb\_dirtree *active)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07143}07143 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07144}07144    \textcolor{comment}{// this is dumb depth first; theoretically it might be faster}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07145}07145    \textcolor{comment}{// to fully traverse each directory before visiting its children,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07146}07146    \textcolor{comment}{// but it's complicated and didn't seem like a gain in the test app}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07147}07147 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07148}07148    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07149}07149 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07150}07150    \textcolor{keyword}{struct }\_wfinddatai64\_t c\_file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07151}07151    \textcolor{keywordtype}{long} hFile;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07152}07152    stb\_\_wchar full\_path[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07153}07153    \textcolor{keywordtype}{int} has\_slash;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07154}07154    \textcolor{keywordflow}{if} (stb\_\_showfile) printf(\textcolor{stringliteral}{"{}<"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07155}07155 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07156}07156    has\_slash = (path[0] \&\& path[strlen(path)-\/1] == \textcolor{charliteral}{'/'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07157}07157 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07158}07158    \textcolor{comment}{// @TODO: do this concatenation without using swprintf to avoid this mess:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07159}07159 \textcolor{preprocessor}{\#if (defined(\_MSC\_VER) \&\& \_MSC\_VER < 1400) }\textcolor{comment}{// || (defined(\_\_clang\_\_))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07160}07160    \textcolor{comment}{// confusingly, Windows Kits\(\backslash\)10 needs to go down this path?!?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07161}07161    \textcolor{comment}{// except now it doesn't, I don't know what changed}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07162}07162    \textcolor{keywordflow}{if} (has\_slash)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07163}07163       swprintf(full\_path, L\textcolor{stringliteral}{"{}\%s*"{}}, stb\_\_from\_utf8(path));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07164}07164    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07165}07165       swprintf(full\_path, L\textcolor{stringliteral}{"{}\%s/*"{}}, stb\_\_from\_utf8(path));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07166}07166 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07167}07167    \textcolor{keywordflow}{if} (has\_slash)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07168}07168       swprintf((\textcolor{keywordtype}{wchar\_t} *) full\_path, (\textcolor{keywordtype}{size\_t}) 1024, L\textcolor{stringliteral}{"{}\%s*"{}}, (\textcolor{keywordtype}{wchar\_t} *) stb\_\_from\_utf8(path));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07169}07169    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07170}07170       swprintf((\textcolor{keywordtype}{wchar\_t} *) full\_path, (\textcolor{keywordtype}{size\_t}) 1024, L\textcolor{stringliteral}{"{}\%s/*"{}}, (\textcolor{keywordtype}{wchar\_t} *) stb\_\_from\_utf8(path));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07171}07171 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07172}07172 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07173}07173    \textcolor{comment}{// it's possible this directory is already present: that means it was in the}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07174}07174    \textcolor{comment}{// cache, but its parent wasn't... in that case, we're done with it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07175}07175    \textcolor{keywordflow}{if} (stb\_\_showfile) printf(\textcolor{stringliteral}{"{}C[\%d]"{}}, stb\_arr\_len(active-\/>dirs));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07176}07176    \textcolor{keywordflow}{for} (n=0; n < stb\_arr\_len(active-\/>dirs); ++n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07177}07177       \textcolor{keywordflow}{if} (0 == stb\_stricmp(active-\/>dirs[n].path, path)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07178}07178          \textcolor{keywordflow}{if} (stb\_\_showfile) printf(\textcolor{stringliteral}{"{}D"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07179}07179          \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07180}07180       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07181}07181    \textcolor{keywordflow}{if} (stb\_\_showfile) printf(\textcolor{stringliteral}{"{}E"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07182}07182 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07183}07183    \textcolor{comment}{// otherwise, we need to add it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07184}07184    stb\_\_dirtree\_add\_dir(path, last\_time, active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07185}07185    n = stb\_arr\_lastn(active-\/>dirs);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07186}07186 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07187}07187    \textcolor{keywordflow}{if} (stb\_\_showfile) printf(\textcolor{stringliteral}{"{}["{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07188}07188    \textcolor{keywordflow}{if}( (hFile = (\textcolor{keywordtype}{long}) \_wfindfirsti64( (\textcolor{keywordtype}{wchar\_t} *) full\_path, \&c\_file )) != -\/1L ) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07189}07189       \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07190}07190          \textcolor{keywordflow}{if} (stb\_\_showfile) printf(\textcolor{stringliteral}{"{})"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07191}07191          \textcolor{keywordflow}{if} (c\_file.attrib \& \_A\_SUBDIR) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07192}07192             \textcolor{comment}{// ignore subdirectories starting with '.', e.g. "{}."{} and "{}.."{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07193}07193             \textcolor{keywordflow}{if} (c\_file.name[0] != \textcolor{charliteral}{'.'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07194}07194                \textcolor{keywordtype}{char} *new\_path = (\textcolor{keywordtype}{char} *) full\_path;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07195}07195                \textcolor{keywordtype}{char} *temp = stb\_\_to\_utf8((stb\_\_wchar *) c\_file.name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07196}07196 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07197}07197                \textcolor{keywordflow}{if} (has\_slash)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07198}07198                   stb\_p\_sprintf(new\_path stb\_p\_size(\textcolor{keyword}{sizeof}(full\_path)), \textcolor{stringliteral}{"{}\%s\%s"{}}, path, temp);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07199}07199                \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07200}07200                   stb\_p\_sprintf(new\_path stb\_p\_size(\textcolor{keyword}{sizeof}(full\_path)), \textcolor{stringliteral}{"{}\%s/\%s"{}}, path, temp);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07201}07201 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07202}07202                \textcolor{keywordflow}{if} (stb\_\_dircount\_mask) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07203}07203                   ++stb\_\_dircount;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07204}07204                   \textcolor{keywordflow}{if} (!(stb\_\_dircount \& stb\_\_dircount\_mask)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07205}07205                      \textcolor{keywordtype}{char} dummy\_path[128], *pad;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07206}07206                      stb\_strncpy(dummy\_path, new\_path, \textcolor{keyword}{sizeof}(dummy\_path)-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07207}07207                      \textcolor{keywordflow}{if} (strlen(dummy\_path) > 96) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07208}07208                         stb\_p\_strcpy\_s(dummy\_path+96/2-\/1,128, \textcolor{stringliteral}{"{}..."{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07209}07209                         stb\_p\_strcpy\_s(dummy\_path+96/2+2,128, new\_path + strlen(new\_path)-\/96/2+2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07210}07210                      \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07211}07211                      pad = dummy\_path + strlen(dummy\_path);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07212}07212                      \textcolor{keywordflow}{while} (pad < dummy\_path+98)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07213}07213                         *pad++ = \textcolor{charliteral}{' '};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07214}07214                      *pad = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07215}07215                      printf(\textcolor{stringliteral}{"{}\%s\(\backslash\)r"{}}, dummy\_path);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07216}07216 \textcolor{preprocessor}{                     \#if 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07217}07217                      \textcolor{keywordflow}{if} (hlog == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07218}07218                         hlog = stb\_p\_fopen(\textcolor{stringliteral}{"{}c:/x/temp.log"{}}, \textcolor{stringliteral}{"{}w"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07219}07219                         fprintf(hlog, \textcolor{stringliteral}{"{}\%s\(\backslash\)n"{}}, dummy\_path);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07220}07220                      \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07221}07221 \textcolor{preprocessor}{                     \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07222}07222                   \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07223}07223                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07224}07224 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07225}07225                stb\_\_dirtree\_scandir(new\_path, c\_file.time\_write, active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07226}07226             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07227}07227          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07228}07228             \textcolor{keywordtype}{char} *temp = stb\_\_to\_utf8((stb\_\_wchar *) c\_file.name);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07229}07229             stb\_\_dirtree\_add\_file(temp, n, c\_file.size, c\_file.time\_write, active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07230}07230          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07231}07231          \textcolor{keywordflow}{if} (stb\_\_showfile) printf(\textcolor{stringliteral}{"{}("{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07232}07232       \} \textcolor{keywordflow}{while}( \_wfindnexti64( hFile, \&c\_file ) == 0 );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07233}07233       \textcolor{keywordflow}{if} (stb\_\_showfile) printf(\textcolor{stringliteral}{"{}]"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07234}07234       \_findclose( hFile );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07235}07235    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07236}07236    \textcolor{keywordflow}{if} (stb\_\_showfile) printf(\textcolor{stringliteral}{"{}>\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07237}07237 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07238}07238 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07239}07239 \textcolor{comment}{// scan the database and see if it's all valid}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07240}07240 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_dirtree\_update\_db(stb\_dirtree *db, stb\_dirtree *active)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07241}07241 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07242}07242    \textcolor{keywordtype}{int} changes\_detected = STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07243}07243    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07244}07244    \textcolor{keywordtype}{int} *remap;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07245}07245    \textcolor{keywordtype}{int} *rescan=NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07246}07246    remap = (\textcolor{keywordtype}{int} *) malloc(\textcolor{keyword}{sizeof}(remap[0]) * stb\_arr\_len(db-\/>dirs));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07247}07247    memset(remap, 0, \textcolor{keyword}{sizeof}(remap[0]) * stb\_arr\_len(db-\/>dirs));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07248}07248    rescan = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07249}07249 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07250}07250    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(db-\/>dirs); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07251}07251       \textcolor{keyword}{struct }\_stat \mbox{\hyperlink{structinfo}{info}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07252}07252       \textcolor{keywordflow}{if} (stb\_\_dircount\_mask) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07253}07253          ++stb\_\_dircount;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07254}07254          \textcolor{keywordflow}{if} (!(stb\_\_dircount \& stb\_\_dircount\_mask)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07255}07255             printf(\textcolor{stringliteral}{"{}."{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07256}07256          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07257}07257       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07258}07258       \textcolor{keywordflow}{if} (0 == \_stat(db-\/>dirs[i].path, \&\mbox{\hyperlink{structinfo}{info}})) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07259}07259          \textcolor{keywordflow}{if} (\mbox{\hyperlink{structinfo}{info}}.st\_mode \& \_S\_IFDIR) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07260}07260             \textcolor{comment}{// it's still a directory, as expected}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07261}07261             \textcolor{keywordtype}{int} n = \mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}((\textcolor{keywordtype}{int}) (\mbox{\hyperlink{structinfo}{info}}.st\_mtime -\/ db-\/>dirs[i].last\_modified));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07262}07262             \textcolor{keywordflow}{if} (n > 1 \&\& n != 3600) \{  \textcolor{comment}{// the 3600 is a hack because sometimes this jumps for no apparent reason, even when no time zone or DST issues are at play}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07263}07263                \textcolor{comment}{// it's changed! force a rescan}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07264}07264                \textcolor{comment}{// we don't want to scan it until we've stat()d its}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07265}07265                \textcolor{comment}{// subdirs, though, so we queue it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07266}07266                \textcolor{keywordflow}{if} (stb\_\_showfile) printf(\textcolor{stringliteral}{"{}Changed: \%s -\/ \%08x:\%08x\(\backslash\)n"{}}, db-\/>dirs[i].path, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) db-\/>dirs[i].last\_modified, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) \mbox{\hyperlink{structinfo}{info}}.st\_mtime);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07267}07267                stb\_arr\_push(rescan, i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07268}07268                \textcolor{comment}{// update the last\_mod time}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07269}07269                db-\/>dirs[i].last\_modified = \mbox{\hyperlink{structinfo}{info}}.st\_mtime;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07270}07270                \textcolor{comment}{// ignore existing files in this dir}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07271}07271                remap[i] = -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07272}07272                changes\_detected = STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07273}07273             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07274}07274                \textcolor{comment}{// it hasn't changed, just copy it through unchanged}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07275}07275                stb\_\_dirtree\_add\_dir(db-\/>dirs[i].path, db-\/>dirs[i].last\_modified, active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07276}07276                remap[i] = stb\_arr\_lastn(active-\/>dirs);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07277}07277             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07278}07278          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07279}07279             \textcolor{comment}{// this path used to refer to a directory, but now it's a file!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07280}07280             \textcolor{comment}{// assume that the parent directory is going to be forced to rescan anyway}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07281}07281             \textcolor{keywordflow}{goto} delete\_entry;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07282}07282          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07283}07283       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07284}07284         delete\_entry:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07285}07285          \textcolor{comment}{// directory no longer exists, so don't copy it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07286}07286          \textcolor{comment}{// we don't free it because it's in the string pool now}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07287}07287          db-\/>dirs[i].path = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07288}07288          remap[i] = -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07289}07289          changes\_detected = STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07290}07290       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07291}07291    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07292}07292 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07293}07293    \textcolor{comment}{// at this point, we have:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07294}07294    \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07295}07295    \textcolor{comment}{//   <rescan> holds a list of directory indices that need to be scanned due to being out of date}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07296}07296    \textcolor{comment}{//   <remap> holds the directory index in <active> for each dir in <db>, if it exists; -\/1 if not}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07297}07297    \textcolor{comment}{//           directories in <rescan> are not in <active> yet}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07298}07298 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07299}07299    \textcolor{comment}{// so we can go ahead and remap all the known files right now}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07300}07300    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(db-\/>files); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07301}07301       \textcolor{keywordtype}{int} dir = db-\/>files[i].dir;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07302}07302       \textcolor{keywordflow}{if} (remap[dir] >= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07303}07303          stb\_\_dirtree\_add\_file(db-\/>files[i].name, remap[dir], db-\/>files[i].size, db-\/>files[i].last\_modified, active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07304}07304       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07305}07305    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07306}07306 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07307}07307    \textcolor{comment}{// at this point we're done with db-\/>files, and done with remap}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07308}07308    free(remap);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07309}07309 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07310}07310    \textcolor{comment}{// now scan those directories using the standard scan}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07311}07311    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(rescan); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07312}07312       \textcolor{keywordtype}{int} z = rescan[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07313}07313       stb\_\_dirtree\_scandir(db-\/>dirs[z].path, db-\/>dirs[z].last\_modified, active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07314}07314    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07315}07315    stb\_arr\_free(rescan);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07316}07316 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07317}07317    \textcolor{keywordflow}{return} changes\_detected;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07318}07318 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07319}07319 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07320}07320 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_dirtree\_free\_raw(stb\_dirtree *d)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07321}07321 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07322}07322    stb\_free(d-\/>string\_pool);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07323}07323    stb\_arr\_free(d-\/>dirs);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07324}07324    stb\_arr\_free(d-\/>files);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07325}07325 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07326}07326 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07327}07327 stb\_dirtree *stb\_dirtree\_get\_with\_file(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *cache\_file)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07328}07328 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07329}07329    stb\_dirtree *\mbox{\hyperlink{structoutput}{output}} = (stb\_dirtree *) malloc(\textcolor{keyword}{sizeof}(*\mbox{\hyperlink{structoutput}{output}}));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07330}07330    stb\_dirtree db,active;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07331}07331    \textcolor{keywordtype}{int} prev\_dir\_count, cache\_mismatch;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07332}07332 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07333}07333    \textcolor{keywordtype}{char} *stripped\_dir; \textcolor{comment}{// store the directory name without a trailing '/' or '\(\backslash\)\(\backslash\)'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07334}07334 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07335}07335    \textcolor{comment}{// load the database of last-\/known state on disk}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07336}07336    db.string\_pool = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07337}07337    db.files = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07338}07338    db.dirs = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07339}07339 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07340}07340    stripped\_dir = stb\_strip\_final\_slash(stb\_p\_strdup(dir));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07341}07341 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07342}07342    \textcolor{keywordflow}{if} (cache\_file != NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07343}07343       stb\_\_dirtree\_load\_db(cache\_file, \&db, stripped\_dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07344}07344    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (stb\_\_showfile)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07345}07345       printf(\textcolor{stringliteral}{"{}No cache file\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07346}07346 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07347}07347    active.files = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07348}07348    active.dirs = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07349}07349    active.string\_pool = stb\_malloc(0,1); \textcolor{comment}{// @TODO: share string pools between both?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07350}07350 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07351}07351    \textcolor{comment}{// check all the directories in the database; make note if}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07352}07352    \textcolor{comment}{// anything we scanned had changed, and rescan those things}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07353}07353    cache\_mismatch = stb\_\_dirtree\_update\_db(\&db, \&active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07354}07354 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07355}07355    \textcolor{comment}{// check the root tree}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07356}07356    prev\_dir\_count = stb\_arr\_len(active.dirs);  \textcolor{comment}{// record how many directories we've seen}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07357}07357 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07358}07358    stb\_\_dirtree\_scandir(stripped\_dir, 0, \&active);  \textcolor{comment}{// no last\_modified time available for root}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07359}07359 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07360}07360    \textcolor{keywordflow}{if} (stb\_\_dircount\_mask)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07361}07361       printf(\textcolor{stringliteral}{"{}                                                                              \(\backslash\)r"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07362}07362 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07363}07363    \textcolor{comment}{// done with the DB; write it back out if any changes, i.e. either}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07364}07364    \textcolor{comment}{//      1. any inconsistency found between cached information and actual disk}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07365}07365    \textcolor{comment}{//   or 2. if scanning the root found any new directories-\/-\/which we detect because}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07366}07366    \textcolor{comment}{//         more than one directory got added to the active db during that scan}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07367}07367    \textcolor{keywordflow}{if} (cache\_mismatch || stb\_arr\_len(active.dirs) > prev\_dir\_count+1)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07368}07368       stb\_\_dirtree\_save\_db(cache\_file, \&active, stripped\_dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07369}07369 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07370}07370    free(stripped\_dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07371}07371 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07372}07372    stb\_\_dirtree\_free\_raw(\&db);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07373}07373 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07374}07374    *\mbox{\hyperlink{structoutput}{output}} = active;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07375}07375    \textcolor{keywordflow}{return} \mbox{\hyperlink{structoutput}{output}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07376}07376 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07377}07377 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07378}07378 stb\_dirtree *stb\_dirtree\_get\_dir(\textcolor{keywordtype}{char} *dir, \textcolor{keywordtype}{char} *cache\_dir)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07379}07379 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07380}07380    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07381}07381    stb\_uint8 sha[20];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07382}07382    \textcolor{keywordtype}{char} dir\_lower[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07383}07383    \textcolor{keywordtype}{char} cache\_file[1024],*s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07384}07384    \textcolor{keywordflow}{if} (cache\_dir == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07385}07385       \textcolor{keywordflow}{return} stb\_dirtree\_get\_with\_file(dir, NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07386}07386    stb\_p\_strcpy\_s(dir\_lower, \textcolor{keyword}{sizeof}(dir\_lower), dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07387}07387    stb\_tolower(dir\_lower);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07388}07388    stb\_sha1(sha, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) dir\_lower, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) strlen(dir\_lower));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07389}07389    stb\_p\_strcpy\_s(cache\_file, \textcolor{keyword}{sizeof}(cache\_file), cache\_dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07390}07390    s = cache\_file + strlen(cache\_file);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07391}07391    \textcolor{keywordflow}{if} (s[-\/1] != \textcolor{charliteral}{'/'} \&\& s[-\/1] != \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}) *s++ = \textcolor{charliteral}{'/'};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07392}07392    stb\_p\_strcpy\_s(s, \textcolor{keyword}{sizeof}(cache\_file), \textcolor{stringliteral}{"{}dirtree\_"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07393}07393    s += strlen(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07394}07394    \textcolor{keywordflow}{for} (i=0; i < 8; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07395}07395       \textcolor{keywordtype}{char} *hex = (\textcolor{keywordtype}{char}*)\textcolor{stringliteral}{"{}0123456789abcdef"{}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07396}07396       stb\_uint z = sha[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07397}07397       *s++ = hex[z >> 4];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07398}07398       *s++ = hex[z \& 15];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07399}07399    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07400}07400    stb\_p\_strcpy\_s(s, \textcolor{keyword}{sizeof}(cache\_file), \textcolor{stringliteral}{"{}.bin"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07401}07401    \textcolor{keywordflow}{return} stb\_dirtree\_get\_with\_file(dir, cache\_file);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07402}07402 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07403}07403 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07404}07404 stb\_dirtree *stb\_dirtree\_get(\textcolor{keywordtype}{char} *dir)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07405}07405 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07406}07406    \textcolor{keywordtype}{char} cache\_dir[256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07407}07407    stb\_p\_strcpy\_s(cache\_dir, \textcolor{keyword}{sizeof}(cache\_dir), \textcolor{stringliteral}{"{}c:/bindata"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07408}07408 \textcolor{preprocessor}{   \#ifdef STB\_HAS\_REGISTRY}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07409}07409    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07410}07410       \textcolor{keywordtype}{void} *reg = stb\_reg\_open(\textcolor{stringliteral}{"{}rHKLM"{}}, \textcolor{stringliteral}{"{}Software\(\backslash\)\(\backslash\)SilverSpaceship\(\backslash\)\(\backslash\)stb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07411}07411       \textcolor{keywordflow}{if} (reg) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07412}07412          stb\_reg\_read(reg, \textcolor{stringliteral}{"{}dirtree"{}}, cache\_dir, \textcolor{keyword}{sizeof}(cache\_dir));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07413}07413          stb\_reg\_close(reg);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07414}07414       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07415}07415    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07416}07416 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07417}07417    \textcolor{keywordflow}{return} stb\_dirtree\_get\_dir(dir, cache\_dir);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07418}07418 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07419}07419 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07420}07420 \textcolor{keywordtype}{void} stb\_dirtree\_free(stb\_dirtree *d)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07421}07421 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07422}07422    stb\_\_dirtree\_free\_raw(d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07423}07423    free(d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07424}07424 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07425}07425 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07426}07426 \textcolor{keywordtype}{void} stb\_dirtree\_db\_add\_dir(stb\_dirtree *active, \textcolor{keywordtype}{char} *path, time\_t last)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07427}07427 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07428}07428    stb\_\_dirtree\_add\_dir(path, last, active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07429}07429 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07430}07430 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07431}07431 \textcolor{keywordtype}{void} stb\_dirtree\_db\_add\_file(stb\_dirtree *active, \textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{int} dir, stb\_int64 size, time\_t last)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07432}07432 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07433}07433    stb\_\_dirtree\_add\_file(name, dir, size, last, active);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07434}07434 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07435}07435 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07436}07436 \textcolor{keywordtype}{void} stb\_dirtree\_db\_read(stb\_dirtree *target, \textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *dir)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07437}07437 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07438}07438    \textcolor{keywordtype}{char} *s = stb\_strip\_final\_slash(stb\_p\_strdup(dir));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07439}07439    target-\/>dirs = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07440}07440    target-\/>files = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07441}07441    target-\/>string\_pool = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07442}07442    stb\_\_dirtree\_load\_db(filename, target, s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07443}07443    free(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07444}07444 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07445}07445 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07446}07446 \textcolor{keywordtype}{void} stb\_dirtree\_db\_write(stb\_dirtree *target, \textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *dir)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07447}07447 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07448}07448    stb\_\_dirtree\_save\_db(filename, target, 0); \textcolor{comment}{// don't strip out any directories}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07449}07449 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07450}07450 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07451}07451 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07452}07452 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07453}07453 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07454}07454 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_NO\_STB\_STRINGS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07455}07455 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07457}07457 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07458}07458 \textcolor{comment}{//  STB\_MALLOC\_WRAPPER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07459}07459 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07460}07460 \textcolor{comment}{//    you can use the wrapper functions with your own malloc wrapper,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07461}07461 \textcolor{comment}{//    or define STB\_MALLOC\_WRAPPER project-\/wide to have}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07462}07462 \textcolor{comment}{//    malloc/free/realloc/strdup all get vectored to it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07463}07463 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07464}07464 \textcolor{comment}{// this has too many very specific error messages you could google for and find in stb.h,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07465}07465 \textcolor{comment}{// so don't use it if they don't want any stb.h-\/identifiable strings}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07466}07466 \textcolor{preprocessor}{\#if defined(STB\_DEFINE) \&\& !defined(STB\_NO\_STB\_STRINGS)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07467}07467 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07468}07468 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07469}07469 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07470}07470    \textcolor{keywordtype}{void} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07471}07471    \textcolor{keywordtype}{char} *file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07472}07472    \textcolor{keywordtype}{int}  line;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07473}07473    \textcolor{keywordtype}{size\_t} size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07474}07474 \} stb\_malloc\_record;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07475}07475 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07476}07476 \textcolor{preprocessor}{\#ifndef STB\_MALLOC\_HISTORY\_COUNT}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07477}07477 \textcolor{preprocessor}{\#define STB\_MALLOC\_HISTORY\_COUNT 50 }\textcolor{comment}{// 800 bytes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07478}07478 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07479}07479 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07480}07480 stb\_malloc\_record *stb\_\_allocations;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07481}07481 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_alloc\_size, stb\_\_alloc\_limit, stb\_\_alloc\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07482}07482 \textcolor{keywordtype}{int} stb\_\_alloc\_count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07483}07483 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07484}07484 stb\_malloc\_record stb\_\_alloc\_history[STB\_MALLOC\_HISTORY\_COUNT];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07485}07485 \textcolor{keywordtype}{int} stb\_\_history\_pos;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07486}07486 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07487}07487 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_hashfind(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07488}07488 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07489}07489    stb\_uint32 h = stb\_hashptr(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07490}07490    \textcolor{keywordtype}{int} s,n = h \& stb\_\_alloc\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07491}07491    \textcolor{keywordflow}{if} (stb\_\_allocations[n].p == p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07492}07492       \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07493}07493    s = stb\_rehash(h)|1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07494}07494    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07495}07495       \textcolor{keywordflow}{if} (stb\_\_allocations[n].p == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07496}07496          \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07497}07497       n = (n+s) \& stb\_\_alloc\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07498}07498       \textcolor{keywordflow}{if} (stb\_\_allocations[n].p == p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07499}07499          \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07500}07500    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07501}07501 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07502}07502 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07503}07503 \textcolor{keywordtype}{size\_t} stb\_wrapper\_allocsize(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07504}07504 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07505}07505    \textcolor{keywordtype}{int} n = stb\_\_hashfind(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07506}07506    \textcolor{keywordflow}{if} (n < 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07507}07507    \textcolor{keywordflow}{return} stb\_\_allocations[n].size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07508}07508 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07509}07509 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07510}07510 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_historyfind(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07511}07511 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07512}07512    \textcolor{keywordtype}{int} n = stb\_\_history\_pos;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07513}07513    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07514}07514    \textcolor{keywordflow}{for} (i=0; i < STB\_MALLOC\_HISTORY\_COUNT; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07515}07515       \textcolor{keywordflow}{if} (-\/-\/n < 0) n = STB\_MALLOC\_HISTORY\_COUNT-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07516}07516       \textcolor{keywordflow}{if} (stb\_\_alloc\_history[n].p == p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07517}07517          \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07518}07518    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07519}07519    \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07520}07520 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07521}07521 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07522}07522 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_add\_alloc(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07523}07523 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_grow\_alloc(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07524}07524 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07525}07525    \textcolor{keywordtype}{int} i,old\_num = stb\_\_alloc\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07526}07526    stb\_malloc\_record *old = stb\_\_allocations;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07527}07527    \textcolor{keywordflow}{if} (stb\_\_alloc\_size == 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07528}07528       stb\_\_alloc\_size = 64;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07529}07529    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07530}07530       stb\_\_alloc\_size *= 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07531}07531 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07532}07532    stb\_\_allocations = (stb\_malloc\_record *) stb\_\_realloc\_raw(NULL, stb\_\_alloc\_size * \textcolor{keyword}{sizeof}(stb\_\_allocations[0]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07533}07533    \textcolor{keywordflow}{if} (stb\_\_allocations == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07534}07534       stb\_fatal(\textcolor{stringliteral}{"{}Internal error: couldn't grow malloc wrapper table"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07535}07535    memset(stb\_\_allocations, 0, stb\_\_alloc\_size * \textcolor{keyword}{sizeof}(stb\_\_allocations[0]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07536}07536    stb\_\_alloc\_limit = (stb\_\_alloc\_size*3)>>2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07537}07537    stb\_\_alloc\_mask = stb\_\_alloc\_size-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07538}07538 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07539}07539    stb\_\_alloc\_count = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07540}07540 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07541}07541    \textcolor{keywordflow}{for} (i=0; i < old\_num; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07542}07542       \textcolor{keywordflow}{if} (old[i].p > STB\_DEL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07543}07543          stb\_\_add\_alloc(old[i].p, old[i].size, old[i].file, old[i].line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07544}07544          assert(stb\_\_hashfind(old[i].p) >= 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07545}07545       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07546}07546    \textcolor{keywordflow}{for} (i=0; i < old\_num; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07547}07547       \textcolor{keywordflow}{if} (old[i].p > STB\_DEL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07548}07548          assert(stb\_\_hashfind(old[i].p) >= 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07549}07549    stb\_\_realloc\_raw(old, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07550}07550 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07551}07551 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07552}07552 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_add\_alloc(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07553}07553 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07554}07554    stb\_uint32 h;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07555}07555    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07556}07556    \textcolor{keywordflow}{if} (stb\_\_alloc\_count >= stb\_\_alloc\_limit)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07557}07557       stb\_\_grow\_alloc();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07558}07558    h = stb\_hashptr(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07559}07559    n = h \& stb\_\_alloc\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07560}07560    \textcolor{keywordflow}{if} (stb\_\_allocations[n].p > STB\_DEL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07561}07561       \textcolor{keywordtype}{int} s = stb\_rehash(h)|1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07562}07562       \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07563}07563          n = (n+s) \& stb\_\_alloc\_mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07564}07564       \} \textcolor{keywordflow}{while} (stb\_\_allocations[n].p > STB\_DEL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07565}07565    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07566}07566    assert(stb\_\_allocations[n].p == NULL || stb\_\_allocations[n].p == STB\_DEL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07567}07567    stb\_\_allocations[n].p = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07568}07568    stb\_\_allocations[n].size = sz;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07569}07569    stb\_\_allocations[n].line = line;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07570}07570    stb\_\_allocations[n].file = file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07571}07571    ++stb\_\_alloc\_count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07572}07572 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07573}07573 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07574}07574 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_remove\_alloc(\textcolor{keywordtype}{int} n, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07575}07575 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07576}07576    stb\_\_alloc\_history[stb\_\_history\_pos] = stb\_\_allocations[n];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07577}07577    stb\_\_alloc\_history[stb\_\_history\_pos].file = file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07578}07578    stb\_\_alloc\_history[stb\_\_history\_pos].line = line;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07579}07579    \textcolor{keywordflow}{if} (++stb\_\_history\_pos == STB\_MALLOC\_HISTORY\_COUNT)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07580}07580       stb\_\_history\_pos = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07581}07581    stb\_\_allocations[n].p = STB\_DEL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07582}07582    -\/-\/stb\_\_alloc\_count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07583}07583 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07584}07584 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07585}07585 \textcolor{keywordtype}{void} stb\_wrapper\_malloc(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07586}07586 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07587}07587    \textcolor{keywordflow}{if} (!p) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07588}07588    stb\_\_add\_alloc(p,sz,file,line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07589}07589 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07590}07590 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07591}07591 \textcolor{keywordtype}{void} stb\_wrapper\_free(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07592}07592 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07593}07593    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07594}07594 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07595}07595    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07596}07596 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07597}07597    n = stb\_\_hashfind(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07598}07598 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07599}07599    \textcolor{keywordflow}{if} (n >= 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07600}07600       stb\_\_remove\_alloc(n, file, line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07601}07601    \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07602}07602       \textcolor{comment}{// tried to free something we hadn't allocated!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07603}07603       n = stb\_\_historyfind(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07604}07604       assert(0); \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07605}07605       \textcolor{keywordflow}{if} (n >= 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07606}07606          stb\_fatal(\textcolor{stringliteral}{"{}Attempted to free \%d-\/byte block \%p at \%s:\%d previously freed/realloced at \%s:\%d"{}},}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07607}07607                        stb\_\_alloc\_history[n].size, p,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07608}07608                        file, line,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07609}07609                        stb\_\_alloc\_history[n].file, stb\_\_alloc\_history[n].line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07610}07610       \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07611}07611          stb\_fatal(\textcolor{stringliteral}{"{}Attempted to free unknown block \%p at \%s:\%d"{}}, p, file,line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07612}07612    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07613}07613 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07614}07614 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07615}07615 \textcolor{keywordtype}{void} stb\_wrapper\_check(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07616}07616 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07617}07617    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07618}07618 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07619}07619    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07620}07620 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07621}07621    n = stb\_\_hashfind(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07622}07622 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07623}07623    \textcolor{keywordflow}{if} (n >= 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07624}07624 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07625}07625    \textcolor{keywordflow}{for} (n=0; n < stb\_\_alloc\_size; ++n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07626}07626       \textcolor{keywordflow}{if} (stb\_\_allocations[n].p == p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07627}07627          stb\_fatal(\textcolor{stringliteral}{"{}Internal error: pointer \%p was allocated, but hash search failed"{}}, p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07628}07628 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07629}07629    \textcolor{comment}{// tried to free something that wasn't allocated!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07630}07630    n = stb\_\_historyfind(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07631}07631    \textcolor{keywordflow}{if} (n >= 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07632}07632       stb\_fatal(\textcolor{stringliteral}{"{}Checked \%d-\/byte block \%p previously freed/realloced at \%s:\%d"{}},}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07633}07633                     stb\_\_alloc\_history[n].size, p,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07634}07634                     stb\_\_alloc\_history[n].file, stb\_\_alloc\_history[n].line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07635}07635    stb\_fatal(\textcolor{stringliteral}{"{}Checked unknown block \%p"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07636}07636 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07637}07637 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07638}07638 \textcolor{keywordtype}{void} stb\_wrapper\_realloc(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{void} *q, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07639}07639 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07640}07640    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07641}07641    \textcolor{keywordflow}{if} (p == NULL) \{ stb\_wrapper\_malloc(q, sz, file, line); \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07642}07642    \textcolor{keywordflow}{if} (q == NULL) \textcolor{keywordflow}{return}; \textcolor{comment}{// nothing happened}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07643}07643 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07644}07644    n = stb\_\_hashfind(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07645}07645    \textcolor{keywordflow}{if} (n == -\/1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07646}07646       \textcolor{comment}{// tried to free something we hadn't allocated!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07647}07647       \textcolor{comment}{// this is weird, though, because we got past the realloc!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07648}07648       n = stb\_\_historyfind(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07649}07649       assert(0); \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07650}07650       \textcolor{keywordflow}{if} (n >= 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07651}07651          stb\_fatal(\textcolor{stringliteral}{"{}Attempted to realloc \%d-\/byte block \%p at \%s:\%d previously freed/realloced at \%s:\%d"{}},}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07652}07652                        stb\_\_alloc\_history[n].size, p,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07653}07653                        file, line,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07654}07654                        stb\_\_alloc\_history[n].file, stb\_\_alloc\_history[n].line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07655}07655       \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07656}07656          stb\_fatal(\textcolor{stringliteral}{"{}Attempted to realloc unknown block \%p at \%s:\%d"{}}, p, file,line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07657}07657    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07658}07658       \textcolor{keywordflow}{if} (q == p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07659}07659          stb\_\_allocations[n].size = sz;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07660}07660          stb\_\_allocations[n].file = file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07661}07661          stb\_\_allocations[n].line = line;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07662}07662       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07663}07663          stb\_\_remove\_alloc(n, file, line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07664}07664          stb\_\_add\_alloc(q,sz,file,line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07665}07665       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07666}07666    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07667}07667 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07668}07668 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07669}07669 \textcolor{keywordtype}{void} stb\_wrapper\_listall(\textcolor{keywordtype}{void} (*func)(\textcolor{keywordtype}{void} *ptr, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07670}07670 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07671}07671    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07672}07672    \textcolor{keywordflow}{for} (i=0; i < stb\_\_alloc\_size; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07673}07673       \textcolor{keywordflow}{if} (stb\_\_allocations[i].p > STB\_DEL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07674}07674          func(stb\_\_allocations[i].p   , stb\_\_allocations[i].size,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07675}07675               stb\_\_allocations[i].file, stb\_\_allocations[i].line);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07676}07676 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07677}07677 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07678}07678 \textcolor{keywordtype}{void} stb\_wrapper\_dump(\textcolor{keywordtype}{char} *filename)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07679}07679 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07680}07680    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07681}07681    FILE *f = stb\_p\_fopen(filename, \textcolor{stringliteral}{"{}w"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07682}07682    \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07683}07683    \textcolor{keywordflow}{for} (i=0; i < stb\_\_alloc\_size; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07684}07684       \textcolor{keywordflow}{if} (stb\_\_allocations[i].p > STB\_DEL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07685}07685          fprintf(f, \textcolor{stringliteral}{"{}\%p \%7d -\/ \%4d \%s\(\backslash\)n"{}},}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07686}07686             stb\_\_allocations[i].p   , (\textcolor{keywordtype}{int}) stb\_\_allocations[i].size,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07687}07687             stb\_\_allocations[i].line, stb\_\_allocations[i].file);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07688}07688 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07689}07689 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07690}07690 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07691}07691 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07693}07693 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07694}07694 \textcolor{comment}{//                  stb\_pointer\_set}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07695}07695 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07696}07696 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07697}07697 \textcolor{comment}{// For data structures that support querying by key, data structure}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07698}07698 \textcolor{comment}{// classes always hand-\/wave away the issue of what to do if two entries}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07699}07699 \textcolor{comment}{// have the same key: basically, store a linked list of all the nodes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07700}07700 \textcolor{comment}{// which have the same key (a LISP-\/style list).}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07701}07701 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07702}07702 \textcolor{comment}{// The thing is, it's not that trivial. If you have an O(log n)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07703}07703 \textcolor{comment}{// lookup data structure, but then n/4 items have the same value,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07704}07704 \textcolor{comment}{// you don't want to spend O(n) time scanning that list when}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07705}07705 \textcolor{comment}{// deleting an item if you already have a pointer to the item.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07706}07706 \textcolor{comment}{// (You have to spend O(n) time enumerating all the items with}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07707}07707 \textcolor{comment}{// a given key, sure, and you can't accelerate deleting a particular}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07708}07708 \textcolor{comment}{// item if you only have the key, not a pointer to the item.)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07709}07709 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07710}07710 \textcolor{comment}{// I'm going to call this data structure, whatever it turns out to}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07711}07711 \textcolor{comment}{// be, a "{}pointer set"{}, because we don't store any associated data for}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07712}07712 \textcolor{comment}{// items in this data structure, we just answer the question of}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07713}07713 \textcolor{comment}{// whether an item is in it or not (it's effectively one bit per pointer).}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07714}07714 \textcolor{comment}{// Technically they don't have to be pointers; you could cast ints}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07715}07715 \textcolor{comment}{// to (void *) if you want, but you can't store 0 or 1 because of the}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07716}07716 \textcolor{comment}{// hash table.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07717}07717 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07718}07718 \textcolor{comment}{// Since the fastest data structure we might want to add support for}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07719}07719 \textcolor{comment}{// identical-\/keys to is a hash table with O(1)-\/ish lookup time,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07720}07720 \textcolor{comment}{// that means that the conceptual "{}linked list of all items with}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07721}07721 \textcolor{comment}{// the same indexed value"{} that we build needs to have the same}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07722}07722 \textcolor{comment}{// performance; that way when we index a table we think is arbitrary}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07723}07723 \textcolor{comment}{// ints, but in fact half of them are 0, we don't get screwed.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07724}07724 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07725}07725 \textcolor{comment}{// Therefore, it needs to be a hash table, at least when it gets}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07726}07726 \textcolor{comment}{// large. On the other hand, when the data has totally arbitrary ints}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07727}07727 \textcolor{comment}{// or floats, there won't be many collisions, and we'll have tons of}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07728}07728 \textcolor{comment}{// 1-\/item bitmaps. That will be grossly inefficient as hash tables;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07729}07729 \textcolor{comment}{// trade-\/off; the hash table is reasonably efficient per-\/item when}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07730}07730 \textcolor{comment}{// it's large, but not when it's small. So we need to do something}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07731}07731 \textcolor{comment}{// Judy-\/like and use different strategies depending on the size.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07732}07732 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07733}07733 \textcolor{comment}{// Like Judy, we'll use the bottom bit to encode the strategy:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07734}07734 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07735}07735 \textcolor{comment}{//      bottom bits:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07736}07736 \textcolor{comment}{//          00     -\/   direct pointer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07737}07737 \textcolor{comment}{//          01     -\/   4-\/item bucket (16 bytes, no length, NULLs)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07738}07738 \textcolor{comment}{//          10     -\/   N-\/item array}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07739}07739 \textcolor{comment}{//          11     -\/   hash table}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07740}07740 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07741}07741 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_ps stb\_ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07742}07742 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07743}07743 STB\_EXTERN \textcolor{keywordtype}{int}      stb\_ps\_find  (stb\_ps *ps, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07744}07744 STB\_EXTERN stb\_ps * stb\_ps\_add   (stb\_ps *ps, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07745}07745 STB\_EXTERN stb\_ps * stb\_ps\_remove(stb\_ps *ps, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07746}07746 STB\_EXTERN stb\_ps * stb\_ps\_remove\_any(stb\_ps *ps, \textcolor{keywordtype}{void} **\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07747}07747 STB\_EXTERN \textcolor{keywordtype}{void}     stb\_ps\_delete(stb\_ps *ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07748}07748 STB\_EXTERN \textcolor{keywordtype}{int}      stb\_ps\_count (stb\_ps *ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07749}07749 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07750}07750 STB\_EXTERN stb\_ps * stb\_ps\_copy  (stb\_ps *ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07751}07751 STB\_EXTERN \textcolor{keywordtype}{int}      stb\_ps\_subset(stb\_ps *bigger, stb\_ps *smaller);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07752}07752 STB\_EXTERN \textcolor{keywordtype}{int}      stb\_ps\_eq    (stb\_ps *p0, stb\_ps *p1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07753}07753 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07754}07754 STB\_EXTERN \textcolor{keywordtype}{void} ** stb\_ps\_getlist  (stb\_ps *ps, \textcolor{keywordtype}{int} *count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07755}07755 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_ps\_writelist(stb\_ps *ps, \textcolor{keywordtype}{void} **list, \textcolor{keywordtype}{int} size );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07756}07756 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07757}07757 \textcolor{comment}{// enum and fastlist don't allocate storage, but you must consume the}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07758}07758 \textcolor{comment}{// list before there's any chance the data structure gets screwed up;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07759}07759 STB\_EXTERN \textcolor{keywordtype}{int}     stb\_ps\_enum     (stb\_ps *ps, \textcolor{keywordtype}{void} *data,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07760}07760                                        \textcolor{keywordtype}{int} (*func)(\textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}}, \textcolor{keywordtype}{void}*data) );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07761}07761 STB\_EXTERN \textcolor{keywordtype}{void} ** stb\_ps\_fastlist(stb\_ps *ps, \textcolor{keywordtype}{int} *count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07762}07762 \textcolor{comment}{//  result:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07763}07763 \textcolor{comment}{//     returns a list, *count is the length of that list,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07764}07764 \textcolor{comment}{//     but some entries of the list may be invalid;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07765}07765 \textcolor{comment}{//     test with 'stb\_ps\_fastlist\_valid(x)'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07766}07766 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07767}07767 \textcolor{preprocessor}{\#define stb\_ps\_fastlist\_valid(x)   ((stb\_uinta) (x) > 1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07768}07768 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07769}07769 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07770}07770 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07771}07771 \textcolor{keyword}{enum}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07772}07772 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07773}07773    STB\_ps\_direct = 0,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07774}07774    STB\_ps\_bucket = 1,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07775}07775    STB\_ps\_array  = 2,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07776}07776    STB\_ps\_hash   = 3,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07777}07777 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07778}07778 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07779}07779 \textcolor{preprocessor}{\#define STB\_BUCKET\_SIZE  4}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07780}07780 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07781}07781 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07782}07782 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07783}07783    \textcolor{keywordtype}{void} *p[STB\_BUCKET\_SIZE];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07784}07784 \} stb\_ps\_bucket;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07785}07785 \textcolor{preprocessor}{\#define GetBucket(p)    ((stb\_ps\_bucket *) ((char *) (p) -\/ STB\_ps\_bucket))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07786}07786 \textcolor{preprocessor}{\#define EncodeBucket(p) ((stb\_ps *) ((char *) (p) + STB\_ps\_bucket))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07787}07787 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07788}07788 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_bucket\_free(stb\_ps\_bucket *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07789}07789 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07790}07790    free(b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07791}07791 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07792}07792 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07793}07793 \textcolor{keyword}{static} stb\_ps\_bucket *stb\_bucket\_create2(\textcolor{keywordtype}{void} *v0, \textcolor{keywordtype}{void} *v1)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07794}07794 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07795}07795    stb\_ps\_bucket *b = (stb\_ps\_bucket*) malloc(\textcolor{keyword}{sizeof}(*b));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07796}07796    b-\/>p[0] = v0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07797}07797    b-\/>p[1] = v1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07798}07798    b-\/>p[2] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07799}07799    b-\/>p[3] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07800}07800    \textcolor{keywordflow}{return} b;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07801}07801 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07802}07802 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07803}07803 \textcolor{keyword}{static} stb\_ps\_bucket * stb\_bucket\_create3(\textcolor{keywordtype}{void} **v)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07804}07804 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07805}07805    stb\_ps\_bucket *b = (stb\_ps\_bucket*) malloc(\textcolor{keyword}{sizeof}(*b));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07806}07806    b-\/>p[0] = v[0];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07807}07807    b-\/>p[1] = v[1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07808}07808    b-\/>p[2] = v[2];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07809}07809    b-\/>p[3] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07810}07810    \textcolor{keywordflow}{return} b;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07811}07811 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07812}07812 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07813}07813 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07814}07814 \textcolor{comment}{// could use stb\_arr, but this will save us memory}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07815}07815 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07816}07816 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07817}07817    \textcolor{keywordtype}{int} count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07818}07818    \textcolor{keywordtype}{void} *p[1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07819}07819 \} stb\_ps\_array;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07820}07820 \textcolor{preprocessor}{\#define GetArray(p)     ((stb\_ps\_array *) ((char *) (p) -\/ STB\_ps\_array))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07821}07821 \textcolor{preprocessor}{\#define EncodeArray(p)  ((stb\_ps *) ((char *) (p) + STB\_ps\_array))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07822}07822 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07823}07823 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_ps\_array\_max = 13;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07824}07824 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07825}07825 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07826}07826 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07827}07827    \textcolor{keywordtype}{int} size, \mbox{\hyperlink{structmask}{mask}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07828}07828    \textcolor{keywordtype}{int} count, count\_deletes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07829}07829    \textcolor{keywordtype}{int} grow\_threshhold;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07830}07830    \textcolor{keywordtype}{int} shrink\_threshhold;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07831}07831    \textcolor{keywordtype}{int} rehash\_threshhold;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07832}07832    \textcolor{keywordtype}{int} any\_offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07833}07833    \textcolor{keywordtype}{void} *\mbox{\hyperlink{structtable}{table}}[1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07834}07834 \} stb\_ps\_hash;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07835}07835 \textcolor{preprocessor}{\#define GetHash(p)      ((stb\_ps\_hash *) ((char *) (p) -\/ STB\_ps\_hash))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07836}07836 \textcolor{preprocessor}{\#define EncodeHash(p)   ((stb\_ps *) ((char *) (p) + STB\_ps\_hash))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07837}07837 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07838}07838 \textcolor{preprocessor}{\#define stb\_ps\_empty(v)   (((stb\_uint32) v) <= 1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07839}07839 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07840}07840 \textcolor{keyword}{static} stb\_ps\_hash *stb\_ps\_makehash(\textcolor{keywordtype}{int} size, \textcolor{keywordtype}{int} old\_size, \textcolor{keywordtype}{void} **old\_data)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07841}07841 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07842}07842    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07843}07843    stb\_ps\_hash *h = (stb\_ps\_hash *) malloc(\textcolor{keyword}{sizeof}(*h) + (size-\/1) * \textcolor{keyword}{sizeof}(h-\/>table[0]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07844}07844    assert(stb\_is\_pow2(size));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07845}07845    h-\/>size = size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07846}07846    h-\/>mask = size-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07847}07847    h-\/>shrink\_threshhold = (int) (0.3f * size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07848}07848    h-\/>  grow\_threshhold = (int) (0.8f * size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07849}07849    h-\/>rehash\_threshhold = (int) (0.9f * size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07850}07850    h-\/>count = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07851}07851    h-\/>count\_deletes = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07852}07852    h-\/>any\_offset = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07853}07853    memset(h-\/>table, 0, size * \textcolor{keyword}{sizeof}(h-\/>table[0]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07854}07854    \textcolor{keywordflow}{for} (i=0; i < old\_size; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07855}07855         \textcolor{keywordflow}{if} (!stb\_ps\_empty((\textcolor{keywordtype}{size\_t})old\_data[i]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07856}07856          stb\_ps\_add(EncodeHash(h), old\_data[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07857}07857    \textcolor{keywordflow}{return} h;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07858}07858 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07859}07859 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07860}07860 \textcolor{keywordtype}{void} stb\_ps\_delete(stb\_ps *ps)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07861}07861 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07862}07862     \textcolor{keywordflow}{switch} (3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) ps) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07863}07863       \textcolor{keywordflow}{case} STB\_ps\_direct: \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07864}07864       \textcolor{keywordflow}{case} STB\_ps\_bucket: stb\_bucket\_free(GetBucket(ps)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07865}07865       \textcolor{keywordflow}{case} STB\_ps\_array : free(GetArray(ps)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07866}07866       \textcolor{keywordflow}{case} STB\_ps\_hash  : free(GetHash(ps)); \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07867}07867    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07868}07868 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07869}07869 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07870}07870 stb\_ps *stb\_ps\_copy(stb\_ps *ps)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07871}07871 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07872}07872    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07873}07873    \textcolor{comment}{// not a switch: order based on expected performance/power-\/law distribution}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07874}07874     \textcolor{keywordflow}{switch} (3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) ps) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07875}07875       \textcolor{keywordflow}{case} STB\_ps\_direct: \textcolor{keywordflow}{return} ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07876}07876       \textcolor{keywordflow}{case} STB\_ps\_bucket: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07877}07877          stb\_ps\_bucket *n = (stb\_ps\_bucket *) malloc(\textcolor{keyword}{sizeof}(*n));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07878}07878          *n = *GetBucket(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07879}07879          \textcolor{keywordflow}{return} EncodeBucket(n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07880}07880       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07881}07881       \textcolor{keywordflow}{case} STB\_ps\_array: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07882}07882          stb\_ps\_array *a = GetArray(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07883}07883          stb\_ps\_array *n = (stb\_ps\_array *) malloc(\textcolor{keyword}{sizeof}(*n) + stb\_ps\_array\_max * \textcolor{keyword}{sizeof}(n-\/>p[0]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07884}07884          n-\/>count = a-\/>count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07885}07885          \textcolor{keywordflow}{for} (i=0; i < a-\/>count; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07886}07886             n-\/>p[i] = a-\/>p[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07887}07887          \textcolor{keywordflow}{return} EncodeArray(n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07888}07888       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07889}07889       \textcolor{keywordflow}{case} STB\_ps\_hash: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07890}07890          stb\_ps\_hash *h = GetHash(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07891}07891          stb\_ps\_hash *n = stb\_ps\_makehash(h-\/>size, h-\/>size, h-\/>table);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07892}07892          \textcolor{keywordflow}{return} EncodeHash(n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07893}07893       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07894}07894    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07895}07895    assert(0); \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07896}07896    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07897}07897 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07898}07898 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07899}07899 \textcolor{keywordtype}{int} stb\_ps\_find(stb\_ps *ps, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07900}07900 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07901}07901     \textcolor{keywordtype}{int} i, code = 3 \& (int)(\textcolor{keywordtype}{size\_t}) ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07902}07902     assert((3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) \mbox{\hyperlink{classvalue}{value}}) == STB\_ps\_direct);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07903}07903    assert(stb\_ps\_fastlist\_valid(\mbox{\hyperlink{classvalue}{value}}));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07904}07904    \textcolor{comment}{// not a switch: order based on expected performance/power-\/law distribution}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07905}07905    \textcolor{keywordflow}{if} (code == STB\_ps\_direct)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07906}07906       \textcolor{keywordflow}{return} \mbox{\hyperlink{classvalue}{value}} == ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07907}07907    \textcolor{keywordflow}{if} (code == STB\_ps\_bucket) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07908}07908       stb\_ps\_bucket *b = GetBucket(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07909}07909       assert(STB\_BUCKET\_SIZE == 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07910}07910       \textcolor{keywordflow}{if} (b-\/>p[0] == \mbox{\hyperlink{classvalue}{value}} || b-\/>p[1] == \mbox{\hyperlink{classvalue}{value}} ||}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07911}07911           b-\/>p[2] == \mbox{\hyperlink{classvalue}{value}} || b-\/>p[3] == \mbox{\hyperlink{classvalue}{value}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07912}07912           \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07913}07913       \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07914}07914    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07915}07915    \textcolor{keywordflow}{if} (code == STB\_ps\_array) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07916}07916       stb\_ps\_array *a = GetArray(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07917}07917       \textcolor{keywordflow}{for} (i=0; i < a-\/>count; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07918}07918          \textcolor{keywordflow}{if} (a-\/>p[i] == \mbox{\hyperlink{classvalue}{value}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07919}07919             \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07920}07920       \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07921}07921    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07922}07922       stb\_ps\_hash *h = GetHash(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07923}07923       stb\_uint32 hash = stb\_hashptr(\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07924}07924       stb\_uint32 s, n = hash \& h-\/>mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07925}07925       \textcolor{keywordtype}{void} **t = h-\/>table;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07926}07926       \textcolor{keywordflow}{if} (t[n] == \mbox{\hyperlink{classvalue}{value}}) \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07927}07927       \textcolor{keywordflow}{if} (t[n] == NULL) \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07928}07928       s = stb\_rehash(hash) | 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07929}07929       \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07930}07930          n = (n + s) \& h-\/>mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07931}07931          if (t[n] == \mbox{\hyperlink{classvalue}{value}}) \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07932}07932       \} \textcolor{keywordflow}{while} (t[n] != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07933}07933       \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07934}07934    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07935}07935 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07936}07936 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07937}07937 stb\_ps *  stb\_ps\_add   (stb\_ps *ps, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07938}07938 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07939}07939 \textcolor{preprocessor}{   \#ifdef STB\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07940}07940    assert(!stb\_ps\_find(ps,\mbox{\hyperlink{classvalue}{value}}));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07941}07941 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07942}07942    \textcolor{keywordflow}{if} (\mbox{\hyperlink{classvalue}{value}} == NULL) \textcolor{keywordflow}{return} ps; \textcolor{comment}{// ignore NULL adds to avoid bad breakage}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07943}07943     assert((3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) \mbox{\hyperlink{classvalue}{value}}) == STB\_ps\_direct);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07944}07944    assert(stb\_ps\_fastlist\_valid(\mbox{\hyperlink{classvalue}{value}}));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07945}07945    assert(\mbox{\hyperlink{classvalue}{value}} != STB\_DEL);     \textcolor{comment}{// STB\_DEL is less likely}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07946}07946 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07947}07947     \textcolor{keywordflow}{switch} (3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) ps) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07948}07948       \textcolor{keywordflow}{case} STB\_ps\_direct:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07949}07949          \textcolor{keywordflow}{if} (ps == NULL) \textcolor{keywordflow}{return} (stb\_ps *) \mbox{\hyperlink{classvalue}{value}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07950}07950          \textcolor{keywordflow}{return} EncodeBucket(stb\_bucket\_create2(ps,\mbox{\hyperlink{classvalue}{value}}));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07951}07951 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07952}07952       \textcolor{keywordflow}{case} STB\_ps\_bucket: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07953}07953          stb\_ps\_bucket *b = GetBucket(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07954}07954          stb\_ps\_array  *a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07955}07955          assert(STB\_BUCKET\_SIZE == 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07956}07956          \textcolor{keywordflow}{if} (b-\/>p[0] == NULL) \{ b-\/>p[0] = \mbox{\hyperlink{classvalue}{value}}; \textcolor{keywordflow}{return} ps; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07957}07957          \textcolor{keywordflow}{if} (b-\/>p[1] == NULL) \{ b-\/>p[1] = \mbox{\hyperlink{classvalue}{value}}; \textcolor{keywordflow}{return} ps; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07958}07958          \textcolor{keywordflow}{if} (b-\/>p[2] == NULL) \{ b-\/>p[2] = \mbox{\hyperlink{classvalue}{value}}; \textcolor{keywordflow}{return} ps; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07959}07959          \textcolor{keywordflow}{if} (b-\/>p[3] == NULL) \{ b-\/>p[3] = \mbox{\hyperlink{classvalue}{value}}; \textcolor{keywordflow}{return} ps; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07960}07960          a = (stb\_ps\_array *) malloc(\textcolor{keyword}{sizeof}(*a) + 7 * \textcolor{keyword}{sizeof}(a-\/>p[0])); \textcolor{comment}{// 8 slots, must be 2\string^k}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07961}07961          memcpy(a-\/>p, b, \textcolor{keyword}{sizeof}(*b));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07962}07962          a-\/>p[4] = \mbox{\hyperlink{classvalue}{value}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07963}07963          a-\/>count = 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07964}07964          stb\_bucket\_free(b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07965}07965          \textcolor{keywordflow}{return} EncodeArray(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07966}07966       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07967}07967 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07968}07968       \textcolor{keywordflow}{case} STB\_ps\_array: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07969}07969          stb\_ps\_array *a = GetArray(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07970}07970          \textcolor{keywordflow}{if} (a-\/>count == stb\_ps\_array\_max) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07971}07971             \textcolor{comment}{// promote from array to hash}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07972}07972             stb\_ps\_hash *h = stb\_ps\_makehash(2 << stb\_log2\_ceil(a-\/>count), a-\/>count, a-\/>p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07973}07973             free(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07974}07974             \textcolor{keywordflow}{return} stb\_ps\_add(EncodeHash(h), \mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07975}07975          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07976}07976          \textcolor{comment}{// do we need to resize the array? the array doubles in size when it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07977}07977          \textcolor{comment}{// crosses a power-\/of-\/two}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07978}07978          \textcolor{keywordflow}{if} ((a-\/>count \& (a-\/>count-\/1))==0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07979}07979             \textcolor{keywordtype}{int} newsize = a-\/>count*2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07980}07980             \textcolor{comment}{// clamp newsize to max if:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07981}07981             \textcolor{comment}{//    1. it's larger than max}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07982}07982             \textcolor{comment}{//    2. newsize*1.5 is larger than max (to avoid extra resizing)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07983}07983             \textcolor{keywordflow}{if} (newsize + a-\/>count > stb\_ps\_array\_max)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07984}07984                newsize = stb\_ps\_array\_max;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07985}07985             a = (stb\_ps\_array *) realloc(a, \textcolor{keyword}{sizeof}(*a) + (newsize-\/1) * \textcolor{keyword}{sizeof}(a-\/>p[0]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07986}07986          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07987}07987          a-\/>p[a-\/>count++] = \mbox{\hyperlink{classvalue}{value}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07988}07988          \textcolor{keywordflow}{return} EncodeArray(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07989}07989       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07990}07990       \textcolor{keywordflow}{case} STB\_ps\_hash: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07991}07991          stb\_ps\_hash *h = GetHash(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07992}07992          stb\_uint32 hash = stb\_hashptr(\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07993}07993          stb\_uint32 n = hash \& h-\/>mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07994}07994          \textcolor{keywordtype}{void} **t = h-\/>table;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07995}07995          \textcolor{comment}{// find first NULL or STB\_DEL entry}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07996}07996           \textcolor{keywordflow}{if} (!stb\_ps\_empty((\textcolor{keywordtype}{size\_t})t[n])) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07997}07997             stb\_uint32 s = stb\_rehash(hash) | 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07998}07998             \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l07999}07999                n = (n + s) \& h-\/>mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08000}08000             \} \textcolor{keywordflow}{while} (!stb\_ps\_empty((\textcolor{keywordtype}{size\_t})t[n]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08001}08001          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08002}08002          \textcolor{keywordflow}{if} (t[n] == STB\_DEL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08003}08003             -\/-\/ h-\/>count\_deletes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08004}08004          t[n] = \mbox{\hyperlink{classvalue}{value}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08005}08005          ++ h-\/>count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08006}08006          \textcolor{keywordflow}{if} (h-\/>count == h-\/>grow\_threshhold) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08007}08007             stb\_ps\_hash *h2 = stb\_ps\_makehash(h-\/>size*2, h-\/>size, t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08008}08008             free(h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08009}08009             \textcolor{keywordflow}{return} EncodeHash(h2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08010}08010          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08011}08011          \textcolor{keywordflow}{if} (h-\/>count + h-\/>count\_deletes == h-\/>rehash\_threshhold) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08012}08012             stb\_ps\_hash *h2 = stb\_ps\_makehash(h-\/>size, h-\/>size, t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08013}08013             free(h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08014}08014             \textcolor{keywordflow}{return} EncodeHash(h2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08015}08015          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08016}08016          \textcolor{keywordflow}{return} ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08017}08017       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08018}08018    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08019}08019    \textcolor{keywordflow}{return} NULL; \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08020}08020 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08021}08021 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08022}08022 stb\_ps *stb\_ps\_remove(stb\_ps *ps, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08023}08023 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08024}08024 \textcolor{preprocessor}{   \#ifdef STB\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08025}08025    assert(stb\_ps\_find(ps, \mbox{\hyperlink{classvalue}{value}}));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08026}08026 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08027}08027     assert((3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) \mbox{\hyperlink{classvalue}{value}}) == STB\_ps\_direct);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08028}08028    \textcolor{keywordflow}{if} (\mbox{\hyperlink{classvalue}{value}} == NULL) \textcolor{keywordflow}{return} ps; \textcolor{comment}{// ignore NULL removes to avoid bad breakage}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08029}08029     \textcolor{keywordflow}{switch} (3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) ps) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08030}08030       \textcolor{keywordflow}{case} STB\_ps\_direct:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08031}08031          \textcolor{keywordflow}{return} ps == \mbox{\hyperlink{classvalue}{value}} ? NULL : ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08032}08032       \textcolor{keywordflow}{case} STB\_ps\_bucket: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08033}08033          stb\_ps\_bucket *b = GetBucket(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08034}08034          \textcolor{keywordtype}{int} count=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08035}08035          assert(STB\_BUCKET\_SIZE == 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08036}08036          \textcolor{keywordflow}{if} (b-\/>p[0] == \mbox{\hyperlink{classvalue}{value}}) b-\/>p[0] = NULL; \textcolor{keywordflow}{else} count += (b-\/>p[0] != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08037}08037          \textcolor{keywordflow}{if} (b-\/>p[1] == \mbox{\hyperlink{classvalue}{value}}) b-\/>p[1] = NULL; \textcolor{keywordflow}{else} count += (b-\/>p[1] != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08038}08038          \textcolor{keywordflow}{if} (b-\/>p[2] == \mbox{\hyperlink{classvalue}{value}}) b-\/>p[2] = NULL; \textcolor{keywordflow}{else} count += (b-\/>p[2] != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08039}08039          \textcolor{keywordflow}{if} (b-\/>p[3] == \mbox{\hyperlink{classvalue}{value}}) b-\/>p[3] = NULL; \textcolor{keywordflow}{else} count += (b-\/>p[3] != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08040}08040          \textcolor{keywordflow}{if} (count == 1) \{ \textcolor{comment}{// shrink bucket at size 1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08041}08041             \mbox{\hyperlink{classvalue}{value}} = b-\/>p[0];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08042}08042             \textcolor{keywordflow}{if} (\mbox{\hyperlink{classvalue}{value}} == NULL) \mbox{\hyperlink{classvalue}{value}} = b-\/>p[1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08043}08043             \textcolor{keywordflow}{if} (\mbox{\hyperlink{classvalue}{value}} == NULL) \mbox{\hyperlink{classvalue}{value}} = b-\/>p[2];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08044}08044             \textcolor{keywordflow}{if} (\mbox{\hyperlink{classvalue}{value}} == NULL) \mbox{\hyperlink{classvalue}{value}} = b-\/>p[3];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08045}08045             assert(\mbox{\hyperlink{classvalue}{value}} != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08046}08046             stb\_bucket\_free(b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08047}08047             \textcolor{keywordflow}{return} (stb\_ps *) \mbox{\hyperlink{classvalue}{value}}; \textcolor{comment}{// return STB\_ps\_direct of value}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08048}08048          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08049}08049          \textcolor{keywordflow}{return} ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08050}08050       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08051}08051       \textcolor{keywordflow}{case} STB\_ps\_array: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08052}08052          stb\_ps\_array *a = GetArray(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08053}08053          \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08054}08054          \textcolor{keywordflow}{for} (i=0; i < a-\/>count; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08055}08055             \textcolor{keywordflow}{if} (a-\/>p[i] == \mbox{\hyperlink{classvalue}{value}}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08056}08056                a-\/>p[i] = a-\/>p[-\/-\/a-\/>count];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08057}08057                \textcolor{keywordflow}{if} (a-\/>count == 3) \{ \textcolor{comment}{// shrink to bucket!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08058}08058                   stb\_ps\_bucket *b = stb\_bucket\_create3(a-\/>p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08059}08059                   free(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08060}08060                   \textcolor{keywordflow}{return} EncodeBucket(b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08061}08061                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08062}08062                \textcolor{keywordflow}{return} ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08063}08063             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08064}08064          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08065}08065          \textcolor{keywordflow}{return} ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08066}08066       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08067}08067       \textcolor{keywordflow}{case} STB\_ps\_hash: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08068}08068          stb\_ps\_hash *h = GetHash(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08069}08069          stb\_uint32 hash = stb\_hashptr(\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08070}08070          stb\_uint32 s, n = hash \& h-\/>mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08071}08071          \textcolor{keywordtype}{void} **t = h-\/>table;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08072}08072          \textcolor{keywordflow}{if} (t[n] != \mbox{\hyperlink{classvalue}{value}}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08073}08073             s = stb\_rehash(hash) | 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08074}08074             \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08075}08075                n = (n + s) \& h-\/>mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08076}08076             \} \textcolor{keywordflow}{while} (t[n] != \mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08077}08077          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08078}08078          t[n] = STB\_DEL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08079}08079          -\/-\/ h-\/>count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08080}08080          ++ h-\/>count\_deletes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08081}08081          \textcolor{comment}{// should we shrink down to an array?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08082}08082          \textcolor{keywordflow}{if} (h-\/>count < stb\_ps\_array\_max) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08083}08083             \textcolor{keywordtype}{int} n = 1 << stb\_log2\_floor(stb\_ps\_array\_max);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08084}08084             \textcolor{keywordflow}{if} (h-\/>count < n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08085}08085                stb\_ps\_array *a = (stb\_ps\_array *) malloc(\textcolor{keyword}{sizeof}(*a) + (n-\/1) * \textcolor{keyword}{sizeof}(a-\/>p[0]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08086}08086                \textcolor{keywordtype}{int} i,j=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08087}08087                \textcolor{keywordflow}{for} (i=0; i < h-\/>size; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08088}08088                     \textcolor{keywordflow}{if} (!stb\_ps\_empty((\textcolor{keywordtype}{size\_t})t[i]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08089}08089                      a-\/>p[j++] = t[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08090}08090                assert(j == h-\/>count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08091}08091                a-\/>count = j;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08092}08092                free(h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08093}08093                \textcolor{keywordflow}{return} EncodeArray(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08094}08094             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08095}08095          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08096}08096          \textcolor{keywordflow}{if} (h-\/>count == h-\/>shrink\_threshhold) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08097}08097             stb\_ps\_hash *h2 = stb\_ps\_makehash(h-\/>size >> 1, h-\/>size, t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08098}08098             free(h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08099}08099             \textcolor{keywordflow}{return} EncodeHash(h2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08100}08100          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08101}08101          \textcolor{keywordflow}{return} ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08102}08102       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08103}08103    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08104}08104    \textcolor{keywordflow}{return} ps; \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08105}08105 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08106}08106 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08107}08107 stb\_ps *stb\_ps\_remove\_any(stb\_ps *ps, \textcolor{keywordtype}{void} **\mbox{\hyperlink{classvalue}{value}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08108}08108 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08109}08109    assert(ps != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08110}08110     \textcolor{keywordflow}{switch} (3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) ps) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08111}08111       \textcolor{keywordflow}{case} STB\_ps\_direct:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08112}08112          *\mbox{\hyperlink{classvalue}{value}} = ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08113}08113          \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08114}08114       \textcolor{keywordflow}{case} STB\_ps\_bucket: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08115}08115          stb\_ps\_bucket *b = GetBucket(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08116}08116          \textcolor{keywordtype}{int} count=0, slast=0, last=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08117}08117          assert(STB\_BUCKET\_SIZE == 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08118}08118          \textcolor{keywordflow}{if} (b-\/>p[0]) \{ ++count;               last = 0; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08119}08119          \textcolor{keywordflow}{if} (b-\/>p[1]) \{ ++count; slast = last; last = 1; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08120}08120          \textcolor{keywordflow}{if} (b-\/>p[2]) \{ ++count; slast = last; last = 2; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08121}08121          \textcolor{keywordflow}{if} (b-\/>p[3]) \{ ++count; slast = last; last = 3; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08122}08122          *\mbox{\hyperlink{classvalue}{value}} = b-\/>p[last];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08123}08123          b-\/>p[last] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08124}08124          \textcolor{keywordflow}{if} (count == 2) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08125}08125             \textcolor{keywordtype}{void} *leftover = b-\/>p[slast]; \textcolor{comment}{// second to last}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08126}08126             stb\_bucket\_free(b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08127}08127             \textcolor{keywordflow}{return} (stb\_ps *) leftover;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08128}08128          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08129}08129          \textcolor{keywordflow}{return} ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08130}08130       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08131}08131       \textcolor{keywordflow}{case} STB\_ps\_array: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08132}08132          stb\_ps\_array *a = GetArray(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08133}08133          *\mbox{\hyperlink{classvalue}{value}} = a-\/>p[a-\/>count-\/1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08134}08134          \textcolor{keywordflow}{if} (a-\/>count == 4)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08135}08135             \textcolor{keywordflow}{return} stb\_ps\_remove(ps, *\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08136}08136          -\/-\/a-\/>count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08137}08137          \textcolor{keywordflow}{return} ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08138}08138       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08139}08139       \textcolor{keywordflow}{case} STB\_ps\_hash: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08140}08140          stb\_ps\_hash *h = GetHash(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08141}08141          \textcolor{keywordtype}{void} **t = h-\/>table;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08142}08142          stb\_uint32 n = h-\/>any\_offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08143}08143           \textcolor{keywordflow}{while} (stb\_ps\_empty((\textcolor{keywordtype}{size\_t})t[n]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08144}08144             n = (n + 1) \& h-\/>mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08145}08145          *\mbox{\hyperlink{classvalue}{value}} = t[n];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08146}08146          h-\/>any\_offset = (n+1) \& h-\/>mask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08147}08147          \textcolor{comment}{// check if we need to skip down to the previous type}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08148}08148          \textcolor{keywordflow}{if} (h-\/>count-\/1 < stb\_ps\_array\_max || h-\/>count-\/1 == h-\/>shrink\_threshhold)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08149}08149             \textcolor{keywordflow}{return} stb\_ps\_remove(ps, *\mbox{\hyperlink{classvalue}{value}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08150}08150          t[n] = STB\_DEL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08151}08151          -\/-\/ h-\/>count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08152}08152          ++ h-\/>count\_deletes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08153}08153          \textcolor{keywordflow}{return} ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08154}08154       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08155}08155    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08156}08156    \textcolor{keywordflow}{return} ps; \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08157}08157 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08158}08158 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08159}08159 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08160}08160 \textcolor{keywordtype}{void} ** stb\_ps\_getlist(stb\_ps *ps, \textcolor{keywordtype}{int} *count)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08161}08161 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08162}08162    \textcolor{keywordtype}{int} i,n=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08163}08163    \textcolor{keywordtype}{void} **p = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08164}08164     \textcolor{keywordflow}{switch} (3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) ps) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08165}08165       \textcolor{keywordflow}{case} STB\_ps\_direct:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08166}08166          \textcolor{keywordflow}{if} (ps == NULL) \{ *count = 0; \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08167}08167          p = (\textcolor{keywordtype}{void} **) malloc(\textcolor{keyword}{sizeof}(*p) * 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08168}08168          p[0] = ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08169}08169          *count = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08170}08170          \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08171}08171       \textcolor{keywordflow}{case} STB\_ps\_bucket: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08172}08172          stb\_ps\_bucket *b = GetBucket(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08173}08173          p = (\textcolor{keywordtype}{void} **) malloc(\textcolor{keyword}{sizeof}(*p) * STB\_BUCKET\_SIZE);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08174}08174          \textcolor{keywordflow}{for} (i=0; i < STB\_BUCKET\_SIZE; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08175}08175             \textcolor{keywordflow}{if} (b-\/>p[i] != NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08176}08176                p[n++] = b-\/>p[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08177}08177          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08178}08178       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08179}08179       \textcolor{keywordflow}{case} STB\_ps\_array: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08180}08180          stb\_ps\_array *a = GetArray(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08181}08181          p = (\textcolor{keywordtype}{void} **) malloc(\textcolor{keyword}{sizeof}(*p) * a-\/>count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08182}08182          memcpy(p, a-\/>p, \textcolor{keyword}{sizeof}(*p) * a-\/>count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08183}08183          *count = a-\/>count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08184}08184          \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08185}08185       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08186}08186       \textcolor{keywordflow}{case} STB\_ps\_hash: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08187}08187          stb\_ps\_hash *h = GetHash(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08188}08188          p = (\textcolor{keywordtype}{void} **) malloc(\textcolor{keyword}{sizeof}(*p) * h-\/>count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08189}08189          \textcolor{keywordflow}{for} (i=0; i < h-\/>size; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08190}08190               \textcolor{keywordflow}{if} (!stb\_ps\_empty((\textcolor{keywordtype}{size\_t})h-\/>table[i]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08191}08191                p[n++] = h-\/>table[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08192}08192          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08193}08193       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08194}08194    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08195}08195    *count = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08196}08196    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08197}08197 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08198}08198 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08199}08199 \textcolor{keywordtype}{int} stb\_ps\_writelist(stb\_ps *ps, \textcolor{keywordtype}{void} **list, \textcolor{keywordtype}{int} size )}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08200}08200 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08201}08201    \textcolor{keywordtype}{int} i,n=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08202}08202     \textcolor{keywordflow}{switch} (3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) ps) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08203}08203       \textcolor{keywordflow}{case} STB\_ps\_direct:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08204}08204          \textcolor{keywordflow}{if} (ps == NULL || size <= 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08205}08205          list[0] = ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08206}08206          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08207}08207       \textcolor{keywordflow}{case} STB\_ps\_bucket: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08208}08208          stb\_ps\_bucket *b = GetBucket(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08209}08209          \textcolor{keywordflow}{for} (i=0; i < STB\_BUCKET\_SIZE; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08210}08210             \textcolor{keywordflow}{if} (b-\/>p[i] != NULL \&\& n < size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08211}08211                list[n++] = b-\/>p[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08212}08212          \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08213}08213       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08214}08214       \textcolor{keywordflow}{case} STB\_ps\_array: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08215}08215          stb\_ps\_array *a = GetArray(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08216}08216          n = stb\_min(size, a-\/>count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08217}08217          memcpy(list, a-\/>p, \textcolor{keyword}{sizeof}(*list) * n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08218}08218          \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08219}08219       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08220}08220       \textcolor{keywordflow}{case} STB\_ps\_hash: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08221}08221          stb\_ps\_hash *h = GetHash(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08222}08222          \textcolor{keywordflow}{if} (size <= 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08223}08223          \textcolor{keywordflow}{for} (i=0; i < h-\/>count; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08224}08224              \textcolor{keywordflow}{if} (!stb\_ps\_empty((\textcolor{keywordtype}{size\_t})h-\/>table[i])) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08225}08225                list[n++] = h-\/>table[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08226}08226                \textcolor{keywordflow}{if} (n == size) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08227}08227             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08228}08228          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08229}08229          \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08230}08230       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08231}08231    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08232}08232    \textcolor{keywordflow}{return} 0; \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08233}08233 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08234}08234 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08235}08235 \textcolor{keywordtype}{int} stb\_ps\_enum(stb\_ps *ps, \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{int} (*func)(\textcolor{keywordtype}{void} *\mbox{\hyperlink{classvalue}{value}}, \textcolor{keywordtype}{void} *data))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08236}08236 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08237}08237    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08238}08238     \textcolor{keywordflow}{switch} (3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) ps) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08239}08239       \textcolor{keywordflow}{case} STB\_ps\_direct:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08240}08240          \textcolor{keywordflow}{if} (ps == NULL) \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08241}08241          \textcolor{keywordflow}{return} func(ps, data);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08242}08242       \textcolor{keywordflow}{case} STB\_ps\_bucket: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08243}08243          stb\_ps\_bucket *b = GetBucket(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08244}08244          \textcolor{keywordflow}{for} (i=0; i < STB\_BUCKET\_SIZE; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08245}08245             \textcolor{keywordflow}{if} (b-\/>p[i] != NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08246}08246                \textcolor{keywordflow}{if} (!func(b-\/>p[i], data))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08247}08247                   \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08248}08248          \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08249}08249       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08250}08250       \textcolor{keywordflow}{case} STB\_ps\_array: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08251}08251          stb\_ps\_array *a = GetArray(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08252}08252          \textcolor{keywordflow}{for} (i=0; i < a-\/>count; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08253}08253             \textcolor{keywordflow}{if} (!func(a-\/>p[i], data))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08254}08254                \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08255}08255          \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08256}08256       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08257}08257       \textcolor{keywordflow}{case} STB\_ps\_hash: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08258}08258          stb\_ps\_hash *h = GetHash(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08259}08259          \textcolor{keywordflow}{for} (i=0; i < h-\/>count; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08260}08260               \textcolor{keywordflow}{if} (!stb\_ps\_empty((\textcolor{keywordtype}{size\_t})h-\/>table[i]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08261}08261                \textcolor{keywordflow}{if} (!func(h-\/>table[i], data))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08262}08262                   \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08263}08263          \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08264}08264       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08265}08265    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08266}08266    \textcolor{keywordflow}{return} STB\_TRUE; \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08267}08267 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08268}08268 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08269}08269 \textcolor{keywordtype}{int} stb\_ps\_count (stb\_ps *ps)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08270}08270 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08271}08271     \textcolor{keywordflow}{switch} (3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) ps) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08272}08272       \textcolor{keywordflow}{case} STB\_ps\_direct:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08273}08273          \textcolor{keywordflow}{return} ps != NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08274}08274       \textcolor{keywordflow}{case} STB\_ps\_bucket: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08275}08275          stb\_ps\_bucket *b = GetBucket(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08276}08276          \textcolor{keywordflow}{return} (b-\/>p[0] != NULL) + (b-\/>p[1] != NULL) +}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08277}08277                 (b-\/>p[2] != NULL) + (b-\/>p[3] != NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08278}08278       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08279}08279       \textcolor{keywordflow}{case} STB\_ps\_array: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08280}08280          stb\_ps\_array *a = GetArray(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08281}08281          \textcolor{keywordflow}{return} a-\/>count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08282}08282       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08283}08283       \textcolor{keywordflow}{case} STB\_ps\_hash: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08284}08284          stb\_ps\_hash *h = GetHash(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08285}08285          \textcolor{keywordflow}{return} h-\/>count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08286}08286       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08287}08287    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08288}08288    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08289}08289 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08290}08290 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08291}08291 \textcolor{keywordtype}{void} ** stb\_ps\_fastlist(stb\_ps *ps, \textcolor{keywordtype}{int} *count)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08292}08292 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08293}08293    \textcolor{keyword}{static} \textcolor{keywordtype}{void} *storage;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08294}08294 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08295}08295     \textcolor{keywordflow}{switch} (3 \& (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) ps) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08296}08296       \textcolor{keywordflow}{case} STB\_ps\_direct:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08297}08297          \textcolor{keywordflow}{if} (ps == NULL) \{ *count = 0; \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08298}08298          storage = ps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08299}08299          *count = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08300}08300          \textcolor{keywordflow}{return} \&storage;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08301}08301       \textcolor{keywordflow}{case} STB\_ps\_bucket: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08302}08302          stb\_ps\_bucket *b = GetBucket(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08303}08303          *count = STB\_BUCKET\_SIZE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08304}08304          \textcolor{keywordflow}{return} b-\/>p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08305}08305       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08306}08306       \textcolor{keywordflow}{case} STB\_ps\_array: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08307}08307          stb\_ps\_array *a = GetArray(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08308}08308          *count = a-\/>count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08309}08309          \textcolor{keywordflow}{return} a-\/>p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08310}08310       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08311}08311       \textcolor{keywordflow}{case} STB\_ps\_hash: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08312}08312          stb\_ps\_hash *h = GetHash(ps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08313}08313          *count = h-\/>size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08314}08314          \textcolor{keywordflow}{return} h-\/>table;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08315}08315       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08316}08316    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08317}08317    \textcolor{keywordflow}{return} NULL; \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08318}08318 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08319}08319 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08320}08320 \textcolor{keywordtype}{int} stb\_ps\_subset(stb\_ps *bigger, stb\_ps *smaller)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08321}08321 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08322}08322    \textcolor{keywordtype}{int} i, listlen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08323}08323    \textcolor{keywordtype}{void} **list = stb\_ps\_fastlist(smaller, \&listlen);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08324}08324    \textcolor{keywordflow}{for}(i=0; i < listlen; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08325}08325       \textcolor{keywordflow}{if} (stb\_ps\_fastlist\_valid(list[i]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08326}08326          \textcolor{keywordflow}{if} (!stb\_ps\_find(bigger, list[i]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08327}08327             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08328}08328    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08329}08329 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08330}08330 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08331}08331 \textcolor{keywordtype}{int} stb\_ps\_eq(stb\_ps *p0, stb\_ps *p1)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08332}08332 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08333}08333    \textcolor{keywordflow}{if} (stb\_ps\_count(p0) != stb\_ps\_count(p1))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08334}08334       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08335}08335    \textcolor{keywordflow}{return} stb\_ps\_subset(p0, p1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08336}08336 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08337}08337 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08338}08338 \textcolor{preprocessor}{\#undef GetBucket}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08339}08339 \textcolor{preprocessor}{\#undef GetArray}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08340}08340 \textcolor{preprocessor}{\#undef GetHash}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08341}08341 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08342}08342 \textcolor{preprocessor}{\#undef EncodeBucket}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08343}08343 \textcolor{preprocessor}{\#undef EncodeArray}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08344}08344 \textcolor{preprocessor}{\#undef EncodeHash}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08345}08345 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08346}08346 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08347}08347 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08348}08348 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08350}08350 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08351}08351 \textcolor{comment}{//               Random Numbers via Meresenne Twister or LCG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08352}08352 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08353}08353 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08354}08354 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  stb\_srandLCG(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} seed);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08355}08355 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  stb\_randLCG(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08356}08356 STB\_EXTERN \textcolor{keywordtype}{double}        stb\_frandLCG(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08357}08357 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08358}08358 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_srand(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} seed);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08359}08359 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  stb\_rand(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08360}08360 STB\_EXTERN \textcolor{keywordtype}{double}        stb\_frand(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08361}08361 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_shuffle(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} n, \textcolor{keywordtype}{size\_t} sz,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08362}08362                                         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} seed);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08363}08363 STB\_EXTERN \textcolor{keywordtype}{void} stb\_reverse(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} n, \textcolor{keywordtype}{size\_t} sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08364}08364 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08365}08365 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  stb\_randLCG\_explicit(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  seed);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08366}08366 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08367}08367 \textcolor{preprocessor}{\#define stb\_rand\_define(x,y)                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08368}08368 \textcolor{preprocessor}{                                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08369}08369 \textcolor{preprocessor}{   unsigned int  x(void)                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08370}08370 \textcolor{preprocessor}{   \{                                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08371}08371 \textcolor{preprocessor}{      static unsigned int  stb\_\_rand = y;                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08372}08372 \textcolor{preprocessor}{      stb\_\_rand = stb\_\_rand * 2147001325 + 715136305; }\textcolor{comment}{/* BCPL */}\textcolor{preprocessor}{     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08373}08373 \textcolor{preprocessor}{      return 0x31415926 \string^ ((stb\_\_rand >> 16) + (stb\_\_rand << 16));   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08374}08374 \textcolor{preprocessor}{   \}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08375}08375 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08376}08376 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08377}08377 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  stb\_randLCG\_explicit(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} seed)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08378}08378 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08379}08379    \textcolor{keywordflow}{return} seed * 2147001325 + 715136305;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08380}08380 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08381}08381 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08382}08382 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  stb\_\_rand\_seed=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08383}08383 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08384}08384 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  stb\_srandLCG(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} seed)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08385}08385 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08386}08386    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  previous = stb\_\_rand\_seed;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08387}08387    stb\_\_rand\_seed = seed;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08388}08388    \textcolor{keywordflow}{return} previous;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08389}08389 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08390}08390 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08391}08391 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  stb\_randLCG(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08392}08392 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08393}08393    stb\_\_rand\_seed = stb\_\_rand\_seed * 2147001325 + 715136305; \textcolor{comment}{// BCPL generator}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08394}08394    \textcolor{comment}{// shuffle non-\/random bits to the middle, and xor to decorrelate with seed}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08395}08395    \textcolor{keywordflow}{return} 0x31415926 \string^ ((stb\_\_rand\_seed >> 16) + (stb\_\_rand\_seed << 16));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08396}08396 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08397}08397 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08398}08398 \textcolor{keywordtype}{double} stb\_frandLCG(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08399}08399 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08400}08400    \textcolor{keywordflow}{return} stb\_randLCG() / ((double) (1 << 16) * (1 << 16));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08401}08401 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08402}08402 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08403}08403 \textcolor{keywordtype}{void} stb\_shuffle(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} n, \textcolor{keywordtype}{size\_t} sz, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} seed)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08404}08404 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08405}08405    \textcolor{keywordtype}{char} *a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08406}08406    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} old\_seed;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08407}08407    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08408}08408    \textcolor{keywordflow}{if} (seed)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08409}08409       old\_seed = stb\_srandLCG(seed);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08410}08410    a = (\textcolor{keywordtype}{char} *) p + (n-\/1) * sz;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08411}08411 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08412}08412    \textcolor{keywordflow}{for} (i=(\textcolor{keywordtype}{int}) n; i > 1; -\/-\/i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08413}08413       \textcolor{keywordtype}{int} j = stb\_randLCG() \% i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08414}08414       stb\_swap(a, (\textcolor{keywordtype}{char} *) p + j * sz, sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08415}08415       a -\/= sz;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08416}08416    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08417}08417    \textcolor{keywordflow}{if} (seed)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08418}08418       stb\_srandLCG(old\_seed);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08419}08419 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08420}08420 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08421}08421 \textcolor{keywordtype}{void} stb\_reverse(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} n, \textcolor{keywordtype}{size\_t} sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08422}08422 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08423}08423    \textcolor{keywordtype}{size\_t} i,j = n-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08424}08424    \textcolor{keywordflow}{for} (i=0; i < j; ++i,-\/-\/j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08425}08425       stb\_swap((\textcolor{keywordtype}{char} *) p + i * sz, (\textcolor{keywordtype}{char} *) p + j * sz, sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08426}08426    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08427}08427 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08428}08428 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08429}08429 \textcolor{comment}{// public domain Mersenne Twister by Michael Brundage}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08430}08430 \textcolor{preprocessor}{\#define STB\_\_MT\_LEN       624}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08431}08431 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08432}08432 \textcolor{keywordtype}{int} stb\_\_mt\_index = STB\_\_MT\_LEN*\textcolor{keyword}{sizeof}(int)+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08433}08433 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_mt\_buffer[STB\_\_MT\_LEN];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08434}08434 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08435}08435 \textcolor{keywordtype}{void} stb\_srand(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} seed)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08436}08436 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08437}08437    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08438}08438    stb\_\_mt\_buffer[0]= seed \& 0xffffffffUL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08439}08439    \textcolor{keywordflow}{for} (i=1 ; i < STB\_\_MT\_LEN; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08440}08440       stb\_\_mt\_buffer[i] = (1812433253UL * (stb\_\_mt\_buffer[i-\/1] \string^ (stb\_\_mt\_buffer[i-\/1] >> 30)) + i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08441}08441    stb\_\_mt\_index = STB\_\_MT\_LEN*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} int);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08442}08442 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08443}08443 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08444}08444 \textcolor{preprocessor}{\#define STB\_\_MT\_IA           397}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08445}08445 \textcolor{preprocessor}{\#define STB\_\_MT\_IB           (STB\_\_MT\_LEN -\/ STB\_\_MT\_IA)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08446}08446 \textcolor{preprocessor}{\#define STB\_\_UPPER\_MASK      0x80000000}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08447}08447 \textcolor{preprocessor}{\#define STB\_\_LOWER\_MASK      0x7FFFFFFF}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08448}08448 \textcolor{preprocessor}{\#define STB\_\_MATRIX\_A        0x9908B0DF}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08449}08449 \textcolor{preprocessor}{\#define STB\_\_TWIST(b,i,j)    ((b)[i] \& STB\_\_UPPER\_MASK) | ((b)[j] \& STB\_\_LOWER\_MASK)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08450}08450 \textcolor{preprocessor}{\#define STB\_\_MAGIC(s)        (((s)\&1)*STB\_\_MATRIX\_A)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08451}08451 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08452}08452 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_rand()}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08453}08453 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08454}08454    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  * b = stb\_\_mt\_buffer;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08455}08455    \textcolor{keywordtype}{int} idx = stb\_\_mt\_index;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08456}08456    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}  s,r;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08457}08457    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08458}08458 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08459}08459    \textcolor{keywordflow}{if} (idx >= STB\_\_MT\_LEN*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int})) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08460}08460       \textcolor{keywordflow}{if} (idx > STB\_\_MT\_LEN*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08461}08461          stb\_srand(0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08462}08462       idx = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08463}08463       i = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08464}08464       \textcolor{keywordflow}{for} (; i < STB\_\_MT\_IB; i++) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08465}08465          s = STB\_\_TWIST(b, i, i+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08466}08466          b[i] = b[i + STB\_\_MT\_IA] \string^ (s >> 1) \string^ STB\_\_MAGIC(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08467}08467       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08468}08468       \textcolor{keywordflow}{for} (; i < STB\_\_MT\_LEN-\/1; i++) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08469}08469          s = STB\_\_TWIST(b, i, i+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08470}08470          b[i] = b[i -\/ STB\_\_MT\_IB] \string^ (s >> 1) \string^ STB\_\_MAGIC(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08471}08471       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08472}08472 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08473}08473       s = STB\_\_TWIST(b, STB\_\_MT\_LEN-\/1, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08474}08474       b[STB\_\_MT\_LEN-\/1] = b[STB\_\_MT\_IA-\/1] \string^ (s >> 1) \string^ STB\_\_MAGIC(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08475}08475    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08476}08476    stb\_\_mt\_index = idx + \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} int);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08477}08477 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08478}08478    r = *(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *)((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *)b + idx);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08479}08479 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08480}08480    r \string^= (r >> 11);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08481}08481    r \string^= (r << 7) \& 0x9D2C5680;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08482}08482    r \string^= (r << 15) \& 0xEFC60000;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08483}08483    r \string^= (r >> 18);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08484}08484 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08485}08485    \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08486}08486 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08487}08487 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08488}08488 \textcolor{keywordtype}{double} stb\_frand(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08489}08489 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08490}08490    \textcolor{keywordflow}{return} stb\_rand() / ((double) (1 << 16) * (1 << 16));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08491}08491 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08492}08492 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08493}08493 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08494}08494 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08495}08495 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08497}08497 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08498}08498 \textcolor{comment}{//                        stb\_dupe}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08499}08499 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08500}08500 \textcolor{comment}{// stb\_dupe is a duplicate-\/finding system for very, very large data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08501}08501 \textcolor{comment}{// structures-\/-\/large enough that sorting is too slow, but not so large}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08502}08502 \textcolor{comment}{// that we can't keep all the data in memory. using it works as follows:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08503}08503 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08504}08504 \textcolor{comment}{//     1. create an stb\_dupe:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08505}08505 \textcolor{comment}{//          provide a hash function}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08506}08506 \textcolor{comment}{//          provide an equality function}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08507}08507 \textcolor{comment}{//          provide an estimate for the size}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08508}08508 \textcolor{comment}{//          optionally provide a comparison function}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08509}08509 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08510}08510 \textcolor{comment}{//     2. traverse your data, 'adding' pointers to the stb\_dupe}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08511}08511 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08512}08512 \textcolor{comment}{//     3. finish and ask for duplicates}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08513}08513 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08514}08514 \textcolor{comment}{//        the stb\_dupe will discard its intermediate data and build}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08515}08515 \textcolor{comment}{//        a collection of sorted lists of duplicates, with non-\/duplicate}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08516}08516 \textcolor{comment}{//        entries omitted entirely}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08517}08517 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08518}08518 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08519}08519 \textcolor{comment}{//  Implementation strategy:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08520}08520 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08521}08521 \textcolor{comment}{//     while collecting the N items, we keep a hash table of approximate}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08522}08522 \textcolor{comment}{//     size sqrt(N). (if you tell use the N up front, the hash table is}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08523}08523 \textcolor{comment}{//     just that size exactly)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08524}08524 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08525}08525 \textcolor{comment}{//     each entry in the hash table is just an stb\_\_arr of pointers (no need}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08526}08526 \textcolor{comment}{//     to use stb\_ps, because we don't need to delete from these)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08527}08527 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08528}08528 \textcolor{comment}{//     for step 3, for each entry in the hash table, we apply stb\_dupe to it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08529}08529 \textcolor{comment}{//     recursively. once the size gets small enough (or doesn't decrease}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08530}08530 \textcolor{comment}{//     significantly), we switch to either using qsort() on the comparison}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08531}08531 \textcolor{comment}{//     function, or else we just do the icky N\string^2 gather}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08532}08532 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08533}08533 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08534}08534 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} \mbox{\hyperlink{structstb__dupe}{stb\_dupe}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08535}08535 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08536}08536 \textcolor{keyword}{typedef} int (*stb\_compare\_func)(\textcolor{keywordtype}{void} *a, \textcolor{keywordtype}{void} *b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08537}08537 \textcolor{keyword}{typedef} int (*stb\_hash\_func)(\textcolor{keywordtype}{void} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} seed);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08538}08538 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08539}08539 STB\_EXTERN \textcolor{keywordtype}{void} stb\_dupe\_free(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08540}08540 STB\_EXTERN \mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *stb\_dupe\_create(stb\_hash\_func hash,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08541}08541                           stb\_compare\_func eq, \textcolor{keywordtype}{int} size, stb\_compare\_func ineq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08542}08542 STB\_EXTERN \textcolor{keywordtype}{void} stb\_dupe\_add(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd, \textcolor{keywordtype}{void} *item);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08543}08543 STB\_EXTERN \textcolor{keywordtype}{void} stb\_dupe\_finish(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08544}08544 STB\_EXTERN \textcolor{keywordtype}{int} stb\_dupe\_numsets(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08545}08545 STB\_EXTERN \textcolor{keywordtype}{void} **stb\_dupe\_set(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd, \textcolor{keywordtype}{int} num);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08546}08546 STB\_EXTERN \textcolor{keywordtype}{int} stb\_dupe\_set\_count(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd, \textcolor{keywordtype}{int} num);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08547}08547 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08548}\mbox{\hyperlink{structstb__dupe}{08548}} \textcolor{keyword}{struct }\mbox{\hyperlink{structstb__dupe}{stb\_dupe}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08549}08549 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08550}08550    \textcolor{keywordtype}{void} ***hash\_table;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08551}08551    \textcolor{keywordtype}{int} hash\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08552}08552    \textcolor{keywordtype}{int} size\_log2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08553}08553    \textcolor{keywordtype}{int} population;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08554}08554 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08555}08555    \textcolor{keywordtype}{int} hash\_shift;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08556}08556    stb\_hash\_func     hash;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08557}08557 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08558}08558    stb\_compare\_func  eq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08559}08559    stb\_compare\_func  ineq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08560}08560 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08561}08561    \textcolor{keywordtype}{void} ***dupes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08562}08562 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08563}08563 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08564}08564 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08565}08565 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08566}08566 \textcolor{keywordtype}{int} stb\_dupe\_numsets(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08567}08567 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08568}08568    assert(sd-\/>hash\_table == NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08569}08569    \textcolor{keywordflow}{return} stb\_arr\_len(sd-\/>dupes);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08570}08570 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08571}08571 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08572}08572 \textcolor{keywordtype}{void} **stb\_dupe\_set(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd, \textcolor{keywordtype}{int} num)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08573}08573 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08574}08574    assert(sd-\/>hash\_table == NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08575}08575    \textcolor{keywordflow}{return} sd-\/>dupes[num];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08576}08576 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08577}08577 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08578}08578 \textcolor{keywordtype}{int} stb\_dupe\_set\_count(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd, \textcolor{keywordtype}{int} num)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08579}08579 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08580}08580    assert(sd-\/>hash\_table == NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08581}08581    \textcolor{keywordflow}{return} stb\_arr\_len(sd-\/>dupes[num]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08582}08582 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08583}08583 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08584}08584 \mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *stb\_dupe\_create(stb\_hash\_func hash, stb\_compare\_func eq, \textcolor{keywordtype}{int} size,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08585}08585                                               stb\_compare\_func ineq)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08586}08586 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08587}08587    \textcolor{keywordtype}{int} i, hsize;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08588}08588    \mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd = (\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *) malloc(\textcolor{keyword}{sizeof}(*sd));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08589}08589 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08590}08590    sd-\/>size\_log2 = 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08591}08591    hsize = 1 << sd-\/>size\_log2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08592}08592    \textcolor{keywordflow}{while} (hsize * hsize < size) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08593}08593       ++sd-\/>size\_log2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08594}08594       hsize *= 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08595}08595    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08596}08596 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08597}08597    sd-\/>hash = hash;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08598}08598    sd-\/>eq   = eq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08599}08599    sd-\/>ineq = ineq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08600}08600    sd-\/>hash\_shift = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08601}08601 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08602}08602    sd-\/>population = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08603}08603    sd-\/>hash\_size = hsize;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08604}08604    sd-\/>hash\_table = (\textcolor{keywordtype}{void} ***) malloc(\textcolor{keyword}{sizeof}(*sd-\/>hash\_table) * hsize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08605}08605    \textcolor{keywordflow}{for} (i=0; i < hsize; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08606}08606       sd-\/>hash\_table[i] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08607}08607 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08608}08608    sd-\/>dupes = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08609}08609 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08610}08610    \textcolor{keywordflow}{return} sd;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08611}08611 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08612}08612 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08613}08613 \textcolor{keywordtype}{void} stb\_dupe\_add(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd, \textcolor{keywordtype}{void} *item)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08614}08614 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08615}08615    stb\_uint32 hash = sd-\/>hash(item, sd-\/>hash\_shift);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08616}08616    \textcolor{keywordtype}{int} z = hash \& (sd-\/>hash\_size-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08617}08617    stb\_arr\_push(sd-\/>hash\_table[z], item);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08618}08618    ++sd-\/>population;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08619}08619 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08620}08620 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08621}08621 \textcolor{keywordtype}{void} stb\_dupe\_free(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08622}08622 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08623}08623    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08624}08624    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(sd-\/>dupes); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08625}08625       \textcolor{keywordflow}{if} (sd-\/>dupes[i])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08626}08626          stb\_arr\_free(sd-\/>dupes[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08627}08627    stb\_arr\_free(sd-\/>dupes);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08628}08628    free(sd);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08629}08629 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08630}08630 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08631}08631 \textcolor{keyword}{static} stb\_compare\_func stb\_\_compare;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08632}08632 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08633}08633 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_dupe\_compare(\textcolor{keyword}{const} \textcolor{keywordtype}{void} *a, \textcolor{keyword}{const} \textcolor{keywordtype}{void} *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08634}08634 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08635}08635    \textcolor{keywordtype}{void} *p = *(\textcolor{keywordtype}{void} **) a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08636}08636    \textcolor{keywordtype}{void} *q = *(\textcolor{keywordtype}{void} **) b;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08637}08637 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08638}08638    \textcolor{keywordflow}{return} stb\_\_compare(p,q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08639}08639 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08640}08640 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08641}08641 \textcolor{keywordtype}{void} stb\_dupe\_finish(\mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *sd)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08642}08642 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08643}08643    \textcolor{keywordtype}{int} i,j,k;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08644}08644    assert(sd-\/>dupes == NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08645}08645    \textcolor{keywordflow}{for} (i=0; i < sd-\/>hash\_size; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08646}08646       \textcolor{keywordtype}{void} ** list = sd-\/>hash\_table[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08647}08647       \textcolor{keywordflow}{if} (list != NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08648}08648          \textcolor{keywordtype}{int} n = stb\_arr\_len(list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08649}08649          \textcolor{comment}{// @TODO: measure to find good numbers instead of just making them up!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08650}08650          \textcolor{keywordtype}{int} thresh = (sd-\/>ineq ? 200 : 20);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08651}08651          \textcolor{comment}{// if n is large enough to be worth it, and n is smaller than}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08652}08652          \textcolor{comment}{// before (so we can guarantee we'll use a smaller hash table);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08653}08653          \textcolor{comment}{// and there are enough hash bits left, assuming full 32-\/bit hash}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08654}08654          \textcolor{keywordflow}{if} (n > thresh \&\& n < (sd-\/>population >> 3) \&\& sd-\/>hash\_shift + sd-\/>size\_log2*2 < 32) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08655}08655 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08656}08656             \textcolor{comment}{// recursively process this row using stb\_dupe, O(N log log N)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08657}08657 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08658}08658             \mbox{\hyperlink{structstb__dupe}{stb\_dupe}} *d = stb\_dupe\_create(sd-\/>hash, sd-\/>eq, n, sd-\/>ineq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08659}08659             d-\/>hash\_shift = stb\_randLCG\_explicit(sd-\/>hash\_shift);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08660}08660             \textcolor{keywordflow}{for} (j=0; j < n; ++j)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08661}08661                stb\_dupe\_add(d, list[j]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08662}08662             stb\_arr\_free(sd-\/>hash\_table[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08663}08663             stb\_dupe\_finish(d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08664}08664             \textcolor{keywordflow}{for} (j=0; j < stb\_arr\_len(d-\/>dupes); ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08665}08665                stb\_arr\_push(sd-\/>dupes, d-\/>dupes[j]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08666}08666                d-\/>dupes[j] = NULL; \textcolor{comment}{// take over ownership}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08667}08667             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08668}08668             stb\_dupe\_free(d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08669}08669 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08670}08670          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (sd-\/>ineq) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08671}08671 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08672}08672             \textcolor{comment}{// process this row using qsort(), O(N log N)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08673}08673             stb\_\_compare = sd-\/>ineq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08674}08674             qsort(list, n, \textcolor{keyword}{sizeof}(list[0]), stb\_\_dupe\_compare);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08675}08675 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08676}08676             \textcolor{comment}{// find equal subsequences of the list}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08677}08677             \textcolor{keywordflow}{for} (j=0; j < n-\/1; ) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08678}08678                \textcolor{comment}{// find a subsequence from j..k}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08679}08679                \textcolor{keywordflow}{for} (k=j; k < n; ++k)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08680}08680                   \textcolor{comment}{// only use ineq so eq can be left undefined}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08681}08681                   \textcolor{keywordflow}{if} (sd-\/>ineq(list[j], list[k]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08682}08682                      \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08683}08683                \textcolor{comment}{// k is the first one not in the subsequence}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08684}08684                \textcolor{keywordflow}{if} (k-\/j > 1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08685}08685                   \textcolor{keywordtype}{void} **mylist = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08686}08686                   stb\_arr\_setlen(mylist, k-\/j);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08687}08687                   memcpy(mylist, list+j, \textcolor{keyword}{sizeof}(list[j]) * (k-\/j));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08688}08688                   stb\_arr\_push(sd-\/>dupes, mylist);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08689}08689                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08690}08690                j = k;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08691}08691             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08692}08692             stb\_arr\_free(sd-\/>hash\_table[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08693}08693          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08694}08694 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08695}08695             \textcolor{comment}{// process this row using eq(), O(N\string^2)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08696}08696             \textcolor{keywordflow}{for} (j=0; j < n; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08697}08697                \textcolor{keywordflow}{if} (list[j] != NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08698}08698                   \textcolor{keywordtype}{void} **\mbox{\hyperlink{structoutput}{output}}  = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08699}08699                   \textcolor{keywordflow}{for} (k=j+1; k < n; ++k) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08700}08700                      \textcolor{keywordflow}{if} (sd-\/>eq(list[j], list[k])) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08701}08701                         \textcolor{keywordflow}{if} (\mbox{\hyperlink{structoutput}{output}} == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08702}08702                            stb\_arr\_push(\mbox{\hyperlink{structoutput}{output}}, list[j]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08703}08703                         stb\_arr\_push(\mbox{\hyperlink{structoutput}{output}}, list[k]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08704}08704                         list[k] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08705}08705                      \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08706}08706                   \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08707}08707                   list[j] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08708}08708                   \textcolor{keywordflow}{if} (\mbox{\hyperlink{structoutput}{output}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08709}08709                      stb\_arr\_push(sd-\/>dupes, \mbox{\hyperlink{structoutput}{output}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08710}08710                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08711}08711             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08712}08712             stb\_arr\_free(sd-\/>hash\_table[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08713}08713          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08714}08714       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08715}08715    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08716}08716    free(sd-\/>hash\_table);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08717}08717    sd-\/>hash\_table = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08718}08718 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08719}08719 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08720}08720 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08722}08722 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08723}08723 \textcolor{comment}{//                       templatized Sort routine}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08724}08724 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08725}08725 \textcolor{comment}{// This is an attempt to implement a templated sorting algorithm.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08726}08726 \textcolor{comment}{// To use it, you have to explicitly instantiate it as a \_function\_,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08727}08727 \textcolor{comment}{// then you call that function. This allows the comparison to be inlined,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08728}08728 \textcolor{comment}{// giving the sort similar performance to C++ sorts.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08729}08729 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08730}08730 \textcolor{comment}{// It implements quicksort with three-\/way-\/median partitioning (generally}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08731}08731 \textcolor{comment}{// well-\/behaved), with a final insertion sort pass.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08732}08732 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08733}08733 \textcolor{comment}{// When you define the compare expression, you should assume you have}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08734}08734 \textcolor{comment}{// elements of your array pointed to by 'a' and 'b', and perform the comparison}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08735}08735 \textcolor{comment}{// on those. OR you can use one or more statements; first say '0;', then}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08736}08736 \textcolor{comment}{// write whatever code you want, and compute the result into a variable 'c'.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08737}08737 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08738}08738 \textcolor{preprocessor}{\#define stb\_declare\_sort(FUNCNAME, TYPE)    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08739}08739 \textcolor{preprocessor}{                       void FUNCNAME(TYPE *p, int n)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08740}08740 \textcolor{preprocessor}{\#define stb\_define\_sort(FUNCNAME,TYPE,COMPARE) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08741}08741 \textcolor{preprocessor}{                       stb\_\_define\_sort(       void, FUNCNAME,TYPE,COMPARE)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08742}08742 \textcolor{preprocessor}{\#define stb\_define\_sort\_static(FUNCNAME,TYPE,COMPARE) \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08743}08743 \textcolor{preprocessor}{                       stb\_\_define\_sort(static void, FUNCNAME,TYPE,COMPARE)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08744}08744 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08745}08745 \textcolor{preprocessor}{\#define stb\_\_define\_sort(MODE, FUNCNAME, TYPE, COMPARE)                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08746}08746 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08747}08747 \textcolor{preprocessor}{static void STB\_(FUNCNAME,\_ins\_sort)(TYPE *p, int n)                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08748}08748 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08749}08749 \textcolor{preprocessor}{   int i,j;                                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08750}08750 \textcolor{preprocessor}{   for (i=1; i < n; ++i) \{                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08751}08751 \textcolor{preprocessor}{      TYPE t = p[i], *a = \&t;                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08752}08752 \textcolor{preprocessor}{      j = i;                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08753}08753 \textcolor{preprocessor}{      while (j > 0) \{                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08754}08754 \textcolor{preprocessor}{         TYPE *b = \&p[j-\/1];                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08755}08755 \textcolor{preprocessor}{         int c = COMPARE;                                                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08756}08756 \textcolor{preprocessor}{         if (!c) break;                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08757}08757 \textcolor{preprocessor}{         p[j] = p[j-\/1];                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08758}08758 \textcolor{preprocessor}{         -\/-\/j;                                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08759}08759 \textcolor{preprocessor}{      \}                                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08760}08760 \textcolor{preprocessor}{      if (i != j)                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08761}08761 \textcolor{preprocessor}{         p[j] = t;                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08762}08762 \textcolor{preprocessor}{   \}                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08763}08763 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08764}08764 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08765}08765 \textcolor{preprocessor}{static void STB\_(FUNCNAME,\_quicksort)(TYPE *p, int n)                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08766}08766 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08767}08767 \textcolor{preprocessor}{   }\textcolor{comment}{/* threshold for transitioning to insertion sort */}\textcolor{preprocessor}{                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08768}08768 \textcolor{preprocessor}{   while (n > 12) \{                                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08769}08769 \textcolor{preprocessor}{      TYPE *a,*b,t;                                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08770}08770 \textcolor{preprocessor}{      int c01,c12,c,m,i,j;                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08771}08771 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08772}08772 \textcolor{preprocessor}{      }\textcolor{comment}{/* compute median of three */}\textcolor{preprocessor}{                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08773}08773 \textcolor{preprocessor}{      m = n >> 1;                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08774}08774 \textcolor{preprocessor}{      a = \&p[0];                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08775}08775 \textcolor{preprocessor}{      b = \&p[m];                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08776}08776 \textcolor{preprocessor}{      c = COMPARE;                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08777}08777 \textcolor{preprocessor}{      c01 = c;                                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08778}08778 \textcolor{preprocessor}{      a = \&p[m];                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08779}08779 \textcolor{preprocessor}{      b = \&p[n-\/1];                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08780}08780 \textcolor{preprocessor}{      c = COMPARE;                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08781}08781 \textcolor{preprocessor}{      c12 = c;                                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08782}08782 \textcolor{preprocessor}{      }\textcolor{comment}{/* if 0 >= mid >= end, or 0 < mid < end, then use mid */}\textcolor{preprocessor}{                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08783}08783 \textcolor{preprocessor}{      if (c01 != c12) \{                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08784}08784 \textcolor{preprocessor}{         }\textcolor{comment}{/* otherwise, we'll need to swap something else to middle */}\textcolor{preprocessor}{         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08785}08785 \textcolor{preprocessor}{         int z;                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08786}08786 \textcolor{preprocessor}{         a = \&p[0];                                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08787}08787 \textcolor{preprocessor}{         b = \&p[n-\/1];                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08788}08788 \textcolor{preprocessor}{         c = COMPARE;                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08789}08789 \textcolor{preprocessor}{         }\textcolor{comment}{/* 0>mid \&\& mid<n:  0>n => n; 0<n => 0 */}\textcolor{preprocessor}{                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08790}08790 \textcolor{preprocessor}{         }\textcolor{comment}{/* 0<mid \&\& mid>n:  0>n => 0; 0<n => n */}\textcolor{preprocessor}{                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08791}08791 \textcolor{preprocessor}{         z = (c == c12) ? 0 : n-\/1;                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08792}08792 \textcolor{preprocessor}{         t = p[z];                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08793}08793 \textcolor{preprocessor}{         p[z] = p[m];                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08794}08794 \textcolor{preprocessor}{         p[m] = t;                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08795}08795 \textcolor{preprocessor}{      \}                                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08796}08796 \textcolor{preprocessor}{      }\textcolor{comment}{/* now p[m] is the median-\/of-\/three */}\textcolor{preprocessor}{                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08797}08797 \textcolor{preprocessor}{      }\textcolor{comment}{/* swap it to the beginning so it won't move around */}\textcolor{preprocessor}{                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08798}08798 \textcolor{preprocessor}{      t = p[0];                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08799}08799 \textcolor{preprocessor}{      p[0] = p[m];                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08800}08800 \textcolor{preprocessor}{      p[m] = t;                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08801}08801 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08802}08802 \textcolor{preprocessor}{      }\textcolor{comment}{/* partition loop */}\textcolor{preprocessor}{                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08803}08803 \textcolor{preprocessor}{      i=1;                                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08804}08804 \textcolor{preprocessor}{      j=n-\/1;                                                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08805}08805 \textcolor{preprocessor}{      for(;;) \{                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08806}08806 \textcolor{preprocessor}{         }\textcolor{comment}{/* handling of equality is crucial here */}\textcolor{preprocessor}{                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08807}08807 \textcolor{preprocessor}{         }\textcolor{comment}{/* for sentinels \& efficiency with duplicates */}\textcolor{preprocessor}{                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08808}08808 \textcolor{preprocessor}{         b = \&p[0];                                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08809}08809 \textcolor{preprocessor}{         for (;;++i) \{                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08810}08810 \textcolor{preprocessor}{            a=\&p[i];                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08811}08811 \textcolor{preprocessor}{            c = COMPARE;                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08812}08812 \textcolor{preprocessor}{            if (!c) break;                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08813}08813 \textcolor{preprocessor}{         \}                                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08814}08814 \textcolor{preprocessor}{         a = \&p[0];                                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08815}08815 \textcolor{preprocessor}{         for (;;-\/-\/j) \{                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08816}08816 \textcolor{preprocessor}{            b=\&p[j];                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08817}08817 \textcolor{preprocessor}{            c = COMPARE;                                                      \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08818}08818 \textcolor{preprocessor}{            if (!c) break;                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08819}08819 \textcolor{preprocessor}{         \}                                                                    \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08820}08820 \textcolor{preprocessor}{         }\textcolor{comment}{/* make sure we haven't crossed */}\textcolor{preprocessor}{                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08821}08821 \textcolor{preprocessor}{         if (i >= j) break;                                                   \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08822}08822 \textcolor{preprocessor}{         t = p[i];                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08823}08823 \textcolor{preprocessor}{         p[i] = p[j];                                                         \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08824}08824 \textcolor{preprocessor}{         p[j] = t;                                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08825}08825 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08826}08826 \textcolor{preprocessor}{         ++i;                                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08827}08827 \textcolor{preprocessor}{         -\/-\/j;                                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08828}08828 \textcolor{preprocessor}{      \}                                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08829}08829 \textcolor{preprocessor}{      }\textcolor{comment}{/* recurse on smaller side, iterate on larger */}\textcolor{preprocessor}{                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08830}08830 \textcolor{preprocessor}{      if (j < (n-\/i)) \{                                                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08831}08831 \textcolor{preprocessor}{         STB\_(FUNCNAME,\_quicksort)(p,j);                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08832}08832 \textcolor{preprocessor}{         p = p+i;                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08833}08833 \textcolor{preprocessor}{         n = n-\/i;                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08834}08834 \textcolor{preprocessor}{      \} else \{                                                                \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08835}08835 \textcolor{preprocessor}{         STB\_(FUNCNAME,\_quicksort)(p+i, n-\/i);                                  \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08836}08836 \textcolor{preprocessor}{         n = j;                                                               \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08837}08837 \textcolor{preprocessor}{      \}                                                                       \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08838}08838 \textcolor{preprocessor}{   \}                                                                          \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08839}08839 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08840}08840 \textcolor{preprocessor}{                                                                              \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08841}08841 \textcolor{preprocessor}{MODE FUNCNAME(TYPE *p, int n)                                                 \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08842}08842 \textcolor{preprocessor}{\{                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08843}08843 \textcolor{preprocessor}{   STB\_(FUNCNAME, \_quicksort)(p, n);                                           \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08844}08844 \textcolor{preprocessor}{   STB\_(FUNCNAME, \_ins\_sort)(p, n);                                            \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08845}08845 \textcolor{preprocessor}{\}                                                                             \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08846}08846 \textcolor{preprocessor}{}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08847}08847 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08849}08849 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08850}08850 \textcolor{comment}{//      stb\_bitset   an array of booleans indexed by integers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08851}08851 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08852}08852 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08853}08853 \textcolor{keyword}{typedef} stb\_uint32 stb\_bitset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08854}08854 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08855}08855 STB\_EXTERN  stb\_bitset *stb\_bitset\_new(\textcolor{keywordtype}{int} \mbox{\hyperlink{classvalue}{value}}, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08856}08856 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08857}08857 \textcolor{preprocessor}{\#define stb\_bitset\_clearall(arr,len)     (memset(arr,   0, 4 * (len)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08858}08858 \textcolor{preprocessor}{\#define stb\_bitset\_setall(arr,len)       (memset(arr, 255, 4 * (len)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08859}08859 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08860}08860 \textcolor{preprocessor}{\#define stb\_bitset\_setbit(arr,n)         ((arr)[(n) >> 5] |=  (1 << (n \& 31)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08861}08861 \textcolor{preprocessor}{\#define stb\_bitset\_clearbit(arr,n)       ((arr)[(n) >> 5] \&= \string~(1 << (n \& 31)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08862}08862 \textcolor{preprocessor}{\#define stb\_bitset\_testbit(arr,n)        ((arr)[(n) >> 5] \&   (1 << (n \& 31)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08863}08863 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08864}08864 STB\_EXTERN  stb\_bitset *stb\_bitset\_union(stb\_bitset *p0, stb\_bitset *p1, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08865}08865 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08866}08866 STB\_EXTERN  \textcolor{keywordtype}{int} *stb\_bitset\_getlist(stb\_bitset *out, \textcolor{keywordtype}{int} start, \textcolor{keywordtype}{int} end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08867}08867 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08868}08868 STB\_EXTERN  \textcolor{keywordtype}{int}  stb\_bitset\_eq(stb\_bitset *p0, stb\_bitset *p1, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08869}08869 STB\_EXTERN  \textcolor{keywordtype}{int}  stb\_bitset\_disjoint(stb\_bitset *p0, stb\_bitset *p1, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08870}08870 STB\_EXTERN  \textcolor{keywordtype}{int}  stb\_bitset\_disjoint\_0(stb\_bitset *p0, stb\_bitset *p1, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08871}08871 STB\_EXTERN  \textcolor{keywordtype}{int}  stb\_bitset\_subset(stb\_bitset *bigger, stb\_bitset *smaller, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08872}08872 STB\_EXTERN  \textcolor{keywordtype}{int}  stb\_bitset\_unioneq\_changed(stb\_bitset *p0, stb\_bitset *p1, \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08873}08873 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08874}08874 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08875}08875 \textcolor{keywordtype}{int} stb\_bitset\_eq(stb\_bitset *p0, stb\_bitset *p1, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08876}08876 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08877}08877    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08878}08878    \textcolor{keywordflow}{for} (i=0; i < len; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08879}08879       \textcolor{keywordflow}{if} (p0[i] != p1[i]) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08880}08880    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08881}08881 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08882}08882 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08883}08883 \textcolor{keywordtype}{int} stb\_bitset\_disjoint(stb\_bitset *p0, stb\_bitset *p1, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08884}08884 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08885}08885    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08886}08886    \textcolor{keywordflow}{for} (i=0; i < len; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08887}08887       \textcolor{keywordflow}{if} (p0[i] \& p1[i]) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08888}08888    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08889}08889 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08890}08890 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08891}08891 \textcolor{keywordtype}{int} stb\_bitset\_disjoint\_0(stb\_bitset *p0, stb\_bitset *p1, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08892}08892 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08893}08893    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08894}08894    \textcolor{keywordflow}{for} (i=0; i < len; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08895}08895       \textcolor{keywordflow}{if} ((p0[i] | p1[i]) != 0xffffffff) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08896}08896    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08897}08897 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08898}08898 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08899}08899 \textcolor{keywordtype}{int} stb\_bitset\_subset(stb\_bitset *bigger, stb\_bitset *smaller, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08900}08900 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08901}08901    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08902}08902    \textcolor{keywordflow}{for} (i=0; i < len; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08903}08903       \textcolor{keywordflow}{if} ((bigger[i] \& smaller[i]) != smaller[i]) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08904}08904    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08905}08905 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08906}08906 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08907}08907 stb\_bitset *stb\_bitset\_union(stb\_bitset *p0, stb\_bitset *p1, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08908}08908 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08909}08909    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08910}08910    stb\_bitset *d = (stb\_bitset *) malloc(\textcolor{keyword}{sizeof}(*d) * len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08911}08911    \textcolor{keywordflow}{for} (i=0; i < len; ++i) d[i] = p0[i] | p1[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08912}08912    \textcolor{keywordflow}{return} d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08913}08913 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08914}08914 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08915}08915 \textcolor{keywordtype}{int} stb\_bitset\_unioneq\_changed(stb\_bitset *p0, stb\_bitset *p1, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08916}08916 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08917}08917    \textcolor{keywordtype}{int} i, changed=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08918}08918    \textcolor{keywordflow}{for} (i=0; i < len; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08919}08919       stb\_bitset d = p0[i] | p1[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08920}08920       \textcolor{keywordflow}{if} (d != p0[i]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08921}08921          p0[i] = d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08922}08922          changed = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08923}08923       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08924}08924    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08925}08925    \textcolor{keywordflow}{return} changed;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08926}08926 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08927}08927 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08928}08928 stb\_bitset *stb\_bitset\_new(\textcolor{keywordtype}{int} \mbox{\hyperlink{classvalue}{value}}, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08929}08929 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08930}08930    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08931}08931    stb\_bitset *d = (stb\_bitset *) malloc(\textcolor{keyword}{sizeof}(*d) * len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08932}08932    \textcolor{keywordflow}{if} (\mbox{\hyperlink{classvalue}{value}}) \mbox{\hyperlink{classvalue}{value}} = 0xffffffff;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08933}08933    \textcolor{keywordflow}{for} (i=0; i < len; ++i) d[i] = \mbox{\hyperlink{classvalue}{value}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08934}08934    \textcolor{keywordflow}{return} d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08935}08935 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08936}08936 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08937}08937 \textcolor{keywordtype}{int} *stb\_bitset\_getlist(stb\_bitset *out, \textcolor{keywordtype}{int} start, \textcolor{keywordtype}{int} end)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08938}08938 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08939}08939    \textcolor{keywordtype}{int} *list = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08940}08940    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08941}08941    \textcolor{keywordflow}{for} (i=start; i < end; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08942}08942       \textcolor{keywordflow}{if} (stb\_bitset\_testbit(out, i))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08943}08943          stb\_arr\_push(list, i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08944}08944    \textcolor{keywordflow}{return} list;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08945}08945 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08946}08946 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08947}08947 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08949}08949 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08950}08950 \textcolor{comment}{//      stb\_wordwrap    quality word-\/wrapping for fixed-\/width fonts}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08951}08951 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08952}08952 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08953}08953 STB\_EXTERN \textcolor{keywordtype}{int} stb\_wordwrap(\textcolor{keywordtype}{int} *pairs, \textcolor{keywordtype}{int} pair\_max, \textcolor{keywordtype}{int} count, \textcolor{keywordtype}{char} *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08954}08954 STB\_EXTERN \textcolor{keywordtype}{int} *stb\_wordwrapalloc(\textcolor{keywordtype}{int} count, \textcolor{keywordtype}{char} *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08955}08955 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08956}08956 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08957}08957 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08958}08958 \textcolor{keywordtype}{int} stb\_wordwrap(\textcolor{keywordtype}{int} *pairs, \textcolor{keywordtype}{int} pair\_max, \textcolor{keywordtype}{int} count, \textcolor{keywordtype}{char} *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08959}08959 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08960}08960    \textcolor{keywordtype}{int} n=0,i=0, start=0,nonwhite=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08961}08961    \textcolor{keywordflow}{if} (pairs == NULL) pair\_max = 0x7ffffff0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08962}08962    \textcolor{keywordflow}{else} pair\_max *= 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08963}08963    \textcolor{comment}{// parse}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08964}08964    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08965}08965       \textcolor{keywordtype}{int} s=i; \textcolor{comment}{// first whitespace char; last nonwhite+1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08966}08966       \textcolor{keywordtype}{int} w;   \textcolor{comment}{// word start}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08967}08967       \textcolor{comment}{// accept whitespace}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08968}08968       \textcolor{keywordflow}{while} (isspace(str[i])) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08969}08969          \textcolor{keywordflow}{if} (str[i] == \textcolor{charliteral}{'\(\backslash\)n'} || str[i] == \textcolor{charliteral}{'\(\backslash\)r'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08970}08970             \textcolor{keywordflow}{if} (str[i] + str[i+1] == \textcolor{charliteral}{'\(\backslash\)n'} + \textcolor{charliteral}{'\(\backslash\)r'}) ++i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08971}08971             \textcolor{keywordflow}{if} (n >= pair\_max) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08972}08972             \textcolor{keywordflow}{if} (pairs) pairs[n] = start, pairs[n+1] = s-\/start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08973}08973             n += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08974}08974             nonwhite=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08975}08975             start = i+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08976}08976             s = start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08977}08977          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08978}08978          ++i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08979}08979       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08980}08980       \textcolor{keywordflow}{if} (i >= start+count) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08981}08981          \textcolor{comment}{// we've gone off the end using whitespace}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08982}08982          \textcolor{keywordflow}{if} (nonwhite) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08983}08983             \textcolor{keywordflow}{if} (n >= pair\_max) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08984}08984             \textcolor{keywordflow}{if} (pairs) pairs[n] = start, pairs[n+1] = s-\/start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08985}08985             n += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08986}08986             start = s = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08987}08987             nonwhite=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08988}08988          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08989}08989             \textcolor{comment}{// output all the whitespace}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08990}08990             \textcolor{keywordflow}{while} (i >= start+count) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08991}08991                \textcolor{keywordflow}{if} (n >= pair\_max) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08992}08992                \textcolor{keywordflow}{if} (pairs) pairs[n] = start, pairs[n+1] = count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08993}08993                n += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08994}08994                start += count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08995}08995             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08996}08996             s = start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08997}08997          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08998}08998       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l08999}08999 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09000}09000       \textcolor{keywordflow}{if} (str[i] == 0) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09001}09001       \textcolor{comment}{// now scan out a word and see if it fits}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09002}09002       w = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09003}09003       \textcolor{keywordflow}{while} (str[i] \&\& !isspace(str[i])) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09004}09004          ++i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09005}09005       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09006}09006       \textcolor{comment}{// wrapped?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09007}09007       \textcolor{keywordflow}{if} (i > start + count) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09008}09008          \textcolor{comment}{// huge?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09009}09009          \textcolor{keywordflow}{if} (i-\/s <= count) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09010}09010             \textcolor{keywordflow}{if} (n >= pair\_max) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09011}09011             \textcolor{keywordflow}{if} (pairs) pairs[n] = start, pairs[n+1] = s-\/start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09012}09012             n += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09013}09013             start = w;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09014}09014          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09015}09015             \textcolor{comment}{// This word is longer than one line. If we wrap it onto N lines}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09016}09016             \textcolor{comment}{// there are leftover chars. do those chars fit on the cur line?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09017}09017             \textcolor{comment}{// But if we have leading whitespace, we force it to start here.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09018}09018             \textcolor{keywordflow}{if} ((w-\/start) + ((i-\/w) \% count) <= count || !nonwhite) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09019}09019                \textcolor{comment}{// output a full line}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09020}09020                \textcolor{keywordflow}{if} (n >= pair\_max) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09021}09021                \textcolor{keywordflow}{if} (pairs) pairs[n] = start, pairs[n+1] = count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09022}09022                n += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09023}09023                start += count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09024}09024                w = start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09025}09025             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09026}09026                \textcolor{comment}{// output a partial line, trimming trailing whitespace}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09027}09027                \textcolor{keywordflow}{if} (s != start) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09028}09028                   \textcolor{keywordflow}{if} (n >= pair\_max) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09029}09029                   \textcolor{keywordflow}{if} (pairs) pairs[n] = start, pairs[n+1] = s-\/start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09030}09030                   n += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09031}09031                   start = w;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09032}09032                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09033}09033             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09034}09034             \textcolor{comment}{// now output full lines as needed}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09035}09035             \textcolor{keywordflow}{while} (start + count <= i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09036}09036                \textcolor{keywordflow}{if} (n >= pair\_max) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09037}09037                \textcolor{keywordflow}{if} (pairs) pairs[n] = start, pairs[n+1] = count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09038}09038                n += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09039}09039                start += count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09040}09040             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09041}09041          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09042}09042       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09043}09043       nonwhite=1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09044}09044    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09045}09045    \textcolor{keywordflow}{if} (start < i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09046}09046       \textcolor{keywordflow}{if} (n >= pair\_max) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09047}09047       \textcolor{keywordflow}{if} (pairs) pairs[n] = start, pairs[n+1] = i-\/start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09048}09048       n += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09049}09049    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09050}09050    \textcolor{keywordflow}{return} n>>1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09051}09051 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09052}09052 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09053}09053 \textcolor{keywordtype}{int} *stb\_wordwrapalloc(\textcolor{keywordtype}{int} count, \textcolor{keywordtype}{char} *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09054}09054 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09055}09055    \textcolor{keywordtype}{int} n = stb\_wordwrap(NULL,0,count,str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09056}09056    \textcolor{keywordtype}{int} *z = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09057}09057    stb\_arr\_setlen(z, n*2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09058}09058    stb\_wordwrap(z, n, count, str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09059}09059    \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09060}09060 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09061}09061 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09062}09062 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09063}09063 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09065}09065 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09066}09066 \textcolor{comment}{//         stb\_match:    wildcards and regexping}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09067}09067 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09068}09068 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09069}09069 STB\_EXTERN \textcolor{keywordtype}{int} stb\_wildmatch (\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09070}09070 STB\_EXTERN \textcolor{keywordtype}{int} stb\_wildmatchi(\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09071}09071 STB\_EXTERN \textcolor{keywordtype}{int} stb\_wildfind  (\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09072}09072 STB\_EXTERN \textcolor{keywordtype}{int} stb\_wildfindi (\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09073}09073 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09074}09074 STB\_EXTERN \textcolor{keywordtype}{int} stb\_regex(\textcolor{keywordtype}{char} *regex, \textcolor{keywordtype}{char} *candidate);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09075}09075 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09076}09076 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_matcher stb\_matcher;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09077}09077 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09078}09078 STB\_EXTERN stb\_matcher *stb\_regex\_matcher(\textcolor{keywordtype}{char} *regex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09079}09079 STB\_EXTERN \textcolor{keywordtype}{int} stb\_matcher\_match(stb\_matcher *m, \textcolor{keywordtype}{char} *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09080}09080 STB\_EXTERN \textcolor{keywordtype}{int} stb\_matcher\_find(stb\_matcher *m, \textcolor{keywordtype}{char} *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09081}09081 STB\_EXTERN \textcolor{keywordtype}{void} stb\_matcher\_free(stb\_matcher *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09082}09082 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09083}09083 STB\_EXTERN stb\_matcher *stb\_lex\_matcher(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09084}09084 STB\_EXTERN \textcolor{keywordtype}{int} stb\_lex\_item(stb\_matcher *m, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{int} \mbox{\hyperlink{structresult}{result}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09085}09085 STB\_EXTERN \textcolor{keywordtype}{int} stb\_lex\_item\_wild(stb\_matcher *matcher, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *regex, \textcolor{keywordtype}{int} \mbox{\hyperlink{structresult}{result}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09086}09086 STB\_EXTERN \textcolor{keywordtype}{int} stb\_lex(stb\_matcher *m, \textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{int} *len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09087}09087 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09088}09088 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09089}09089 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09090}09090 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09091}09091 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09092}09092 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_match\_qstring(\textcolor{keywordtype}{char} *candidate, \textcolor{keywordtype}{char} *qstring, \textcolor{keywordtype}{int} qlen, \textcolor{keywordtype}{int} insensitive)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09093}09093 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09094}09094    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09095}09095    \textcolor{keywordflow}{if} (insensitive) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09096}09096       \textcolor{keywordflow}{for} (i=0; i < qlen; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09097}09097          \textcolor{keywordflow}{if} (qstring[i] == \textcolor{charliteral}{'?'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09098}09098             \textcolor{keywordflow}{if} (!candidate[i]) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09099}09099          \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09100}09100             \textcolor{keywordflow}{if} (tolower(qstring[i]) != tolower(candidate[i]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09101}09101                \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09102}09102    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09103}09103       \textcolor{keywordflow}{for} (i=0; i < qlen; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09104}09104          \textcolor{keywordflow}{if} (qstring[i] == \textcolor{charliteral}{'?'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09105}09105             \textcolor{keywordflow}{if} (!candidate[i]) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09106}09106          \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09107}09107             \textcolor{keywordflow}{if} (qstring[i] != candidate[i])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09108}09108                \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09109}09109    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09110}09110    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09111}09111 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09112}09112 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09113}09113 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_find\_qstring(\textcolor{keywordtype}{char} *candidate, \textcolor{keywordtype}{char} *qstring, \textcolor{keywordtype}{int} qlen, \textcolor{keywordtype}{int} insensitive)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09114}09114 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09115}09115    \textcolor{keywordtype}{char} c;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09116}09116 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09117}09117    \textcolor{keywordtype}{int} offset=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09118}09118    \textcolor{keywordflow}{while} (*qstring == \textcolor{charliteral}{'?'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09119}09119       ++qstring;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09120}09120       -\/-\/qlen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09121}09121       ++candidate;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09122}09122       \textcolor{keywordflow}{if} (qlen == 0) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09123}09123       \textcolor{keywordflow}{if} (*candidate == 0) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09124}09124    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09125}09125 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09126}09126    c = *qstring++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09127}09127    -\/-\/qlen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09128}09128    \textcolor{keywordflow}{if} (insensitive) c = tolower(c);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09129}09129 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09130}09130    \textcolor{keywordflow}{while} (candidate[offset]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09131}09131       \textcolor{keywordflow}{if} (c == (insensitive ? tolower(candidate[offset]) : candidate[offset]))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09132}09132          \textcolor{keywordflow}{if} (stb\_\_match\_qstring(candidate+offset+1, qstring, qlen, insensitive))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09133}09133             \textcolor{keywordflow}{return} offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09134}09134       ++offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09135}09135    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09136}09136 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09137}09137    \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09138}09138 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09139}09139 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09140}09140 \textcolor{keywordtype}{int} stb\_\_wildmatch\_raw2(\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate, \textcolor{keywordtype}{int} search, \textcolor{keywordtype}{int} insensitive)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09141}09141 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09142}09142    \textcolor{keywordtype}{int} where=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09143}09143    \textcolor{keywordtype}{int} start = -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09144}09144 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09145}09145    \textcolor{keywordflow}{if} (!search) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09146}09146       \textcolor{comment}{// parse to first '*'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09147}09147       \textcolor{keywordflow}{if} (*expr != \textcolor{charliteral}{'*'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09148}09148          start = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09149}09149       \textcolor{keywordflow}{while} (*expr != \textcolor{charliteral}{'*'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09150}09150          \textcolor{keywordflow}{if} (!*expr)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09151}09151             \textcolor{keywordflow}{return} *candidate == 0 ? 0 : -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09152}09152          \textcolor{keywordflow}{if} (*expr == \textcolor{charliteral}{'?'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09153}09153             \textcolor{keywordflow}{if} (!*candidate) \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09154}09154          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09155}09155             \textcolor{keywordflow}{if} (insensitive) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09156}09156                \textcolor{keywordflow}{if} (tolower(*candidate) != tolower(*expr))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09157}09157                   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09158}09158             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09159}09159                \textcolor{keywordflow}{if} (*candidate != *expr)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09160}09160                   \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09161}09161          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09162}09162          ++candidate, ++expr, ++where;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09163}09163       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09164}09164    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09165}09165       \textcolor{comment}{// 0-\/length search string}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09166}09166       \textcolor{keywordflow}{if} (!*expr)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09167}09167          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09168}09168    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09169}09169 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09170}09170    assert(search || *expr == \textcolor{charliteral}{'*'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09171}09171    \textcolor{keywordflow}{if} (!search)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09172}09172       ++expr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09173}09173 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09174}09174    \textcolor{comment}{// implicit '*' at this point}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09175}09175 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09176}09176    \textcolor{keywordflow}{while} (*expr) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09177}09177       \textcolor{keywordtype}{int} o=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09178}09178       \textcolor{comment}{// combine redundant * characters}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09179}09179       \textcolor{keywordflow}{while} (expr[0] == \textcolor{charliteral}{'*'}) ++expr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09180}09180 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09181}09181       \textcolor{comment}{// ok, at this point, expr[-\/1] == '*',}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09182}09182       \textcolor{comment}{// and expr[0] != '*'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09183}09183 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09184}09184       \textcolor{keywordflow}{if} (!expr[0]) \textcolor{keywordflow}{return} start >= 0 ? start : 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09185}09185 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09186}09186       \textcolor{comment}{// now find next '*'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09187}09187       o = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09188}09188       \textcolor{keywordflow}{while} (expr[o] != \textcolor{charliteral}{'*'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09189}09189          \textcolor{keywordflow}{if} (expr[o] == 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09190}09190             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09191}09191          ++o;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09192}09192       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09193}09193       \textcolor{comment}{// if no '*', scan to end, then match at end}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09194}09194       \textcolor{keywordflow}{if} (expr[o] == 0 \&\& !search) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09195}09195          \textcolor{keywordtype}{int} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09196}09196          \textcolor{keywordflow}{for} (z=0; z < o; ++z)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09197}09197             \textcolor{keywordflow}{if} (candidate[z] == 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09198}09198                \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09199}09199          \textcolor{keywordflow}{while} (candidate[z])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09200}09200             ++z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09201}09201          \textcolor{comment}{// ok, now check if they match}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09202}09202          \textcolor{keywordflow}{if} (stb\_\_match\_qstring(candidate+z-\/o, expr, o, insensitive))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09203}09203             \textcolor{keywordflow}{return} start >= 0 ? start : 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09204}09204          \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09205}09205       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09206}09206          \textcolor{comment}{// if yes '*', then do stb\_\_find\_qmatch on the intervening chars}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09207}09207          \textcolor{keywordtype}{int} n = stb\_\_find\_qstring(candidate, expr, o, insensitive);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09208}09208          \textcolor{keywordflow}{if} (n < 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09209}09209             \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09210}09210          \textcolor{keywordflow}{if} (start < 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09211}09211             start = where + n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09212}09212          expr += o;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09213}09213          candidate += n+o;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09214}09214       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09215}09215 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09216}09216       \textcolor{keywordflow}{if} (*expr == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09217}09217          assert(search);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09218}09218          \textcolor{keywordflow}{return} start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09219}09219       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09220}09220 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09221}09221       assert(*expr == \textcolor{charliteral}{'*'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09222}09222       ++expr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09223}09223    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09224}09224 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09225}09225    \textcolor{keywordflow}{return} start >= 0 ? start : 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09226}09226 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09227}09227 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09228}09228 \textcolor{keywordtype}{int} stb\_\_wildmatch\_raw(\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate, \textcolor{keywordtype}{int} search, \textcolor{keywordtype}{int} insensitive)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09229}09229 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09230}09230    \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09231}09231    \textcolor{comment}{// handle multiple search strings}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09232}09232    \textcolor{keywordtype}{char} *s = strchr(expr, \textcolor{charliteral}{';'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09233}09233    \textcolor{keywordtype}{char} *last = expr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09234}09234    \textcolor{keywordflow}{while} (s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09235}09235       \textcolor{keywordtype}{int} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09236}09236       \textcolor{comment}{// need to allow for non-\/writeable strings... assume they're small}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09237}09237       \textcolor{keywordflow}{if} (s -\/ last < 256) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09238}09238          stb\_strncpy(\mbox{\hyperlink{classbuffer}{buffer}}, last, (\textcolor{keywordtype}{int}) (s-\/last+1));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09239}09239          \mbox{\hyperlink{classbuffer}{buffer}}[s-\/last] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09240}09240          z = stb\_\_wildmatch\_raw2(\mbox{\hyperlink{classbuffer}{buffer}}, candidate, search, insensitive);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09241}09241       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09242}09242          *s = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09243}09243          z = stb\_\_wildmatch\_raw2(last, candidate, search, insensitive);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09244}09244          *s = \textcolor{charliteral}{';'};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09245}09245       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09246}09246       \textcolor{keywordflow}{if} (z >= 0) \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09247}09247       last = s+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09248}09248       s = strchr(last, \textcolor{charliteral}{';'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09249}09249    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09250}09250    \textcolor{keywordflow}{return} stb\_\_wildmatch\_raw2(last, candidate, search, insensitive);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09251}09251 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09252}09252 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09253}09253 \textcolor{keywordtype}{int} stb\_wildmatch(\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09254}09254 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09255}09255    \textcolor{keywordflow}{return} stb\_\_wildmatch\_raw(expr, candidate, 0,0) >= 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09256}09256 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09257}09257 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09258}09258 \textcolor{keywordtype}{int} stb\_wildmatchi(\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09259}09259 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09260}09260    \textcolor{keywordflow}{return} stb\_\_wildmatch\_raw(expr, candidate, 0,1) >= 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09261}09261 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09262}09262 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09263}09263 \textcolor{keywordtype}{int} stb\_wildfind(\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09264}09264 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09265}09265    \textcolor{keywordflow}{return} stb\_\_wildmatch\_raw(expr, candidate, 1,0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09266}09266 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09267}09267 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09268}09268 \textcolor{keywordtype}{int} stb\_wildfindi(\textcolor{keywordtype}{char} *expr, \textcolor{keywordtype}{char} *candidate)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09269}09269 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09270}09270    \textcolor{keywordflow}{return} stb\_\_wildmatch\_raw(expr, candidate, 1,1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09271}09271 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09272}09272 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09273}09273 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09274}09274 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09275}09275    stb\_int16 transition[256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09276}09276 \} stb\_dfa;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09277}09277 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09278}09278 \textcolor{comment}{// an NFA node represents a state you're in; it then has}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09279}09279 \textcolor{comment}{// an arbitrary number of edges dangling off of it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09280}09280 \textcolor{comment}{// note this isn't utf8-\/y}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09281}09281 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09282}09282 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09283}09283    stb\_int16  match; \textcolor{comment}{// character/set to match}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09284}09284    stb\_uint16 node;  \textcolor{comment}{// output node to go to}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09285}09285 \} stb\_nfa\_edge;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09286}09286 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09287}09287 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09288}09288 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09289}09289    stb\_int16 goal;   \textcolor{comment}{// does reaching this win the prize?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09290}09290    stb\_uint8 active; \textcolor{comment}{// is this in the active list}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09291}09291    stb\_nfa\_edge *out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09292}09292    stb\_uint16 *eps;  \textcolor{comment}{// list of epsilon closures}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09293}09293 \} stb\_nfa\_node;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09294}09294 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09295}09295 \textcolor{preprocessor}{\#define STB\_\_DFA\_UNDEF  -\/1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09296}09296 \textcolor{preprocessor}{\#define STB\_\_DFA\_GOAL   -\/2}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09297}09297 \textcolor{preprocessor}{\#define STB\_\_DFA\_END    -\/3}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09298}09298 \textcolor{preprocessor}{\#define STB\_\_DFA\_MGOAL  -\/4}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09299}09299 \textcolor{preprocessor}{\#define STB\_\_DFA\_VALID  0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09300}09300 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09301}09301 \textcolor{preprocessor}{\#define STB\_\_NFA\_STOP\_GOAL -\/1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09302}09302 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09303}09303 \textcolor{comment}{// compiled regexp}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09304}09304 \textcolor{keyword}{struct }stb\_matcher}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09305}09305 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09306}09306    stb\_uint16 start\_node;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09307}09307    stb\_int16 dfa\_start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09308}09308    stb\_uint32 *charset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09309}09309    \textcolor{keywordtype}{int} num\_charset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09310}09310    \textcolor{keywordtype}{int} match\_start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09311}09311    stb\_nfa\_node *nodes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09312}09312    \textcolor{keywordtype}{int} does\_lex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09313}09313 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09314}09314    \textcolor{comment}{// dfa matcher}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09315}09315    stb\_dfa    * dfa;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09316}09316    stb\_uint32 * dfa\_mapping;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09317}09317    stb\_int16  * dfa\_result;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09318}09318    \textcolor{keywordtype}{int} num\_words\_per\_dfa;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09319}09319 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09320}09320 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09321}09321 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_add\_node(stb\_matcher *matcher)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09322}09322 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09323}09323    stb\_nfa\_node z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09324}09324    z.active = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09325}09325    z.eps    = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09326}09326    z.goal   = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09327}09327    z.out    = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09328}09328    stb\_arr\_push(matcher-\/>nodes, z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09329}09329    \textcolor{keywordflow}{return} stb\_arr\_len(matcher-\/>nodes)-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09330}09330 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09331}09331 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09332}09332 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_add\_epsilon(stb\_matcher *matcher, \textcolor{keywordtype}{int} from, \textcolor{keywordtype}{int} to)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09333}09333 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09334}09334    assert(from != to);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09335}09335    \textcolor{keywordflow}{if} (matcher-\/>nodes[from].eps == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09336}09336       stb\_arr\_malloc((\textcolor{keywordtype}{void} **) \&matcher-\/>nodes[from].eps, matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09337}09337    stb\_arr\_push(matcher-\/>nodes[from].eps, to);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09338}09338 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09339}09339 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09340}09340 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_add\_edge(stb\_matcher *matcher, \textcolor{keywordtype}{int} from, \textcolor{keywordtype}{int} to, \textcolor{keywordtype}{int} type)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09341}09341 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09342}09342     stb\_nfa\_edge z = \{ (stb\_int16)type, (stb\_uint16)to \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09343}09343    \textcolor{keywordflow}{if} (matcher-\/>nodes[from].out == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09344}09344       stb\_arr\_malloc((\textcolor{keywordtype}{void} **) \&matcher-\/>nodes[from].out, matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09345}09345    stb\_arr\_push(matcher-\/>nodes[from].out, z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09346}09346 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09347}09347 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09348}09348 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stb\_\_reg\_parse\_alt(stb\_matcher *m, \textcolor{keywordtype}{int} s, \textcolor{keywordtype}{char} *r, stb\_uint16 *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09349}09349 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stb\_\_reg\_parse(stb\_matcher *matcher, \textcolor{keywordtype}{int} start, \textcolor{keywordtype}{char} *regex, stb\_uint16 *end)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09350}09350 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09351}09351    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09352}09352    \textcolor{keywordtype}{int} last\_start = -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09353}09353    stb\_uint16 last\_end = start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09354}09354 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09355}09355    \textcolor{keywordflow}{while} (*regex) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09356}09356       \textcolor{keywordflow}{switch} (*regex) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09357}09357          \textcolor{keywordflow}{case} \textcolor{charliteral}{'('}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09358}09358             last\_start = last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09359}09359             regex = stb\_\_reg\_parse\_alt(matcher, last\_end, regex+1, \&last\_end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09360}09360             \textcolor{keywordflow}{if} (regex == NULL || *regex != \textcolor{charliteral}{')'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09361}09361                \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09362}09362             ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09363}09363             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09364}09364 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09365}09365          \textcolor{keywordflow}{case} \textcolor{charliteral}{'|'}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09366}09366          \textcolor{keywordflow}{case} \textcolor{charliteral}{')'}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09367}09367             *end = last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09368}09368             \textcolor{keywordflow}{return} regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09369}09369 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09370}09370          \textcolor{keywordflow}{case} \textcolor{charliteral}{'?'}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09371}09371             \textcolor{keywordflow}{if} (last\_start < 0) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09372}09372             stb\_\_add\_epsilon(matcher, last\_start, last\_end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09373}09373             ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09374}09374             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09375}09375 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09376}09376          \textcolor{keywordflow}{case} \textcolor{charliteral}{'*'}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09377}09377             \textcolor{keywordflow}{if} (last\_start < 0) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09378}09378             stb\_\_add\_epsilon(matcher, last\_start, last\_end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09379}09379 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09380}09380             \textcolor{comment}{// fall through}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09381}09381 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09382}09382          \textcolor{keywordflow}{case} \textcolor{charliteral}{'+'}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09383}09383             \textcolor{keywordflow}{if} (last\_start < 0) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09384}09384             stb\_\_add\_epsilon(matcher, last\_end, last\_start);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09385}09385             \textcolor{comment}{// prevent links back to last\_end from chaining to last\_start}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09386}09386             n = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09387}09387             stb\_\_add\_epsilon(matcher, last\_end, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09388}09388             last\_end = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09389}09389             ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09390}09390             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09391}09391 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09392}09392          \textcolor{keywordflow}{case} \textcolor{charliteral}{'\{'}:   \textcolor{comment}{// not supported!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09393}09393             \textcolor{comment}{// @TODO: given \{n,m\}, clone last\_start to last\_end m times,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09394}09394             \textcolor{comment}{// and include epsilons from start to first m-\/n blocks}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09395}09395             \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09396}09396 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09397}09397          \textcolor{keywordflow}{case} \textcolor{charliteral}{'\(\backslash\)\(\backslash\)'}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09398}09398             ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09399}09399             \textcolor{keywordflow}{if} (!*regex) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09400}09400 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09401}09401             \textcolor{comment}{// fallthrough}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09402}09402          \textcolor{keywordflow}{default}: \textcolor{comment}{// match exactly this character}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09403}09403             n = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09404}09404             stb\_\_add\_edge(matcher, last\_end, n, *regex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09405}09405             last\_start = last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09406}09406             last\_end = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09407}09407             ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09408}09408             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09409}09409 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09410}09410          \textcolor{keywordflow}{case} \textcolor{charliteral}{'\$'}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09411}09411             n = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09412}09412             stb\_\_add\_edge(matcher, last\_end, n, \textcolor{charliteral}{'\(\backslash\)n'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09413}09413             last\_start = last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09414}09414             last\_end = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09415}09415             ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09416}09416             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09417}09417 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09418}09418          \textcolor{keywordflow}{case} \textcolor{charliteral}{'.'}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09419}09419             n = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09420}09420             stb\_\_add\_edge(matcher, last\_end, n, -\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09421}09421             last\_start = last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09422}09422             last\_end = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09423}09423             ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09424}09424             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09425}09425 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09426}09426          \textcolor{keywordflow}{case} \textcolor{charliteral}{'['}: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09427}09427             stb\_uint8 flags[256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09428}09428             \textcolor{keywordtype}{int} invert = 0,z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09429}09429             ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09430}09430             \textcolor{keywordflow}{if} (matcher-\/>num\_charset == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09431}09431                matcher-\/>charset = (stb\_uint *) stb\_malloc(matcher, \textcolor{keyword}{sizeof}(*matcher-\/>charset) * 256);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09432}09432                memset(matcher-\/>charset, 0, \textcolor{keyword}{sizeof}(*matcher-\/>charset) * 256);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09433}09433             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09434}09434 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09435}09435             memset(flags,0,\textcolor{keyword}{sizeof}(flags));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09436}09436 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09437}09437             \textcolor{comment}{// leading \string^ is special}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09438}09438             \textcolor{keywordflow}{if} (*regex == \textcolor{charliteral}{'\string^'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09439}09439                ++regex, invert = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09440}09440 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09441}09441             \textcolor{comment}{// leading ] is special}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09442}09442             \textcolor{keywordflow}{if} (*regex == \textcolor{charliteral}{']'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09443}09443                flags[(int) \textcolor{charliteral}{']'}] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09444}09444                ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09445}09445             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09446}09446             \textcolor{keywordflow}{while} (*regex != \textcolor{charliteral}{']'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09447}09447                stb\_uint a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09448}09448                \textcolor{keywordflow}{if} (!*regex) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09449}09449                a = *regex++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09450}09450                \textcolor{keywordflow}{if} (regex[0] == \textcolor{charliteral}{'-\/'} \&\& regex[1] != \textcolor{charliteral}{']'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09451}09451                   stb\_uint i,b = regex[1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09452}09452                   regex += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09453}09453                   \textcolor{keywordflow}{if} (b == 0) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09454}09454                   \textcolor{keywordflow}{if} (a > b) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09455}09455                   \textcolor{keywordflow}{for} (i=a; i <= b; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09456}09456                      flags[i] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09457}09457                \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09458}09458                   flags[a] = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09459}09459             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09460}09460             ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09461}09461             \textcolor{keywordflow}{if} (invert) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09462}09462                \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09463}09463                \textcolor{keywordflow}{for} (i=0; i < 256; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09464}09464                   flags[i] = 1-\/flags[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09465}09465             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09466}09466 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09467}09467             \textcolor{comment}{// now check if any existing charset matches}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09468}09468             \textcolor{keywordflow}{for} (z=0; z < matcher-\/>num\_charset; ++z) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09469}09469                \textcolor{keywordtype}{int} i, k[2] = \{ 0, 1 << z\};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09470}09470                \textcolor{keywordflow}{for} (i=0; i < 256; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09471}09471                   \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} f = k[flags[i]];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09472}09472                   \textcolor{keywordflow}{if} ((matcher-\/>charset[i] \& k[1]) != f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09473}09473                      \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09474}09474                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09475}09475                \textcolor{keywordflow}{if} (i == 256) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09476}09476             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09477}09477 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09478}09478             \textcolor{keywordflow}{if} (z == matcher-\/>num\_charset) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09479}09479                \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09480}09480                ++matcher-\/>num\_charset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09481}09481                \textcolor{keywordflow}{if} (matcher-\/>num\_charset > 32) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09482}09482                   assert(0); \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09483}09483                   \textcolor{keywordflow}{return} NULL; \textcolor{comment}{// too many charsets, oops}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09484}09484                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09485}09485                \textcolor{keywordflow}{for} (i=0; i < 256; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09486}09486                   \textcolor{keywordflow}{if} (flags[i])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09487}09487                      matcher-\/>charset[i] |= (1 << z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09488}09488             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09489}09489 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09490}09490             n = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09491}09491             stb\_\_add\_edge(matcher, last\_end, n, -\/2 -\/ z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09492}09492             last\_start = last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09493}09493             last\_end = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09494}09494             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09495}09495          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09496}09496       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09497}09497    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09498}09498    *end = last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09499}09499    \textcolor{keywordflow}{return} regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09500}09500 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09501}09501 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09502}09502 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stb\_\_reg\_parse\_alt(stb\_matcher *matcher, \textcolor{keywordtype}{int} start, \textcolor{keywordtype}{char} *regex, stb\_uint16 *end)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09503}09503 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09504}09504    stb\_uint16 last\_end = start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09505}09505    stb\_uint16 main\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09506}09506 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09507}09507    \textcolor{keywordtype}{int} head, tail;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09508}09508 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09509}09509    head = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09510}09510    stb\_\_add\_epsilon(matcher, start, head);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09511}09511 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09512}09512    regex = stb\_\_reg\_parse(matcher, head, regex, \&last\_end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09513}09513    \textcolor{keywordflow}{if} (regex == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09514}09514    \textcolor{keywordflow}{if} (*regex == 0 || *regex == \textcolor{charliteral}{')'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09515}09515       *end = last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09516}09516       \textcolor{keywordflow}{return} regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09517}09517    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09518}09518 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09519}09519    main\_end = last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09520}09520    tail = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09521}09521 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09522}09522    stb\_\_add\_epsilon(matcher, last\_end, tail);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09523}09523 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09524}09524    \textcolor{comment}{// start alternatives from the same starting node; use epsilon}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09525}09525    \textcolor{comment}{// transitions to combine their endings}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09526}09526    \textcolor{keywordflow}{while}(*regex \&\& *regex != \textcolor{charliteral}{')'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09527}09527       assert(*regex == \textcolor{charliteral}{'|'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09528}09528       head = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09529}09529       stb\_\_add\_epsilon(matcher, start, head);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09530}09530       regex = stb\_\_reg\_parse(matcher, head, regex+1, \&last\_end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09531}09531       \textcolor{keywordflow}{if} (regex == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09532}09532          \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09533}09533       stb\_\_add\_epsilon(matcher, last\_end, tail);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09534}09534    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09535}09535 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09536}09536    *end = tail;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09537}09537    \textcolor{keywordflow}{return} regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09538}09538 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09539}09539 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09540}09540 \textcolor{keyword}{static} \textcolor{keywordtype}{char} *stb\_\_wild\_parse(stb\_matcher *matcher, \textcolor{keywordtype}{int} start, \textcolor{keywordtype}{char} *str, stb\_uint16 *end)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09541}09541 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09542}09542    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09543}09543    stb\_uint16 last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09544}09544 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09545}09545    last\_end = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09546}09546    stb\_\_add\_epsilon(matcher, start, last\_end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09547}09547 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09548}09548    \textcolor{keywordflow}{while} (*str) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09549}09549       \textcolor{keywordflow}{switch} (*str) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09550}09550             \textcolor{comment}{// fallthrough}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09551}09551          \textcolor{keywordflow}{default}: \textcolor{comment}{// match exactly this character}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09552}09552             n = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09553}09553             \textcolor{keywordflow}{if} (toupper(*str) == tolower(*str)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09554}09554                stb\_\_add\_edge(matcher, last\_end, n, *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09555}09555             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09556}09556                stb\_\_add\_edge(matcher, last\_end, n, tolower(*str));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09557}09557                stb\_\_add\_edge(matcher, last\_end, n, toupper(*str));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09558}09558             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09559}09559             last\_end = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09560}09560             ++str;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09561}09561             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09562}09562 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09563}09563          \textcolor{keywordflow}{case} \textcolor{charliteral}{'?'}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09564}09564             n = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09565}09565             stb\_\_add\_edge(matcher, last\_end, n, -\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09566}09566             last\_end = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09567}09567             ++str;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09568}09568             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09569}09569 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09570}09570          \textcolor{keywordflow}{case} \textcolor{charliteral}{'*'}:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09571}09571             n = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09572}09572             stb\_\_add\_edge(matcher, last\_end, n, -\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09573}09573             stb\_\_add\_epsilon(matcher, last\_end, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09574}09574             stb\_\_add\_epsilon(matcher, n, last\_end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09575}09575             last\_end = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09576}09576             ++str;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09577}09577             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09578}09578       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09579}09579    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09580}09580 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09581}09581    \textcolor{comment}{// now require end of string to match}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09582}09582    n = stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09583}09583    stb\_\_add\_edge(matcher, last\_end, n, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09584}09584    last\_end = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09585}09585 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09586}09586    *end = last\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09587}09587    \textcolor{keywordflow}{return} str;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09588}09588 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09589}09589 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09590}09590 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_opt(stb\_matcher *m, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09591}09591 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09592}09592    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09593}09593       stb\_nfa\_node *p = \&m-\/>nodes[n];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09594}09594       \textcolor{keywordflow}{if} (p-\/>goal)                  \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09595}09595       \textcolor{keywordflow}{if} (stb\_arr\_len(p-\/>out))      \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09596}09596       \textcolor{keywordflow}{if} (stb\_arr\_len(p-\/>eps) != 1) \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09597}09597       n = p-\/>eps[0];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09598}09598    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09599}09599 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09600}09600 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09601}09601 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_optimize(stb\_matcher *m)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09602}09602 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09603}09603    \textcolor{comment}{// if the target of any edge is a node with exactly}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09604}09604    \textcolor{comment}{// one out-\/epsilon, shorten it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09605}09605    \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09606}09606    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(m-\/>nodes); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09607}09607       stb\_nfa\_node *p = \&m-\/>nodes[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09608}09608       \textcolor{keywordflow}{for} (j=0; j < stb\_arr\_len(p-\/>out); ++j)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09609}09609          p-\/>out[j].node = stb\_\_opt(m,p-\/>out[j].node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09610}09610       \textcolor{keywordflow}{for} (j=0; j < stb\_arr\_len(p-\/>eps); ++j)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09611}09611          p-\/>eps[j]      = stb\_\_opt(m,p-\/>eps[j]     );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09612}09612    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09613}09613    m-\/>start\_node = stb\_\_opt(m,m-\/>start\_node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09614}09614 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09615}09615 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09616}09616 \textcolor{keywordtype}{void} stb\_matcher\_free(stb\_matcher *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09617}09617 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09618}09618    stb\_free(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09619}09619 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09620}09620 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09621}09621 \textcolor{keyword}{static} stb\_matcher *stb\_\_alloc\_matcher(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09622}09622 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09623}09623    stb\_matcher *matcher = (stb\_matcher *) stb\_malloc(0,\textcolor{keyword}{sizeof}(*matcher));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09624}09624 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09625}09625    matcher-\/>start\_node  = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09626}09626    stb\_arr\_malloc((\textcolor{keywordtype}{void} **) \&matcher-\/>nodes, matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09627}09627    matcher-\/>num\_charset = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09628}09628    matcher-\/>match\_start = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09629}09629    matcher-\/>does\_lex    = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09630}09630 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09631}09631    matcher-\/>dfa\_start   = STB\_\_DFA\_UNDEF;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09632}09632    stb\_arr\_malloc((\textcolor{keywordtype}{void} **) \&matcher-\/>dfa, matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09633}09633    stb\_arr\_malloc((\textcolor{keywordtype}{void} **) \&matcher-\/>dfa\_mapping, matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09634}09634    stb\_arr\_malloc((\textcolor{keywordtype}{void} **) \&matcher-\/>dfa\_result, matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09635}09635 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09636}09636    stb\_\_add\_node(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09637}09637 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09638}09638    \textcolor{keywordflow}{return} matcher;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09639}09639 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09640}09640 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09641}09641 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_lex\_reset(stb\_matcher *matcher)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09642}09642 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09643}09643    \textcolor{comment}{// flush cached dfa data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09644}09644    stb\_arr\_setlen(matcher-\/>dfa, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09645}09645    stb\_arr\_setlen(matcher-\/>dfa\_mapping, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09646}09646    stb\_arr\_setlen(matcher-\/>dfa\_result, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09647}09647    matcher-\/>dfa\_start = STB\_\_DFA\_UNDEF;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09648}09648 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09649}09649 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09650}09650 stb\_matcher *stb\_regex\_matcher(\textcolor{keywordtype}{char} *regex)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09651}09651 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09652}09652    \textcolor{keywordtype}{char} *z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09653}09653    stb\_uint16 end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09654}09654    stb\_matcher *matcher = stb\_\_alloc\_matcher();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09655}09655    \textcolor{keywordflow}{if} (*regex == \textcolor{charliteral}{'\string^'}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09656}09656       matcher-\/>match\_start = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09657}09657       ++regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09658}09658    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09659}09659 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09660}09660    z = stb\_\_reg\_parse\_alt(matcher, matcher-\/>start\_node, regex, \&end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09661}09661 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09662}09662    \textcolor{keywordflow}{if} (!z || *z) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09663}09663       stb\_free(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09664}09664       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09665}09665    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09666}09666 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09667}09667    ((matcher-\/>nodes)[(\textcolor{keywordtype}{int}) end]).goal = STB\_\_NFA\_STOP\_GOAL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09668}09668 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09669}09669    \textcolor{keywordflow}{return} matcher;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09670}09670 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09671}09671 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09672}09672 stb\_matcher *stb\_lex\_matcher(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09673}09673 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09674}09674    stb\_matcher *matcher = stb\_\_alloc\_matcher();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09675}09675 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09676}09676    matcher-\/>match\_start = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09677}09677    matcher-\/>does\_lex    = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09678}09678 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09679}09679    \textcolor{keywordflow}{return} matcher;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09680}09680 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09681}09681 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09682}09682 \textcolor{keywordtype}{int} stb\_lex\_item(stb\_matcher *matcher, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *regex, \textcolor{keywordtype}{int} \mbox{\hyperlink{structresult}{result}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09683}09683 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09684}09684    \textcolor{keywordtype}{char} *z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09685}09685    stb\_uint16 end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09686}09686 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09687}09687    z = stb\_\_reg\_parse\_alt(matcher, matcher-\/>start\_node, (\textcolor{keywordtype}{char}*) regex, \&end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09688}09688 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09689}09689    \textcolor{keywordflow}{if} (z == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09690}09690       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09691}09691 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09692}09692    stb\_\_lex\_reset(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09693}09693 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09694}09694    matcher-\/>nodes[(int) end].goal = \mbox{\hyperlink{structresult}{result}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09695}09695    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09696}09696 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09697}09697 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09698}09698 \textcolor{keywordtype}{int} stb\_lex\_item\_wild(stb\_matcher *matcher, \textcolor{keyword}{const} \textcolor{keywordtype}{char} *regex, \textcolor{keywordtype}{int} \mbox{\hyperlink{structresult}{result}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09699}09699 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09700}09700    \textcolor{keywordtype}{char} *z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09701}09701    stb\_uint16 end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09702}09702 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09703}09703    z = stb\_\_wild\_parse(matcher, matcher-\/>start\_node, (\textcolor{keywordtype}{char}*) regex, \&end);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09704}09704 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09705}09705    \textcolor{keywordflow}{if} (z == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09706}09706       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09707}09707 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09708}09708    stb\_\_lex\_reset(matcher);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09709}09709 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09710}09710    matcher-\/>nodes[(int) end].goal = \mbox{\hyperlink{structresult}{result}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09711}09711    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09712}09712 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09713}09713 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09714}09714 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_clear(stb\_matcher *m, stb\_uint16 *list)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09715}09715 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09716}09716    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09717}09717    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(list); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09718}09718       m-\/>nodes[(\textcolor{keywordtype}{int}) list[i]].active = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09719}09719 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09720}09720 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09721}09721 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_clear\_goalcheck(stb\_matcher *m, stb\_uint16 *list)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09722}09722 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09723}09723    \textcolor{keywordtype}{int} i, t=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09724}09724    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(list); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09725}09725       t += m-\/>nodes[(int) list[i]].goal;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09726}09726       m-\/>nodes[(int) list[i]].active = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09727}09727    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09728}09728    \textcolor{keywordflow}{return} t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09729}09729 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09730}09730 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09731}09731 \textcolor{keyword}{static} stb\_uint16 * stb\_\_add\_if\_inactive(stb\_matcher *m, stb\_uint16 *list, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09732}09732 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09733}09733    \textcolor{keywordflow}{if} (!m-\/>nodes[n].active) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09734}09734       stb\_arr\_push(list, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09735}09735       m-\/>nodes[n].active = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09736}09736    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09737}09737    \textcolor{keywordflow}{return} list;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09738}09738 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09739}09739 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09740}09740 \textcolor{keyword}{static} stb\_uint16 * stb\_\_eps\_closure(stb\_matcher *m, stb\_uint16 *list)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09741}09741 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09742}09742    \textcolor{keywordtype}{int} i,n = stb\_arr\_len(list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09743}09743 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09744}09744    \textcolor{keywordflow}{for}(i=0; i < n; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09745}09745       stb\_uint16 *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} = m-\/>nodes[(int) list[i]].eps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09746}09746       \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09747}09747          \textcolor{keywordtype}{int} j,k = stb\_arr\_len(\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09748}09748          \textcolor{keywordflow}{for} (j=0; j < k; ++j)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09749}09749             list = stb\_\_add\_if\_inactive(m, list, \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}[j]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09750}09750          n = stb\_arr\_len(list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09751}09751       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09752}09752    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09753}09753 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09754}09754    \textcolor{keywordflow}{return} list;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09755}09755 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09756}09756 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09757}09757 \textcolor{keywordtype}{int} stb\_matcher\_match(stb\_matcher *m, \textcolor{keywordtype}{char} *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09758}09758 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09759}09759    \textcolor{keywordtype}{int} \mbox{\hyperlink{structresult}{result}} = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09760}09760    \textcolor{keywordtype}{int} i,j,y,z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09761}09761    stb\_uint16 *previous = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09762}09762    stb\_uint16 *current = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09763}09763    stb\_uint16 *temp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09764}09764 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09765}09765    stb\_arr\_setsize(previous, 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09766}09766    stb\_arr\_setsize(current, 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09767}09767 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09768}09768    previous = stb\_\_add\_if\_inactive(m, previous, m-\/>start\_node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09769}09769    previous = stb\_\_eps\_closure(m,previous);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09770}09770    stb\_\_clear(m, previous);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09771}09771 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09772}09772    \textcolor{keywordflow}{while} (*str \&\& stb\_arr\_len(previous)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09773}09773       y = stb\_arr\_len(previous);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09774}09774       \textcolor{keywordflow}{for} (i=0; i < y; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09775}09775          stb\_nfa\_node *n = \&m-\/>nodes[(int) previous[i]];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09776}09776          z = stb\_arr\_len(n-\/>out);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09777}09777          \textcolor{keywordflow}{for} (j=0; j < z; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09778}09778             \textcolor{keywordflow}{if} (n-\/>out[j].match >= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09779}09779                \textcolor{keywordflow}{if} (n-\/>out[j].match == *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09780}09780                   current = stb\_\_add\_if\_inactive(m, current, n-\/>out[j].node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09781}09781             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n-\/>out[j].match == -\/1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09782}09782                \textcolor{keywordflow}{if} (*str != \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09783}09783                   current = stb\_\_add\_if\_inactive(m, current, n-\/>out[j].node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09784}09784             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n-\/>out[j].match < -\/1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09785}09785                \textcolor{keywordtype}{int} z = -\/n-\/>out[j].match -\/ 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09786}09786                \textcolor{keywordflow}{if} (m-\/>charset[(stb\_uint8) *str] \& (1 << z))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09787}09787                   current = stb\_\_add\_if\_inactive(m, current, n-\/>out[j].node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09788}09788             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09789}09789          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09790}09790       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09791}09791       stb\_arr\_setlen(previous, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09792}09792 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09793}09793       temp = previous;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09794}09794       previous = current;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09795}09795       current = temp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09796}09796 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09797}09797       previous = stb\_\_eps\_closure(m,previous);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09798}09798       stb\_\_clear(m, previous);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09799}09799 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09800}09800       ++str;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09801}09801    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09802}09802 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09803}09803    \textcolor{comment}{// transition to pick up a '\$' at the end}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09804}09804    y = stb\_arr\_len(previous);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09805}09805    \textcolor{keywordflow}{for} (i=0; i < y; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09806}09806       m-\/>nodes[(\textcolor{keywordtype}{int}) previous[i]].active = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09807}09807 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09808}09808    \textcolor{keywordflow}{for} (i=0; i < y; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09809}09809       stb\_nfa\_node *n = \&m-\/>nodes[(int) previous[i]];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09810}09810       z = stb\_arr\_len(n-\/>out);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09811}09811       \textcolor{keywordflow}{for} (j=0; j < z; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09812}09812          \textcolor{keywordflow}{if} (n-\/>out[j].match == \textcolor{charliteral}{'\(\backslash\)n'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09813}09813             current = stb\_\_add\_if\_inactive(m, current, n-\/>out[j].node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09814}09814       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09815}09815    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09816}09816 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09817}09817    previous = stb\_\_eps\_closure(m,previous);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09818}09818    stb\_\_clear(m, previous);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09819}09819 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09820}09820    y = stb\_arr\_len(previous);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09821}09821    \textcolor{keywordflow}{for} (i=0; i < y; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09822}09822       \textcolor{keywordflow}{if} (m-\/>nodes[(\textcolor{keywordtype}{int}) previous[i]].goal)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09823}09823          \mbox{\hyperlink{structresult}{result}} = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09824}09824 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09825}09825    stb\_arr\_free(previous);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09826}09826    stb\_arr\_free(current);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09827}09827 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09828}09828    \textcolor{keywordflow}{return} \mbox{\hyperlink{structresult}{result}} \&\& *str == 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09829}09829 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09830}09830 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09831}09831 stb\_int16 stb\_\_get\_dfa\_node(stb\_matcher *m, stb\_uint16 *list)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09832}09832 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09833}09833    stb\_uint16 node;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09834}09834    stb\_uint32 data[8], *state, *newstate;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09835}09835    \textcolor{keywordtype}{int} i,j,n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09836}09836 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09837}09837    state = (stb\_uint32 *) stb\_temp(data, m-\/>num\_words\_per\_dfa * 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09838}09838    memset(state, 0, m-\/>num\_words\_per\_dfa*4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09839}09839 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09840}09840    n = stb\_arr\_len(list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09841}09841    \textcolor{keywordflow}{for} (i=0; i < n; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09842}09842       \textcolor{keywordtype}{int} x = list[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09843}09843       state[x >> 5] |= 1 << (x \& 31);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09844}09844    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09845}09845 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09846}09846    \textcolor{comment}{// @TODO use a hash table}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09847}09847    n = stb\_arr\_len(m-\/>dfa\_mapping);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09848}09848    i=j=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09849}09849    \textcolor{keywordflow}{for}(; j < n; ++i, j += m-\/>num\_words\_per\_dfa) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09850}09850       \textcolor{comment}{// @TODO special case for <= 32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09851}09851       \textcolor{keywordflow}{if} (!memcmp(state, m-\/>dfa\_mapping + j, m-\/>num\_words\_per\_dfa*4)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09852}09852          node = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09853}09853          \textcolor{keywordflow}{goto} done;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09854}09854       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09855}09855    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09856}09856 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09857}09857    assert(stb\_arr\_len(m-\/>dfa) == i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09858}09858    node = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09859}09859 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09860}09860    newstate = stb\_arr\_addn(m-\/>dfa\_mapping, m-\/>num\_words\_per\_dfa);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09861}09861    memcpy(newstate, state, m-\/>num\_words\_per\_dfa*4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09862}09862 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09863}09863    \textcolor{comment}{// set all transitions to 'unknown'}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09864}09864    stb\_arr\_add(m-\/>dfa);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09865}09865    memset(m-\/>dfa[i].transition, -\/1, \textcolor{keyword}{sizeof}(m-\/>dfa[i].transition));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09866}09866 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09867}09867    \textcolor{keywordflow}{if} (m-\/>does\_lex) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09868}09868       \textcolor{keywordtype}{int} \mbox{\hyperlink{structresult}{result}} = -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09869}09869       n = stb\_arr\_len(list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09870}09870       \textcolor{keywordflow}{for} (i=0; i < n; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09871}09871          \textcolor{keywordflow}{if} (m-\/>nodes[(\textcolor{keywordtype}{int}) list[i]].goal > \mbox{\hyperlink{structresult}{result}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09872}09872             \mbox{\hyperlink{structresult}{result}} = m-\/>nodes[(int) list[i]].goal;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09873}09873       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09874}09874 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09875}09875       stb\_arr\_push(m-\/>dfa\_result, \mbox{\hyperlink{structresult}{result}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09876}09876    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09877}09877 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09878}09878 done:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09879}09879    stb\_tempfree(data, state);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09880}09880    \textcolor{keywordflow}{return} node;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09881}09881 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09882}09882 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09883}09883 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_matcher\_dfa(stb\_matcher *m, \textcolor{keywordtype}{char} *str\_c, \textcolor{keywordtype}{int} *len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09884}09884 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09885}09885    stb\_uint8 *str = (stb\_uint8 *) str\_c;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09886}09886    stb\_int16 node,prevnode;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09887}09887    stb\_dfa *trans;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09888}09888    \textcolor{keywordtype}{int} match\_length = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09889}09889    stb\_int16 match\_result=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09890}09890 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09891}09891    \textcolor{keywordflow}{if} (m-\/>dfa\_start == STB\_\_DFA\_UNDEF) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09892}09892       stb\_uint16 *list;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09893}09893 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09894}09894       m-\/>num\_words\_per\_dfa = (stb\_arr\_len(m-\/>nodes)+31) >> 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09895}09895       stb\_\_optimize(m);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09896}09896 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09897}09897       list = stb\_\_add\_if\_inactive(m, NULL, m-\/>start\_node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09898}09898       list = stb\_\_eps\_closure(m,list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09899}09899       \textcolor{keywordflow}{if} (m-\/>does\_lex) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09900}09900          m-\/>dfa\_start = stb\_\_get\_dfa\_node(m,list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09901}09901          stb\_\_clear(m, list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09902}09902          \textcolor{comment}{// DON'T allow start state to be a goal state!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09903}09903          \textcolor{comment}{// this allows people to specify regexes that can match 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09904}09904          \textcolor{comment}{// characters without them actually matching (also we don't}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09905}09905          \textcolor{comment}{// check \_before\_ advancing anyway}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09906}09906          \textcolor{keywordflow}{if} (m-\/>dfa\_start <= STB\_\_DFA\_MGOAL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09907}09907             m-\/>dfa\_start = -\/(m-\/>dfa\_start -\/ STB\_\_DFA\_MGOAL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09908}09908       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09909}09909          \textcolor{keywordflow}{if} (stb\_\_clear\_goalcheck(m, list))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09910}09910             m-\/>dfa\_start = STB\_\_DFA\_GOAL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09911}09911          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09912}09912             m-\/>dfa\_start = stb\_\_get\_dfa\_node(m,list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09913}09913       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09914}09914       stb\_arr\_free(list);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09915}09915    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09916}09916 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09917}09917    prevnode = STB\_\_DFA\_UNDEF;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09918}09918    node = m-\/>dfa\_start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09919}09919    trans = m-\/>dfa;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09920}09920 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09921}09921    \textcolor{keywordflow}{if} (m-\/>dfa\_start == STB\_\_DFA\_GOAL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09922}09922       \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09923}09923 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09924}09924    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09925}09925       assert(node >= STB\_\_DFA\_VALID);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09926}09926 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09927}09927       \textcolor{comment}{// fast inner DFA loop; especially if STB\_\_DFA\_VALID is 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09928}09928 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09929}09929       \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09930}09930          prevnode = node;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09931}09931          node = trans[node].transition[*str++];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09932}09932       \} \textcolor{keywordflow}{while} (node >= STB\_\_DFA\_VALID);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09933}09933 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09934}09934       assert(node >= STB\_\_DFA\_MGOAL -\/ stb\_arr\_len(m-\/>dfa));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09935}09935       assert(node < stb\_arr\_len(m-\/>dfa));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09936}09936 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09937}09937       \textcolor{comment}{// special case for lex: need \_longest\_ match, so notice goal}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09938}09938       \textcolor{comment}{// state without stopping}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09939}09939       \textcolor{keywordflow}{if} (node <= STB\_\_DFA\_MGOAL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09940}09940          match\_length = (int) (str -\/ (stb\_uint8 *) str\_c);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09941}09941          node = -\/(node -\/ STB\_\_DFA\_MGOAL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09942}09942          match\_result = node;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09943}09943          \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09944}09944       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09945}09945 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09946}09946       \textcolor{comment}{// slow NFA-\/>DFA conversion}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09947}09947 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09948}09948       \textcolor{comment}{// or we hit the goal or the end of the string, but those}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09949}09949       \textcolor{comment}{// can only happen once per search...}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09950}09950 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09951}09951       \textcolor{keywordflow}{if} (node == STB\_\_DFA\_UNDEF) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09952}09952          \textcolor{comment}{// build a list  -\/-\/ @TODO special case <= 32 states}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09953}09953          \textcolor{comment}{// heck, use a more compact data structure for <= 16 and <= 8 ?!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09954}09954 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09955}09955          \textcolor{comment}{// @TODO keep states/newstates around instead of reallocating them}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09956}09956          stb\_uint16 *states = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09957}09957          stb\_uint16 *newstates = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09958}09958          \textcolor{keywordtype}{int} i,j,y,z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09959}09959          stb\_uint32 *flags = \&m-\/>dfa\_mapping[prevnode * m-\/>num\_words\_per\_dfa];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09960}09960          assert(prevnode != STB\_\_DFA\_UNDEF);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09961}09961          stb\_arr\_setsize(states, 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09962}09962          stb\_arr\_setsize(newstates,4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09963}09963          \textcolor{keywordflow}{for} (j=0; j < m-\/>num\_words\_per\_dfa; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09964}09964             \textcolor{keywordflow}{for} (i=0; i < 32; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09965}09965                \textcolor{keywordflow}{if} (*flags \& (1 << i))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09966}09966                   stb\_arr\_push(states, j*32+i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09967}09967             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09968}09968             ++flags;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09969}09969          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09970}09970          \textcolor{comment}{// states is now the states we were in in the previous node;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09971}09971          \textcolor{comment}{// so now we can compute what node it transitions to on str[-\/1]}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09972}09972 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09973}09973          y = stb\_arr\_len(states);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09974}09974          \textcolor{keywordflow}{for} (i=0; i < y; ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09975}09975             stb\_nfa\_node *n = \&m-\/>nodes[(int) states[i]];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09976}09976             z = stb\_arr\_len(n-\/>out);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09977}09977             \textcolor{keywordflow}{for} (j=0; j < z; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09978}09978                \textcolor{keywordflow}{if} (n-\/>out[j].match >= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09979}09979                   \textcolor{keywordflow}{if} (n-\/>out[j].match == str[-\/1] || (str[-\/1] == 0 \&\& n-\/>out[j].match == \textcolor{charliteral}{'\(\backslash\)n'}))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09980}09980                      newstates = stb\_\_add\_if\_inactive(m, newstates, n-\/>out[j].node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09981}09981                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n-\/>out[j].match == -\/1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09982}09982                   \textcolor{keywordflow}{if} (str[-\/1] != \textcolor{charliteral}{'\(\backslash\)n'} \&\& str[-\/1])}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09983}09983                      newstates = stb\_\_add\_if\_inactive(m, newstates, n-\/>out[j].node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09984}09984                \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (n-\/>out[j].match < -\/1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09985}09985                   \textcolor{keywordtype}{int} z = -\/n-\/>out[j].match -\/ 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09986}09986                   \textcolor{keywordflow}{if} (m-\/>charset[str[-\/1]] \& (1 << z))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09987}09987                      newstates = stb\_\_add\_if\_inactive(m, newstates, n-\/>out[j].node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09988}09988                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09989}09989             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09990}09990          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09991}09991          \textcolor{comment}{// AND add in the start state!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09992}09992          \textcolor{keywordflow}{if} (!m-\/>match\_start || (str[-\/1] == \textcolor{charliteral}{'\(\backslash\)n'} \&\& !m-\/>does\_lex))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09993}09993             newstates = stb\_\_add\_if\_inactive(m, newstates, m-\/>start\_node);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09994}09994          \textcolor{comment}{// AND epsilon close it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09995}09995          newstates = stb\_\_eps\_closure(m, newstates);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09996}09996          \textcolor{comment}{// if it's a goal state, then that's all there is to it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09997}09997          \textcolor{keywordflow}{if} (stb\_\_clear\_goalcheck(m, newstates)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09998}09998             \textcolor{keywordflow}{if} (m-\/>does\_lex) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l09999}09999                match\_length = (int) (str -\/ (stb\_uint8 *) str\_c);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10000}10000                node = stb\_\_get\_dfa\_node(m,newstates);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10001}10001                match\_result = node;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10002}10002                node = -\/node + STB\_\_DFA\_MGOAL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10003}10003                trans = m-\/>dfa; \textcolor{comment}{// could have gotten realloc()ed}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10004}10004             \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10005}10005                node = STB\_\_DFA\_GOAL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10006}10006          \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (str[-\/1] == 0 || stb\_arr\_len(newstates) == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10007}10007             node = STB\_\_DFA\_END;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10008}10008          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10009}10009             node = stb\_\_get\_dfa\_node(m,newstates);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10010}10010             trans = m-\/>dfa; \textcolor{comment}{// could have gotten realloc()ed}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10011}10011          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10012}10012          trans[prevnode].transition[str[-\/1]] = node;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10013}10013          \textcolor{keywordflow}{if} (node <= STB\_\_DFA\_MGOAL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10014}10014             node = -\/(node -\/ STB\_\_DFA\_MGOAL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10015}10015          stb\_arr\_free(newstates);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10016}10016          stb\_arr\_free(states);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10017}10017       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10018}10018 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10019}10019       \textcolor{keywordflow}{if} (node == STB\_\_DFA\_GOAL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10020}10020          \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10021}10021       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10022}10022       \textcolor{keywordflow}{if} (node == STB\_\_DFA\_END) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10023}10023          \textcolor{keywordflow}{if} (m-\/>does\_lex) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10024}10024             \textcolor{keywordflow}{if} (match\_result) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10025}10025                \textcolor{keywordflow}{if} (len) *len = match\_length;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10026}10026                \textcolor{keywordflow}{return} m-\/>dfa\_result[(int) match\_result];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10027}10027             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10028}10028          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10029}10029          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10030}10030       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10031}10031 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10032}10032       assert(node != STB\_\_DFA\_UNDEF);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10033}10033    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10034}10034 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10035}10035 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10036}10036 \textcolor{keywordtype}{int} stb\_matcher\_find(stb\_matcher *m, \textcolor{keywordtype}{char} *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10037}10037 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10038}10038    assert(m-\/>does\_lex == 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10039}10039    \textcolor{keywordflow}{return} stb\_\_matcher\_dfa(m, str, NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10040}10040 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10041}10041 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10042}10042 \textcolor{keywordtype}{int} stb\_lex(stb\_matcher *m, \textcolor{keywordtype}{char} *str, \textcolor{keywordtype}{int} *len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10043}10043 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10044}10044    assert(m-\/>does\_lex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10045}10045    \textcolor{keywordflow}{return} stb\_\_matcher\_dfa(m, str, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10046}10046 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10047}10047 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10048}10048 \textcolor{preprocessor}{\#ifdef STB\_PERFECT\_HASH}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10049}10049 \textcolor{keywordtype}{int} stb\_regex(\textcolor{keywordtype}{char} *regex, \textcolor{keywordtype}{char} *str)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10050}10050 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10051}10051    \textcolor{keyword}{static} stb\_perfect p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10052}10052    \textcolor{keyword}{static} stb\_matcher ** matchers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10053}10053    \textcolor{keyword}{static} \textcolor{keywordtype}{char}        ** regexps;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10054}10054    \textcolor{keyword}{static} \textcolor{keywordtype}{char}        ** regexp\_cache;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10055}10055    \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *mapping;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10056}10056     \textcolor{keywordtype}{int} z = stb\_perfect\_hash(\&p, (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) regex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10057}10057    \textcolor{keywordflow}{if} (z >= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10058}10058       \textcolor{keywordflow}{if} (strcmp(regex, regexp\_cache[(\textcolor{keywordtype}{int}) mapping[z]])) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10059}10059          \textcolor{keywordtype}{int} i = mapping[z];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10060}10060          stb\_matcher\_free(matchers[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10061}10061          free(regexp\_cache[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10062}10062          regexps[i] = regex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10063}10063          regexp\_cache[i] = stb\_p\_strdup(regex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10064}10064          matchers[i] = stb\_regex\_matcher(regex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10065}10065       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10066}10066    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10067}10067       \textcolor{keywordtype}{int} i,n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10068}10068       \textcolor{keywordflow}{if} (regex == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10069}10069          \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(matchers); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10070}10070             stb\_matcher\_free(matchers[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10071}10071             free(regexp\_cache[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10072}10072          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10073}10073          stb\_arr\_free(matchers);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10074}10074          stb\_arr\_free(regexps);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10075}10075          stb\_arr\_free(regexp\_cache);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10076}10076          stb\_perfect\_destroy(\&p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10077}10077          free(mapping); mapping = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10078}10078          \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10079}10079       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10080}10080       stb\_arr\_push(regexps, regex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10081}10081       stb\_arr\_push(regexp\_cache, stb\_p\_strdup(regex));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10082}10082       stb\_arr\_push(matchers, stb\_regex\_matcher(regex));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10083}10083       stb\_perfect\_destroy(\&p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10084}10084       n = stb\_perfect\_create(\&p, (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *) (\textcolor{keywordtype}{char} **) regexps, stb\_arr\_len(regexps));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10085}10085       mapping = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *) realloc(mapping, n * \textcolor{keyword}{sizeof}(*mapping));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10086}10086       \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(regexps); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10087}10087           mapping[stb\_perfect\_hash(\&p, (\textcolor{keywordtype}{int})(size\_t) regexps[i])] = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10088}10088       z = stb\_perfect\_hash(\&p, (\textcolor{keywordtype}{int})(\textcolor{keywordtype}{size\_t}) regex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10089}10089    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10090}10090    \textcolor{keywordflow}{return} stb\_matcher\_find(matchers[(\textcolor{keywordtype}{int}) mapping[z]], str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10091}10091 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10092}10092 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10093}10093 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10094}10094 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10095}10095 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10096}10096 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10098}10098 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10099}10099 \textcolor{comment}{//                      C source-\/code introspection}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10100}10100 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10101}10101 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10102}10102 \textcolor{comment}{// runtime structure}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10103}10103 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10104}10104 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10105}10105    \textcolor{keywordtype}{char} *name;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10106}10106    \textcolor{keywordtype}{char} *type;     \textcolor{comment}{// base type}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10107}10107    \textcolor{keywordtype}{char} *comment;  \textcolor{comment}{// content of comment field}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10108}10108    \textcolor{keywordtype}{int}   size;     \textcolor{comment}{// size of base type}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10109}10109    \textcolor{keywordtype}{int}   offset;   \textcolor{comment}{// field offset}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10110}10110    \textcolor{keywordtype}{int}   arrcount[8]; \textcolor{comment}{// array sizes; -\/1 = pointer indirection; 0 = end of list}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10111}10111 \} stb\_info\_field;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10112}10112 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10113}10113 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10114}10114 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10115}10115    \textcolor{keywordtype}{char} *structname;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10116}10116    \textcolor{keywordtype}{int} size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10117}10117    \textcolor{keywordtype}{int} num\_fields;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10118}10118    stb\_info\_field *fields;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10119}10119 \} stb\_info\_struct;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10120}10120 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10121}10121 \textcolor{keyword}{extern} stb\_info\_struct stb\_introspect\_output[];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10122}10122 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10123}10123 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10124}10124 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10125}10125 STB\_EXTERN \textcolor{keywordtype}{void} stb\_introspect\_precompiled(stb\_info\_struct *compiled);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10126}10126 STB\_EXTERN \textcolor{keywordtype}{void} stb\_\_introspect(\textcolor{keywordtype}{char} *path, \textcolor{keywordtype}{char} *file);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10127}10127 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10128}10128 \textcolor{preprocessor}{\#define stb\_introspect\_ship()            stb\_\_introspect(NULL, NULL, stb\_\_introspect\_output)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10129}10129 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10130}10130 \textcolor{preprocessor}{\#ifdef STB\_SHIP}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10131}10131 \textcolor{preprocessor}{\#define stb\_introspect()                 stb\_introspect\_ship()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10132}10132 \textcolor{preprocessor}{\#define stb\_introspect\_path(p)           stb\_introspect\_ship()}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10133}10133 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10134}10134 \textcolor{comment}{// bootstrapping: define stb\_introspect() (or 'path') the first time}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10135}10135 \textcolor{preprocessor}{\#define stb\_introspect()                 stb\_\_introspect(NULL, \_\_FILE\_\_, NULL)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10136}10136 \textcolor{preprocessor}{\#define stb\_introspect\_auto()            stb\_\_introspect(NULL, \_\_FILE\_\_, stb\_\_introspect\_output)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10137}10137 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10138}10138 \textcolor{preprocessor}{\#define stb\_introspect\_path(p)           stb\_\_introspect(p, \_\_FILE\_\_, NULL)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10139}10139 \textcolor{preprocessor}{\#define stb\_introspect\_path(p)           stb\_\_introspect(p, \_\_FILE\_\_, NULL)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10140}10140 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10141}10141 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10142}10142 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10143}10143 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10144}10144 \textcolor{preprocessor}{\#ifndef STB\_INTROSPECT\_CPP}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10145}10145 \textcolor{preprocessor}{   \#ifdef \_\_cplusplus}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10146}10146 \textcolor{preprocessor}{   \#define STB\_INTROSPECT\_CPP 1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10147}10147 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10148}10148 \textcolor{preprocessor}{   \#define STB\_INTROSPECT\_CPP 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10149}10149 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10150}10150 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10151}10151 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10152}10152 \textcolor{keywordtype}{void} stb\_introspect\_precompiled(stb\_info\_struct *compiled)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10153}10153 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10154}10154 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10155}10155 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10156}10156 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10157}10157 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10158}10158 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_introspect\_filename(\textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{char} *path)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10159}10159 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10160}10160 \textcolor{preprocessor}{   \#if STB\_INTROSPECT\_CPP}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10161}10161    stb\_p\_sprintf(\mbox{\hyperlink{classbuffer}{buffer}} stb\_p\_size(9999), \textcolor{stringliteral}{"{}\%s/stb\_introspect.cpp"{}}, path);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10162}10162 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10163}10163    stb\_p\_sprintf(\mbox{\hyperlink{classbuffer}{buffer}} stb\_p\_size(9999), \textcolor{stringliteral}{"{}\%s/stb\_introspect.c"{}}, path);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10164}10164 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10165}10165 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10166}10166 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10167}10167 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_introspect\_compute(\textcolor{keywordtype}{char} *path, \textcolor{keywordtype}{char} *file)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10168}10168 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10169}10169    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10170}10170    \textcolor{keywordtype}{char} ** include\_list = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10171}10171    \textcolor{keywordtype}{char} ** introspect\_list = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10172}10172    FILE *f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10173}10173    f = stb\_p\_fopen(file, \textcolor{stringliteral}{"{}w"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10174}10174    \textcolor{keywordflow}{if} (!f) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10175}10175 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10176}10176    fputs(\textcolor{stringliteral}{"{}// if you get compiler errors, change the following 0 to a 1:\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10177}10177    fputs(\textcolor{stringliteral}{"{}\#define STB\_INTROSPECT\_INVALID 0\(\backslash\)n\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10178}10178    fputs(\textcolor{stringliteral}{"{}// this will force the code to compile, and force the introspector\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10179}10179    fputs(\textcolor{stringliteral}{"{}// to run and then exit, allowing you to recompile\(\backslash\)n\(\backslash\)n\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10180}10180    fputs(\textcolor{stringliteral}{"{}\#include \(\backslash\)"{}stb.h\(\backslash\)"{}\(\backslash\)n\(\backslash\)n"{}},f );}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10181}10181    fputs(\textcolor{stringliteral}{"{}\#if STB\_INTROSPECT\_INVALID\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10182}10182    fputs(\textcolor{stringliteral}{"{}   stb\_info\_struct stb\_\_introspect\_output[] = \{ (void *) 1 \}\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10183}10183    fputs(\textcolor{stringliteral}{"{}\#else\(\backslash\)n\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10184}10184    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(include\_list); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10185}10185       fprintf(f, \textcolor{stringliteral}{"{} \#include \(\backslash\)"{}\%s\(\backslash\)"{}\(\backslash\)n"{}}, include\_list[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10186}10186 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10187}10187    fputs(\textcolor{stringliteral}{"{} stb\_info\_struct stb\_\_introspect\_output[] =\(\backslash\)n\{\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10188}10188    \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(introspect\_list); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10189}10189       fprintf(f, \textcolor{stringliteral}{"{}  stb\_introspect\_\%s,\(\backslash\)n"{}}, introspect\_list[i]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10190}10190    fputs(\textcolor{stringliteral}{"{} \};\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10191}10191    fputs(\textcolor{stringliteral}{"{}\#endif\(\backslash\)n"{}}, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10192}10192    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10193}10193 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10194}10194 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10195}10195 \textcolor{keyword}{static} stb\_info\_struct *stb\_\_introspect\_info;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10196}10196 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10197}10197 \textcolor{preprocessor}{\#ifndef STB\_SHIP}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10198}10198 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10199}10199 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10200}10200 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10201}10201 \textcolor{keywordtype}{void} stb\_\_introspect(\textcolor{keywordtype}{char} *path, \textcolor{keywordtype}{char} *file, stb\_info\_struct *compiled)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10202}10202 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10203}10203    \textcolor{keyword}{static} \textcolor{keywordtype}{int} first=1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10204}10204    \textcolor{keywordflow}{if} (!first) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10205}10205    first=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10206}10206 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10207}10207    stb\_\_introspect\_info = compiled;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10208}10208 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10209}10209 \textcolor{preprocessor}{   \#ifndef STB\_SHIP}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10210}10210    \textcolor{keywordflow}{if} (path || file) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10211}10211       \textcolor{keywordtype}{int} bail\_flag = compiled \&\& compiled[0].structname == (\textcolor{keywordtype}{void} *) 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10212}10212       \textcolor{keywordtype}{int} needs\_building = bail\_flag;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10213}10213       \textcolor{keyword}{struct }stb\_\_stat st;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10214}10214       \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[1024], buffer2[1024];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10215}10215       \textcolor{keywordflow}{if} (!path) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10216}10216          stb\_splitpath(\mbox{\hyperlink{classbuffer}{buffer}}, file, STB\_PATH);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10217}10217          path = \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10218}10218       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10219}10219       \textcolor{comment}{// bail if the source path doesn't exist}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10220}10220       \textcolor{keywordflow}{if} (!stb\_fexists(path)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10221}10221 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10222}10222       stb\_\_introspect\_filename(buffer2, path);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10223}10223 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10224}10224       \textcolor{comment}{// get source/include files timestamps, compare to output-\/file timestamp;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10225}10225       \textcolor{comment}{// if mismatched, regenerate}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10226}10226 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10227}10227       \textcolor{keywordflow}{if} (stb\_\_stat(buffer2, \&st))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10228}10228          needs\_building = STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10229}10229 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10230}10230       \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10231}10231          \textcolor{comment}{// find any file that contains an introspection command and is newer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10232}10232          \textcolor{comment}{// if needs\_building is already true, we don't need to do this test,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10233}10233          \textcolor{comment}{// but we still need these arrays, so go ahead and get them}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10234}10234          \textcolor{keywordtype}{char} **\mbox{\hyperlink{group__core__func__vector__relational_gab5af106b2d5675d51af84815d937384d}{all}}[3];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10235}10235          \mbox{\hyperlink{group__core__func__vector__relational_gab5af106b2d5675d51af84815d937384d}{all}}[0] = stb\_readdir\_files\_mask(path, \textcolor{stringliteral}{"{}*.h"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10236}10236          \mbox{\hyperlink{group__core__func__vector__relational_gab5af106b2d5675d51af84815d937384d}{all}}[1] = stb\_readdir\_files\_mask(path, \textcolor{stringliteral}{"{}*.c"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10237}10237          \mbox{\hyperlink{group__core__func__vector__relational_gab5af106b2d5675d51af84815d937384d}{all}}[2] = stb\_readdir\_files\_mask(path, \textcolor{stringliteral}{"{}*.cpp"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10238}10238          \textcolor{keywordtype}{int} i,j;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10239}10239          \textcolor{keywordflow}{if} (needs\_building) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10240}10240             \textcolor{keywordflow}{for} (j=0; j < 3; ++j) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10241}10241                \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(\mbox{\hyperlink{group__core__func__vector__relational_gab5af106b2d5675d51af84815d937384d}{all}}[j]); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10242}10242                   \textcolor{keyword}{struct }stb\_\_stat st2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10243}10243                   \textcolor{keywordflow}{if} (!stb\_\_stat(\mbox{\hyperlink{group__core__func__vector__relational_gab5af106b2d5675d51af84815d937384d}{all}}[j][i], \&st2)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10244}10244                      \textcolor{keywordflow}{if} (st.st\_mtime < st2.st\_mtime) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10245}10245                         \textcolor{keywordtype}{char} *z = stb\_filec(\mbox{\hyperlink{group__core__func__vector__relational_gab5af106b2d5675d51af84815d937384d}{all}}[j][i], NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10246}10246                         \textcolor{keywordtype}{int} found=STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10247}10247                         \textcolor{keywordflow}{while} (y) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10248}10248                            y = strstr(y, \textcolor{stringliteral}{"{}//si"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10249}10249                            \textcolor{keywordflow}{if} (y \&\& isspace(y[4])) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10250}10250                               found = STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10251}10251                               \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10252}10252                            \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10253}10253                         \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10254}10254                         needs\_building = STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10255}10255                         \textcolor{keywordflow}{goto} done;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10256}10256                      \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10257}10257                   \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10258}10258                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10259}10259             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10260}10260            done:;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10261}10261          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10262}10262                \textcolor{keywordtype}{char} *z = stb\_filec(\mbox{\hyperlink{group__core__func__vector__relational_gab5af106b2d5675d51af84815d937384d}{all}}[i], NULL), *y = z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10263}10263                \textcolor{keywordtype}{int} found=STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10264}10264                \textcolor{keywordflow}{while} (y) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10265}10265                   y = strstr(y, \textcolor{stringliteral}{"{}//si"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10266}10266                   \textcolor{keywordflow}{if} (y \&\& isspace(y[4])) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10267}10267                      found = STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10268}10268                      \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10269}10269                   \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10270}10270                \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10271}10271                \textcolor{keywordflow}{if} (found)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10272}10272                   stb\_arr\_push(introspect\_h, stb\_p\_strdup(\mbox{\hyperlink{group__core__func__vector__relational_gab5af106b2d5675d51af84815d937384d}{all}}[i]));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10273}10273                free(z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10274}10274             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10275}10275          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10276}10276          stb\_readdir\_free(\mbox{\hyperlink{group__core__func__vector__relational_gab5af106b2d5675d51af84815d937384d}{all}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10277}10277          \textcolor{keywordflow}{if} (!needs\_building) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10278}10278             \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(introspect\_h); ++i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10279}10279                \textcolor{keyword}{struct }stb\_\_stat st2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10280}10280                \textcolor{keywordflow}{if} (!stb\_\_stat(introspect\_h[i], \&st2))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10281}10281                   \textcolor{keywordflow}{if} (st.st\_mtime < st2.st\_mtime)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10282}10282                      needs\_building = STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10283}10283             \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10284}10284          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10285}10285 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10286}10286          \textcolor{keywordflow}{if} (needs\_building) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10287}10287             stb\_\_introspect\_compute(path, buffer2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10288}10288          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10289}10289       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10290}10290    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10291}10291 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10292}10292 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10293}10293 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10294}10294 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10295}10295 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10296}10296 \textcolor{preprocessor}{\#ifdef STB\_INTROSPECT}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10297}10297 \textcolor{comment}{// compile-\/time code-\/generator}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10298}10298 \textcolor{preprocessor}{\#define INTROSPECT(x)   int main(int argc, char **argv) \{ stb\_\_introspect(\_\_FILE\_\_); return 0; \}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10299}10299 \textcolor{preprocessor}{\#define FILE(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10300}10300 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10301}10301 \textcolor{keywordtype}{void} stb\_\_introspect(\textcolor{keywordtype}{char} *filename)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10302}10302 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10303}10303    \textcolor{keywordtype}{char} *file = stb\_file(filename, NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10304}10304    \textcolor{keywordtype}{char} *s = file, *t, **p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10305}10305    \textcolor{keywordtype}{char} *out\_name = \textcolor{stringliteral}{"{}stb\_introspect.c"{}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10306}10306    \textcolor{keywordtype}{char} *out\_path;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10307}10307    STB\_ARR(\textcolor{keywordtype}{char}) filelist = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10308}10308    \textcolor{keywordtype}{int} i,n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10309}10309    \textcolor{keywordflow}{if} (!file) stb\_fatal(\textcolor{stringliteral}{"{}Couldn't open \%s"{}}, filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10310}10310 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10311}10311    out\_path = stb\_splitpathdup(filename, STB\_PATH);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10312}10312 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10313}10313    \textcolor{comment}{// search for the macros}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10314}10314    \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10315}10315       \textcolor{keywordtype}{char} \mbox{\hyperlink{classbuffer}{buffer}}[256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10316}10316       \textcolor{keywordflow}{while} (*s \&\& !isupper(*s)) ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10317}10317       s = stb\_strtok\_invert(\mbox{\hyperlink{classbuffer}{buffer}}, s, \textcolor{stringliteral}{"{}ABCDEFGHIJKLMNOPQRSTUVWXYZ"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10318}10318       s = stb\_skipwhite(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10319}10319       \textcolor{keywordflow}{if} (*s == \textcolor{charliteral}{'('}) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10320}10320          ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10321}10321          t = strchr(s, \textcolor{charliteral}{')'});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10322}10322          \textcolor{keywordflow}{if} (t == NULL) stb\_fatal(\textcolor{stringliteral}{"{}Error parsing \%s"{}}, filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10323}10323 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10324}10324       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10325}10325    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10326}10326 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10327}10327 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10328}10328 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10329}10329 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10330}10330 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10331}10331 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10332}10332 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10334}10334 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10335}10335 \textcolor{comment}{//             STB-\/C sliding-\/window dictionary compression}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10336}10336 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10337}10337 \textcolor{comment}{//  This uses a DEFLATE-\/style sliding window, but no bitwise entropy.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10338}10338 \textcolor{comment}{//  Everything is on byte boundaries, so you could then apply a byte-\/wise}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10339}10339 \textcolor{comment}{//  entropy code, though that's nowhere near as effective.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10340}10340 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10341}10341 \textcolor{comment}{//  An STB-\/C stream begins with a 16-\/byte header:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10342}10342 \textcolor{comment}{//      4 bytes: 0x57 0xBC 0x00 0x00}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10343}10343 \textcolor{comment}{//      8 bytes: big-\/endian size of decompressed data, 64-\/bits}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10344}10344 \textcolor{comment}{//      4 bytes: big-\/endian size of window (how far back decompressor may need)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10345}10345 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10346}10346 \textcolor{comment}{//  The following symbols appear in the stream (these were determined ad hoc,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10347}10347 \textcolor{comment}{//  not by analysis):}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10348}10348 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10349}10349 \textcolor{comment}{//  [dict]      00000100 yyyyyyyy yyyyyyyy yyyyyyyy xxxxxxxx xxxxxxxx}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10350}10350 \textcolor{comment}{//  [END]       00000101 11111010 cccccccc cccccccc cccccccc cccccccc}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10351}10351 \textcolor{comment}{//  [dict]      00000110 yyyyyyyy yyyyyyyy yyyyyyyy xxxxxxxx}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10352}10352 \textcolor{comment}{//  [literals]  00000111 zzzzzzzz zzzzzzzz}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10353}10353 \textcolor{comment}{//  [literals]  00001zzz zzzzzzzz}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10354}10354 \textcolor{comment}{//  [dict]      00010yyy yyyyyyyy yyyyyyyy xxxxxxxx xxxxxxxx}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10355}10355 \textcolor{comment}{//  [dict]      00011yyy yyyyyyyy yyyyyyyy xxxxxxxx}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10356}10356 \textcolor{comment}{//  [literals]  001zzzzz}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10357}10357 \textcolor{comment}{//  [dict]      01yyyyyy yyyyyyyy xxxxxxxx}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10358}10358 \textcolor{comment}{//  [dict]      1xxxxxxx yyyyyyyy}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10359}10359 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10360}10360 \textcolor{comment}{//      xxxxxxxx: match length -\/ 1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10361}10361 \textcolor{comment}{//      yyyyyyyy: backwards distance -\/ 1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10362}10362 \textcolor{comment}{//      zzzzzzzz: num literals -\/ 1}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10363}10363 \textcolor{comment}{//      cccccccc: adler32 checksum of decompressed data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10364}10364 \textcolor{comment}{//   (all big-\/endian)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10365}10365 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10366}10366 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10367}10367 STB\_EXTERN stb\_uint stb\_decompress\_length(stb\_uchar *input);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10368}10368 STB\_EXTERN stb\_uint stb\_decompress(stb\_uchar *out,stb\_uchar *in,stb\_uint len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10369}10369 STB\_EXTERN stb\_uint stb\_compress  (stb\_uchar *out,stb\_uchar *in,stb\_uint len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10370}10370 STB\_EXTERN \textcolor{keywordtype}{void} stb\_compress\_window(\textcolor{keywordtype}{int} z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10371}10371 STB\_EXTERN \textcolor{keywordtype}{void} stb\_compress\_hashsize(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} z);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10372}10372 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10373}10373 STB\_EXTERN \textcolor{keywordtype}{int} stb\_compress\_tofile(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *in,  stb\_uint  len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10374}10374 STB\_EXTERN \textcolor{keywordtype}{int} stb\_compress\_intofile(FILE *f, \textcolor{keywordtype}{char} *input,    stb\_uint  len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10375}10375 STB\_EXTERN \textcolor{keywordtype}{char} *stb\_decompress\_fromfile(\textcolor{keywordtype}{char} *filename,      stb\_uint *len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10376}10376 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10377}10377 STB\_EXTERN \textcolor{keywordtype}{int} stb\_compress\_stream\_start(FILE *f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10378}10378 STB\_EXTERN \textcolor{keywordtype}{void} stb\_compress\_stream\_end(\textcolor{keywordtype}{int} close);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10379}10379 STB\_EXTERN \textcolor{keywordtype}{void} stb\_write(\textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} data\_len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10380}10380 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10381}10381 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10382}10382 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10383}10383 stb\_uint stb\_decompress\_length(stb\_uchar *input)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10384}10384 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10385}10385    \textcolor{keywordflow}{return} (input[8] << 24) + (input[9] << 16) + (input[10] << 8) + input[11];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10386}10386 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10387}10387 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10389}10389 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10390}10390 \textcolor{comment}{// simple implementation that just writes whole thing into big block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10391}10391 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10392}10392 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stb\_\_barrier;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10393}10393 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stb\_\_barrier2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10394}10394 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stb\_\_barrier3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10395}10395 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *stb\_\_barrier4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10396}10396 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10397}10397 \textcolor{keyword}{static} stb\_uchar *stb\_\_dout;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10398}10398 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_match(stb\_uchar *data, stb\_uint length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10399}10399 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10400}10400    \textcolor{comment}{// INVERSE of memmove... write each byte before copying the next...}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10401}10401    assert (stb\_\_dout + length <= stb\_\_barrier);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10402}10402    \textcolor{keywordflow}{if} (stb\_\_dout + length > stb\_\_barrier) \{ stb\_\_dout += length; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10403}10403    \textcolor{keywordflow}{if} (data < stb\_\_barrier4) \{ stb\_\_dout = stb\_\_barrier+1; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10404}10404    \textcolor{keywordflow}{while} (length-\/-\/) *stb\_\_dout++ = *data++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10405}10405 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10406}10406 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10407}10407 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_lit(stb\_uchar *data, stb\_uint length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10408}10408 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10409}10409    assert (stb\_\_dout + length <= stb\_\_barrier);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10410}10410    \textcolor{keywordflow}{if} (stb\_\_dout + length > stb\_\_barrier) \{ stb\_\_dout += length; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10411}10411    \textcolor{keywordflow}{if} (data < stb\_\_barrier2) \{ stb\_\_dout = stb\_\_barrier+1; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10412}10412    memcpy(stb\_\_dout, data, length);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10413}10413    stb\_\_dout += length;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10414}10414 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10415}10415 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10416}10416 \textcolor{preprocessor}{\#define stb\_\_in2(x)   ((i[x] << 8) + i[(x)+1])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10417}10417 \textcolor{preprocessor}{\#define stb\_\_in3(x)   ((i[x] << 16) + stb\_\_in2((x)+1))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10418}10418 \textcolor{preprocessor}{\#define stb\_\_in4(x)   ((i[x] << 24) + stb\_\_in3((x)+1))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10419}10419 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10420}10420 \textcolor{keyword}{static} stb\_uchar *stb\_decompress\_token(stb\_uchar *i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10421}10421 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10422}10422    \textcolor{keywordflow}{if} (*i >= 0x20) \{ \textcolor{comment}{// use fewer if's for cases that expand small}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10423}10423       \textcolor{keywordflow}{if} (*i >= 0x80)       stb\_\_match(stb\_\_dout-\/i[1]-\/1, i[0] -\/ 0x80 + 1), i += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10424}10424       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i >= 0x40)  stb\_\_match(stb\_\_dout-\/(stb\_\_in2(0) -\/ 0x4000 + 1), i[2]+1), i += 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10425}10425       \textcolor{keywordflow}{else} \textcolor{comment}{/* *i >= 0x20 */} stb\_\_lit(i+1, i[0] -\/ 0x20 + 1), i += 1 + (i[0] -\/ 0x20 + 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10426}10426    \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// more ifs for cases that expand large, since overhead is amortized}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10427}10427       \textcolor{keywordflow}{if} (*i >= 0x18)       stb\_\_match(stb\_\_dout-\/(stb\_\_in3(0) -\/ 0x180000 + 1), i[3]+1), i += 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10428}10428       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i >= 0x10)  stb\_\_match(stb\_\_dout-\/(stb\_\_in3(0) -\/ 0x100000 + 1), stb\_\_in2(3)+1), i += 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10429}10429       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i >= 0x08)  stb\_\_lit(i+2, stb\_\_in2(0) -\/ 0x0800 + 1), i += 2 + (stb\_\_in2(0) -\/ 0x0800 + 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10430}10430       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i == 0x07)  stb\_\_lit(i+3, stb\_\_in2(1) + 1), i += 3 + (stb\_\_in2(1) + 1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10431}10431       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i == 0x06)  stb\_\_match(stb\_\_dout-\/(stb\_\_in3(1)+1), i[4]+1), i += 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10432}10432       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i == 0x04)  stb\_\_match(stb\_\_dout-\/(stb\_\_in3(1)+1), stb\_\_in2(4)+1), i += 6;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10433}10433    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10434}10434    \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10435}10435 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10436}10436 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10437}10437 stb\_uint stb\_decompress(stb\_uchar *\mbox{\hyperlink{structoutput}{output}}, stb\_uchar *i, stb\_uint length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10438}10438 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10439}10439    stb\_uint olen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10440}10440    \textcolor{keywordflow}{if} (stb\_\_in4(0) != 0x57bC0000) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10441}10441    \textcolor{keywordflow}{if} (stb\_\_in4(4) != 0)          \textcolor{keywordflow}{return} 0; \textcolor{comment}{// error! stream is > 4GB}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10442}10442    olen = stb\_decompress\_length(i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10443}10443    stb\_\_barrier2 = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10444}10444    stb\_\_barrier3 = i+length;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10445}10445    stb\_\_barrier = \mbox{\hyperlink{structoutput}{output}} + olen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10446}10446    stb\_\_barrier4 = \mbox{\hyperlink{structoutput}{output}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10447}10447    i += 16;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10448}10448 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10449}10449    stb\_\_dout = \mbox{\hyperlink{structoutput}{output}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10450}10450    \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10451}10451       stb\_uchar *old\_i = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10452}10452       i = stb\_decompress\_token(i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10453}10453       \textcolor{keywordflow}{if} (i == old\_i) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10454}10454          \textcolor{keywordflow}{if} (*i == 0x05 \&\& i[1] == 0xfa) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10455}10455             assert(stb\_\_dout == \mbox{\hyperlink{structoutput}{output}} + olen);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10456}10456             \textcolor{keywordflow}{if} (stb\_\_dout != \mbox{\hyperlink{structoutput}{output}} + olen) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10457}10457             \textcolor{keywordflow}{if} (stb\_adler32(1, \mbox{\hyperlink{structoutput}{output}}, olen) != (stb\_uint) stb\_\_in4(2))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10458}10458                \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10459}10459             \textcolor{keywordflow}{return} olen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10460}10460          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10461}10461             assert(0); \textcolor{comment}{/* NOTREACHED */}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10462}10462             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10463}10463          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10464}10464       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10465}10465       assert(stb\_\_dout <= \mbox{\hyperlink{structoutput}{output}} + olen);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10466}10466       \textcolor{keywordflow}{if} (stb\_\_dout > \mbox{\hyperlink{structoutput}{output}} + olen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10467}10467          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10468}10468    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10469}10469 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10470}10470 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10471}10471 \textcolor{keywordtype}{char} *stb\_decompress\_fromfile(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} *len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10472}10472 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10473}10473    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10474}10474    \textcolor{keywordtype}{char} *q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10475}10475    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10476}10476    FILE *f = stb\_p\_fopen(filename, \textcolor{stringliteral}{"{}rb"{}});   \textcolor{keywordflow}{if} (f == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10477}10477    fseek(f, 0, SEEK\_END);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10478}10478    n = ftell(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10479}10479    fseek(f, 0, SEEK\_SET);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10480}10480    p = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} * ) malloc(n); \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10481}10481    fread(p, 1, n, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10482}10482    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10483}10483    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10484}10484    \textcolor{keywordflow}{if} (p[0] != 0x57 || p[1] != 0xBc || p[2] || p[3]) \{ free(p); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10485}10485    q = (\textcolor{keywordtype}{char} *) malloc(stb\_decompress\_length(p)+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10486}10486    \textcolor{keywordflow}{if} (!q) \{ free(p); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10487}10487    *len = stb\_decompress((\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) q, p, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10488}10488    \textcolor{keywordflow}{if} (*len) q[*len] = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10489}10489    free(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10490}10490    \textcolor{keywordflow}{return} q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10491}10491 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10492}10492 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10493}10493 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10494}10494 \textcolor{comment}{//  streaming decompressor}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10495}10495 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10496}10496 \textcolor{keyword}{static} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10497}10497 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10498}10498    stb\_\_uchar *in\_buffer;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10499}10499    stb\_\_uchar *match;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10500}10500 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10501}10501    stb\_\_uint pending\_literals;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10502}10502    stb\_\_uint pending\_match;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10503}10503 \} xx;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10504}10504 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10505}10505 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10506}10506 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10507}10507 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_match(stb\_uchar *data, stb\_uint length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10508}10508 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10509}10509    \textcolor{comment}{// INVERSE of memmove... write each byte before copying the next...}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10510}10510    assert (stb\_\_dout + length <= stb\_\_barrier);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10511}10511    \textcolor{keywordflow}{if} (stb\_\_dout + length > stb\_\_barrier) \{ stb\_\_dout += length; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10512}10512    \textcolor{keywordflow}{if} (data < stb\_\_barrier2) \{ stb\_\_dout = stb\_\_barrier+1; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10513}10513    \textcolor{keywordflow}{while} (length-\/-\/) *stb\_\_dout++ = *data++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10514}10514 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10515}10515 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10516}10516 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_lit(stb\_uchar *data, stb\_uint length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10517}10517 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10518}10518    assert (stb\_\_dout + length <= stb\_\_barrier);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10519}10519    \textcolor{keywordflow}{if} (stb\_\_dout + length > stb\_\_barrier) \{ stb\_\_dout += length; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10520}10520    \textcolor{keywordflow}{if} (data < stb\_\_barrier2) \{ stb\_\_dout = stb\_\_barrier+1; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10521}10521    memcpy(stb\_\_dout, data, length);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10522}10522    stb\_\_dout += length;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10523}10523 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10524}10524 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10525}10525 \textcolor{keyword}{static} \textcolor{keywordtype}{void} sx\_match(stb\_uchar *data, stb\_uint length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10526}10526 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10527}10527    xx.match = data;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10528}10528    xx.pending\_match = length;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10529}10529 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10530}10530 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10531}10531 \textcolor{keyword}{static} \textcolor{keywordtype}{void} sx\_lit(stb\_uchar *data, stb\_uint length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10532}10532 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10533}10533    xx.pending\_lit = length;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10534}10534 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10535}10535 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10536}10536 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_decompress\_token\_state(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10537}10537 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10538}10538    stb\_\_uchar *i = xx.in\_buffer;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10539}10539 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10540}10540    \textcolor{keywordflow}{if} (*i >= 0x20) \{ \textcolor{comment}{// use fewer if's for cases that expand small}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10541}10541       \textcolor{keywordflow}{if} (*i >= 0x80)       sx\_match(stb\_\_dout-\/i[1]-\/1, i[0] -\/ 0x80 + 1), i += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10542}10542       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i >= 0x40)  sx\_match(stb\_\_dout-\/(stb\_\_in2(0) -\/ 0x4000 + 1), i[2]+1), i += 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10543}10543       \textcolor{keywordflow}{else} \textcolor{comment}{/* *i >= 0x20 */} sx\_lit(i+1, i[0] -\/ 0x20 + 1), i += 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10544}10544    \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// more ifs for cases that expand large, since overhead is amortized}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10545}10545       \textcolor{keywordflow}{if} (*i >= 0x18)       sx\_match(stb\_\_dout-\/(stb\_\_in3(0) -\/ 0x180000 + 1), i[3]+1), i += 4;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10546}10546       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i >= 0x10)  sx\_match(stb\_\_dout-\/(stb\_\_in3(0) -\/ 0x100000 + 1), stb\_\_in2(3)+1), i += 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10547}10547       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i >= 0x08)  sx\_lit(i+2, stb\_\_in2(0) -\/ 0x0800 + 1), i += 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10548}10548       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i == 0x07)  sx\_lit(i+3, stb\_\_in2(1) + 1), i += 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10549}10549       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i == 0x06)  sx\_match(stb\_\_dout-\/(stb\_\_in3(1)+1), i[4]+1), i += 5;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10550}10550       \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (*i == 0x04)  sx\_match(stb\_\_dout-\/(stb\_\_in3(1)+1), stb\_\_in2(4)+1), i += 6;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10551}10551       \textcolor{keywordflow}{else} \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10552}10552    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10553}10553    xx.in\_buffer = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10554}10554    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10555}10555 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10556}10556 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10557}10557 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10558}10558 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10559}10559 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10561}10561 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10562}10562 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_matchlen(stb\_uchar *m1, stb\_uchar *m2, stb\_uint maxlen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10563}10563 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10564}10564    stb\_uint i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10565}10565    \textcolor{keywordflow}{for} (i=0; i < maxlen; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10566}10566       \textcolor{keywordflow}{if} (m1[i] != m2[i]) \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10567}10567    \textcolor{keywordflow}{return} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10568}10568 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10569}10569 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10570}10570 \textcolor{comment}{// simple implementation that just takes the source data in a big block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10571}10571 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10572}10572 \textcolor{keyword}{static} stb\_uchar *stb\_\_out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10573}10573 \textcolor{keyword}{static} FILE      *stb\_\_outfile;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10574}10574 \textcolor{keyword}{static} stb\_uint   stb\_\_outbytes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10575}10575 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10576}10576 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_write(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} v)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10577}10577 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10578}10578    fputc(v, stb\_\_outfile);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10579}10579    ++stb\_\_outbytes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10580}10580 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10581}10581 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10582}10582 \textcolor{preprocessor}{\#define stb\_out(v)    (stb\_\_out ? (void)(*stb\_\_out++ = (stb\_uchar) (v)) : stb\_\_write((stb\_uchar) (v)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10583}10583 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10584}10584 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_out2(stb\_uint v)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10585}10585 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10586}10586    stb\_out(v >> 8);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10587}10587    stb\_out(v);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10588}10588 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10589}10589 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10590}10590 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_out3(stb\_uint v) \{ stb\_out(v >> 16); stb\_out(v >> 8); stb\_out(v); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10591}10591 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_out4(stb\_uint v) \{ stb\_out(v >> 24); stb\_out(v >> 16);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10592}10592                                    stb\_out(v >> 8 ); stb\_out(v);                  \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10593}10593 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10594}10594 \textcolor{keyword}{static} \textcolor{keywordtype}{void} outliterals(stb\_uchar *in, ptrdiff\_t numlit)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10595}10595 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10596}10596    \textcolor{keywordflow}{while} (numlit > 65536) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10597}10597       outliterals(in,65536);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10598}10598       in     += 65536;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10599}10599       numlit -\/= 65536;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10600}10600    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10601}10601 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10602}10602    \textcolor{keywordflow}{if}      (numlit ==     0)    ;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10603}10603    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (numlit <=    32)    stb\_out (0x000020 + (stb\_uint) numlit-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10604}10604    \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (numlit <=  2048)    stb\_out2(0x000800 + (stb\_uint) numlit-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10605}10605    \textcolor{keywordflow}{else} \textcolor{comment}{/*  numlit <= 65536) */} stb\_out3(0x070000 + (stb\_uint) numlit-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10606}10606 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10607}10607    \textcolor{keywordflow}{if} (stb\_\_out) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10608}10608       memcpy(stb\_\_out,in,numlit);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10609}10609       stb\_\_out += numlit;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10610}10610    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10611}10611       fwrite(in, 1, numlit, stb\_\_outfile);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10612}10612 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10613}10613 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10614}10614 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_window = 0x40000; \textcolor{comment}{// 256K}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10615}10615 \textcolor{keywordtype}{void} stb\_compress\_window(\textcolor{keywordtype}{int} z)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10616}10616 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10617}10617    \textcolor{keywordflow}{if} (z >= 0x1000000) z = 0x1000000; \textcolor{comment}{// limit of implementation}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10618}10618    \textcolor{keywordflow}{if} (z <      0x100) z = 0x100;   \textcolor{comment}{// insanely small}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10619}10619    stb\_\_window = z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10620}10620 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10621}10621 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10622}10622 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_not\_crap(\textcolor{keywordtype}{int} best, \textcolor{keywordtype}{int} dist)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10623}10623 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10624}10624    \textcolor{keywordflow}{return}   ((best > 2  \&\&  dist <= 0x00100)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10625}10625           || (best > 5  \&\&  dist <= 0x04000)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10626}10626           || (best > 7  \&\&  dist <= 0x80000));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10627}10627 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10628}10628 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10629}10629 \textcolor{keyword}{static}  stb\_uint stb\_\_hashsize = 32768;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10630}10630 \textcolor{keywordtype}{void} stb\_compress\_hashsize(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} y)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10631}10631 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10632}10632    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} z = 1024;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10633}10633    \textcolor{keywordflow}{while} (z < y) z <<= 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10634}10634    stb\_\_hashsize = z >> 2;   \textcolor{comment}{// pass in bytes, store \#pointers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10635}10635 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10636}10636 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10637}10637 \textcolor{comment}{// note that you can play with the hashing functions all you}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10638}10638 \textcolor{comment}{// want without needing to change the decompressor}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10639}10639 \textcolor{preprocessor}{\#define stb\_\_hc(q,h,c)      (((h) << 7) + ((h) >> 25) + q[c])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10640}10640 \textcolor{preprocessor}{\#define stb\_\_hc2(q,h,c,d)   (((h) << 14) + ((h) >> 18) + (q[c] << 7) + q[d])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10641}10641 \textcolor{preprocessor}{\#define stb\_\_hc3(q,c,d,e)   ((q[c] << 14) + (q[d] << 7) + q[e])}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10642}10642 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10643}10643 \textcolor{keyword}{static} stb\_uint32 stb\_\_running\_adler;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10644}10644 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10645}10645 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_compress\_chunk(stb\_uchar *history,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10646}10646                               stb\_uchar *start,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10647}10647                               stb\_uchar *end,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10648}10648                               \textcolor{keywordtype}{int} length,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10649}10649                               \textcolor{keywordtype}{int} *pending\_literals,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10650}10650                               stb\_uchar **chash,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10651}10651                               stb\_uint \mbox{\hyperlink{structmask}{mask}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10652}10652 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10653}10653    \textcolor{keywordtype}{int} window = stb\_\_window;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10654}10654    stb\_uint match\_max;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10655}10655    stb\_uchar *lit\_start = start -\/ *pending\_literals;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10656}10656    stb\_uchar *q = start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10657}10657 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10658}10658 \textcolor{preprocessor}{   \#define STB\_\_SCRAMBLE(h)   (((h) + ((h) >> 16)) \& mask)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10659}10659 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10660}10660    \textcolor{comment}{// stop short of the end so we don't scan off the end doing}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10661}10661    \textcolor{comment}{// the hashing; this means we won't compress the last few bytes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10662}10662    \textcolor{comment}{// unless they were part of something longer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10663}10663    \textcolor{keywordflow}{while} (q < start+length \&\& q+12 < end) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10664}10664       \textcolor{keywordtype}{int} m;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10665}10665       stb\_uint h1,h2,h3,h4, h;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10666}10666       stb\_uchar *t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10667}10667       \textcolor{keywordtype}{int} best = 2, dist=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10668}10668 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10669}10669       \textcolor{keywordflow}{if} (q+65536 > end)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10670}10670          match\_max = (stb\_uint) (end-\/q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10671}10671       \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10672}10672          match\_max = 65536u;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10673}10673 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10674}10674 \textcolor{preprocessor}{      \#define stb\_\_nc(b,d)  ((d) <= window \&\& ((b) > 9 || stb\_not\_crap(b,d)))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10675}10675 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10676}10676 \textcolor{preprocessor}{      \#define STB\_\_TRY(t,p)  }\textcolor{comment}{/* avoid retrying a match we already tried */}\textcolor{preprocessor}{ \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10677}10677 \textcolor{preprocessor}{                      if (p ? dist != (int) (q-\/t) : 1)                     \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10678}10678 \textcolor{preprocessor}{                      if ((m = (int) stb\_matchlen(t, q, match\_max)) > best)\(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10679}10679 \textcolor{preprocessor}{                      if (stb\_\_nc(m,(int) (q-\/(t))))                        \(\backslash\)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10680}10680 \textcolor{preprocessor}{                          best = m, dist = (int) (q -\/ (t))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10681}10681 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10682}10682       \textcolor{comment}{// rather than search for all matches, only try 4 candidate locations,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10683}10683       \textcolor{comment}{// chosen based on 4 different hash functions of different lengths.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10684}10684       \textcolor{comment}{// this strategy is inspired by LZO; hashing is unrolled here using the}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10685}10685       \textcolor{comment}{// 'hc' macro}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10686}10686       h = stb\_\_hc3(q,0, 1, 2); h1 = STB\_\_SCRAMBLE(h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10687}10687                                       t = chash[h1]; \textcolor{keywordflow}{if} (t) STB\_\_TRY(t,0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10688}10688       h = stb\_\_hc2(q,h, 3, 4); h2 = STB\_\_SCRAMBLE(h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10689}10689       h = stb\_\_hc2(q,h, 5, 6);        t = chash[h2]; \textcolor{keywordflow}{if} (t) STB\_\_TRY(t,1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10690}10690       h = stb\_\_hc2(q,h, 7, 8); h3 = STB\_\_SCRAMBLE(h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10691}10691       h = stb\_\_hc2(q,h, 9,10);        t = chash[h3]; \textcolor{keywordflow}{if} (t) STB\_\_TRY(t,1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10692}10692       h = stb\_\_hc2(q,h,11,12); h4 = STB\_\_SCRAMBLE(h);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10693}10693                                       t = chash[h4]; \textcolor{keywordflow}{if} (t) STB\_\_TRY(t,1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10694}10694 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10695}10695       \textcolor{comment}{// because we use a shared hash table, can only update it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10696}10696       \textcolor{comment}{// \_after\_ we've probed all of them}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10697}10697       chash[h1] = chash[h2] = chash[h3] = chash[h4] = q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10698}10698 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10699}10699       \textcolor{keywordflow}{if} (best > 2)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10700}10700          assert(dist > 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10701}10701 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10702}10702       \textcolor{comment}{// see if our best match qualifies}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10703}10703       \textcolor{keywordflow}{if} (best < 3) \{ \textcolor{comment}{// fast path literals}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10704}10704          ++q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10705}10705       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (best > 2  \&\&  best <= 0x80    \&\&  dist <= 0x100) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10706}10706          outliterals(lit\_start, q-\/lit\_start); lit\_start = (q += best);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10707}10707          stb\_out(0x80 + best-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10708}10708          stb\_out(dist-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10709}10709       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (best > 5  \&\&  best <= 0x100   \&\&  dist <= 0x4000) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10710}10710          outliterals(lit\_start, q-\/lit\_start); lit\_start = (q += best);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10711}10711          stb\_out2(0x4000 + dist-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10712}10712          stb\_out(best-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10713}10713       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (best > 7  \&\&  best <= 0x100   \&\&  dist <= 0x80000) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10714}10714          outliterals(lit\_start, q-\/lit\_start); lit\_start = (q += best);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10715}10715          stb\_out3(0x180000 + dist-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10716}10716          stb\_out(best-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10717}10717       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (best > 8  \&\&  best <= 0x10000 \&\&  dist <= 0x80000) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10718}10718          outliterals(lit\_start, q-\/lit\_start); lit\_start = (q += best);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10719}10719          stb\_out3(0x100000 + dist-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10720}10720          stb\_out2(best-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10721}10721       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (best > 9                      \&\&  dist <= 0x1000000) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10722}10722          \textcolor{keywordflow}{if} (best > 65536) best = 65536;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10723}10723          outliterals(lit\_start, q-\/lit\_start); lit\_start = (q += best);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10724}10724          \textcolor{keywordflow}{if} (best <= 0x100) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10725}10725             stb\_out(0x06);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10726}10726             stb\_out3(dist-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10727}10727             stb\_out(best-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10728}10728          \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10729}10729             stb\_out(0x04);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10730}10730             stb\_out3(dist-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10731}10731             stb\_out2(best-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10732}10732          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10733}10733       \} \textcolor{keywordflow}{else} \{  \textcolor{comment}{// fallback literals if no match was a balanced tradeoff}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10734}10734          ++q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10735}10735       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10736}10736    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10737}10737 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10738}10738    \textcolor{comment}{// if we didn't get all the way, add the rest to literals}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10739}10739    \textcolor{keywordflow}{if} (q-\/start < length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10740}10740       q = start+length;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10741}10741 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10742}10742    \textcolor{comment}{// the literals are everything from lit\_start to q}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10743}10743    *pending\_literals = (int) (q -\/ lit\_start);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10744}10744 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10745}10745    stb\_\_running\_adler = stb\_adler32(stb\_\_running\_adler, start, (\textcolor{keywordtype}{int}) (q -\/ start));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10746}10746    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int}) (q -\/ start);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10747}10747 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10748}10748 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10749}10749 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_compress\_inner(stb\_uchar *input, stb\_uint length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10750}10750 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10751}10751    \textcolor{keywordtype}{int} literals = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10752}10752    stb\_uint len,i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10753}10753 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10754}10754    stb\_uchar **chash;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10755}10755    chash = (stb\_uchar**) malloc(stb\_\_hashsize * \textcolor{keyword}{sizeof}(stb\_uchar*));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10756}10756    \textcolor{keywordflow}{if} (chash == NULL) \textcolor{keywordflow}{return} 0; \textcolor{comment}{// failure}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10757}10757    \textcolor{keywordflow}{for} (i=0; i < stb\_\_hashsize; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10758}10758       chash[i] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10759}10759 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10760}10760    \textcolor{comment}{// stream signature}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10761}10761    stb\_out(0x57); stb\_out(0xbc);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10762}10762    stb\_out2(0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10763}10763 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10764}10764    stb\_out4(0);       \textcolor{comment}{// 64-\/bit length requires 32-\/bit leading 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10765}10765    stb\_out4(length);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10766}10766    stb\_out4(stb\_\_window);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10767}10767 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10768}10768    stb\_\_running\_adler = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10769}10769 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10770}10770    len = stb\_compress\_chunk(input, input, input+length, length, \&literals, chash, stb\_\_hashsize-\/1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10771}10771    assert(len == length);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10772}10772 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10773}10773    outliterals(input+length -\/ literals, literals);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10774}10774 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10775}10775    free(chash);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10776}10776 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10777}10777    stb\_out2(0x05fa); \textcolor{comment}{// end opcode}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10778}10778 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10779}10779    stb\_out4(stb\_\_running\_adler);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10780}10780 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10781}10781    \textcolor{keywordflow}{return} 1; \textcolor{comment}{// success}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10782}10782 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10783}10783 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10784}10784 stb\_uint stb\_compress(stb\_uchar *out, stb\_uchar *input, stb\_uint length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10785}10785 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10786}10786    stb\_\_out = out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10787}10787    stb\_\_outfile = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10788}10788 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10789}10789    stb\_compress\_inner(input, length);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10790}10790 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10791}10791    \textcolor{keywordflow}{return} (stb\_uint) (stb\_\_out -\/ out);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10792}10792 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10793}10793 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10794}10794 \textcolor{keywordtype}{int} stb\_compress\_tofile(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *input, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10795}10795 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10796}10796    \textcolor{comment}{//int maxlen = length + 512 + (length >> 2); // total guess}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10797}10797    \textcolor{comment}{//char *buffer = (char *) malloc(maxlen);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10798}10798    \textcolor{comment}{//int blen = stb\_compress((stb\_uchar*)buffer, (stb\_uchar*)input, length);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10799}10799 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10800}10800    stb\_\_out = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10801}10801    stb\_\_outfile = stb\_p\_fopen(filename, \textcolor{stringliteral}{"{}wb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10802}10802    \textcolor{keywordflow}{if} (!stb\_\_outfile) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10803}10803 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10804}10804    stb\_\_outbytes = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10805}10805 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10806}10806    \textcolor{keywordflow}{if} (!stb\_compress\_inner((stb\_uchar*)input, length))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10807}10807       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10808}10808 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10809}10809    fclose(stb\_\_outfile);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10810}10810 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10811}10811    \textcolor{keywordflow}{return} stb\_\_outbytes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10812}10812 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10813}10813 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10814}10814 \textcolor{keywordtype}{int} stb\_compress\_intofile(FILE *f, \textcolor{keywordtype}{char} *input, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} length)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10815}10815 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10816}10816    \textcolor{comment}{//int maxlen = length + 512 + (length >> 2); // total guess}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10817}10817    \textcolor{comment}{//char *buffer = (char*)malloc(maxlen);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10818}10818    \textcolor{comment}{//int blen = stb\_compress((stb\_uchar*)buffer, (stb\_uchar*)input, length);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10819}10819 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10820}10820    stb\_\_out = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10821}10821    stb\_\_outfile = f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10822}10822    \textcolor{keywordflow}{if} (!stb\_\_outfile) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10823}10823 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10824}10824    stb\_\_outbytes = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10825}10825 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10826}10826    \textcolor{keywordflow}{if} (!stb\_compress\_inner((stb\_uchar*)input, length))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10827}10827       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10828}10828 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10829}10829    \textcolor{keywordflow}{return} stb\_\_outbytes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10830}10830 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10831}10831 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10833}10833 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10834}10834 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10835}10835 \textcolor{keyword}{static} \textcolor{keywordtype}{size\_t} stb\_out\_backpatch\_id(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10836}10836 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10837}10837    \textcolor{keywordflow}{if} (stb\_\_out)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10838}10838       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{size\_t}) stb\_\_out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10839}10839    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10840}10840       \textcolor{keywordflow}{return} ftell(stb\_\_outfile);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10841}10841 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10842}10842 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10843}10843 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_out\_backpatch(\textcolor{keywordtype}{size\_t} \textcolor{keywordtype}{id}, stb\_uint \mbox{\hyperlink{classvalue}{value}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10844}10844 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10845}10845    stb\_uchar data[4] = \{ (stb\_uchar)(\mbox{\hyperlink{classvalue}{value}} >> 24), (stb\_uchar)(\mbox{\hyperlink{classvalue}{value}} >> 16), (stb\_uchar)(\mbox{\hyperlink{classvalue}{value}} >> 8), (stb\_uchar)(\mbox{\hyperlink{classvalue}{value}}) \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10846}10846    \textcolor{keywordflow}{if} (stb\_\_out) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10847}10847       memcpy((\textcolor{keywordtype}{void} *) \textcolor{keywordtype}{id}, data, 4);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10848}10848    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10849}10849       stb\_uint where = ftell(stb\_\_outfile);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10850}10850       fseek(stb\_\_outfile, (\textcolor{keywordtype}{long}) \textcolor{keywordtype}{id}, SEEK\_SET);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10851}10851       fwrite(data, 4, 1, stb\_\_outfile);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10852}10852       fseek(stb\_\_outfile, where, SEEK\_SET);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10853}10853    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10854}10854 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10855}10855 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10856}10856 \textcolor{comment}{// ok, the wraparound buffer was a total failure. let's instead}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10857}10857 \textcolor{comment}{// use a copying-\/in-\/place buffer, which lets us share the code.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10858}10858 \textcolor{comment}{// This is way less efficient but it'll do for now.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10859}10859 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10860}10860 \textcolor{keyword}{static} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10861}10861 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10862}10862    stb\_uchar *\mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10863}10863    \textcolor{keywordtype}{int} size;           \textcolor{comment}{// physical size of buffer in bytes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10864}10864 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10865}10865    \textcolor{keywordtype}{int} valid;          \textcolor{comment}{// amount of valid data in bytes}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10866}10866    \textcolor{keywordtype}{int} start;          \textcolor{comment}{// bytes of data already output}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10867}10867 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10868}10868    \textcolor{keywordtype}{int} window;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10869}10869    \textcolor{keywordtype}{int} fsize;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10870}10870 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10871}10871    \textcolor{keywordtype}{int} pending\_literals; \textcolor{comment}{// bytes not-\/quite output but counted in start}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10872}10872    \textcolor{keywordtype}{int} length\_id;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10873}10873 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10874}10874    stb\_uint total\_bytes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10875}10875 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10876}10876    stb\_uchar **chash;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10877}10877    stb\_uint    hashmask;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10878}10878 \} xtb;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10879}10879 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10880}10880 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_compress\_streaming\_start(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10881}10881 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10882}10882    stb\_uint i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10883}10883    xtb.size = stb\_\_window * 3;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10884}10884    xtb.buffer = (stb\_uchar*)malloc(xtb.size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10885}10885    \textcolor{keywordflow}{if} (!xtb.buffer) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10886}10886 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10887}10887    xtb.chash = (stb\_uchar**)malloc(\textcolor{keyword}{sizeof}(*xtb.chash) * stb\_\_hashsize);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10888}10888    \textcolor{keywordflow}{if} (!xtb.chash) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10889}10889       free(xtb.buffer);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10890}10890       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10891}10891    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10892}10892 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10893}10893    \textcolor{keywordflow}{for} (i=0; i < stb\_\_hashsize; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10894}10894       xtb.chash[i] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10895}10895 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10896}10896    xtb.hashmask = stb\_\_hashsize-\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10897}10897 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10898}10898    xtb.valid        = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10899}10899    xtb.start        = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10900}10900    xtb.window       = stb\_\_window;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10901}10901    xtb.fsize        = stb\_\_window;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10902}10902    xtb.pending\_literals = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10903}10903    xtb.total\_bytes  = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10904}10904 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10905}10905       \textcolor{comment}{// stream signature}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10906}10906    stb\_out(0x57); stb\_out(0xbc); stb\_out2(0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10907}10907 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10908}10908    stb\_out4(0);       \textcolor{comment}{// 64-\/bit length requires 32-\/bit leading 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10909}10909 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10910}10910    xtb.length\_id = (int) stb\_out\_backpatch\_id();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10911}10911    stb\_out4(0);       \textcolor{comment}{// we don't know the output length yet}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10912}10912 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10913}10913    stb\_out4(stb\_\_window);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10914}10914 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10915}10915    stb\_\_running\_adler = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10916}10916 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10917}10917    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10918}10918 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10919}10919 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10920}10920 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_compress\_streaming\_end(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10921}10921 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10922}10922    \textcolor{comment}{// flush out any remaining data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10923}10923    stb\_compress\_chunk(xtb.buffer, xtb.buffer+xtb.start, xtb.buffer+xtb.valid,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10924}10924                       xtb.valid-\/xtb.start, \&xtb.pending\_literals, xtb.chash, xtb.hashmask);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10925}10925 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10926}10926    \textcolor{comment}{// write out pending literals}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10927}10927    outliterals(xtb.buffer + xtb.valid -\/ xtb.pending\_literals, xtb.pending\_literals);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10928}10928 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10929}10929    stb\_out2(0x05fa); \textcolor{comment}{// end opcode}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10930}10930    stb\_out4(stb\_\_running\_adler);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10931}10931 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10932}10932    stb\_out\_backpatch(xtb.length\_id, xtb.total\_bytes);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10933}10933 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10934}10934    free(xtb.buffer);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10935}10935    free(xtb.chash);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10936}10936    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10937}10937 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10938}10938 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10939}10939 \textcolor{keywordtype}{void} stb\_write(\textcolor{keywordtype}{char} *data, \textcolor{keywordtype}{int} data\_len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10940}10940 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10941}10941    stb\_uint i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10942}10942 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10943}10943    \textcolor{comment}{// @TODO: fast path for filling the buffer and doing nothing else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10944}10944    \textcolor{comment}{//   if (xtb.valid + data\_len < xtb.size)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10945}10945 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10946}10946    xtb.total\_bytes += data\_len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10947}10947 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10948}10948    \textcolor{keywordflow}{while} (data\_len) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10949}10949       \textcolor{comment}{// fill buffer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10950}10950       \textcolor{keywordflow}{if} (xtb.valid < xtb.size) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10951}10951          \textcolor{keywordtype}{int} amt = xtb.size -\/ xtb.valid;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10952}10952          \textcolor{keywordflow}{if} (data\_len < amt) amt = data\_len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10953}10953          memcpy(xtb.buffer + xtb.valid, data, amt);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10954}10954          data\_len -\/= amt;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10955}10955          data     += amt;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10956}10956          xtb.valid += amt;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10957}10957       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10958}10958       \textcolor{keywordflow}{if} (xtb.valid < xtb.size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10959}10959          \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10960}10960 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10961}10961       \textcolor{comment}{// at this point, the buffer is full}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10962}10962 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10963}10963       \textcolor{comment}{// if we can process some data, go for it; make sure}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10964}10964       \textcolor{comment}{// we leave an 'fsize's worth of data, though}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10965}10965       \textcolor{keywordflow}{if} (xtb.start + xtb.fsize < xtb.valid) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10966}10966          \textcolor{keywordtype}{int} amount = (xtb.valid -\/ xtb.fsize) -\/ xtb.start;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10967}10967          \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10968}10968          assert(amount > 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10969}10969          n = stb\_compress\_chunk(xtb.buffer, xtb.buffer + xtb.start, xtb.buffer + xtb.valid,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10970}10970                                 amount, \&xtb.pending\_literals, xtb.chash, xtb.hashmask);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10971}10971          xtb.start += n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10972}10972       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10973}10973 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10974}10974       assert(xtb.start + xtb.fsize >= xtb.valid);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10975}10975       \textcolor{comment}{// at this point, our future size is too small, so we}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10976}10976       \textcolor{comment}{// need to flush some history. we, in fact, flush exactly}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10977}10977       \textcolor{comment}{// one window's worth of history}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10978}10978 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10979}10979       \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10980}10980          \textcolor{keywordtype}{int} flush = xtb.window;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10981}10981          assert(xtb.start >= flush);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10982}10982          assert(xtb.valid >= flush);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10983}10983 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10984}10984          \textcolor{comment}{// if 'pending literals' extends back into the shift region,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10985}10985          \textcolor{comment}{// write them out}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10986}10986          \textcolor{keywordflow}{if} (xtb.start -\/ xtb.pending\_literals < flush) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10987}10987             outliterals(xtb.buffer + xtb.start -\/ xtb.pending\_literals, xtb.pending\_literals);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10988}10988             xtb.pending\_literals = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10989}10989          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10990}10990 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10991}10991          \textcolor{comment}{// now shift the window}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10992}10992          memmove(xtb.buffer, xtb.buffer + flush, xtb.valid -\/ flush);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10993}10993          xtb.start -\/= flush;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10994}10994          xtb.valid -\/= flush;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10995}10995 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10996}10996          \textcolor{keywordflow}{for} (i=0; i <= xtb.hashmask; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10997}10997             \textcolor{keywordflow}{if} (xtb.chash[i] < xtb.buffer + flush)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10998}10998                xtb.chash[i] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l10999}10999             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11000}11000                xtb.chash[i] -\/= flush;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11001}11001       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11002}11002       \textcolor{comment}{// and now that we've made room for more data, go back to the top}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11003}11003    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11004}11004 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11005}11005 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11006}11006 \textcolor{keywordtype}{int} stb\_compress\_stream\_start(FILE *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11007}11007 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11008}11008    stb\_\_out = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11009}11009    stb\_\_outfile = f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11010}11010 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11011}11011    \textcolor{keywordflow}{if} (f == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11012}11012       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11013}11013 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11014}11014    \textcolor{keywordflow}{if} (!stb\_compress\_streaming\_start())}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11015}11015       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11016}11016 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11017}11017    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11018}11018 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11019}11019 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11020}11020 \textcolor{keywordtype}{void} stb\_compress\_stream\_end(\textcolor{keywordtype}{int} close)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11021}11021 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11022}11022    stb\_compress\_streaming\_end();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11023}11023    \textcolor{keywordflow}{if} (close \&\& stb\_\_outfile) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11024}11024       fclose(stb\_\_outfile);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11025}11025    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11026}11026 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11027}11027 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11028}11028 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11029}11029 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11031}11031 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11032}11032 \textcolor{comment}{//  File abstraction... tired of not having this... we can write}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11033}11033 \textcolor{comment}{//  compressors to be layers over these that auto-\/close their children.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11034}11034 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11035}11035 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11036}\mbox{\hyperlink{structstbfile}{11036}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\mbox{\hyperlink{structstbfile}{stbfile}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11037}11037 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11038}11038    int (*getbyte)(\textcolor{keyword}{struct }\mbox{\hyperlink{structstbfile}{stbfile}} *);  \textcolor{comment}{// -\/1 on EOF}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11039}11039    \textcolor{keywordtype}{unsigned} int (*getdata)(\textcolor{keyword}{struct }\mbox{\hyperlink{structstbfile}{stbfile}} *, \textcolor{keywordtype}{void} *block, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11040}11040 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11041}11041    int (*putbyte)(\textcolor{keyword}{struct }\mbox{\hyperlink{structstbfile}{stbfile}} *, \textcolor{keywordtype}{int} \mbox{\hyperlink{group__gtx__raw__data_gacd7fe1f2ad60a57f7d7ad4f1e6836efd}{byte}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11042}11042    \textcolor{keywordtype}{unsigned} int (*putdata)(\textcolor{keyword}{struct }\mbox{\hyperlink{structstbfile}{stbfile}} *, \textcolor{keywordtype}{void} *block, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11043}11043 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11044}11044    \textcolor{keywordtype}{unsigned} int (*size)(\textcolor{keyword}{struct }\mbox{\hyperlink{structstbfile}{stbfile}} *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11045}11045 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11046}11046    \textcolor{keywordtype}{unsigned} int (*tell)(\textcolor{keyword}{struct }\mbox{\hyperlink{structstbfile}{stbfile}} *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11047}11047    void (*backpatch)(\textcolor{keyword}{struct }\mbox{\hyperlink{structstbfile}{stbfile}} *, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} tell, \textcolor{keywordtype}{void} *block, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11048}11048 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11049}11049    void (*close)(\textcolor{keyword}{struct }\mbox{\hyperlink{structstbfile}{stbfile}} *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11050}11050 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11051}11051    FILE *f;  \textcolor{comment}{// file to fread/fwrite}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11052}11052    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\mbox{\hyperlink{classbuffer}{buffer}}; \textcolor{comment}{// input/output buffer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11053}11053    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *indata, *inend; \textcolor{comment}{// input buffer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11054}11054    \textcolor{keyword}{union }\{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11055}11055       \textcolor{keywordtype}{int} various;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11056}11056       \textcolor{keywordtype}{void} *ptr;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11057}11057    \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11058}11058 \} \mbox{\hyperlink{structstbfile}{stbfile}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11059}11059 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11060}11060 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_getc(\mbox{\hyperlink{structstbfile}{stbfile}} *f); \textcolor{comment}{// read}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11061}11061 STB\_EXTERN \textcolor{keywordtype}{int} stb\_putc(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{int} ch); \textcolor{comment}{// write}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11062}11062 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_getdata(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len); \textcolor{comment}{// read}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11063}11063 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_putdata(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len); \textcolor{comment}{// write}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11064}11064 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_tell(\mbox{\hyperlink{structstbfile}{stbfile}} *f); \textcolor{comment}{// read}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11065}11065 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_size(\mbox{\hyperlink{structstbfile}{stbfile}} *f); \textcolor{comment}{// read/write}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11066}11066 STB\_EXTERN \textcolor{keywordtype}{void} stb\_backpatch(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} tell, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len); \textcolor{comment}{// write}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11067}11067 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11068}11068 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11069}11069 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11070}11070 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_getc(\mbox{\hyperlink{structstbfile}{stbfile}} *f) \{ \textcolor{keywordflow}{return} f-\/>getbyte(f); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11071}11071 \textcolor{keywordtype}{int} stb\_putc(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{int} ch)  \{ \textcolor{keywordflow}{return} f-\/>putbyte(f, ch); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11072}11072 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11073}11073 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_getdata(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11074}11074 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11075}11075    \textcolor{keywordflow}{return} f-\/>getdata(f, \mbox{\hyperlink{classbuffer}{buffer}}, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11076}11076 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11077}11077 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_putdata(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11078}11078 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11079}11079    \textcolor{keywordflow}{return} f-\/>putdata(f, \mbox{\hyperlink{classbuffer}{buffer}}, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11080}11080 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11081}11081 \textcolor{keywordtype}{void} stb\_close(\mbox{\hyperlink{structstbfile}{stbfile}} *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11082}11082 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11083}11083    f-\/>close(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11084}11084    free(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11085}11085 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11086}11086 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_tell(\mbox{\hyperlink{structstbfile}{stbfile}} *f) \{ \textcolor{keywordflow}{return} f-\/>tell(f); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11087}11087 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_size(\mbox{\hyperlink{structstbfile}{stbfile}} *f) \{ \textcolor{keywordflow}{return} f-\/>size(f); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11088}11088 \textcolor{keywordtype}{void} stb\_backpatch(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} tell, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11089}11089 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11090}11090    f-\/>backpatch(f,tell,\mbox{\hyperlink{classbuffer}{buffer}},len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11091}11091 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11092}11092 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11093}11093 \textcolor{comment}{// FILE * implementation}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11094}11094 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_fgetbyte(\mbox{\hyperlink{structstbfile}{stbfile}} *f) \{ \textcolor{keywordflow}{return} fgetc(f-\/>f); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11095}11095 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_fputbyte(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{int} ch) \{ \textcolor{keywordflow}{return} fputc(ch, f-\/>f)==0; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11096}11096 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_fgetdata(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len) \{ \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) fread(\mbox{\hyperlink{classbuffer}{buffer}},1,len,f-\/>f); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11097}11097 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_fputdata(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len) \{ \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) fwrite(\mbox{\hyperlink{classbuffer}{buffer}},1,len,f-\/>f); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11098}11098 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_fsize(\mbox{\hyperlink{structstbfile}{stbfile}} *f) \{ \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) stb\_filelen(f-\/>f); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11099}11099 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_ftell(\mbox{\hyperlink{structstbfile}{stbfile}} *f) \{ \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) ftell(f-\/>f); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11100}11100 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_fbackpatch(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} where, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11101}11101 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11102}11102    fseek(f-\/>f, where, SEEK\_SET);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11103}11103    fwrite(\mbox{\hyperlink{classbuffer}{buffer}}, 1, len, f-\/>f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11104}11104    fseek(f-\/>f, 0, SEEK\_END);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11105}11105 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11106}11106 \textcolor{keyword}{static} \textcolor{keywordtype}{void}         stb\_\_fclose(\mbox{\hyperlink{structstbfile}{stbfile}} *f) \{ fclose(f-\/>f); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11107}11107 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11108}11108 \mbox{\hyperlink{structstbfile}{stbfile}} *stb\_openf(FILE *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11109}11109 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11110}11110    \mbox{\hyperlink{structstbfile}{stbfile}} m = \{ stb\_\_fgetbyte, stb\_\_fgetdata,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11111}11111                  stb\_\_fputbyte, stb\_\_fputdata,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11112}11112                  stb\_\_fsize, stb\_\_ftell, stb\_\_fbackpatch, stb\_\_fclose,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11113}11113                  0,0,0, \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11114}11114    \mbox{\hyperlink{structstbfile}{stbfile}} *z = (\mbox{\hyperlink{structstbfile}{stbfile}} *) malloc(\textcolor{keyword}{sizeof}(*z));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11115}11115    \textcolor{keywordflow}{if} (z) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11116}11116       *z = m;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11117}11117       z-\/>f = f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11118}11118    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11119}11119    \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11120}11120 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11121}11121 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11122}11122 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_nogetbyte(\mbox{\hyperlink{structstbfile}{stbfile}} *f) \{ assert(0); \textcolor{keywordflow}{return} -\/1; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11123}11123 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_nogetdata(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len) \{ assert(0); \textcolor{keywordflow}{return} 0; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11124}11124 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_noputbyte(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{int} ch) \{ assert(0); \textcolor{keywordflow}{return} 0; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11125}11125 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_noputdata(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len) \{ assert(0); \textcolor{keywordflow}{return} 0; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11126}11126 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_nobackpatch(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} where, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len) \{ assert(0); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11127}11127 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11128}11128 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_bgetbyte(\mbox{\hyperlink{structstbfile}{stbfile}} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11129}11129 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11130}11130    \textcolor{keywordflow}{if} (s-\/>indata < s-\/>inend)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11131}11131       \textcolor{keywordflow}{return} *s-\/>indata++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11132}11132    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11133}11133       \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11134}11134 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11135}11135 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11136}11136 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_bgetdata(\mbox{\hyperlink{structstbfile}{stbfile}} *s, \textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11137}11137 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11138}11138    \textcolor{keywordflow}{if} (s-\/>indata + len > s-\/>inend)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11139}11139       len = (\textcolor{keywordtype}{unsigned} int) (s-\/>inend -\/ s-\/>indata);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11140}11140    memcpy(\mbox{\hyperlink{classbuffer}{buffer}}, s-\/>indata, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11141}11141    s-\/>indata += len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11142}11142    \textcolor{keywordflow}{return} len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11143}11143 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11144}11144 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_bsize(\mbox{\hyperlink{structstbfile}{stbfile}} *s) \{ \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (s-\/>inend  -\/ s-\/>buffer); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11145}11145 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_btell(\mbox{\hyperlink{structstbfile}{stbfile}} *s) \{ \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}) (s-\/>indata -\/ s-\/>buffer); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11146}11146 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11147}11147 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_bclose(\mbox{\hyperlink{structstbfile}{stbfile}} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11148}11148 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11149}11149    \textcolor{keywordflow}{if} (s-\/>various)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11150}11150       free(s-\/>buffer);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11151}11151 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11152}11152 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11153}11153 \mbox{\hyperlink{structstbfile}{stbfile}} *stb\_open\_inbuffer(\textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11154}11154 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11155}11155    \mbox{\hyperlink{structstbfile}{stbfile}} m = \{ stb\_\_bgetbyte, stb\_\_bgetdata,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11156}11156                  stb\_\_noputbyte, stb\_\_noputdata,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11157}11157                  stb\_\_bsize, stb\_\_btell, stb\_\_nobackpatch, stb\_\_bclose \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11158}11158    \mbox{\hyperlink{structstbfile}{stbfile}} *z = (\mbox{\hyperlink{structstbfile}{stbfile}} *) malloc(\textcolor{keyword}{sizeof}(*z));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11159}11159    \textcolor{keywordflow}{if} (z) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11160}11160       *z = m;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11161}11161       z-\/>buffer = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *) \mbox{\hyperlink{classbuffer}{buffer}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11162}11162       z-\/>indata = z-\/>buffer;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11163}11163       z-\/>inend = z-\/>indata + len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11164}11164    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11165}11165    \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11166}11166 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11167}11167 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11168}11168 \mbox{\hyperlink{structstbfile}{stbfile}} *stb\_open\_inbuffer\_free(\textcolor{keywordtype}{void} *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11169}11169 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11170}11170    \mbox{\hyperlink{structstbfile}{stbfile}} *z = stb\_open\_inbuffer(\mbox{\hyperlink{classbuffer}{buffer}}, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11171}11171    \textcolor{keywordflow}{if} (z)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11172}11172       z-\/>various = 1; \textcolor{comment}{// free}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11173}11173    \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11174}11174 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11175}11175 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11176}11176 \textcolor{preprocessor}{\#ifndef STB\_VERSION}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11177}11177 \textcolor{comment}{// if we've been cut-\/and-\/pasted elsewhere, you get a limited}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11178}11178 \textcolor{comment}{// version of stb\_open, without the 'k' flag and utf8 support}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11179}11179 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_fclose2(\mbox{\hyperlink{structstbfile}{stbfile}} *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11180}11180 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11181}11181    fclose(f-\/>f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11182}11182 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11183}11183 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11184}11184 \mbox{\hyperlink{structstbfile}{stbfile}} *stb\_open(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *mode)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11185}11185 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11186}11186    FILE *f = stb\_p\_fopen(filename, mode);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11187}11187    \mbox{\hyperlink{structstbfile}{stbfile}} *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11188}11188    \textcolor{keywordflow}{if} (f == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11189}11189    s = stb\_openf(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11190}11190    \textcolor{keywordflow}{if} (s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11191}11191       s-\/>close = stb\_\_fclose2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11192}11192    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11193}11193 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11194}11194 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11195}11195 \textcolor{comment}{// the full version depends on some code in stb.h; this}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11196}11196 \textcolor{comment}{// also includes the memory buffer output format implemented with stb\_arr}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11197}11197 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_fclose2(\mbox{\hyperlink{structstbfile}{stbfile}} *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11198}11198 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11199}11199    stb\_fclose(f-\/>f, f-\/>various);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11200}11200 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11201}11201 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11202}11202 \mbox{\hyperlink{structstbfile}{stbfile}} *stb\_open(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{char} *mode)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11203}11203 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11204}11204    FILE *f = stb\_fopen(filename, mode[0] == \textcolor{charliteral}{'k'} ? mode+1 : mode);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11205}11205    \mbox{\hyperlink{structstbfile}{stbfile}} *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11206}11206    \textcolor{keywordflow}{if} (f == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11207}11207    s = stb\_openf(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11208}11208    \textcolor{keywordflow}{if} (s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11209}11209       s-\/>close = stb\_\_fclose2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11210}11210       s-\/>various = mode[0] == \textcolor{charliteral}{'k'} ? stb\_keep\_if\_different : stb\_keep\_yes;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11211}11211    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11212}11212    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11213}11213 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11214}11214 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11215}11215 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_aputbyte(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{int} ch)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11216}11216 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11217}11217    stb\_arr\_push(f-\/>buffer, ch);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11218}11218    \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11219}11219 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11220}11220 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_aputdata(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11221}11221 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11222}11222    memcpy(stb\_arr\_addn(f-\/>buffer, (\textcolor{keywordtype}{int}) len), data, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11223}11223    \textcolor{keywordflow}{return} len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11224}11224 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11225}11225 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_\_asize(\mbox{\hyperlink{structstbfile}{stbfile}} *f) \{ \textcolor{keywordflow}{return} stb\_arr\_len(f-\/>buffer); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11226}11226 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_abackpatch(\mbox{\hyperlink{structstbfile}{stbfile}} *f, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} where, \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11227}11227 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11228}11228    memcpy(f-\/>buffer+where, data, len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11229}11229 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11230}11230 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_aclose(\mbox{\hyperlink{structstbfile}{stbfile}} *f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11231}11231 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11232}11232    *(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} **) f-\/>ptr = f-\/>buffer;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11233}11233 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11234}11234 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11235}11235 \mbox{\hyperlink{structstbfile}{stbfile}} *stb\_open\_outbuffer(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} **update\_on\_close)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11236}11236 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11237}11237    \mbox{\hyperlink{structstbfile}{stbfile}} m = \{ stb\_\_nogetbyte, stb\_\_nogetdata,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11238}11238                  stb\_\_aputbyte, stb\_\_aputdata,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11239}11239                  stb\_\_asize, stb\_\_asize, stb\_\_abackpatch, stb\_\_aclose \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11240}11240    \mbox{\hyperlink{structstbfile}{stbfile}} *z = (\mbox{\hyperlink{structstbfile}{stbfile}} *) malloc(\textcolor{keyword}{sizeof}(*z));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11241}11241    \textcolor{keywordflow}{if} (z) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11242}11242       z-\/>ptr = update\_on\_close;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11243}11243       *z = m;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11244}11244    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11245}11245    \textcolor{keywordflow}{return} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11246}11246 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11247}11247 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11248}11248 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11249}11249 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11250}11250 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11252}11252 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11253}11253 \textcolor{comment}{//  Arithmetic coder... based on cbloom's notes on the subject, should be}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11254}11254 \textcolor{comment}{//  less code than a huffman code.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11255}11255 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11256}\mbox{\hyperlink{structstb__arith}{11256}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11257}11257 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11258}11258    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} range\_low;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11259}11259    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} range\_high;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11260}11260    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} code, range; \textcolor{comment}{// decode}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11261}11261    \textcolor{keywordtype}{int} buffered\_u8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11262}11262    \textcolor{keywordtype}{int} pending\_ffs;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11263}11263    \mbox{\hyperlink{structstbfile}{stbfile}} *\mbox{\hyperlink{structoutput}{output}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11264}11264 \} \mbox{\hyperlink{structstb__arith}{stb\_arith}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11265}11265 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11266}11266 STB\_EXTERN \textcolor{keywordtype}{void} stb\_arith\_init\_encode(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \mbox{\hyperlink{structstbfile}{stbfile}} *out);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11267}11267 STB\_EXTERN \textcolor{keywordtype}{void} stb\_arith\_init\_decode(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \mbox{\hyperlink{structstbfile}{stbfile}} *in);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11268}11268 STB\_EXTERN \mbox{\hyperlink{structstbfile}{stbfile}} *stb\_arith\_encode\_close(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11269}11269 STB\_EXTERN \mbox{\hyperlink{structstbfile}{stbfile}} *stb\_arith\_decode\_close(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11270}11270 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11271}11271 STB\_EXTERN \textcolor{keywordtype}{void} stb\_arith\_encode(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cumfreq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11272}11272 STB\_EXTERN \textcolor{keywordtype}{void} stb\_arith\_encode\_log2(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq2, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cumfreq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11273}11273 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_arith\_decode\_value(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11274}11274 STB\_EXTERN \textcolor{keywordtype}{void} stb\_arith\_decode\_advance(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cumfreq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11275}11275 STB\_EXTERN \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_arith\_decode\_value\_log2(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq2);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11276}11276 STB\_EXTERN \textcolor{keywordtype}{void} stb\_arith\_decode\_advance\_log2(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq2, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cumfreq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11277}11277 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11278}11278 STB\_EXTERN \textcolor{keywordtype}{void} stb\_arith\_encode\_byte(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{int} \textcolor{keywordtype}{byte});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11279}11279 STB\_EXTERN \textcolor{keywordtype}{int}  stb\_arith\_decode\_byte(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11280}11280 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11281}11281 \textcolor{comment}{// this is a memory-\/inefficient way of doing things, but it's}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11282}11282 \textcolor{comment}{// fast(?) and simple}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11283}\mbox{\hyperlink{structstb__arith__symstate__item}{11283}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11284}11284 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11285}11285    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} cumfreq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11286}11286    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} samples;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11287}11287 \} \mbox{\hyperlink{structstb__arith__symstate__item}{stb\_arith\_symstate\_item}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11288}11288 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11289}\mbox{\hyperlink{structstb__arith__symstate}{11289}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11290}11290 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11291}11291    \textcolor{keywordtype}{int} num\_sym;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11292}11292    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{group__gtx__optimum__pow_ga19aaff3213bf23bdec3ef124ace237e9}{pow2}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11293}11293    \textcolor{keywordtype}{int} countdown;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11294}11294    \mbox{\hyperlink{structstb__arith__symstate__item}{stb\_arith\_symstate\_item}} data[1];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11295}11295 \} \mbox{\hyperlink{structstb__arith__symstate}{stb\_arith\_symstate}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11296}11296 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11297}11297 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11298}11298 \textcolor{keywordtype}{void} stb\_arith\_init\_encode(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \mbox{\hyperlink{structstbfile}{stbfile}} *out)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11299}11299 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11300}11300    a-\/>range\_low = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11301}11301    a-\/>range\_high = 0xffffffff;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11302}11302    a-\/>pending\_ffs = -\/1; \textcolor{comment}{// means no buffered character currently, to speed up normal case}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11303}11303    a-\/>output = out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11304}11304 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11305}11305 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11306}11306 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_arith\_carry(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11307}11307 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11308}11308    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11309}11309    assert(a-\/>pending\_ffs != -\/1); \textcolor{comment}{// can't carry with no data}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11310}11310    stb\_putc(a-\/>output, a-\/>buffered\_u8);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11311}11311    \textcolor{keywordflow}{for} (i=0; i < a-\/>pending\_ffs; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11312}11312       stb\_putc(a-\/>output, 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11313}11313 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11314}11314 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11315}11315 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_arith\_putbyte(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{int} \textcolor{keywordtype}{byte})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11316}11316 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11317}11317    \textcolor{keywordflow}{if} (a-\/>pending\_ffs) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11318}11318       \textcolor{keywordflow}{if} (a-\/>pending\_ffs == -\/1) \{ \textcolor{comment}{// means no buffered data; encoded for fast path efficiency}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11319}11319          \textcolor{keywordflow}{if} (\textcolor{keywordtype}{byte} == 0xff)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11320}11320             stb\_putc(a-\/>output, \textcolor{keywordtype}{byte}); \textcolor{comment}{// just write it immediately}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11321}11321          \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11322}11322             a-\/>buffered\_u8 = \mbox{\hyperlink{group__gtx__raw__data_gacd7fe1f2ad60a57f7d7ad4f1e6836efd}{byte}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11323}11323             a-\/>pending\_ffs = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11324}11324          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11325}11325       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keywordtype}{byte} == 0xff) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11326}11326          ++a-\/>pending\_ffs;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11327}11327       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11328}11328          \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11329}11329          stb\_putc(a-\/>output, a-\/>buffered\_u8);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11330}11330          \textcolor{keywordflow}{for} (i=0; i < a-\/>pending\_ffs; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11331}11331             stb\_putc(a-\/>output, 0xff);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11332}11332       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11333}11333    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\textcolor{keywordtype}{byte} == 0xff) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11334}11334       ++a-\/>pending\_ffs;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11335}11335    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11336}11336       \textcolor{comment}{// fast path}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11337}11337       stb\_putc(a-\/>output, a-\/>buffered\_u8);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11338}11338       a-\/>buffered\_u8 = \mbox{\hyperlink{group__gtx__raw__data_gacd7fe1f2ad60a57f7d7ad4f1e6836efd}{byte}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11339}11339    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11340}11340 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11341}11341 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11342}11342 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_arith\_flush(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11343}11343 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11344}11344    \textcolor{keywordflow}{if} (a-\/>pending\_ffs >= 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11345}11345       \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11346}11346       stb\_putc(a-\/>output, a-\/>buffered\_u8);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11347}11347       \textcolor{keywordflow}{for} (i=0; i < a-\/>pending\_ffs; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11348}11348          stb\_putc(a-\/>output, 0xff);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11349}11349    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11350}11350 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11351}11351 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11352}11352 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_renorm\_encoder(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11353}11353 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11354}11354    stb\_\_arith\_putbyte(a, a-\/>range\_low >> 24);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11355}11355    a-\/>range\_low <<= 8;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11356}11356    a-\/>range\_high = (a-\/>range\_high << 8) | 0xff;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11357}11357 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11358}11358 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11359}11359 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_renorm\_decoder(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11360}11360 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11361}11361    \textcolor{keywordtype}{int} c = stb\_getc(a-\/>output);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11362}11362    a-\/>code = (a-\/>code << 8) + (c >= 0 ? c : 0); \textcolor{comment}{// if EOF, insert 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11363}11363 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11364}11364 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11365}11365 \textcolor{keywordtype}{void} stb\_arith\_encode(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cumfreq)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11366}11366 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11367}11367    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} range = a-\/>range\_high -\/ a-\/>range\_low;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11368}11368    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} old = a-\/>range\_low;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11369}11369    range /= totalfreq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11370}11370    a-\/>range\_low += range * cumfreq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11371}11371    a-\/>range\_high = a-\/>range\_low + range*freq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11372}11372    \textcolor{keywordflow}{if} (a-\/>range\_low < old)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11373}11373       stb\_\_arith\_carry(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11374}11374    \textcolor{keywordflow}{while} (a-\/>range\_high -\/ a-\/>range\_low < 0x1000000)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11375}11375       stb\_\_renorm\_encoder(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11376}11376 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11377}11377 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11378}11378 \textcolor{keywordtype}{void} stb\_arith\_encode\_log2(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq2, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cumfreq)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11379}11379 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11380}11380    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} range = a-\/>range\_high -\/ a-\/>range\_low;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11381}11381    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} old = a-\/>range\_low;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11382}11382    range >>= totalfreq2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11383}11383    a-\/>range\_low += range * cumfreq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11384}11384    a-\/>range\_high = a-\/>range\_low + range*freq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11385}11385    \textcolor{keywordflow}{if} (a-\/>range\_low < old)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11386}11386       stb\_\_arith\_carry(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11387}11387    \textcolor{keywordflow}{while} (a-\/>range\_high -\/ a-\/>range\_low < 0x1000000)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11388}11388       stb\_\_renorm\_encoder(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11389}11389 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11390}11390 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11391}11391 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_arith\_decode\_value(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11392}11392 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11393}11393    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freqsize = a-\/>range / totalfreq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11394}11394    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} z = a-\/>code / freqsize;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11395}11395    \textcolor{keywordflow}{return} z >= totalfreq ? totalfreq-\/1 : z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11396}11396 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11397}11397 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11398}11398 \textcolor{keywordtype}{void} stb\_arith\_decode\_advance(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cumfreq)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11399}11399 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11400}11400    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freqsize = a-\/>range / totalfreq; \textcolor{comment}{// @OPTIMIZE, share with above divide somehow?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11401}11401    a-\/>code -\/= freqsize * cumfreq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11402}11402    a-\/>range = freqsize * freq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11403}11403    \textcolor{keywordflow}{while} (a-\/>range < 0x1000000)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11404}11404       stb\_\_renorm\_decoder(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11405}11405 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11406}11406 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11407}11407 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} stb\_arith\_decode\_value\_log2(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq2)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11408}11408 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11409}11409    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freqsize = a-\/>range >> totalfreq2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11410}11410    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} z = a-\/>code / freqsize;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11411}11411    \textcolor{keywordflow}{return} z >= (1U<<totalfreq2) ? (1U<<totalfreq2)-\/1 : z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11412}11412 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11413}11413 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11414}11414 \textcolor{keywordtype}{void} stb\_arith\_decode\_advance\_log2(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalfreq2, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freq, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} cumfreq)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11415}11415 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11416}11416    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} freqsize = a-\/>range >> totalfreq2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11417}11417    a-\/>code -\/= freqsize * cumfreq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11418}11418    a-\/>range = freqsize * freq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11419}11419    \textcolor{keywordflow}{while} (a-\/>range < 0x1000000)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11420}11420       stb\_\_renorm\_decoder(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11421}11421 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11422}11422 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11423}11423 \mbox{\hyperlink{structstbfile}{stbfile}} *stb\_arith\_encode\_close(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11424}11424 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11425}11425    \textcolor{comment}{// put exactly as many bytes as we'll read, so we can turn on/off arithmetic coding in a stream}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11426}11426    stb\_\_arith\_putbyte(a, a-\/>range\_low >> 24);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11427}11427    stb\_\_arith\_putbyte(a, a-\/>range\_low >> 16);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11428}11428    stb\_\_arith\_putbyte(a, a-\/>range\_low >>  8);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11429}11429    stb\_\_arith\_putbyte(a, a-\/>range\_low >>  0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11430}11430    stb\_\_arith\_flush(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11431}11431    \textcolor{keywordflow}{return} a-\/>output;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11432}11432 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11433}11433 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11434}11434 \mbox{\hyperlink{structstbfile}{stbfile}} *stb\_arith\_decode\_close(\mbox{\hyperlink{structstb__arith}{stb\_arith}} *a)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11435}11435 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11436}11436    \textcolor{keywordflow}{return} a-\/>output;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11437}11437 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11438}11438 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11439}11439 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11441}11441 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11442}11442 \textcolor{comment}{//                         Threads}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11443}11443 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11444}11444 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11445}11445 \textcolor{preprocessor}{\#ifndef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11446}11446 \textcolor{preprocessor}{\#ifdef STB\_THREADS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11447}11447 \textcolor{preprocessor}{\#error "{}threads not implemented except for Windows"{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11448}11448 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11449}11449 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11450}11450 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11451}11451 \textcolor{comment}{// call this function to free any global variables for memory testing}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11452}11452 STB\_EXTERN \textcolor{keywordtype}{void} stb\_thread\_cleanup(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11453}11453 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11454}11454 \textcolor{keyword}{typedef} \textcolor{keywordtype}{void} * (*stb\_thread\_func)(\textcolor{keywordtype}{void} *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11455}11455 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11456}11456 \textcolor{comment}{// do not rely on these types, this is an implementation detail.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11457}11457 \textcolor{comment}{// compare against STB\_THREAD\_NULL and ST\_SEMAPHORE\_NULL}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11458}11458 \textcolor{keyword}{typedef} \textcolor{keywordtype}{void} *stb\_thread;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11459}11459 \textcolor{keyword}{typedef} \textcolor{keywordtype}{void} *stb\_semaphore;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11460}11460 \textcolor{keyword}{typedef} \textcolor{keywordtype}{void} *stb\_mutex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11461}11461 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_\_sync *stb\_sync;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11462}11462 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11463}11463 \textcolor{preprocessor}{\#define STB\_SEMAPHORE\_NULL    NULL}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11464}11464 \textcolor{preprocessor}{\#define STB\_THREAD\_NULL       NULL}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11465}11465 \textcolor{preprocessor}{\#define STB\_MUTEX\_NULL        NULL}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11466}11466 \textcolor{preprocessor}{\#define STB\_SYNC\_NULL         NULL}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11467}11467 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11468}11468 \textcolor{comment}{// get the number of processors (limited to those in the affinity mask for this process).}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11469}11469 STB\_EXTERN \textcolor{keywordtype}{int} stb\_processor\_count(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11470}11470 \textcolor{comment}{// force to run on a single core -\/-\/ needed for RDTSC to work, e.g. for iprof}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11471}11471 STB\_EXTERN \textcolor{keywordtype}{void} stb\_force\_uniprocessor(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11472}11472 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11473}11473 \textcolor{comment}{// stb\_work functions: queue up work to be done by some worker threads}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11474}11474 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11475}11475 \textcolor{comment}{// set number of threads to serve the queue; you can change this on the fly,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11476}11476 \textcolor{comment}{// but if you decrease it, it won't decrease until things currently on the}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11477}11477 \textcolor{comment}{// queue are finished}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11478}11478 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_work\_numthreads(\textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11479}11479 \textcolor{comment}{// set maximum number of units in the queue; you can only set this BEFORE running any work functions}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11480}11480 STB\_EXTERN \textcolor{keywordtype}{int}           stb\_work\_maxunits(\textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11481}11481 \textcolor{comment}{// enqueue some work to be done (can do this from any thread, or even from a piece of work);}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11482}11482 \textcolor{comment}{// return value of f is stored in *return\_code if non-\/NULL}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11483}11483 STB\_EXTERN \textcolor{keywordtype}{int}           stb\_work(stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11484}11484 \textcolor{comment}{// as above, but stb\_sync\_reach is called on 'rel' after work is complete}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11485}11485 STB\_EXTERN \textcolor{keywordtype}{int}           stb\_work\_reach(stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code, stb\_sync rel);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11486}11486 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11487}11487 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11488}11488 \textcolor{comment}{// necessary to call this when using volatile to order writes/reads}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11489}11489 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_barrier(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11490}11490 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11491}11491 \textcolor{comment}{// support for independent queues with their own threads}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11492}11492 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11493}11493 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_\_workqueue stb\_workqueue;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11494}11494 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11495}11495 STB\_EXTERN stb\_workqueue*stb\_workq\_new(\textcolor{keywordtype}{int} numthreads, \textcolor{keywordtype}{int} max\_units);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11496}11496 STB\_EXTERN stb\_workqueue*stb\_workq\_new\_flags(\textcolor{keywordtype}{int} numthreads, \textcolor{keywordtype}{int} max\_units, \textcolor{keywordtype}{int} no\_add\_mutex, \textcolor{keywordtype}{int} no\_remove\_mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11497}11497 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_workq\_delete(stb\_workqueue *q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11498}11498 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_workq\_numthreads(stb\_workqueue *q, \textcolor{keywordtype}{int} n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11499}11499 STB\_EXTERN \textcolor{keywordtype}{int}           stb\_workq(stb\_workqueue *q, stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11500}11500 STB\_EXTERN \textcolor{keywordtype}{int}           stb\_workq\_reach(stb\_workqueue *q, stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code, stb\_sync rel);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11501}11501 STB\_EXTERN \textcolor{keywordtype}{int}           stb\_workq\_length(stb\_workqueue *q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11502}11502 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11503}11503 STB\_EXTERN stb\_thread    stb\_create\_thread (stb\_thread\_func f, \textcolor{keywordtype}{void} *d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11504}11504 STB\_EXTERN stb\_thread    stb\_create\_thread2(stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code, stb\_semaphore rel);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11505}11505 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_destroy\_thread(stb\_thread t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11506}11506 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11507}11507 STB\_EXTERN stb\_semaphore stb\_sem\_new(\textcolor{keywordtype}{int} max\_val);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11508}11508 STB\_EXTERN stb\_semaphore stb\_sem\_new\_extra(\textcolor{keywordtype}{int} max\_val, \textcolor{keywordtype}{int} start\_val);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11509}11509 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_sem\_delete (stb\_semaphore s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11510}11510 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_sem\_waitfor(stb\_semaphore s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11511}11511 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_sem\_release(stb\_semaphore s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11512}11512 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11513}11513 STB\_EXTERN stb\_mutex     stb\_mutex\_new(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11514}11514 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_mutex\_delete(stb\_mutex m);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11515}11515 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_mutex\_begin(stb\_mutex m);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11516}11516 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_mutex\_end(stb\_mutex m);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11517}11517 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11518}11518 STB\_EXTERN stb\_sync      stb\_sync\_new(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11519}11519 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_sync\_delete(stb\_sync s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11520}11520 STB\_EXTERN \textcolor{keywordtype}{int}           stb\_sync\_set\_target(stb\_sync s, \textcolor{keywordtype}{int} count);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11521}11521 STB\_EXTERN \textcolor{keywordtype}{void}          stb\_sync\_reach\_and\_wait(stb\_sync s);    \textcolor{comment}{// wait for 'target' reachers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11522}11522 STB\_EXTERN \textcolor{keywordtype}{int}           stb\_sync\_reach(stb\_sync s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11523}11523 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11524}11524 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_\_threadqueue stb\_threadqueue;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11525}11525 \textcolor{preprocessor}{\#define STB\_THREADQ\_DYNAMIC   0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11526}11526 STB\_EXTERN stb\_threadqueue *stb\_threadq\_new(\textcolor{keywordtype}{int} item\_size, \textcolor{keywordtype}{int} num\_items, \textcolor{keywordtype}{int} many\_add, \textcolor{keywordtype}{int} many\_remove);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11527}11527 STB\_EXTERN \textcolor{keywordtype}{void}             stb\_threadq\_delete(stb\_threadqueue *tq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11528}11528 STB\_EXTERN \textcolor{keywordtype}{int}              stb\_threadq\_get(stb\_threadqueue *tq, \textcolor{keywordtype}{void} *\mbox{\hyperlink{structoutput}{output}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11529}11529 STB\_EXTERN \textcolor{keywordtype}{void}             stb\_threadq\_get\_block(stb\_threadqueue *tq, \textcolor{keywordtype}{void} *\mbox{\hyperlink{structoutput}{output}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11530}11530 STB\_EXTERN \textcolor{keywordtype}{int}              stb\_threadq\_add(stb\_threadqueue *tq, \textcolor{keywordtype}{void} *input);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11531}11531 \textcolor{comment}{// can return FALSE if STB\_THREADQ\_DYNAMIC and attempt to grow fails}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11532}11532 STB\_EXTERN \textcolor{keywordtype}{int}              stb\_threadq\_add\_block(stb\_threadqueue *tq, \textcolor{keywordtype}{void} *input);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11533}11533 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11534}11534 \textcolor{preprocessor}{\#ifdef STB\_THREADS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11535}11535 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11536}11536 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11537}11537 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11538}11538 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11539}11539    stb\_thread\_func f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11540}11540    \textcolor{keywordtype}{void} *d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11541}11541    \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_val;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11542}11542    stb\_semaphore sem;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11543}11543 \} stb\_\_thread;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11544}11544 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11545}11545 \textcolor{comment}{// this is initialized along all possible paths to create threads, therefore}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11546}11546 \textcolor{comment}{// it's always initialized before any other threads are create, therefore}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11547}11547 \textcolor{comment}{// it's free of races AS LONG AS you only create threads through stb\_*}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11548}11548 \textcolor{keyword}{static} stb\_mutex stb\_\_threadmutex, stb\_\_workmutex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11549}11549 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11550}11550 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_threadmutex\_init(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11551}11551 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11552}11552    \textcolor{keywordflow}{if} (stb\_\_threadmutex == STB\_SEMAPHORE\_NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11553}11553       stb\_\_threadmutex = stb\_mutex\_new();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11554}11554       stb\_\_workmutex = stb\_mutex\_new();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11555}11555    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11556}11556 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11557}11557 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11558}11558 \textcolor{preprocessor}{\#ifdef STB\_THREAD\_TEST}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11559}11559 \textcolor{keyword}{volatile} \textcolor{keywordtype}{float} stb\_\_t1=1, stb\_\_t2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11560}11560 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11561}11561 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_wait(\textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11562}11562 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11563}11563    \textcolor{keywordtype}{float} z = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11564}11564    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11565}11565    \textcolor{keywordflow}{for} (i=0; i < n; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11566}11566       z += 1 / (stb\_\_t1+i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11567}11567    stb\_\_t2 = z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11568}11568 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11569}11569 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11570}11570 \textcolor{preprocessor}{\#define stb\_\_wait(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11571}11571 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11572}11572 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11573}11573 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11574}11574 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11575}11575 \textcolor{comment}{// avoid including windows.h -\/-\/ note that our definitions aren't}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11576}11576 \textcolor{comment}{// exactly the same (we don't define the security descriptor struct)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11577}11577 \textcolor{comment}{// so if you want to include windows.h, make sure you do it first.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11578}11578 \textcolor{preprocessor}{\#include <process.h>}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11579}11579 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11580}11580 \textcolor{preprocessor}{\#ifndef \_WINDOWS\_  }\textcolor{comment}{// check windows.h guard}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11581}11581 \textcolor{preprocessor}{\#define STB\_\_IMPORT   STB\_EXTERN \_\_declspec(dllimport)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11582}11582 \textcolor{preprocessor}{\#define STB\_\_DW       unsigned long}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11583}11583 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11584}11584 STB\_\_IMPORT \textcolor{keywordtype}{int}     \_\_stdcall TerminateThread(\textcolor{keywordtype}{void} *, STB\_\_DW);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11585}11585 STB\_\_IMPORT \textcolor{keywordtype}{void} *  \_\_stdcall CreateSemaphoreA(\textcolor{keywordtype}{void} *\mbox{\hyperlink{group__gtc__reciprocal_gae4bcbebee670c5ea155f0777b3acbd84}{sec}}, \textcolor{keywordtype}{long},\textcolor{keywordtype}{long},\textcolor{keywordtype}{char}*);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11586}11586 STB\_\_IMPORT \textcolor{keywordtype}{int}     \_\_stdcall CloseHandle(\textcolor{keywordtype}{void} *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11587}11587 STB\_\_IMPORT STB\_\_DW \_\_stdcall WaitForSingleObject(\textcolor{keywordtype}{void} *, STB\_\_DW);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11588}11588 STB\_\_IMPORT \textcolor{keywordtype}{int}     \_\_stdcall ReleaseSemaphore(\textcolor{keywordtype}{void} *, \textcolor{keywordtype}{long}, \textcolor{keywordtype}{long} *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11589}11589 STB\_\_IMPORT \textcolor{keywordtype}{void}    \_\_stdcall Sleep(STB\_\_DW);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11590}11590 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11591}11591 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11592}11592 \textcolor{comment}{// necessary to call this when using volatile to order writes/reads}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11593}11593 \textcolor{keywordtype}{void} stb\_barrier(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11594}11594 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11595}11595 \textcolor{preprocessor}{   \#ifdef MemoryBarrier}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11596}11596    MemoryBarrier();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11597}11597 \textcolor{preprocessor}{   \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11598}11598    \textcolor{keywordtype}{long} temp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11599}11599    \_\_asm xchg temp,eax;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11600}11600 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11601}11601 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11602}11602 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11603}11603 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_thread\_run(\textcolor{keywordtype}{void} *t)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11604}11604 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11605}11605    \textcolor{keywordtype}{void} *res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11606}11606    stb\_\_thread \mbox{\hyperlink{structinfo}{info}} = * (stb\_\_thread *) t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11607}11607    free(t);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11608}11608    res = \mbox{\hyperlink{structinfo}{info}}.f(\mbox{\hyperlink{structinfo}{info}}.d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11609}11609    \textcolor{keywordflow}{if} (\mbox{\hyperlink{structinfo}{info}}.return\_val)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11610}11610       *\mbox{\hyperlink{structinfo}{info}}.return\_val = res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11611}11611    \textcolor{keywordflow}{if} (\mbox{\hyperlink{structinfo}{info}}.sem != STB\_SEMAPHORE\_NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11612}11612       stb\_sem\_release(\mbox{\hyperlink{structinfo}{info}}.sem);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11613}11613 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11614}11614 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11615}11615 \textcolor{keyword}{static} stb\_thread stb\_create\_thread\_raw(stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code, stb\_semaphore rel)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11616}11616 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11617}11617 \textcolor{preprocessor}{\#ifdef \_MT}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11618}11618 \textcolor{preprocessor}{\#if defined(STB\_FASTMALLOC) \&\& !defined(STB\_FASTMALLOC\_ITS\_OKAY\_I\_ONLY\_MALLOC\_IN\_ONE\_THREAD)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11619}11619    stb\_fatal(\textcolor{stringliteral}{"{}Error! Cannot use STB\_FASTMALLOC with threads.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11620}11620    \textcolor{keywordflow}{return} STB\_THREAD\_NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11621}11621 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11622}11622    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} id;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11623}11623    stb\_\_thread *data = (stb\_\_thread *) malloc(\textcolor{keyword}{sizeof}(*data));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11624}11624    \textcolor{keywordflow}{if} (!data) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11625}11625    stb\_\_threadmutex\_init();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11626}11626    data-\/>f = f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11627}11627    data-\/>d = d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11628}11628    data-\/>return\_val = return\_code;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11629}11629    data-\/>sem = rel;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11630}11630    \textcolor{keywordtype}{id} = \_beginthread(stb\_\_thread\_run, 0, data);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11631}11631    \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id} == -\/1) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11632}11632    \textcolor{keywordflow}{return} (\textcolor{keywordtype}{void} *) id;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11633}11633 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11634}11634 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11635}11635 \textcolor{preprocessor}{\#ifdef STB\_NO\_STB\_STRINGS}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11636}11636    stb\_fatal(\textcolor{stringliteral}{"{}Invalid compilation"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11637}11637 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11638}11638    stb\_fatal(\textcolor{stringliteral}{"{}Must compile mult-\/threaded to use stb\_thread/stb\_work."{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11639}11639 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11640}11640    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11641}11641 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11642}11642 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11643}11643 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11644}11644 \textcolor{comment}{// trivial win32 wrappers}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11645}11645 \textcolor{keywordtype}{void}          stb\_destroy\_thread(stb\_thread t)   \{ TerminateThread(t,0); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11646}11646 stb\_semaphore stb\_sem\_new(\textcolor{keywordtype}{int} maxv)                \{\textcolor{keywordflow}{return} CreateSemaphoreA(NULL,0,maxv,NULL); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11647}11647 stb\_semaphore stb\_sem\_new\_extra(\textcolor{keywordtype}{int} maxv,\textcolor{keywordtype}{int} start)\{\textcolor{keywordflow}{return} CreateSemaphoreA(NULL,start,maxv,NULL); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11648}11648 \textcolor{keywordtype}{void}          stb\_sem\_delete(stb\_semaphore s)    \{ \textcolor{keywordflow}{if} (s != NULL) CloseHandle(s); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11649}11649 \textcolor{keywordtype}{void}          stb\_sem\_waitfor(stb\_semaphore s)   \{ WaitForSingleObject(s, 0xffffffff); \} \textcolor{comment}{// INFINITE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11650}11650 \textcolor{keywordtype}{void}          stb\_sem\_release(stb\_semaphore s)   \{ ReleaseSemaphore(s,1,NULL); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11651}11651 \textcolor{keyword}{static} \textcolor{keywordtype}{void}   stb\_\_thread\_sleep(\textcolor{keywordtype}{int} ms)          \{ Sleep(ms); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11652}11652 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11653}11653 \textcolor{preprocessor}{\#ifndef \_WINDOWS\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11654}11654 STB\_\_IMPORT \textcolor{keywordtype}{int} \_\_stdcall GetProcessAffinityMask(\textcolor{keywordtype}{void} *, STB\_\_DW *, STB\_\_DW *);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11655}11655 STB\_\_IMPORT \textcolor{keywordtype}{void} * \_\_stdcall GetCurrentProcess(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11656}11656 STB\_\_IMPORT \textcolor{keywordtype}{int} \_\_stdcall SetProcessAffinityMask(\textcolor{keywordtype}{void} *, STB\_\_DW);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11657}11657 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11658}11658 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11659}11659 \textcolor{keywordtype}{int} stb\_processor\_count(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11660}11660 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11661}11661    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} proc,sys;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11662}11662    GetProcessAffinityMask(GetCurrentProcess(), \&proc, \&sys);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11663}11663    \textcolor{keywordflow}{return} stb\_bitcount(proc);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11664}11664 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11665}11665 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11666}11666 \textcolor{keywordtype}{void} stb\_force\_uniprocessor(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11667}11667 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11668}11668    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} proc,sys;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11669}11669    GetProcessAffinityMask(GetCurrentProcess(), \&proc, \&sys);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11670}11670    \textcolor{keywordflow}{if} (stb\_bitcount(proc) > 1) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11671}11671       \textcolor{keywordtype}{int} z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11672}11672       \textcolor{keywordflow}{for} (z=0; z < 32; ++z)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11673}11673          \textcolor{keywordflow}{if} (proc \& (1 << z))}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11674}11674             \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11675}11675       \textcolor{keywordflow}{if} (z < 32) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11676}11676          proc = 1 << z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11677}11677          SetProcessAffinityMask(GetCurrentProcess(), proc);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11678}11678       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11679}11679    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11680}11680 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11681}11681 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11682}11682 \textcolor{preprocessor}{\#ifdef \_WINDOWS\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11683}11683 \textcolor{preprocessor}{\#define STB\_MUTEX\_NATIVE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11684}11684 \textcolor{keywordtype}{void} *stb\_mutex\_new(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11685}11685 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11686}11686    CRITICAL\_SECTION *p = (CRITICAL\_SECTION *) malloc(\textcolor{keyword}{sizeof}(*p));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11687}11687    \textcolor{keywordflow}{if} (p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11688}11688 \textcolor{preprocessor}{\#if \_WIN32\_WINNT >= 0x0500}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11689}11689       InitializeCriticalSectionAndSpinCount(p, 500);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11690}11690 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11691}11691       InitializeCriticalSection(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11692}11692 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11693}11693    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11694}11694 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11695}11695 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11696}11696 \textcolor{keywordtype}{void} stb\_mutex\_delete(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11697}11697 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11698}11698    \textcolor{keywordflow}{if} (p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11699}11699       DeleteCriticalSection((CRITICAL\_SECTION *) p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11700}11700       free(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11701}11701    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11702}11702 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11703}11703 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11704}11704 \textcolor{keywordtype}{void} stb\_mutex\_begin(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11705}11705 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11706}11706    stb\_\_wait(500);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11707}11707    \textcolor{keywordflow}{if} (p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11708}11708       EnterCriticalSection((CRITICAL\_SECTION *) p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11709}11709 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11710}11710 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11711}11711 \textcolor{keywordtype}{void} stb\_mutex\_end(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11712}11712 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11713}11713    \textcolor{keywordflow}{if} (p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11714}11714       LeaveCriticalSection((CRITICAL\_SECTION *) p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11715}11715    stb\_\_wait(500);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11716}11716 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11717}11717 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// \_WINDOWS\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11718}11718 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11719}11719 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11720}11720 \textcolor{comment}{// for future reference,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11721}11721 \textcolor{comment}{// InterlockedCompareExchange for x86:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11722}11722  \textcolor{keywordtype}{int} cas64\_mp(\textcolor{keywordtype}{void} * dest, \textcolor{keywordtype}{void} * xcmp, \textcolor{keywordtype}{void} * xxchg) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11723}11723         \_\_asm}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11724}11724         \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11725}11725                 mov             esi, [xxchg]            ; exchange}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11726}11726                 mov             ebx, [esi + 0]}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11727}11727                 mov             ecx, [esi + 4]}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11728}11728 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11729}11729                 mov             esi, [xcmp]                     ; comparand}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11730}11730                 mov             eax, [esi + 0]}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11731}11731                 mov             edx, [esi + 4]}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11732}11732 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11733}11733                 mov             edi, [dest]                     ; destination}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11734}11734                 lock cmpxchg8b  [edi]}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11735}11735                 jz              yyyy;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11736}11736 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11737}11737                 mov             [esi + 0], eax;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11738}11738                 mov             [esi + 4], edx;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11739}11739 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11740}11740 yyyy:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11741}11741                 xor             eax, eax;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11742}11742                 setz    al;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11743}11743         \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11744}11744 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11745}11745 \textcolor{keyword}{inline} \textcolor{keywordtype}{unsigned} \_\_int64 \_InterlockedCompareExchange64(\textcolor{keyword}{volatile} \textcolor{keywordtype}{unsigned} \_\_int64 *dest}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11746}11746                            ,\textcolor{keywordtype}{unsigned} \_\_int64 exchange}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11747}11747                            ,\textcolor{keywordtype}{unsigned} \_\_int64 comperand)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11748}11748 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11749}11749     \textcolor{comment}{//value returned in eax::edx}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11750}11750     \_\_asm \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11751}11751         lea esi,comperand;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11752}11752         lea edi,exchange;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11753}11753 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11754}11754         mov eax,[esi];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11755}11755         mov edx,4[esi];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11756}11756         mov ebx,[edi];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11757}11757         mov ecx,4[edi];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11758}11758         mov esi,dest;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11759}11759         lock CMPXCHG8B [esi];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11760}11760     \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11761}11761 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// \#if 0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11762}11762 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11763}11763 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11764}11764 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11765}11765 stb\_thread stb\_create\_thread2(stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code, stb\_semaphore rel)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11766}11766 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11767}11767    \textcolor{keywordflow}{return} stb\_create\_thread\_raw(f,d,return\_code,rel);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11768}11768 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11769}11769 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11770}11770 stb\_thread stb\_create\_thread(stb\_thread\_func f, \textcolor{keywordtype}{void} *d)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11771}11771 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11772}11772    \textcolor{keywordflow}{return} stb\_create\_thread2(f,d,NULL,STB\_SEMAPHORE\_NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11773}11773 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11774}11774 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11775}11775 \textcolor{comment}{// mutex implemented by wrapping semaphore}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11776}11776 \textcolor{preprocessor}{\#ifndef STB\_MUTEX\_NATIVE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11777}11777 stb\_mutex stb\_mutex\_new(\textcolor{keywordtype}{void})            \{ \textcolor{keywordflow}{return} stb\_sem\_new\_extra(1,1); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11778}11778 \textcolor{keywordtype}{void}      stb\_mutex\_delete(stb\_mutex m)  \{ stb\_sem\_delete (m);      \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11779}11779 \textcolor{keywordtype}{void}      stb\_mutex\_begin(stb\_mutex m)   \{ stb\_\_wait(500); \textcolor{keywordflow}{if} (m) stb\_sem\_waitfor(m); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11780}11780 \textcolor{keywordtype}{void}      stb\_mutex\_end(stb\_mutex m)     \{ \textcolor{keywordflow}{if} (m) stb\_sem\_release(m); stb\_\_wait(500); \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11781}11781 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11782}11782 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11783}11783 \textcolor{comment}{// thread merge operation}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11784}11784 \textcolor{keyword}{struct }stb\_\_sync}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11785}11785 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11786}11786    \textcolor{keywordtype}{int} target;  \textcolor{comment}{// target number of threads to hit it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11787}11787    \textcolor{keywordtype}{int} sofar;   \textcolor{comment}{// total threads that hit it}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11788}11788    \textcolor{keywordtype}{int} waiting; \textcolor{comment}{// total threads waiting}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11789}11789 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11790}11790    stb\_mutex start;   \textcolor{comment}{// mutex to prevent starting again before finishing previous}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11791}11791    stb\_mutex mutex;   \textcolor{comment}{// mutex while tweaking state}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11792}11792    stb\_semaphore release; \textcolor{comment}{// semaphore wake up waiting threads}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11793}11793       \textcolor{comment}{// we have to wake them up one at a time, rather than using a single release}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11794}11794       \textcolor{comment}{// call, because win32 semaphores don't let you dynamically change the max count!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11795}11795 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11796}11796 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11797}11797 stb\_sync stb\_sync\_new(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11798}11798 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11799}11799    stb\_sync s = (stb\_sync) malloc(\textcolor{keyword}{sizeof}(*s));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11800}11800    \textcolor{keywordflow}{if} (!s) \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11801}11801 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11802}11802    s-\/>target = s-\/>sofar = s-\/>waiting = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11803}11803    s-\/>mutex   = stb\_mutex\_new();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11804}11804    s-\/>start   = stb\_mutex\_new();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11805}11805    s-\/>release = stb\_sem\_new(1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11806}11806    \textcolor{keywordflow}{if} (s-\/>mutex == STB\_MUTEX\_NULL || s-\/>release == STB\_SEMAPHORE\_NULL || s-\/>start == STB\_MUTEX\_NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11807}11807       stb\_mutex\_delete(s-\/>mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11808}11808       stb\_mutex\_delete(s-\/>mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11809}11809       stb\_sem\_delete(s-\/>release);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11810}11810       free(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11811}11811       \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11812}11812    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11813}11813    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11814}11814 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11815}11815 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11816}11816 \textcolor{keywordtype}{void} stb\_sync\_delete(stb\_sync s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11817}11817 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11818}11818    \textcolor{keywordflow}{if} (s-\/>waiting) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11819}11819       \textcolor{comment}{// it's bad to delete while there are threads waiting!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11820}11820       \textcolor{comment}{// shall we wait for them to reach, or just bail? just bail}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11821}11821       assert(0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11822}11822    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11823}11823    stb\_mutex\_delete(s-\/>mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11824}11824    stb\_mutex\_delete(s-\/>release);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11825}11825    free(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11826}11826 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11827}11827 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11828}11828 \textcolor{keywordtype}{int} stb\_sync\_set\_target(stb\_sync s, \textcolor{keywordtype}{int} count)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11829}11829 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11830}11830    \textcolor{comment}{// don't allow setting a target until the last one is fully released;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11831}11831    \textcolor{comment}{// note that this can lead to inefficient pipelining, and maybe we'd}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11832}11832    \textcolor{comment}{// be better off ping-\/ponging between two internal syncs?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11833}11833    \textcolor{comment}{// I tried seeing how often this happened using TryEnterCriticalSection}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11834}11834    \textcolor{comment}{// and could \_never\_ get it to happen in imv(stb), even with more threads}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11835}11835    \textcolor{comment}{// than processors. So who knows!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11836}11836    stb\_mutex\_begin(s-\/>start);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11837}11837 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11838}11838    \textcolor{comment}{// this mutex is pointless, since it's not valid for threads}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11839}11839    \textcolor{comment}{// to call reach() before anyone calls set\_target() anyway}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11840}11840    stb\_mutex\_begin(s-\/>mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11841}11841 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11842}11842    assert(s-\/>target == 0); \textcolor{comment}{// enforced by start mutex}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11843}11843    s-\/>target  = count;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11844}11844    s-\/>sofar   = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11845}11845    s-\/>waiting = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11846}11846    stb\_mutex\_end(s-\/>mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11847}11847    \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11848}11848 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11849}11849 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11850}11850 \textcolor{keywordtype}{void} stb\_\_sync\_release(stb\_sync s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11851}11851 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11852}11852    \textcolor{keywordflow}{if} (s-\/>waiting)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11853}11853       stb\_sem\_release(s-\/>release);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11854}11854    \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11855}11855       s-\/>target = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11856}11856       stb\_mutex\_end(s-\/>start);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11857}11857    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11858}11858 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11859}11859 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11860}11860 \textcolor{keywordtype}{int} stb\_sync\_reach(stb\_sync s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11861}11861 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11862}11862    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11863}11863    stb\_mutex\_begin(s-\/>mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11864}11864    assert(s-\/>sofar < s-\/>target);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11865}11865    n = ++s-\/>sofar; \textcolor{comment}{// record this value to avoid possible race if we did 'return s-\/>sofar';}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11866}11866    \textcolor{keywordflow}{if} (s-\/>sofar == s-\/>target)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11867}11867       stb\_\_sync\_release(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11868}11868    stb\_mutex\_end(s-\/>mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11869}11869    \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11870}11870 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11871}11871 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11872}11872 \textcolor{keywordtype}{void} stb\_sync\_reach\_and\_wait(stb\_sync s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11873}11873 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11874}11874    stb\_mutex\_begin(s-\/>mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11875}11875    assert(s-\/>sofar < s-\/>target);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11876}11876    ++s-\/>sofar;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11877}11877    \textcolor{keywordflow}{if} (s-\/>sofar == s-\/>target) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11878}11878       stb\_\_sync\_release(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11879}11879       stb\_mutex\_end(s-\/>mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11880}11880    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11881}11881       ++s-\/>waiting; \textcolor{comment}{// we're waiting, so one more waiter}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11882}11882       stb\_mutex\_end(s-\/>mutex); \textcolor{comment}{// release the mutex to other threads}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11883}11883 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11884}11884       stb\_sem\_waitfor(s-\/>release); \textcolor{comment}{// wait for merge completion}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11885}11885 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11886}11886       stb\_mutex\_begin(s-\/>mutex); \textcolor{comment}{// on merge completion, grab the mutex}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11887}11887       -\/-\/s-\/>waiting; \textcolor{comment}{// we're done waiting}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11888}11888       stb\_\_sync\_release(s);    \textcolor{comment}{// restart the next waiter}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11889}11889       stb\_mutex\_end(s-\/>mutex); \textcolor{comment}{// and now we're done}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11890}11890       \textcolor{comment}{// this ends the same as the first case, but it's a lot}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11891}11891       \textcolor{comment}{// clearer to understand without sharing the code}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11892}11892    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11893}11893 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11894}11894 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11895}11895 \textcolor{keyword}{struct }stb\_\_threadqueue}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11896}11896 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11897}11897    stb\_mutex add, remove;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11898}11898    stb\_semaphore nonempty, nonfull;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11899}11899    \textcolor{keywordtype}{int} head\_blockers;  \textcolor{comment}{// number of threads blocking-\/-\/used to know whether to release(avail)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11900}11900    \textcolor{keywordtype}{int} tail\_blockers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11901}11901    \textcolor{keywordtype}{int} head, tail, array\_size, growable;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11902}11902    \textcolor{keywordtype}{int} item\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11903}11903    \textcolor{keywordtype}{char} *data;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11904}11904 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11905}11905 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11906}11906 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_tq\_wrap(\textcolor{keyword}{volatile} stb\_threadqueue *z, \textcolor{keywordtype}{int} p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11907}11907 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11908}11908    \textcolor{keywordflow}{if} (p == z-\/>array\_size)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11909}11909       \textcolor{keywordflow}{return} p -\/ z-\/>array\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11910}11910    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11911}11911       \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11912}11912 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11913}11913 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11914}11914 \textcolor{keywordtype}{int} stb\_\_threadq\_get\_raw(stb\_threadqueue *tq2, \textcolor{keywordtype}{void} *\mbox{\hyperlink{structoutput}{output}}, \textcolor{keywordtype}{int} block)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11915}11915 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11916}11916    \textcolor{keyword}{volatile} stb\_threadqueue *tq = (\textcolor{keyword}{volatile} stb\_threadqueue *) tq2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11917}11917    \textcolor{keywordflow}{if} (tq-\/>head == tq-\/>tail \&\& !block) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11918}11918 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11919}11919    stb\_mutex\_begin(tq-\/>remove);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11920}11920 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11921}11921    \textcolor{keywordflow}{while} (tq-\/>head == tq-\/>tail) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11922}11922       \textcolor{keywordflow}{if} (!block) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11923}11923          stb\_mutex\_end(tq-\/>remove);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11924}11924          \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11925}11925       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11926}11926       ++tq-\/>head\_blockers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11927}11927       stb\_mutex\_end(tq-\/>remove);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11928}11928 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11929}11929       stb\_sem\_waitfor(tq-\/>nonempty);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11930}11930 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11931}11931       stb\_mutex\_begin(tq-\/>remove);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11932}11932       -\/-\/tq-\/>head\_blockers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11933}11933    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11934}11934 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11935}11935    memcpy(\mbox{\hyperlink{structoutput}{output}}, tq-\/>data + tq-\/>head*tq-\/>item\_size, tq-\/>item\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11936}11936    stb\_barrier();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11937}11937    tq-\/>head = stb\_\_tq\_wrap(tq, tq-\/>head+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11938}11938 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11939}11939    stb\_sem\_release(tq-\/>nonfull);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11940}11940    \textcolor{keywordflow}{if} (tq-\/>head\_blockers) \textcolor{comment}{// can't check if actually non-\/empty due to race?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11941}11941       stb\_sem\_release(tq-\/>nonempty); \textcolor{comment}{// if there are other blockers, wake one}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11942}11942 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11943}11943    stb\_mutex\_end(tq-\/>remove);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11944}11944    \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11945}11945 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11946}11946 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11947}11947 \textcolor{keywordtype}{int} stb\_\_threadq\_grow(\textcolor{keyword}{volatile} stb\_threadqueue *tq)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11948}11948 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11949}11949    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11950}11950    \textcolor{keywordtype}{char} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11951}11951    assert(tq-\/>remove != STB\_MUTEX\_NULL); \textcolor{comment}{// must have this to allow growth!}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11952}11952    stb\_mutex\_begin(tq-\/>remove);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11953}11953 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11954}11954    n = tq-\/>array\_size * 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11955}11955    p = (\textcolor{keywordtype}{char} *) realloc(tq-\/>data, n * tq-\/>item\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11956}11956    \textcolor{keywordflow}{if} (p == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11957}11957       stb\_mutex\_end(tq-\/>remove);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11958}11958       stb\_mutex\_end(tq-\/>add);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11959}11959       \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11960}11960    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11961}11961    \textcolor{keywordflow}{if} (tq-\/>tail < tq-\/>head) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11962}11962       memcpy(p + tq-\/>array\_size * tq-\/>item\_size, p, tq-\/>tail * tq-\/>item\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11963}11963       tq-\/>tail += tq-\/>array\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11964}11964    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11965}11965    tq-\/>data = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11966}11966    tq-\/>array\_size = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11967}11967 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11968}11968    stb\_mutex\_end(tq-\/>remove);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11969}11969    \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11970}11970 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11971}11971 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11972}11972 \textcolor{keywordtype}{int} stb\_\_threadq\_add\_raw(stb\_threadqueue *tq2, \textcolor{keywordtype}{void} *input, \textcolor{keywordtype}{int} block)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11973}11973 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11974}11974    \textcolor{keywordtype}{int} tail,pos;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11975}11975    \textcolor{keyword}{volatile} stb\_threadqueue *tq = (\textcolor{keyword}{volatile} stb\_threadqueue *) tq2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11976}11976    stb\_mutex\_begin(tq-\/>add);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11977}11977    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11978}11978       pos = tq-\/>tail;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11979}11979       tail = stb\_\_tq\_wrap(tq, pos+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11980}11980       \textcolor{keywordflow}{if} (tail != tq-\/>head) \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11981}11981 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11982}11982       \textcolor{comment}{// full}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11983}11983       \textcolor{keywordflow}{if} (tq-\/>growable) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11984}11984          \textcolor{keywordflow}{if} (!stb\_\_threadq\_grow(tq)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11985}11985             stb\_mutex\_end(tq-\/>add);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11986}11986             \textcolor{keywordflow}{return} STB\_FALSE; \textcolor{comment}{// out of memory}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11987}11987          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11988}11988       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!block) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11989}11989          stb\_mutex\_end(tq-\/>add);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11990}11990          \textcolor{keywordflow}{return} STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11991}11991       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11992}11992          ++tq-\/>tail\_blockers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11993}11993          stb\_mutex\_end(tq-\/>add);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11994}11994 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11995}11995          stb\_sem\_waitfor(tq-\/>nonfull);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11996}11996 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11997}11997          stb\_mutex\_begin(tq-\/>add);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11998}11998          -\/-\/tq-\/>tail\_blockers;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l11999}11999       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12000}12000    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12001}12001    memcpy(tq-\/>data + tq-\/>item\_size * pos, input, tq-\/>item\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12002}12002    stb\_barrier();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12003}12003    tq-\/>tail = tail;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12004}12004    stb\_sem\_release(tq-\/>nonempty);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12005}12005    \textcolor{keywordflow}{if} (tq-\/>tail\_blockers) \textcolor{comment}{// can't check if actually non-\/full due to race?}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12006}12006       stb\_sem\_release(tq-\/>nonfull);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12007}12007    stb\_mutex\_end(tq-\/>add);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12008}12008    \textcolor{keywordflow}{return} STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12009}12009 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12010}12010 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12011}12011 \textcolor{keywordtype}{int} stb\_threadq\_length(stb\_threadqueue *tq2)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12012}12012 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12013}12013    \textcolor{keywordtype}{int} a,b,n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12014}12014    \textcolor{keyword}{volatile} stb\_threadqueue *tq = (\textcolor{keyword}{volatile} stb\_threadqueue *) tq2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12015}12015    stb\_mutex\_begin(tq-\/>add);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12016}12016    a = tq-\/>head;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12017}12017    b = tq-\/>tail;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12018}12018    n = tq-\/>array\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12019}12019    stb\_mutex\_end(tq-\/>add);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12020}12020    \textcolor{keywordflow}{if} (a > b) b += n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12021}12021    \textcolor{keywordflow}{return} b-\/a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12022}12022 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12023}12023 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12024}12024 \textcolor{keywordtype}{int} stb\_threadq\_get(stb\_threadqueue *tq, \textcolor{keywordtype}{void} *\mbox{\hyperlink{structoutput}{output}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12025}12025 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12026}12026    \textcolor{keywordflow}{return} stb\_\_threadq\_get\_raw(tq, \mbox{\hyperlink{structoutput}{output}}, STB\_FALSE);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12027}12027 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12028}12028 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12029}12029 \textcolor{keywordtype}{void} stb\_threadq\_get\_block(stb\_threadqueue *tq, \textcolor{keywordtype}{void} *\mbox{\hyperlink{structoutput}{output}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12030}12030 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12031}12031    stb\_\_threadq\_get\_raw(tq, \mbox{\hyperlink{structoutput}{output}}, STB\_TRUE);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12032}12032 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12033}12033 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12034}12034 \textcolor{keywordtype}{int} stb\_threadq\_add(stb\_threadqueue *tq, \textcolor{keywordtype}{void} *input)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12035}12035 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12036}12036    \textcolor{keywordflow}{return} stb\_\_threadq\_add\_raw(tq, input, STB\_FALSE);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12037}12037 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12038}12038 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12039}12039 \textcolor{keywordtype}{int} stb\_threadq\_add\_block(stb\_threadqueue *tq, \textcolor{keywordtype}{void} *input)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12040}12040 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12041}12041    \textcolor{keywordflow}{return} stb\_\_threadq\_add\_raw(tq, input, STB\_TRUE);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12042}12042 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12043}12043 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12044}12044 \textcolor{keywordtype}{void} stb\_threadq\_delete(stb\_threadqueue *tq)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12045}12045 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12046}12046    \textcolor{keywordflow}{if} (tq) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12047}12047       free(tq-\/>data);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12048}12048       stb\_mutex\_delete(tq-\/>add);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12049}12049       stb\_mutex\_delete(tq-\/>remove);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12050}12050       stb\_sem\_delete(tq-\/>nonempty);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12051}12051       stb\_sem\_delete(tq-\/>nonfull);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12052}12052       free(tq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12053}12053    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12054}12054 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12055}12055 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12056}12056 \textcolor{preprocessor}{\#define STB\_THREADQUEUE\_DYNAMIC   0}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12057}12057 stb\_threadqueue *stb\_threadq\_new(\textcolor{keywordtype}{int} item\_size, \textcolor{keywordtype}{int} num\_items, \textcolor{keywordtype}{int} many\_add, \textcolor{keywordtype}{int} many\_remove)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12058}12058 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12059}12059    \textcolor{keywordtype}{int} error=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12060}12060    stb\_threadqueue *tq = (stb\_threadqueue *) malloc(\textcolor{keyword}{sizeof}(*tq));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12061}12061    \textcolor{keywordflow}{if} (tq == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12062}12062 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12063}12063    \textcolor{keywordflow}{if} (num\_items == STB\_THREADQUEUE\_DYNAMIC) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12064}12064       tq-\/>growable = STB\_TRUE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12065}12065       num\_items = 32;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12066}12066    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12067}12067       tq-\/>growable = STB\_FALSE;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12068}12068 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12069}12069    tq-\/>item\_size = item\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12070}12070    tq-\/>array\_size = num\_items+1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12071}12071 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12072}12072    tq-\/>add = tq-\/>remove = STB\_MUTEX\_NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12073}12073    tq-\/>nonempty = tq-\/>nonfull = STB\_SEMAPHORE\_NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12074}12074    tq-\/>data = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12075}12075    \textcolor{keywordflow}{if} (many\_add)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12076}12076       \{ tq-\/>add    = stb\_mutex\_new(); \textcolor{keywordflow}{if} (tq-\/>add    == STB\_MUTEX\_NULL) \textcolor{keywordflow}{goto} error; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12077}12077    \textcolor{keywordflow}{if} (many\_remove || tq-\/>growable)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12078}12078       \{ tq-\/>remove = stb\_mutex\_new(); \textcolor{keywordflow}{if} (tq-\/>remove == STB\_MUTEX\_NULL) \textcolor{keywordflow}{goto} error; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12079}12079    tq-\/>nonempty = stb\_sem\_new(1); \textcolor{keywordflow}{if} (tq-\/>nonempty == STB\_SEMAPHORE\_NULL) \textcolor{keywordflow}{goto} error;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12080}12080    tq-\/>nonfull  = stb\_sem\_new(1); \textcolor{keywordflow}{if} (tq-\/>nonfull  == STB\_SEMAPHORE\_NULL) \textcolor{keywordflow}{goto} error;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12081}12081    tq-\/>data = (\textcolor{keywordtype}{char} *) malloc(tq-\/>item\_size * tq-\/>array\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12082}12082    \textcolor{keywordflow}{if} (tq-\/>data == NULL) \textcolor{keywordflow}{goto} error;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12083}12083 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12084}12084    tq-\/>head = tq-\/>tail = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12085}12085    tq-\/>head\_blockers = tq-\/>tail\_blockers = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12086}12086 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12087}12087    \textcolor{keywordflow}{return} tq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12088}12088 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12089}12089 error:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12090}12090    stb\_threadq\_delete(tq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12091}12091    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12092}12092 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12093}12093 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12094}12094 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12095}12095 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12096}12096    stb\_thread\_func f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12097}12097    \textcolor{keywordtype}{void} *d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12098}12098    \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **retval;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12099}12099    stb\_sync sync;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12100}12100 \} stb\_\_workinfo;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12101}12101 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12102}12102 \textcolor{comment}{//static volatile stb\_\_workinfo *stb\_\_work;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12103}12103 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12104}12104 \textcolor{keyword}{struct }stb\_\_workqueue}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12105}12105 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12106}12106    \textcolor{keywordtype}{int} numthreads;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12107}12107    stb\_threadqueue *tq;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12108}12108 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12109}12109 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12110}12110 \textcolor{keyword}{static} stb\_workqueue *stb\_\_work\_global;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12111}12111 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12112}12112 \textcolor{keyword}{static} \textcolor{keywordtype}{void} *stb\_\_thread\_workloop(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12113}12113 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12114}12114    \textcolor{keyword}{volatile} stb\_workqueue *q = (\textcolor{keyword}{volatile} stb\_workqueue *) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12115}12115    \textcolor{keywordflow}{for}(;;) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12116}12116       \textcolor{keywordtype}{void} *z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12117}12117       stb\_\_workinfo w;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12118}12118       stb\_threadq\_get\_block(q-\/>tq, \&w);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12119}12119       \textcolor{keywordflow}{if} (w.f == NULL) \textcolor{comment}{// null work is a signal to end the thread}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12120}12120          \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12121}12121       z = w.f(w.d);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12122}12122       \textcolor{keywordflow}{if} (w.retval) \{ stb\_barrier(); *w.retval = z; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12123}12123       \textcolor{keywordflow}{if} (w.sync != STB\_SYNC\_NULL) stb\_sync\_reach(w.sync);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12124}12124    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12125}12125 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12126}12126 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12127}12127 stb\_workqueue *stb\_workq\_new(\textcolor{keywordtype}{int} num\_threads, \textcolor{keywordtype}{int} max\_units)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12128}12128 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12129}12129    \textcolor{keywordflow}{return} stb\_workq\_new\_flags(num\_threads, max\_units, 0,0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12130}12130 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12131}12131 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12132}12132 stb\_workqueue *stb\_workq\_new\_flags(\textcolor{keywordtype}{int} numthreads, \textcolor{keywordtype}{int} max\_units, \textcolor{keywordtype}{int} no\_add\_mutex, \textcolor{keywordtype}{int} no\_remove\_mutex)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12133}12133 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12134}12134    stb\_workqueue *q = (stb\_workqueue *) malloc(\textcolor{keyword}{sizeof}(*q));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12135}12135    \textcolor{keywordflow}{if} (q == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12136}12136    q-\/>tq = stb\_threadq\_new(\textcolor{keyword}{sizeof}(stb\_\_workinfo), max\_units, !no\_add\_mutex, !no\_remove\_mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12137}12137    \textcolor{keywordflow}{if} (q-\/>tq == NULL) \{ free(q); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12138}12138    q-\/>numthreads = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12139}12139    stb\_workq\_numthreads(q, numthreads);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12140}12140    \textcolor{keywordflow}{return} q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12141}12141 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12142}12142 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12143}12143 \textcolor{keywordtype}{void} stb\_workq\_delete(stb\_workqueue *q)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12144}12144 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12145}12145    \textcolor{keywordflow}{while} (stb\_workq\_length(q) != 0)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12146}12146       stb\_\_thread\_sleep(1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12147}12147    stb\_threadq\_delete(q-\/>tq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12148}12148    free(q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12149}12149 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12150}12150 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12151}12151 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_work\_maxitems = STB\_THREADQUEUE\_DYNAMIC;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12152}12152 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12153}12153 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_work\_init(\textcolor{keywordtype}{int} num\_threads)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12154}12154 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12155}12155    \textcolor{keywordflow}{if} (stb\_\_work\_global == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12156}12156       stb\_\_threadmutex\_init();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12157}12157       stb\_mutex\_begin(stb\_\_workmutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12158}12158       stb\_barrier();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12159}12159       \textcolor{keywordflow}{if} (*(stb\_workqueue * \textcolor{keyword}{volatile} *) \&stb\_\_work\_global == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12160}12160          stb\_\_work\_global = stb\_workq\_new(num\_threads, stb\_\_work\_maxitems);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12161}12161       stb\_mutex\_end(stb\_\_workmutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12162}12162    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12163}12163 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12164}12164 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12165}12165 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_work\_raw(stb\_workqueue *q, stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code, stb\_sync rel)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12166}12166 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12167}12167    stb\_\_workinfo w;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12168}12168    \textcolor{keywordflow}{if} (q == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12169}12169       stb\_work\_init(1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12170}12170       q = stb\_\_work\_global;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12171}12171    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12172}12172    w.f = f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12173}12173    w.d = d;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12174}12174    w.retval = return\_code;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12175}12175    w.sync = rel;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12176}12176    \textcolor{keywordflow}{return} stb\_threadq\_add(q-\/>tq, \&w);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12177}12177 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12178}12178 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12179}12179 \textcolor{keywordtype}{int} stb\_workq\_length(stb\_workqueue *q)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12180}12180 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12181}12181    \textcolor{keywordflow}{return} stb\_threadq\_length(q-\/>tq);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12182}12182 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12183}12183 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12184}12184 \textcolor{keywordtype}{int} stb\_workq(stb\_workqueue *q, stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12185}12185 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12186}12186    \textcolor{keywordflow}{if} (f == NULL) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12187}12187    \textcolor{keywordflow}{return} stb\_workq\_reach(q, f, d, return\_code, NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12188}12188 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12189}12189 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12190}12190 \textcolor{keywordtype}{int} stb\_workq\_reach(stb\_workqueue *q, stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code, stb\_sync rel)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12191}12191 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12192}12192    \textcolor{keywordflow}{if} (f == NULL) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12193}12193    \textcolor{keywordflow}{return} stb\_\_work\_raw(q, f, d, return\_code, rel);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12194}12194 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12195}12195 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12196}12196 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_workq\_numthreads(stb\_workqueue *q, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12197}12197 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12198}12198    \textcolor{keywordflow}{while} (q-\/>numthreads < n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12199}12199       stb\_create\_thread(stb\_\_thread\_workloop, q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12200}12200       ++q-\/>numthreads;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12201}12201    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12202}12202    \textcolor{keywordflow}{while} (q-\/>numthreads > n) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12203}12203       stb\_\_work\_raw(q, NULL, NULL, NULL, NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12204}12204       -\/-\/q-\/>numthreads;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12205}12205    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12206}12206 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12207}12207 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12208}12208 \textcolor{keywordtype}{void} stb\_workq\_numthreads(stb\_workqueue *q, \textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12209}12209 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12210}12210    stb\_mutex\_begin(stb\_\_threadmutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12211}12211    stb\_\_workq\_numthreads(q,n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12212}12212    stb\_mutex\_end(stb\_\_threadmutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12213}12213 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12214}12214 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12215}12215 \textcolor{keywordtype}{int} stb\_work\_maxunits(\textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12216}12216 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12217}12217    \textcolor{keywordflow}{if} (stb\_\_work\_global == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12218}12218       stb\_\_work\_maxitems = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12219}12219       stb\_work\_init(1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12220}12220    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12221}12221    \textcolor{keywordflow}{return} stb\_\_work\_maxitems;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12222}12222 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12223}12223 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12224}12224 \textcolor{keywordtype}{int} stb\_work(stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12225}12225 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12226}12226    \textcolor{keywordflow}{return} stb\_workq(stb\_\_work\_global, f,d,return\_code);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12227}12227 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12228}12228 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12229}12229 \textcolor{keywordtype}{int} stb\_work\_reach(stb\_thread\_func f, \textcolor{keywordtype}{void} *d, \textcolor{keyword}{volatile} \textcolor{keywordtype}{void} **return\_code, stb\_sync rel)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12230}12230 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12231}12231    \textcolor{keywordflow}{return} stb\_workq\_reach(stb\_\_work\_global, f,d,return\_code,rel);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12232}12232 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12233}12233 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12234}12234 \textcolor{keywordtype}{void} stb\_work\_numthreads(\textcolor{keywordtype}{int} n)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12235}12235 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12236}12236    \textcolor{keywordflow}{if} (stb\_\_work\_global == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12237}12237       stb\_work\_init(n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12238}12238    \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12239}12239       stb\_workq\_numthreads(stb\_\_work\_global, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12240}12240 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12241}12241 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12242}12242 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12243}12243 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12245}12245 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12246}12246 \textcolor{comment}{// Background disk I/O}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12247}12247 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12248}12248 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12249}12249 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12250}12250 \textcolor{preprocessor}{\#define STB\_BGIO\_READ\_ALL   (-\/1)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12251}12251 STB\_EXTERN \textcolor{keywordtype}{int} stb\_bgio\_read    (\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{int} len, stb\_uchar **\mbox{\hyperlink{structresult}{result}}, \textcolor{keywordtype}{int} *olen);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12252}12252 STB\_EXTERN \textcolor{keywordtype}{int} stb\_bgio\_readf   (FILE *f       , \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{int} len, stb\_uchar **\mbox{\hyperlink{structresult}{result}}, \textcolor{keywordtype}{int} *olen);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12253}12253 STB\_EXTERN \textcolor{keywordtype}{int} stb\_bgio\_read\_to (\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{int} len, stb\_uchar  *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} *olen);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12254}12254 STB\_EXTERN \textcolor{keywordtype}{int} stb\_bgio\_readf\_to(FILE *f       , \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{int} len, stb\_uchar  *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} *olen);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12255}12255 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12256}12256 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12257}12257 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12258}12258    \textcolor{keywordtype}{int} have\_data;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12259}12259    \textcolor{keywordtype}{int} is\_valid;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12260}12260    \textcolor{keywordtype}{int} is\_dir;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12261}12261    time\_t filetime;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12262}12262    stb\_int64 filesize;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12263}12263 \} stb\_bgstat;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12264}12264 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12265}12265 STB\_EXTERN \textcolor{keywordtype}{int} stb\_bgio\_stat    (\textcolor{keywordtype}{char} *filename, stb\_bgstat *\mbox{\hyperlink{structresult}{result}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12266}12266 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12267}12267 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12268}12268 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12269}12269 \textcolor{keyword}{static} stb\_workqueue *stb\_\_diskio;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12270}12270 \textcolor{keyword}{static} stb\_mutex stb\_\_diskio\_mutex;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12271}12271 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12272}12272 \textcolor{keywordtype}{void} stb\_thread\_cleanup(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12273}12273 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12274}12274    \textcolor{keywordflow}{if} (stb\_\_work\_global) stb\_workq\_delete(stb\_\_work\_global); stb\_\_work\_global = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12275}12275    \textcolor{keywordflow}{if} (stb\_\_threadmutex) stb\_mutex\_delete(stb\_\_threadmutex); stb\_\_threadmutex = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12276}12276    \textcolor{keywordflow}{if} (stb\_\_workmutex)   stb\_mutex\_delete(stb\_\_workmutex);   stb\_\_workmutex   = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12277}12277    \textcolor{keywordflow}{if} (stb\_\_diskio)      stb\_workq\_delete(stb\_\_diskio);      stb\_\_diskio      = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12278}12278    \textcolor{keywordflow}{if} (stb\_\_diskio\_mutex)stb\_mutex\_delete(stb\_\_diskio\_mutex);stb\_\_diskio\_mutex= NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12279}12279 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12280}12280 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12281}12281 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12282}12282 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12283}12283 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12284}12284    \textcolor{keywordtype}{char} *filename;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12285}12285    FILE *f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12286}12286    \textcolor{keywordtype}{int} offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12287}12287    \textcolor{keywordtype}{int} len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12288}12288 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12289}12289    stb\_bgstat *stat\_out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12290}12290    stb\_uchar *\mbox{\hyperlink{structoutput}{output}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12291}12291    stb\_uchar **\mbox{\hyperlink{structresult}{result}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12292}12292    \textcolor{keywordtype}{int} *len\_output;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12293}12293    \textcolor{keywordtype}{int} *flag;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12294}12294 \} stb\_\_disk\_command;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12295}12295 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12296}12296 \textcolor{preprocessor}{\#define STB\_\_MAX\_DISK\_COMMAND 100}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12297}12297 \textcolor{keyword}{static} stb\_\_disk\_command stb\_\_dc\_queue[STB\_\_MAX\_DISK\_COMMAND];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12298}12298 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_dc\_offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12299}12299 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12300}12300 \textcolor{keywordtype}{void} stb\_\_io\_init(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12301}12301 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12302}12302    \textcolor{keywordflow}{if} (!stb\_\_diskio) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12303}12303       stb\_\_threadmutex\_init();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12304}12304       stb\_mutex\_begin(stb\_\_threadmutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12305}12305       stb\_barrier();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12306}12306       \textcolor{keywordflow}{if} (*(stb\_thread * \textcolor{keyword}{volatile} *) \&stb\_\_diskio == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12307}12307          stb\_\_diskio\_mutex = stb\_mutex\_new();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12308}12308          \textcolor{comment}{// use many threads so OS can try to schedule seeks}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12309}12309          stb\_\_diskio = stb\_workq\_new\_flags(16,STB\_\_MAX\_DISK\_COMMAND,STB\_FALSE,STB\_FALSE);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12310}12310       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12311}12311       stb\_mutex\_end(stb\_\_threadmutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12312}12312    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12313}12313 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12314}12314 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12315}12315 \textcolor{keyword}{static} \textcolor{keywordtype}{void} * stb\_\_io\_error(stb\_\_disk\_command *dc)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12316}12316 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12317}12317    \textcolor{keywordflow}{if} (dc-\/>len\_output) *dc-\/>len\_output = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12318}12318    \textcolor{keywordflow}{if} (dc-\/>result) *dc-\/>result = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12319}12319    \textcolor{keywordflow}{if} (dc-\/>flag) *dc-\/>flag = -\/1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12320}12320    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12321}12321 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12322}12322 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12323}12323 \textcolor{keyword}{static} \textcolor{keywordtype}{void} * stb\_\_io\_task(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12324}12324 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12325}12325    stb\_\_disk\_command *dc = (stb\_\_disk\_command *) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12326}12326    \textcolor{keywordtype}{int} len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12327}12327    FILE *f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12328}12328    stb\_uchar *buf;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12329}12329 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12330}12330    \textcolor{keywordflow}{if} (dc-\/>stat\_out) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12331}12331       \textcolor{keyword}{struct }\_stati64 s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12332}12332       \textcolor{keywordflow}{if} (!\_stati64(dc-\/>filename, \&s)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12333}12333          dc-\/>stat\_out-\/>filesize = s.st\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12334}12334          dc-\/>stat\_out-\/>filetime = s.st\_mtime;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12335}12335          dc-\/>stat\_out-\/>is\_dir = s.st\_mode \& \_S\_IFDIR;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12336}12336          dc-\/>stat\_out-\/>is\_valid = (s.st\_mode \& \_S\_IFREG) || dc-\/>stat\_out-\/>is\_dir;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12337}12337       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12338}12338          dc-\/>stat\_out-\/>is\_valid = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12339}12339       stb\_barrier();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12340}12340       dc-\/>stat\_out-\/>have\_data = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12341}12341       free(dc-\/>filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12342}12342       \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12343}12343    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12344}12344    \textcolor{keywordflow}{if} (dc-\/>f) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12345}12345 \textcolor{preprocessor}{      \#ifdef WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12346}12346       f = \_fdopen(\_dup(\_fileno(dc-\/>f)), \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12347}12347 \textcolor{preprocessor}{      \#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12348}12348       f = fdopen(dup(fileno(dc-\/>f)), \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12349}12349 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12350}12350       \textcolor{keywordflow}{if} (!f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12351}12351          \textcolor{keywordflow}{return} stb\_\_io\_error(dc);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12352}12352    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12353}12353       f = fopen(dc-\/>filename, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12354}12354       free(dc-\/>filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12355}12355       \textcolor{keywordflow}{if} (!f)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12356}12356          \textcolor{keywordflow}{return} stb\_\_io\_error(dc);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12357}12357    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12358}12358 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12359}12359    len = dc-\/>len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12360}12360    \textcolor{keywordflow}{if} (len < 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12361}12361       fseek(f, 0, SEEK\_END);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12362}12362       len = ftell(f) -\/ dc-\/>offset;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12363}12363    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12364}12364 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12365}12365    \textcolor{keywordflow}{if} (fseek(f, dc-\/>offset, SEEK\_SET)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12366}12366       fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12367}12367       \textcolor{keywordflow}{return} stb\_\_io\_error(dc);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12368}12368    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12369}12369 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12370}12370    \textcolor{keywordflow}{if} (dc-\/>output)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12371}12371       buf = dc-\/>output;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12372}12372    \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12373}12373       buf = (stb\_uchar *) malloc(len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12374}12374       \textcolor{keywordflow}{if} (buf == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12375}12375          fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12376}12376          \textcolor{keywordflow}{return} stb\_\_io\_error(dc);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12377}12377       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12378}12378    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12379}12379 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12380}12380    len = fread(buf, 1, len, f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12381}12381    fclose(f);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12382}12382    \textcolor{keywordflow}{if} (dc-\/>len\_output) *dc-\/>len\_output = len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12383}12383    \textcolor{keywordflow}{if} (dc-\/>result) *dc-\/>result = buf;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12384}12384    \textcolor{keywordflow}{if} (dc-\/>flag) *dc-\/>flag = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12385}12385 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12386}12386    \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12387}12387 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12388}12388 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12389}12389 \textcolor{keywordtype}{int} stb\_\_io\_add(\textcolor{keywordtype}{char} *fname, FILE *f, \textcolor{keywordtype}{int} off, \textcolor{keywordtype}{int} len, stb\_uchar *out, stb\_uchar **\mbox{\hyperlink{structresult}{result}}, \textcolor{keywordtype}{int} *olen, \textcolor{keywordtype}{int} *flag, stb\_bgstat *stat)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12390}12390 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12391}12391    \textcolor{keywordtype}{int} res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12392}12392    stb\_\_io\_init();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12393}12393    \textcolor{comment}{// do memory allocation outside of mutex}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12394}12394    \textcolor{keywordflow}{if} (fname) fname = stb\_p\_strdup(fname);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12395}12395    stb\_mutex\_begin(stb\_\_diskio\_mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12396}12396    \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12397}12397       stb\_\_disk\_command *dc = \&stb\_\_dc\_queue[stb\_\_dc\_offset];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12398}12398       dc-\/>filename = fname;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12399}12399       dc-\/>f = f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12400}12400       dc-\/>offset = off;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12401}12401       dc-\/>len = len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12402}12402       dc-\/>output = out;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12403}12403       dc-\/>result = \mbox{\hyperlink{structresult}{result}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12404}12404       dc-\/>len\_output = olen;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12405}12405       dc-\/>flag = flag;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12406}12406       dc-\/>stat\_out = stat;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12407}12407       res = stb\_workq(stb\_\_diskio, stb\_\_io\_task, dc, NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12408}12408       \textcolor{keywordflow}{if} (res)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12409}12409          stb\_\_dc\_offset = (stb\_\_dc\_offset + 1 == STB\_\_MAX\_DISK\_COMMAND ? 0 : stb\_\_dc\_offset+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12410}12410    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12411}12411    stb\_mutex\_end(stb\_\_diskio\_mutex);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12412}12412    \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12413}12413 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12414}12414 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12415}12415 \textcolor{keywordtype}{int} stb\_bgio\_read(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{int} len, stb\_uchar **\mbox{\hyperlink{structresult}{result}}, \textcolor{keywordtype}{int} *olen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12416}12416 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12417}12417    \textcolor{keywordflow}{return} stb\_\_io\_add(filename,NULL,offset,len,NULL,\mbox{\hyperlink{structresult}{result}},olen,NULL,NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12418}12418 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12419}12419 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12420}12420 \textcolor{keywordtype}{int} stb\_bgio\_readf(FILE *f, \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{int} len, stb\_uchar **\mbox{\hyperlink{structresult}{result}}, \textcolor{keywordtype}{int} *olen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12421}12421 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12422}12422    \textcolor{keywordflow}{return} stb\_\_io\_add(NULL,f,offset,len,NULL,\mbox{\hyperlink{structresult}{result}},olen,NULL,NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12423}12423 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12424}12424 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12425}12425 \textcolor{keywordtype}{int} stb\_bgio\_read\_to(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{int} len, stb\_uchar *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} *olen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12426}12426 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12427}12427    \textcolor{keywordflow}{return} stb\_\_io\_add(filename,NULL,offset,len,\mbox{\hyperlink{classbuffer}{buffer}},NULL,olen,NULL,NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12428}12428 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12429}12429 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12430}12430 \textcolor{keywordtype}{int} stb\_bgio\_readf\_to(FILE *f, \textcolor{keywordtype}{int} offset, \textcolor{keywordtype}{int} len, stb\_uchar *\mbox{\hyperlink{classbuffer}{buffer}}, \textcolor{keywordtype}{int} *olen)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12431}12431 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12432}12432    \textcolor{keywordflow}{return} stb\_\_io\_add(NULL,f,offset,len,\mbox{\hyperlink{classbuffer}{buffer}},NULL,olen,NULL,NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12433}12433 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12434}12434 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12435}12435 STB\_EXTERN \textcolor{keywordtype}{int} stb\_bgio\_stat    (\textcolor{keywordtype}{char} *filename, stb\_bgstat *\mbox{\hyperlink{structresult}{result}})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12436}12436 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12437}12437    \mbox{\hyperlink{structresult}{result}}-\/>have\_data = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12438}12438    \textcolor{keywordflow}{return} stb\_\_io\_add(filename,NULL,0,0,0,NULL,0,NULL, \mbox{\hyperlink{structresult}{result}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12439}12439 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12440}12440 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12441}12441 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12442}12442 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12443}12443 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12444}12444 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12446}12446 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12447}12447 \textcolor{comment}{//                         Fast malloc implementation}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12448}12448 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12449}12449 \textcolor{comment}{//   This is a clone of TCMalloc, but without the thread support.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12450}12450 \textcolor{comment}{//      1. large objects are allocated directly, page-\/aligned}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12451}12451 \textcolor{comment}{//      2. small objects are allocated in homogeonous heaps, 0 overhead}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12452}12452 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12453}12453 \textcolor{comment}{//   We keep an allocation table for pages a la TCMalloc. This would}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12454}12454 \textcolor{comment}{//   require 4MB for the entire address space, but we only allocate}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12455}12455 \textcolor{comment}{//   the parts that are in use. The overhead from using homogenous heaps}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12456}12456 \textcolor{comment}{//   everywhere is 3MB. (That is, if you allocate 1 object of each size,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12457}12457 \textcolor{comment}{//   you'll use 3MB.)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12458}12458 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12459}12459 \textcolor{preprocessor}{\#if defined(STB\_DEFINE) \&\& ((defined(\_WIN32) \&\& !defined(\_M\_AMD64)) || defined(STB\_FASTMALLOC))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12460}12460 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12461}12461 \textcolor{preprocessor}{\#ifdef \_WIN32}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12462}12462 \textcolor{preprocessor}{   \#ifndef \_WINDOWS\_}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12463}12463 \textcolor{preprocessor}{   \#ifndef STB\_\_IMPORT}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12464}12464 \textcolor{preprocessor}{   \#define STB\_\_IMPORT   STB\_EXTERN \_\_declspec(dllimport)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12465}12465 \textcolor{preprocessor}{   \#define STB\_\_DW       unsigned long}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12466}12466 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12467}12467    STB\_\_IMPORT \textcolor{keywordtype}{void} * \_\_stdcall VirtualAlloc(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} size, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} type, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} protect);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12468}12468    STB\_\_IMPORT \textcolor{keywordtype}{int}   \_\_stdcall VirtualFree(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} size, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} freetype);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12469}12469 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12470}12470 \textcolor{preprocessor}{   \#define stb\_\_alloc\_pages\_raw(x)     (stb\_uint32) VirtualAlloc(NULL, (x), 0x3000, 0x04)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12471}12471 \textcolor{preprocessor}{   \#define stb\_\_dealloc\_pages\_raw(p)   VirtualFree((void *) p, 0, 0x8000)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12472}12472 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12473}12473 \textcolor{preprocessor}{   \#error "{}Platform not currently supported"{}}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12474}12474 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12475}12475 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12476}12476 \textcolor{keyword}{typedef} \textcolor{keyword}{struct }stb\_\_span}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12477}12477 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12478}12478    \textcolor{keywordtype}{int}                start, len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12479}12479    \textcolor{keyword}{struct }stb\_\_span  *next, *prev;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12480}12480    \textcolor{keywordtype}{void}              *first\_free;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12481}12481    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short}     list; \textcolor{comment}{// 1..256 free; 257..511 sizeclass; 0=large block}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12482}12482    \textcolor{keywordtype}{short}              allocations; \textcolor{comment}{// \# outstanding allocations for sizeclass}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12483}12483 \} stb\_\_span;  \textcolor{comment}{// 24}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12484}12484 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12485}12485 \textcolor{keyword}{static} stb\_\_span **stb\_\_span\_for\_page;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12486}12486 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_firstpage, stb\_\_lastpage;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12487}12487 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_update\_page\_range(\textcolor{keywordtype}{int} first, \textcolor{keywordtype}{int} last)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12488}12488 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12489}12489    stb\_\_span **sfp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12490}12490    \textcolor{keywordtype}{int} i, f,l;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12491}12491    \textcolor{keywordflow}{if} (first >= stb\_\_firstpage \&\& last <= stb\_\_lastpage) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12492}12492    \textcolor{keywordflow}{if} (stb\_\_span\_for\_page == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12493}12493       f = first;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12494}12494       l = f+stb\_max(last-\/f, 16384);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12495}12495       l = stb\_min(l, 1<<20);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12496}12496    \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (last > stb\_\_lastpage) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12497}12497       f = stb\_\_firstpage;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12498}12498       l = f + (stb\_\_lastpage -\/ f) * 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12499}12499       l = stb\_clamp(last, l,1<<20);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12500}12500    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12501}12501       l = stb\_\_lastpage;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12502}12502       f = l -\/ (l -\/ stb\_\_firstpage) * 2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12503}12503       f = stb\_clamp(f, 0,first);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12504}12504    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12505}12505    sfp = (stb\_\_span **) stb\_\_alloc\_pages\_raw(\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void} *) * (l-\/f));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12506}12506    \textcolor{keywordflow}{for} (i=f; i < stb\_\_firstpage; ++i) sfp[i -\/ f] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12507}12507    \textcolor{keywordflow}{for} (   ; i < stb\_\_lastpage ; ++i) sfp[i -\/ f] = stb\_\_span\_for\_page[i -\/ stb\_\_firstpage];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12508}12508    \textcolor{keywordflow}{for} (   ; i < l             ; ++i) sfp[i -\/ f] = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12509}12509    \textcolor{keywordflow}{if} (stb\_\_span\_for\_page) stb\_\_dealloc\_pages\_raw(stb\_\_span\_for\_page);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12510}12510    stb\_\_firstpage = f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12511}12511    stb\_\_lastpage  = l;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12512}12512    stb\_\_span\_for\_page = sfp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12513}12513 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12514}12514 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12515}12515 \textcolor{keyword}{static} stb\_\_span *stb\_\_span\_free=NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12516}12516 \textcolor{keyword}{static} stb\_\_span *stb\_\_span\_first, *stb\_\_span\_end;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12517}12517 \textcolor{keyword}{static} stb\_\_span *stb\_\_span\_alloc(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12518}12518 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12519}12519    stb\_\_span *s = stb\_\_span\_free;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12520}12520    \textcolor{keywordflow}{if} (s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12521}12521       stb\_\_span\_free = s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12522}12522    \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12523}12523       \textcolor{keywordflow}{if} (!stb\_\_span\_first) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12524}12524          stb\_\_span\_first = (stb\_\_span *) stb\_\_alloc\_pages\_raw(65536);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12525}12525          \textcolor{keywordflow}{if} (stb\_\_span\_first == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12526}12526          stb\_\_span\_end = stb\_\_span\_first + (65536 / \textcolor{keyword}{sizeof}(stb\_\_span));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12527}12527       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12528}12528       s = stb\_\_span\_first++;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12529}12529       \textcolor{keywordflow}{if} (stb\_\_span\_first == stb\_\_span\_end) stb\_\_span\_first = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12530}12530    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12531}12531    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12532}12532 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12533}12533 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12534}12534 \textcolor{keyword}{static} stb\_\_span *stb\_\_spanlist[512];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12535}12535 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12536}12536 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_spanlist\_unlink(stb\_\_span *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12537}12537 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12538}12538    \textcolor{keywordflow}{if} (s-\/>prev)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12539}12539       s-\/>prev-\/>next = s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12540}12540    \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12541}12541       \textcolor{keywordtype}{int} n = s-\/>list;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12542}12542       assert(stb\_\_spanlist[n] == s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12543}12543       stb\_\_spanlist[n] = s-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12544}12544    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12545}12545    \textcolor{keywordflow}{if} (s-\/>next)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12546}12546       s-\/>next-\/>prev = s-\/>prev;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12547}12547    s-\/>next = s-\/>prev = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12548}12548    s-\/>list = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12549}12549 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12550}12550 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12551}12551 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_spanlist\_add(\textcolor{keywordtype}{int} n, stb\_\_span *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12552}12552 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12553}12553    s-\/>list = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12554}12554    s-\/>next = stb\_\_spanlist[n];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12555}12555    s-\/>prev = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12556}12556    stb\_\_spanlist[n] = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12557}12557    \textcolor{keywordflow}{if} (s-\/>next) s-\/>next-\/>prev = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12558}12558 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12559}12559 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12560}12560 \textcolor{preprocessor}{\#define stb\_\_page\_shift       12}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12561}12561 \textcolor{preprocessor}{\#define stb\_\_page\_size        (1 << stb\_\_page\_shift)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12562}12562 \textcolor{preprocessor}{\#define stb\_\_page\_number(x)   ((x) >> stb\_\_page\_shift)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12563}12563 \textcolor{preprocessor}{\#define stb\_\_page\_address(x)  ((x) << stb\_\_page\_shift)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12564}12564 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12565}12565 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_set\_span\_for\_page(stb\_\_span *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12566}12566 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12567}12567    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12568}12568    \textcolor{keywordflow}{for} (i=0; i < s-\/>len; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12569}12569       stb\_\_span\_for\_page[s-\/>start + i -\/ stb\_\_firstpage] = s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12570}12570 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12571}12571 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12572}12572 \textcolor{keyword}{static} stb\_\_span *stb\_\_coalesce(stb\_\_span *a, stb\_\_span *b)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12573}12573 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12574}12574    assert(a-\/>start + a-\/>len == b-\/>start);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12575}12575    \textcolor{keywordflow}{if} (a-\/>list) stb\_\_spanlist\_unlink(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12576}12576    \textcolor{keywordflow}{if} (b-\/>list) stb\_\_spanlist\_unlink(b);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12577}12577    a-\/>len += b-\/>len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12578}12578    b-\/>len = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12579}12579    b-\/>next = stb\_\_span\_free;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12580}12580    stb\_\_span\_free = b;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12581}12581    stb\_\_set\_span\_for\_page(a);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12582}12582    \textcolor{keywordflow}{return} a;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12583}12583 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12584}12584 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12585}12585 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_free\_span(stb\_\_span *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12586}12586 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12587}12587    stb\_\_span *n = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12588}12588    \textcolor{keywordflow}{if} (s-\/>start > stb\_\_firstpage) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12589}12589       n = stb\_\_span\_for\_page[s-\/>start-\/1 -\/ stb\_\_firstpage];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12590}12590       \textcolor{keywordflow}{if} (n \&\& n-\/>allocations == -\/2 \&\& n-\/>start + n-\/>len == s-\/>start) s = stb\_\_coalesce(n,s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12591}12591    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12592}12592    \textcolor{keywordflow}{if} (s-\/>start + s-\/>len < stb\_\_lastpage) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12593}12593       n = stb\_\_span\_for\_page[s-\/>start + s-\/>len -\/ stb\_\_firstpage];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12594}12594       \textcolor{keywordflow}{if} (n \&\& n-\/>allocations == -\/2 \&\& s-\/>start + s-\/>len == n-\/>start) s = stb\_\_coalesce(s,n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12595}12595    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12596}12596    s-\/>allocations = -\/2;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12597}12597    stb\_\_spanlist\_add(s-\/>len > 256 ? 256 : s-\/>len, s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12598}12598 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12599}12599 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12600}12600 \textcolor{keyword}{static} stb\_\_span *stb\_\_alloc\_pages(\textcolor{keywordtype}{int} num)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12601}12601 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12602}12602    stb\_\_span *s = stb\_\_span\_alloc();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12603}12603    \textcolor{keywordtype}{int} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12604}12604    \textcolor{keywordflow}{if} (!s) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12605}12605    p = stb\_\_alloc\_pages\_raw(num << stb\_\_page\_shift);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12606}12606    \textcolor{keywordflow}{if} (p == 0) \{ s-\/>next = stb\_\_span\_free; stb\_\_span\_free = s; \textcolor{keywordflow}{return} 0; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12607}12607    assert(stb\_\_page\_address(stb\_\_page\_number(p)) == p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12608}12608    p = stb\_\_page\_number(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12609}12609    stb\_\_update\_page\_range(p, p+num);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12610}12610    s-\/>start = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12611}12611    s-\/>len   = num;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12612}12612    s-\/>next  = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12613}12613    s-\/>prev  = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12614}12614    stb\_\_set\_span\_for\_page(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12615}12615    \textcolor{keywordflow}{return} s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12616}12616 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12617}12617 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12618}12618 \textcolor{keyword}{static} stb\_\_span *stb\_\_alloc\_span(\textcolor{keywordtype}{int} pagecount)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12619}12619 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12620}12620    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12621}12621    stb\_\_span *p = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12622}12622    \textcolor{keywordflow}{for}(i=pagecount; i < 256; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12623}12623       \textcolor{keywordflow}{if} (stb\_\_spanlist[i]) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12624}12624          p = stb\_\_spanlist[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12625}12625          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12626}12626       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12627}12627    \textcolor{keywordflow}{if} (!p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12628}12628       p = stb\_\_spanlist[256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12629}12629       \textcolor{keywordflow}{while} (p \&\& p-\/>len < pagecount)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12630}12630          p = p-\/>next;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12631}12631    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12632}12632    \textcolor{keywordflow}{if} (!p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12633}12633       p = stb\_\_alloc\_pages(pagecount < 16 ? 16 : pagecount);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12634}12634       \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12635}12635    \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12636}12636       stb\_\_spanlist\_unlink(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12637}12637 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12638}12638    \textcolor{keywordflow}{if} (p-\/>len > pagecount) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12639}12639       stb\_\_span *q = stb\_\_span\_alloc();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12640}12640       \textcolor{keywordflow}{if} (q) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12641}12641          q-\/>start = p-\/>start + pagecount;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12642}12642          q-\/>len   = p-\/>len   -\/ pagecount;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12643}12643          p-\/>len   = pagecount;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12644}12644          \textcolor{keywordflow}{for} (i=0; i < q-\/>len; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12645}12645             stb\_\_span\_for\_page[q-\/>start+i -\/ stb\_\_firstpage] = q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12646}12646          stb\_\_spanlist\_add(q-\/>len > 256 ? 256 : q-\/>len, q);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12647}12647       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12648}12648    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12649}12649    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12650}12650 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12651}12651 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12652}12652 \textcolor{preprocessor}{\#define STB\_\_MAX\_SMALL\_SIZE     32768}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12653}12653 \textcolor{preprocessor}{\#define STB\_\_MAX\_SIZE\_CLASSES   256}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12654}12654 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12655}12655 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stb\_\_class\_base[32];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12656}12656 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stb\_\_class\_shift[32];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12657}12657 \textcolor{keyword}{static} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stb\_\_pages\_for\_class[STB\_\_MAX\_SIZE\_CLASSES];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12658}12658 \textcolor{keyword}{static}           \textcolor{keywordtype}{int} stb\_\_size\_for\_class[STB\_\_MAX\_SIZE\_CLASSES];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12659}12659 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12660}12660 stb\_\_span *stb\_\_get\_nonempty\_sizeclass(\textcolor{keywordtype}{int} c)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12661}12661 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12662}12662    \textcolor{keywordtype}{int} s = c + 256, i, size, tsize; \textcolor{comment}{// remap to span-\/list index}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12663}12663    \textcolor{keywordtype}{char} *z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12664}12664    \textcolor{keywordtype}{void} *q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12665}12665    stb\_\_span *p = stb\_\_spanlist[s];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12666}12666    \textcolor{keywordflow}{if} (p) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12667}12667       \textcolor{keywordflow}{if} (p-\/>first\_free) \textcolor{keywordflow}{return} p; \textcolor{comment}{// fast path: it's in the first one in list}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12668}12668       \textcolor{keywordflow}{for} (p=p-\/>next; p; p=p-\/>next)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12669}12669          \textcolor{keywordflow}{if} (p-\/>first\_free) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12670}12670             \textcolor{comment}{// move to front for future queries}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12671}12671             stb\_\_spanlist\_unlink(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12672}12672             stb\_\_spanlist\_add(s, p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12673}12673             \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12674}12674          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12675}12675    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12676}12676    \textcolor{comment}{// no non-\/empty ones, so allocate a new one}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12677}12677    p = stb\_\_alloc\_span(stb\_\_pages\_for\_class[c]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12678}12678    \textcolor{keywordflow}{if} (!p) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12679}12679    \textcolor{comment}{// create the free list up front}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12680}12680    size = stb\_\_size\_for\_class[c];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12681}12681    tsize = stb\_\_pages\_for\_class[c] << stb\_\_page\_shift;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12682}12682    i = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12683}12683    z = (\textcolor{keywordtype}{char} *) stb\_\_page\_address(p-\/>start);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12684}12684    q = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12685}12685    \textcolor{keywordflow}{while} (i + size <= tsize) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12686}12686       * (\textcolor{keywordtype}{void} **) z = q; q = z;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12687}12687       z += size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12688}12688       i += size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12689}12689    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12690}12690    p-\/>first\_free = q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12691}12691    p-\/>allocations = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12692}12692    stb\_\_spanlist\_add(s,p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12693}12693    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12694}12694 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12695}12695 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12696}12696 \textcolor{keyword}{static} \textcolor{keywordtype}{int} stb\_\_sizeclass(\textcolor{keywordtype}{size\_t} sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12697}12697 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12698}12698    \textcolor{keywordtype}{int} z = stb\_log2\_floor(sz); \textcolor{comment}{// -\/1 below to group e.g. 13,14,15,16 correctly}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12699}12699    \textcolor{keywordflow}{return} stb\_\_class\_base[z] + ((sz-\/1) >> stb\_\_class\_shift[z]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12700}12700 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12701}12701 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12702}12702 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_init\_sizeclass(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12703}12703 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12704}12704    \textcolor{keywordtype}{int} i, size, overhead;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12705}12705    \textcolor{keywordtype}{int} align\_shift = 2;  \textcolor{comment}{// allow 4-\/byte and 12-\/byte blocks as well, vs. TCMalloc}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12706}12706    \textcolor{keywordtype}{int} next\_class = 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12707}12707    \textcolor{keywordtype}{int} last\_log = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12708}12708 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12709}12709    \textcolor{keywordflow}{for} (i = 0; i < align\_shift; i++) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12710}12710       stb\_\_class\_base [i] = next\_class;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12711}12711       stb\_\_class\_shift[i] = align\_shift;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12712}12712    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12713}12713 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12714}12714    \textcolor{keywordflow}{for} (size = 1 << align\_shift; size <= STB\_\_MAX\_SMALL\_SIZE; size += 1 << align\_shift) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12715}12715       i = stb\_log2\_floor(size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12716}12716       \textcolor{keywordflow}{if} (i > last\_log) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12717}12717          \textcolor{keywordflow}{if} (size == 16) ++align\_shift; \textcolor{comment}{// switch from 4-\/byte to 8-\/byte alignment}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12718}12718          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (size >= 128 \&\& align\_shift < 8) ++align\_shift;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12719}12719          stb\_\_class\_base[i]  = next\_class -\/ ((size-\/1) >> align\_shift);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12720}12720          stb\_\_class\_shift[i] = align\_shift;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12721}12721          last\_log = i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12722}12722       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12723}12723       stb\_\_size\_for\_class[next\_class++] = size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12724}12724    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12725}12725 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12726}12726    \textcolor{keywordflow}{for} (i=1; i <= STB\_\_MAX\_SMALL\_SIZE; ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12727}12727       assert(i <= stb\_\_size\_for\_class[stb\_\_sizeclass(i)]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12728}12728 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12729}12729    overhead = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12730}12730    \textcolor{keywordflow}{for} (i = 1; i < next\_class; i++) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12731}12731       \textcolor{keywordtype}{int} s = stb\_\_size\_for\_class[i];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12732}12732       size = stb\_\_page\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12733}12733       \textcolor{keywordflow}{while} (size \% s > size >> 3)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12734}12734          size += stb\_\_page\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12735}12735       stb\_\_pages\_for\_class[i] = (\textcolor{keywordtype}{unsigned} char) (size >> stb\_\_page\_shift);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12736}12736       overhead += size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12737}12737    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12738}12738    assert(overhead < (4 << 20)); \textcolor{comment}{// make sure it's under 4MB of overhead}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12739}12739 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12740}12740 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12741}12741 \textcolor{preprocessor}{\#ifdef STB\_DEBUG}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12742}12742 \textcolor{preprocessor}{\#define stb\_\_smemset(a,b,c)  memset((void *) a, b, c)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12743}12743 \textcolor{preprocessor}{\#elif defined(STB\_FASTMALLOC\_INIT)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12744}12744 \textcolor{preprocessor}{\#define stb\_\_smemset(a,b,c)  memset((void *) a, b, c)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12745}12745 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12746}12746 \textcolor{preprocessor}{\#define stb\_\_smemset(a,b,c)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12747}12747 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12748}12748 \textcolor{keywordtype}{void} *stb\_smalloc(\textcolor{keywordtype}{size\_t} sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12749}12749 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12750}12750    stb\_\_span *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12751}12751    \textcolor{keywordflow}{if} (sz == 0) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12752}12752    \textcolor{keywordflow}{if} (stb\_\_size\_for\_class[1] == 0) stb\_\_init\_sizeclass();}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12753}12753    \textcolor{keywordflow}{if} (sz > STB\_\_MAX\_SMALL\_SIZE) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12754}12754       s = stb\_\_alloc\_span((sz + stb\_\_page\_size -\/ 1) >> stb\_\_page\_shift);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12755}12755       \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12756}12756       s-\/>list = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12757}12757       s-\/>next = s-\/>prev = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12758}12758       s-\/>allocations = -\/32767;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12759}12759       stb\_\_smemset(stb\_\_page\_address(s-\/>start), 0xcd, (sz+3)\&\string~3);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12760}12760       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{void} *) stb\_\_page\_address(s-\/>start);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12761}12761    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12762}12762       \textcolor{keywordtype}{void} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12763}12763       \textcolor{keywordtype}{int} c = stb\_\_sizeclass(sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12764}12764       s = stb\_\_spanlist[256+c];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12765}12765       \textcolor{keywordflow}{if} (!s || !s-\/>first\_free)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12766}12766          s = stb\_\_get\_nonempty\_sizeclass(c);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12767}12767       \textcolor{keywordflow}{if} (s == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12768}12768       p = s-\/>first\_free;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12769}12769       s-\/>first\_free = * (\textcolor{keywordtype}{void} **) p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12770}12770       ++s-\/>allocations;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12771}12771       stb\_\_smemset(p,0xcd, sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12772}12772       \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12773}12773    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12774}12774 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12775}12775 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12776}12776 \textcolor{keywordtype}{int} stb\_ssize(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12777}12777 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12778}12778    stb\_\_span *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12779}12779    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12780}12780    s = stb\_\_span\_for\_page[stb\_\_page\_number((stb\_uint) p) -\/ stb\_\_firstpage];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12781}12781    \textcolor{keywordflow}{if} (s-\/>list >= 256) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12782}12782       \textcolor{keywordflow}{return} stb\_\_size\_for\_class[s-\/>list -\/ 256];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12783}12783    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12784}12784       assert(s-\/>list == 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12785}12785       \textcolor{keywordflow}{return} s-\/>len << stb\_\_page\_shift;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12786}12786    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12787}12787 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12788}12788 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12789}12789 \textcolor{keywordtype}{void} stb\_sfree(\textcolor{keywordtype}{void} *p)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12790}12790 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12791}12791    stb\_\_span *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12792}12792    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12793}12793    s = stb\_\_span\_for\_page[stb\_\_page\_number((stb\_uint) p) -\/ stb\_\_firstpage];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12794}12794    \textcolor{keywordflow}{if} (s-\/>list >= 256) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12795}12795       stb\_\_smemset(p, 0xfe, stb\_\_size\_for\_class[s-\/>list-\/256]);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12796}12796       * (\textcolor{keywordtype}{void} **) p = s-\/>first\_free;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12797}12797       s-\/>first\_free = p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12798}12798       if (-\/-\/s-\/>allocations == 0) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12799}12799          stb\_\_spanlist\_unlink(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12800}12800          stb\_\_free\_span(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12801}12801       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12802}12802    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12803}12803       assert(s-\/>list == 0);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12804}12804       stb\_\_smemset(p, 0xfe, stb\_ssize(p));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12805}12805       stb\_\_free\_span(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12806}12806    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12807}12807 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12808}12808 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12809}12809 \textcolor{keywordtype}{void} *stb\_srealloc(\textcolor{keywordtype}{void} *p, \textcolor{keywordtype}{size\_t} sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12810}12810 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12811}12811    \textcolor{keywordtype}{size\_t} cur\_size;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12812}12812    \textcolor{keywordflow}{if} (p == NULL) \textcolor{keywordflow}{return} stb\_smalloc(sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12813}12813    \textcolor{keywordflow}{if} (sz == 0) \{ stb\_sfree(p); \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12814}12814    cur\_size = stb\_ssize(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12815}12815    \textcolor{keywordflow}{if} (sz > cur\_size || sz <= (cur\_size >> 1)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12816}12816       \textcolor{keywordtype}{void} *q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12817}12817       \textcolor{keywordflow}{if} (sz > cur\_size \&\& sz < (cur\_size << 1)) sz = cur\_size << 1;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12818}12818       q = stb\_smalloc(sz); \textcolor{keywordflow}{if} (q == NULL) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12819}12819       memcpy(q, p, sz < cur\_size ? sz : cur\_size);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12820}12820       stb\_sfree(p);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12821}12821       \textcolor{keywordflow}{return} q;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12822}12822    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12823}12823    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12824}12824 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12825}12825 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12826}12826 \textcolor{keywordtype}{void} *stb\_scalloc(\textcolor{keywordtype}{size\_t} n, \textcolor{keywordtype}{size\_t} sz)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12827}12827 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12828}12828    \textcolor{keywordtype}{void} *p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12829}12829    \textcolor{keywordflow}{if} (n == 0 || sz == 0) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12830}12830    \textcolor{keywordflow}{if} (stb\_log2\_ceil(n) + stb\_log2\_ceil(n) >= 32) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12831}12831    p = stb\_smalloc(n*sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12832}12832    \textcolor{keywordflow}{if} (p) memset(p, 0, n*sz);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12833}12833    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12834}12834 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12835}12835 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12836}12836 \textcolor{keywordtype}{char} *stb\_sstrdup(\textcolor{keywordtype}{char} *s)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12837}12837 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12838}12838    \textcolor{keywordtype}{int} n = strlen(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12839}12839    \textcolor{keywordtype}{char} *p = (\textcolor{keywordtype}{char} *) stb\_smalloc(n+1);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12840}12840    \textcolor{keywordflow}{if} (p) stb\_p\_strcpy\_s(p,n+1,s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12841}12841    \textcolor{keywordflow}{return} p;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12842}12842 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12843}12843 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12844}12844 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12845}12845 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12846}12846 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12848}12848 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12849}12849 \textcolor{comment}{//                         Source code constants}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12850}12850 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12851}12851 \textcolor{comment}{// This is a trivial system to let you specify constants in source code,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12852}12852 \textcolor{comment}{// then while running you can change the constants.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12853}12853 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12854}12854 \textcolor{comment}{// Note that you can't wrap the \#defines, because we need to know their}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12855}12855 \textcolor{comment}{// names. So we provide a pre-\/wrapped version without 'STB\_' for convenience;}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12856}12856 \textcolor{comment}{// to request it, \#define STB\_CONVENIENT\_H, yielding:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12857}12857 \textcolor{comment}{//       KI -\/-\/ integer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12858}12858 \textcolor{comment}{//       KU -\/-\/ unsigned integer}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12859}12859 \textcolor{comment}{//       KF -\/-\/ float}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12860}12860 \textcolor{comment}{//       KD -\/-\/ double}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12861}12861 \textcolor{comment}{//       KS -\/-\/ string constant}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12862}12862 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12863}12863 \textcolor{comment}{// Defaults to functioning in debug build, not in release builds.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12864}12864 \textcolor{comment}{// To force on, define STB\_ALWAYS\_H}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12865}12865 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12866}12866 \textcolor{preprocessor}{\#ifdef STB\_CONVENIENT\_H}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12867}12867 \textcolor{preprocessor}{\#define KI(x) STB\_I(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12868}12868 \textcolor{preprocessor}{\#define KU(x) STB\_UI(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12869}12869 \textcolor{preprocessor}{\#define KF(x) STB\_F(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12870}12870 \textcolor{preprocessor}{\#define KD(x) STB\_D(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12871}12871 \textcolor{preprocessor}{\#define KS(x) STB\_S(x)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12872}12872 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12873}12873 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12874}12874 STB\_EXTERN \textcolor{keywordtype}{void} stb\_source\_path(\textcolor{keywordtype}{char} *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12875}12875 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12876}12876 \textcolor{keywordtype}{char} *stb\_\_source\_path;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12877}12877 \textcolor{keywordtype}{void} stb\_source\_path(\textcolor{keywordtype}{char} *path)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12878}12878 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12879}12879    stb\_\_source\_path = path;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12880}12880 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12881}12881 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12882}12882 \textcolor{keywordtype}{char} *stb\_\_get\_sourcefile\_path(\textcolor{keywordtype}{char} *file)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12883}12883 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12884}12884    \textcolor{keyword}{static} \textcolor{keywordtype}{char} filebuf[512];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12885}12885    \textcolor{keywordflow}{if} (stb\_\_source\_path) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12886}12886       stb\_p\_sprintf(filebuf stb\_p\_size(\textcolor{keyword}{sizeof}(filebuf)), \textcolor{stringliteral}{"{}\%s/\%s"{}}, stb\_\_source\_path, file);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12887}12887       \textcolor{keywordflow}{if} (stb\_fexists(filebuf)) \textcolor{keywordflow}{return} filebuf;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12888}12888    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12889}12889 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12890}12890    \textcolor{keywordflow}{if} (stb\_fexists(file)) \textcolor{keywordflow}{return} file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12891}12891 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12892}12892    stb\_p\_sprintf(filebuf stb\_p\_size(\textcolor{keyword}{sizeof}(filebuf)), \textcolor{stringliteral}{"{}../\%s"{}}, file);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12893}12893    \textcolor{keywordflow}{if} (!stb\_fexists(filebuf)) \textcolor{keywordflow}{return} filebuf;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12894}12894 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12895}12895    \textcolor{keywordflow}{return} file;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12896}12896 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12897}12897 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12898}12898 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12899}12899 \textcolor{preprocessor}{\#define STB\_F(x)   ((float) STB\_H(x))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12900}12900 \textcolor{preprocessor}{\#define STB\_UI(x)  ((unsigned int) STB\_I(x))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12901}12901 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12902}12902 \textcolor{preprocessor}{\#if !defined(STB\_DEBUG) \&\& !defined(STB\_ALWAYS\_H)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12903}12903 \textcolor{preprocessor}{\#define STB\_D(x)   ((double) (x))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12904}12904 \textcolor{preprocessor}{\#define STB\_I(x)   ((int) (x))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12905}12905 \textcolor{preprocessor}{\#define STB\_S(x)   ((char *) (x))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12906}12906 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12907}12907 \textcolor{preprocessor}{\#define STB\_D(x)   stb\_\_double\_constant(\_\_FILE\_\_, \_\_LINE\_\_-\/1, (x))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12908}12908 \textcolor{preprocessor}{\#define STB\_I(x)   stb\_\_int\_constant(\_\_FILE\_\_, \_\_LINE\_\_-\/1, (x))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12909}12909 \textcolor{preprocessor}{\#define STB\_S(x)   stb\_\_string\_constant(\_\_FILE\_\_, \_\_LINE\_\_-\/1, (x))}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12910}12910 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12911}12911 STB\_EXTERN \textcolor{keywordtype}{double} stb\_\_double\_constant(\textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line, \textcolor{keywordtype}{double} x);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12912}12912 STB\_EXTERN \textcolor{keywordtype}{int}    stb\_\_int\_constant(\textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line, \textcolor{keywordtype}{int} x);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12913}12913 STB\_EXTERN \textcolor{keywordtype}{char} * stb\_\_string\_constant(\textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line, \textcolor{keywordtype}{char} *str);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12914}12914 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12915}12915 \textcolor{preprocessor}{\#ifdef STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12916}12916 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12917}12917 \textcolor{keyword}{enum}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12918}12918 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12919}12919    STB\_\_CTYPE\_int,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12920}12920    STB\_\_CTYPE\_uint,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12921}12921    STB\_\_CTYPE\_float,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12922}12922    STB\_\_CTYPE\_double,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12923}12923    STB\_\_CTYPE\_string,}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12924}12924 \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12925}12925 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12926}12926 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12927}12927 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12928}12928    \textcolor{keywordtype}{int} line;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12929}12929    \textcolor{keywordtype}{int} type;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12930}12930    \textcolor{keyword}{union }\{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12931}12931       \textcolor{keywordtype}{int} ival;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12932}12932       \textcolor{keywordtype}{double} dval;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12933}12933       \textcolor{keywordtype}{char} *sval;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12934}12934    \};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12935}12935 \} stb\_\_Entry;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12936}12936 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12937}12937 \textcolor{keyword}{typedef} \textcolor{keyword}{struct}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12938}12938 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12939}12939    stb\_\_Entry *entries;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12940}12940    \textcolor{keywordtype}{char} *filename;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12941}12941    time\_t timestamp;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12942}12942    \textcolor{keywordtype}{char} **file\_data;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12943}12943    \textcolor{keywordtype}{int} file\_len;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12944}12944    \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} *line\_index;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12945}12945 \} stb\_\_FileEntry;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12946}12946 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12947}12947 \textcolor{keyword}{static} \textcolor{keywordtype}{void} stb\_\_constant\_parse(stb\_\_FileEntry *f, \textcolor{keywordtype}{int} i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12948}12948 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12949}12949    \textcolor{keywordtype}{char} *s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12950}12950    \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12951}12951    \textcolor{keywordflow}{if} (!stb\_arr\_valid(f-\/>entries, i)) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12952}12952    n = f-\/>entries[i].line;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12953}12953    \textcolor{keywordflow}{if} (n >= f-\/>file\_len) \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12954}12954    s = f-\/>file\_data[n];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12955}12955    \textcolor{keywordflow}{switch} (f-\/>entries[i].type) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12956}12956       \textcolor{keywordflow}{case} STB\_\_CTYPE\_float:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12957}12957          \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12958}12958             \textcolor{keywordflow}{if} (!strncmp(s, \textcolor{stringliteral}{"{}STB\_D("{}}, 6)) \{ s+=6; \textcolor{keywordflow}{goto} matched\_float; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12959}12959             \textcolor{keywordflow}{if} (!strncmp(s, \textcolor{stringliteral}{"{}STB\_F("{}}, 6)) \{ s+=6; \textcolor{keywordflow}{goto} matched\_float; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12960}12960             \textcolor{keywordflow}{if} (!strncmp(s, \textcolor{stringliteral}{"{}KD("{}}, 3)) \{ s+=3; \textcolor{keywordflow}{goto} matched\_float; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12961}12961             \textcolor{keywordflow}{if} (!strncmp(s, \textcolor{stringliteral}{"{}KF("{}}, 3)) \{ s+=3; \textcolor{keywordflow}{goto} matched\_float; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12962}12962             ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12963}12963          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12964}12964          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12965}12965       matched\_float:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12966}12966          f-\/>entries[i].dval = strtod(s, NULL);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12967}12967          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12968}12968       \textcolor{keywordflow}{case} STB\_\_CTYPE\_int:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12969}12969          \textcolor{keywordflow}{while} (*s) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12970}12970             \textcolor{keywordflow}{if} (!strncmp(s, \textcolor{stringliteral}{"{}STB\_I("{}}, 6)) \{ s+=6; \textcolor{keywordflow}{goto} matched\_int; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12971}12971             \textcolor{keywordflow}{if} (!strncmp(s, \textcolor{stringliteral}{"{}STB\_UI("{}}, 7)) \{ s+=7; \textcolor{keywordflow}{goto} matched\_int; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12972}12972             \textcolor{keywordflow}{if} (!strncmp(s, \textcolor{stringliteral}{"{}KI("{}}, 3)) \{ s+=3; \textcolor{keywordflow}{goto} matched\_int; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12973}12973             \textcolor{keywordflow}{if} (!strncmp(s, \textcolor{stringliteral}{"{}KU("{}}, 3)) \{ s+=3; \textcolor{keywordflow}{goto} matched\_int; \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12974}12974             ++s;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12975}12975          \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12976}12976          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12977}12977       matched\_int: \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12978}12978          \textcolor{keywordtype}{int} neg=0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12979}12979          s = stb\_skipwhite(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12980}12980          \textcolor{keywordflow}{while} (*s == \textcolor{charliteral}{'-\/'}) \{ neg = !neg; s = stb\_skipwhite(s+1); \} \textcolor{comment}{// handle '-\/ -\/ 5', pointlessly}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12981}12981          \textcolor{keywordflow}{if} (s[0] == \textcolor{charliteral}{'0'} \&\& tolower(s[1]) == \textcolor{charliteral}{'x'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12982}12982             f-\/>entries[i].ival = strtol(s, NULL, 16);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12983}12983          \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (s[0] == \textcolor{charliteral}{'0'})}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12984}12984             f-\/>entries[i].ival = strtol(s, NULL, 8);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12985}12985          \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12986}12986             f-\/>entries[i].ival = strtol(s, NULL, 10);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12987}12987          \textcolor{keywordflow}{if} (neg) f-\/>entries[i].ival = -\/f-\/>entries[i].ival;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12988}12988          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12989}12989       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12990}12990       \textcolor{keywordflow}{case} STB\_\_CTYPE\_string:}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12991}12991          \textcolor{comment}{// @TODO}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12992}12992          \textcolor{keywordflow}{break};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12993}12993    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12994}12994 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12995}12995 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12996}12996 \textcolor{keyword}{static} stb\_sdict *stb\_\_constant\_file\_hash;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12997}12997 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12998}12998 stb\_\_Entry *stb\_\_constant\_get\_entry(\textcolor{keywordtype}{char} *filename, \textcolor{keywordtype}{int} line, \textcolor{keywordtype}{int} type)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l12999}12999 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13000}13000    \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13001}13001    stb\_\_FileEntry *f;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13002}13002    \textcolor{keywordflow}{if} (stb\_\_constant\_file\_hash == NULL)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13003}13003       stb\_\_constant\_file\_hash = stb\_sdict\_new(STB\_TRUE);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13004}13004    f = (stb\_\_FileEntry*) stb\_sdict\_get(stb\_\_constant\_file\_hash, filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13005}13005    \textcolor{keywordflow}{if} (f == NULL) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13006}13006       \textcolor{keywordtype}{char} *s = stb\_\_get\_sourcefile\_path(filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13007}13007       \textcolor{keywordflow}{if} (s == NULL || !stb\_fexists(s)) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13008}13008       f = (stb\_\_FileEntry *) malloc(\textcolor{keyword}{sizeof}(*f));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13009}13009       f-\/>timestamp = stb\_ftimestamp(s);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13010}13010       f-\/>file\_data = stb\_stringfile(s, \&f-\/>file\_len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13011}13011       f-\/>filename = stb\_p\_strdup(s); \textcolor{comment}{// cache the full path}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13012}13012       f-\/>entries = NULL;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13013}13013       f-\/>line\_index = 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13014}13014       stb\_arr\_setlen(f-\/>line\_index, f-\/>file\_len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13015}13015       memset(f-\/>line\_index, 0xff, stb\_arr\_storage(f-\/>line\_index));}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13016}13016    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13017}13017       time\_t t = stb\_ftimestamp(f-\/>filename);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13018}13018       \textcolor{keywordflow}{if} (f-\/>timestamp != t) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13019}13019          f-\/>timestamp = t;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13020}13020          free(f-\/>file\_data);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13021}13021          f-\/>file\_data = stb\_stringfile(f-\/>filename, \&f-\/>file\_len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13022}13022          stb\_arr\_setlen(f-\/>line\_index, f-\/>file\_len);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13023}13023          \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(f-\/>entries); ++i)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13024}13024             stb\_\_constant\_parse(f, i);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13025}13025       \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13026}13026    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13027}13027 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13028}13028    \textcolor{keywordflow}{if} (line >= f-\/>file\_len) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13029}13029 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13030}13030    \textcolor{keywordflow}{if} (f-\/>line\_index[line] >= stb\_arr\_len(f-\/>entries)) \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13031}13031       \textcolor{comment}{// need a new entry}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13032}13032       \textcolor{keywordtype}{int} n = stb\_arr\_len(f-\/>entries);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13033}13033       stb\_\_Entry \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}};}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13034}13034       \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}.line = line;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13035}13035       \textcolor{keywordflow}{if} (line < f-\/>file\_len)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13036}13036          f-\/>line\_index[line] = n;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13037}13037       \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}.type = type;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13038}13038       stb\_arr\_push(f-\/>entries, \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}});}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13039}13039       stb\_\_constant\_parse(f, n);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13040}13040    \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13041}13041    \textcolor{keywordflow}{return} f-\/>entries + f-\/>line\_index[line];}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13042}13042 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13043}13043 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13044}13044 \textcolor{keywordtype}{double} stb\_\_double\_constant(\textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line, \textcolor{keywordtype}{double} x)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13045}13045 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13046}13046    stb\_\_Entry *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} = stb\_\_constant\_get\_entry(file, line, STB\_\_CTYPE\_float);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13047}13047    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}) \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13048}13048    \textcolor{keywordflow}{return} \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>dval;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13049}13049 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13050}13050 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13051}13051 \textcolor{keywordtype}{int}    stb\_\_int\_constant(\textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line, \textcolor{keywordtype}{int} x)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13052}13052 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13053}13053    stb\_\_Entry *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} = stb\_\_constant\_get\_entry(file, line, STB\_\_CTYPE\_int);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13054}13054    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}) \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13055}13055    \textcolor{keywordflow}{return} \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>ival;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13056}13056 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13057}13057 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13058}13058 \textcolor{keywordtype}{char} * stb\_\_string\_constant(\textcolor{keywordtype}{char} *file, \textcolor{keywordtype}{int} line, \textcolor{keywordtype}{char} *x)}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13059}13059 \{}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13060}13060    stb\_\_Entry *\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} = stb\_\_constant\_get\_entry(file, line, STB\_\_CTYPE\_string);}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13061}13061    \textcolor{keywordflow}{if} (!\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}) \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13062}13062    \textcolor{keywordflow}{return} \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}}-\/>sval;}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13063}13063 \}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13064}13064 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13065}13065 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13066}13066 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// !STB\_DEBUG \&\& !STB\_ALWAYS\_H}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13067}13067 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13068}13068 \textcolor{preprocessor}{\#undef STB\_EXTERN}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13069}13069 \textcolor{preprocessor}{\#endif }\textcolor{comment}{// STB\_INCLUDE\_STB\_H}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13070}13070 }
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13071}13071 \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13072}13072 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13073}13073 \textcolor{comment}{This software is available under 2 licenses -\/-\/ choose whichever you prefer.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13074}13074 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13075}13075 \textcolor{comment}{ALTERNATIVE A -\/ MIT License}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13076}13076 \textcolor{comment}{Copyright (c) 2017 Sean Barrett}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13077}13077 \textcolor{comment}{Permission is hereby granted, free of charge, to any person obtaining a copy of}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13078}13078 \textcolor{comment}{this software and associated documentation files (the "{}Software"{}), to deal in}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13079}13079 \textcolor{comment}{the Software without restriction, including without limitation the rights to}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13080}13080 \textcolor{comment}{use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13081}13081 \textcolor{comment}{of the Software, and to permit persons to whom the Software is furnished to do}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13082}13082 \textcolor{comment}{so, subject to the following conditions:}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13083}13083 \textcolor{comment}{The above copyright notice and this permission notice shall be included in all}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13084}13084 \textcolor{comment}{copies or substantial portions of the Software.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13085}13085 \textcolor{comment}{THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13086}13086 \textcolor{comment}{IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13087}13087 \textcolor{comment}{FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13088}13088 \textcolor{comment}{AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13089}13089 \textcolor{comment}{LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13090}13090 \textcolor{comment}{OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13091}13091 \textcolor{comment}{SOFTWARE.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13092}13092 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13093}13093 \textcolor{comment}{ALTERNATIVE B -\/ Public Domain (www.unlicense.org)}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13094}13094 \textcolor{comment}{This is free and unencumbered software released into the public domain.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13095}13095 \textcolor{comment}{Anyone is free to copy, modify, publish, use, compile, sell, or distribute this}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13096}13096 \textcolor{comment}{software, either in source code form or as a compiled binary, for any purpose,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13097}13097 \textcolor{comment}{commercial or non-\/commercial, and by any means.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13098}13098 \textcolor{comment}{In jurisdictions that recognize copyright laws, the author or authors of this}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13099}13099 \textcolor{comment}{software dedicate any and all copyright interest in the software to the public}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13100}13100 \textcolor{comment}{domain. We make this dedication for the benefit of the public at large and to}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13101}13101 \textcolor{comment}{the detriment of our heirs and successors. We intend this dedication to be an}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13102}13102 \textcolor{comment}{overt act of relinquishment in perpetuity of all present and future rights to}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13103}13103 \textcolor{comment}{this software under copyright law.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13104}13104 \textcolor{comment}{THE SOFTWARE IS PROVIDED "{}AS IS"{}, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13105}13105 \textcolor{comment}{IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13106}13106 \textcolor{comment}{FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13107}13107 \textcolor{comment}{AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13108}13108 \textcolor{comment}{ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13109}13109 \textcolor{comment}{WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13110}13110 \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{\Hypertarget{stb_8h_source_l13111}13111 \textcolor{comment}{*/}}

\end{DoxyCode}
