\hypertarget{image__test_8c_source}{}\doxysection{image\+\_\+test.\+c}
\label{image__test_8c_source}\index{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/stb/tests/image\_test.c@{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/stb/tests/image\_test.c}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00001}00001 \textcolor{preprocessor}{\#define STBI\_WINDOWS\_UTF8}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00003}00003 \textcolor{preprocessor}{\#define STB\_IMAGE\_WRITE\_IMPLEMENTATION}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00004}00004 \textcolor{preprocessor}{\#include "{}stb\_image\_write.h"{}}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00006}00006 \textcolor{preprocessor}{\#define STB\_IMAGE\_IMPLEMENTATION}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00007}00007 \textcolor{preprocessor}{\#include "{}stb\_image.h"{}}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00009}00009 \textcolor{preprocessor}{\#define STB\_DEFINE}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00010}00010 \textcolor{preprocessor}{\#include "{}stb.h"{}}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00012}00012 \textcolor{comment}{//\#define PNGSUITE\_PRIMARY}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00014}00014 \textcolor{preprocessor}{\#if 0}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00015}00015 \textcolor{keywordtype}{void} test\_ycbcr(\textcolor{keywordtype}{void})}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00016}00016 \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00017}00017    STBI\_SIMD\_ALIGN(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}, y[256]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00018}00018    STBI\_SIMD\_ALIGN(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}, cb[256]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00019}00019    STBI\_SIMD\_ALIGN(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}, cr[256]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00020}00020    STBI\_SIMD\_ALIGN(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}, out1[256][4]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00021}00021    STBI\_SIMD\_ALIGN(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}, out2[256][4]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00023}00023    \textcolor{keywordtype}{int} i,j,k;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00024}00024    \textcolor{keywordtype}{int} count = 0, bigcount=0, total=0;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00025}00025 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00026}00026    \textcolor{keywordflow}{for} (i=0; i < 256; ++i) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00027}00027       \textcolor{keywordflow}{for} (j=0; j < 256; ++j) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00028}00028          \textcolor{keywordflow}{for} (k=0; k < 256; ++k) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00029}00029             y [k] = k;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00030}00030             cb[k] = j;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00031}00031             cr[k] = i;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00032}00032          \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00033}00033          stbi\_\_YCbCr\_to\_RGB\_row(out1[0], y, cb, cr, 256, 4);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00034}00034          stbi\_\_YCbCr\_to\_RGB\_sse2(out2[0], y, cb, cr, 256, 4);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00035}00035          \textcolor{keywordflow}{for} (k=0; k < 256; ++k) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00036}00036             \textcolor{comment}{// inaccurate proxy for values outside of RGB cube}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00037}00037             \textcolor{keywordflow}{if} (out1[k][0] == 0 || out1[k][1] == 0 || out1[k][2] == 0 || out1[k][0] == 255 || out1[k][1] == 255 || out1[k][2] == 255)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00038}00038                \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00039}00039             ++total;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00040}00040             \textcolor{keywordflow}{if} (out1[k][0] != out2[k][0] || out1[k][1] != out2[k][1] || out1[k][2] != out2[k][2]) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00041}00041                \textcolor{keywordtype}{int} dist1 = \mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}(out1[k][0] -\/ out2[k][0]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00042}00042                \textcolor{keywordtype}{int} dist2 = \mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}(out1[k][1] -\/ out2[k][1]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00043}00043                \textcolor{keywordtype}{int} dist3 = \mbox{\hyperlink{group__core__func__common_ga693d77696ff36572a0da79efec965acd}{abs}}(out1[k][2] -\/ out2[k][2]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00044}00044                ++count;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00045}00045                \textcolor{keywordflow}{if} (out1[k][1] > out2[k][1])}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00046}00046                   ++bigcount;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00047}00047             \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00048}00048          \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00049}00049       \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00050}00050       printf(\textcolor{stringliteral}{"{}So far: \%d (\%d big) of \%d\(\backslash\)n"{}}, count, bigcount, total);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00051}00051    \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00052}00052    printf(\textcolor{stringliteral}{"{}Final: \%d (\%d big) of \%d\(\backslash\)n"{}}, count, bigcount, total);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00053}00053 \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00054}00054 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00056}00056 \textcolor{keywordtype}{float} hdr\_data[200][200][3];}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00058}00058 \textcolor{keywordtype}{void} dummy\_write(\textcolor{keywordtype}{void} *context, \textcolor{keywordtype}{void} *data, \textcolor{keywordtype}{int} len)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00059}00059 \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00060}00060    \textcolor{keyword}{static} \textcolor{keywordtype}{char} dummy[1024];}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00061}00061    \textcolor{keywordflow}{if} (len > 1024) len = 1024;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00062}00062    memcpy(dummy, data, len);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00063}00063 \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00065}00065 \textcolor{keyword}{extern} \textcolor{keywordtype}{void} image\_write\_test(\textcolor{keywordtype}{void});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00067}00067 \textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} **argv)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00068}00068 \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00069}00069    \textcolor{keywordtype}{int} w,h;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00070}00070    \textcolor{comment}{//test\_ycbcr();}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00072}00072    image\_write\_test();}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00074}00074 \textcolor{preprocessor}{   \#if 0}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00075}00075    \textcolor{comment}{// test hdr asserts}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00076}00076    \textcolor{keywordflow}{for} (h=0; h < 100; h += 2)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00077}00077       \textcolor{keywordflow}{for} (w=0; w < 200; ++w)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00078}00078          hdr\_data[h][w][0] = (\textcolor{keywordtype}{float}) rand(),}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00079}00079          hdr\_data[h][w][1] = (float) rand(),}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00080}00080          hdr\_data[h][w][2] = (float) rand();}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00082}00082    stbi\_write\_hdr(\textcolor{stringliteral}{"{}output/test.hdr"{}}, 200,200,3,hdr\_data[0][0]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00083}00083 \textcolor{preprocessor}{   \#endif}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00084}00084 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00085}00085    \textcolor{keywordflow}{if} (argc > 1) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00086}00086       \textcolor{keywordtype}{int} i, n;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00088}00088       \textcolor{keywordflow}{for} (i=1; i < argc; ++i) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00089}00089          \textcolor{keywordtype}{int} res;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00090}00090          \textcolor{keywordtype}{int} w2,h2,n2;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00091}00091          \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00092}00092          printf(\textcolor{stringliteral}{"{}\%s\(\backslash\)n"{}}, argv[i]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00093}00093          res = stbi\_info(argv[i], \&w2, \&h2, \&n2);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00094}00094          data = stbi\_load(argv[i], \&w, \&h, \&n, 0); \textcolor{keywordflow}{if} (data) free(data); \textcolor{keywordflow}{else} printf(\textcolor{stringliteral}{"{}Failed \&n\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00095}00095          data = stbi\_load(argv[i], \&w, \&h, \&n, 4); \textcolor{keywordflow}{if} (data) free(data); \textcolor{keywordflow}{else} printf(\textcolor{stringliteral}{"{}Failed \&n\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00096}00096          data = stbi\_load(argv[i], \&w, \&h,  0, 1); \textcolor{keywordflow}{if} (data) free(data); \textcolor{keywordflow}{else} printf(\textcolor{stringliteral}{"{}Failed 1\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00097}00097          data = stbi\_load(argv[i], \&w, \&h,  0, 2); \textcolor{keywordflow}{if} (data) free(data); \textcolor{keywordflow}{else} printf(\textcolor{stringliteral}{"{}Failed 2\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00098}00098          data = stbi\_load(argv[i], \&w, \&h,  0, 3); \textcolor{keywordflow}{if} (data) free(data); \textcolor{keywordflow}{else} printf(\textcolor{stringliteral}{"{}Failed 3\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00099}00099          data = stbi\_load(argv[i], \&w, \&h, \&n, 4);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00100}00100          assert(data);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00101}00101          assert(w == w2 \&\& h == h2 \&\& n == n2);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00102}00102          assert(res);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00103}00103          \textcolor{keywordflow}{if} (data) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00104}00104             \textcolor{keywordtype}{char} fname[512];}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00105}00105             stb\_splitpath(fname, argv[i], STB\_FILE);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00106}00106             stbi\_write\_png(stb\_sprintf(\textcolor{stringliteral}{"{}output/\%s.png"{}}, fname), w, h, 4, data, w*4);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00107}00107             stbi\_write\_bmp(stb\_sprintf(\textcolor{stringliteral}{"{}output/\%s.bmp"{}}, fname), w, h, 4, data);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00108}00108             stbi\_write\_tga(stb\_sprintf(\textcolor{stringliteral}{"{}output/\%s.tga"{}}, fname), w, h, 4, data);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00109}00109             stbi\_write\_png\_to\_func(dummy\_write,0, w, h, 4, data, w*4);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00110}00110             stbi\_write\_bmp\_to\_func(dummy\_write,0, w, h, 4, data);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00111}00111             stbi\_write\_tga\_to\_func(dummy\_write,0, w, h, 4, data);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00112}00112             free(data);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00113}00113          \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00114}00114             printf(\textcolor{stringliteral}{"{}FAILED 4\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00115}00115       \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00116}00116    \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00117}00117       \textcolor{keywordtype}{int} i;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00118}00118 \textcolor{preprocessor}{      \#ifdef PNGSUITE\_PRIMARY}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00119}00119       \textcolor{keywordtype}{char} **files = stb\_readdir\_files(\textcolor{stringliteral}{"{}pngsuite/primary"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00120}00120 \textcolor{preprocessor}{      \#else}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00121}00121       \textcolor{keywordtype}{char} **files = stb\_readdir\_files(\textcolor{stringliteral}{"{}images"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00122}00122 \textcolor{preprocessor}{      \#endif}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00123}00123       \textcolor{keywordflow}{for} (i=0; i < stb\_arr\_len(files); ++i) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00124}00124          \textcolor{keywordtype}{int} n;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00125}00125          \textcolor{keywordtype}{char} **failed = NULL;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00126}00126          \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00127}00127          printf(\textcolor{stringliteral}{"{}."{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00128}00128          \textcolor{comment}{//printf("{}\%s\(\backslash\)n"{}, files[i]);}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00129}00129          data = stbi\_load(files[i], \&w, \&h, \&n, 0); \textcolor{keywordflow}{if} (data) free(data); \textcolor{keywordflow}{else} stb\_arr\_push(failed, \textcolor{stringliteral}{"{}\&n"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00130}00130          data = stbi\_load(files[i], \&w, \&h,  0, 1); \textcolor{keywordflow}{if} (data) free(data); \textcolor{keywordflow}{else} stb\_arr\_push(failed, \textcolor{stringliteral}{"{}1"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00131}00131          data = stbi\_load(files[i], \&w, \&h,  0, 2); \textcolor{keywordflow}{if} (data) free(data); \textcolor{keywordflow}{else} stb\_arr\_push(failed, \textcolor{stringliteral}{"{}2"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00132}00132          data = stbi\_load(files[i], \&w, \&h,  0, 3); \textcolor{keywordflow}{if} (data) free(data); \textcolor{keywordflow}{else} stb\_arr\_push(failed, \textcolor{stringliteral}{"{}3"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00133}00133          data = stbi\_load(files[i], \&w, \&h,  0, 4); \textcolor{keywordflow}{if} (data)           ; \textcolor{keywordflow}{else} stb\_arr\_push(failed, \textcolor{stringliteral}{"{}4"{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00134}00134          \textcolor{keywordflow}{if} (data) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00135}00135             \textcolor{keywordtype}{char} fname[512];}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00136}00136 }
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00137}00137 \textcolor{preprocessor}{            \#ifdef PNGSUITE\_PRIMARY}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00138}00138             \textcolor{keywordtype}{int} w2,h2;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00139}00139             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *data2;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00140}00140             stb\_splitpath(fname, files[i], STB\_FILE\_EXT);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00141}00141             data2 = stbi\_load(stb\_sprintf(\textcolor{stringliteral}{"{}pngsuite/primary\_check/\%s"{}}, fname), \&w2, \&h2, 0, 4);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00142}00142             \textcolor{keywordflow}{if} (!data2)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00143}00143                printf(\textcolor{stringliteral}{"{}FAILED: couldn't load 'pngsuite/primary\_check/\%s\(\backslash\)n"{}}, fname);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00144}00144             \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00145}00145                \textcolor{keywordflow}{if} (w != w2 || h != w2 || 0 != memcmp(data, data2, w*h*4)) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00146}00146                   \textcolor{keywordtype}{int} x,y,c;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00147}00147                   \textcolor{keywordflow}{if} (w == w2 \&\& h == h2)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00148}00148                      \textcolor{keywordflow}{for} (y=0; y < h; ++y)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00149}00149                         \textcolor{keywordflow}{for} (x=0; x < w; ++x)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00150}00150                            \textcolor{keywordflow}{for} (c=0; c < 4; ++c)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00151}00151                               assert(data[y*w*4+x*4+c] == data2[y*w*4+x*4+c]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00152}00152                   printf(\textcolor{stringliteral}{"{}FAILED: \%s loaded but didn't match PRIMARY\_check 32-\/bit version\(\backslash\)n"{}}, files[i]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00153}00153                \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00154}00154                free(data2);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00155}00155             \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00156}00156 \textcolor{preprocessor}{            \#else}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00157}00157             stb\_splitpath(fname, files[i], STB\_FILE);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00158}00158             stbi\_write\_png(stb\_sprintf(\textcolor{stringliteral}{"{}output/\%s.png"{}}, fname), w, h, 4, data, w*4);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00159}00159 \textcolor{preprocessor}{            \#endif}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00160}00160             free(data);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00161}00161          \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00162}00162          \textcolor{keywordflow}{if} (failed) \{}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00163}00163             \textcolor{keywordtype}{int} j;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00164}00164             printf(\textcolor{stringliteral}{"{}FAILED: "{}});}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00165}00165             \textcolor{keywordflow}{for} (j=0; j < stb\_arr\_len(failed); ++j)}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00166}00166                printf(\textcolor{stringliteral}{"{}\%s "{}}, failed[j]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00167}00167             printf(\textcolor{stringliteral}{"{} -\/-\/ \%s\(\backslash\)n"{}}, files[i]);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00168}00168          \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00169}00169       \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00170}00170       printf(\textcolor{stringliteral}{"{}Tested \%d files.\(\backslash\)n"{}}, i);}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00171}00171    \}}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00172}00172    \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{image__test_8c_source_l00173}00173 \}}

\end{DoxyCode}
