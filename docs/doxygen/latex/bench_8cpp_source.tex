\hypertarget{bench_8cpp_source}{}\doxysection{bench.\+cpp}
\label{bench_8cpp_source}\index{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/spdlog/bench/bench.cpp@{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/spdlog/bench/bench.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00001}00001 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00002}00002 \textcolor{comment}{// Copyright(c) 2015 Gabi Melman.}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00003}00003 \textcolor{comment}{// Distributed under the MIT License (http://opensource.org/licenses/MIT)}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00004}00004 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00006}00006 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00007}00007 \textcolor{comment}{// bench.cpp : spdlog benchmarks}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00008}00008 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00009}00009 \textcolor{preprocessor}{\#include "{}spdlog/spdlog.h"{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00010}00010 \textcolor{preprocessor}{\#include "{}spdlog/sinks/basic\_file\_sink.h"{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00011}00011 \textcolor{preprocessor}{\#include "{}spdlog/sinks/daily\_file\_sink.h"{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00012}00012 \textcolor{preprocessor}{\#include "{}spdlog/sinks/null\_sink.h"{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00013}00013 \textcolor{preprocessor}{\#include "{}spdlog/sinks/rotating\_file\_sink.h"{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00015}00015 \textcolor{preprocessor}{\#if defined(SPDLOG\_USE\_STD\_FORMAT)}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00016}00016 \textcolor{preprocessor}{\#    include <format>}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00017}00017 \textcolor{preprocessor}{\#elif defined(SPDLOG\_FMT\_EXTERNAL)}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00018}00018 \textcolor{preprocessor}{\#    include <fmt/locale.h>}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00019}00019 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00020}00020 \textcolor{preprocessor}{\#    include "{}spdlog/fmt/bundled/format.h"{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00021}00021 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00023}00023 \textcolor{preprocessor}{\#include "{}utils.h"{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00024}00024 \textcolor{preprocessor}{\#include <atomic>}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00025}00025 \textcolor{preprocessor}{\#include <cstdlib>} \textcolor{comment}{// EXIT\_FAILURE}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00026}00026 \textcolor{preprocessor}{\#include <memory>}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00027}00027 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00028}00028 \textcolor{preprocessor}{\#include <thread>}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00030}00030 \textcolor{keywordtype}{void} bench(\textcolor{keywordtype}{int} howmany, std::shared\_ptr<spdlog::logger> \mbox{\hyperlink{group__core__func__exponential_gad26901b9f2fdd30612867a8dcfa73fbc}{log}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00031}00031 \textcolor{keywordtype}{void} bench\_mt(\textcolor{keywordtype}{int} howmany, std::shared\_ptr<spdlog::logger> \mbox{\hyperlink{group__core__func__exponential_gad26901b9f2fdd30612867a8dcfa73fbc}{log}}, \textcolor{keywordtype}{size\_t} thread\_count);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00033}00033 \textcolor{comment}{// void bench\_default\_api(int howmany, std::shared\_ptr<spdlog::logger> log);}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00034}00034 \textcolor{comment}{// void bench\_c\_string(int howmany, std::shared\_ptr<spdlog::logger> log);}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00036}00036 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} file\_size = 30 * 1024 * 1024;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00037}00037 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{size\_t} rotating\_files = 5;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00038}00038 \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} max\_threads = 1000;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00039}00039 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00040}00040 \textcolor{keywordtype}{void} bench\_threaded\_logging(\textcolor{keywordtype}{size\_t} threads, \textcolor{keywordtype}{int} iters)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00041}00041 \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00042}00042     spdlog::info(\textcolor{stringliteral}{"{}**************************************************************"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00043}00043     spdlog::info(spdlog::fmt\_lib::format(std::locale(\textcolor{stringliteral}{"{}en\_US.UTF-\/8"{}}), \textcolor{stringliteral}{"{}Multi threaded: \{:L\} threads, \{:L\} messages"{}}, threads, iters));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00044}00044     spdlog::info(\textcolor{stringliteral}{"{}**************************************************************"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00046}00046     \textcolor{keyword}{auto} basic\_mt = spdlog::basic\_logger\_mt(\textcolor{stringliteral}{"{}basic\_mt"{}}, \textcolor{stringliteral}{"{}logs/basic\_mt.log"{}}, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00047}00047     bench\_mt(iters, std::move(basic\_mt), threads);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00048}00048     \textcolor{keyword}{auto} basic\_mt\_tracing = spdlog::basic\_logger\_mt(\textcolor{stringliteral}{"{}basic\_mt/backtrace-\/on"{}}, \textcolor{stringliteral}{"{}logs/basic\_mt.log"{}}, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00049}00049     basic\_mt\_tracing-\/>enable\_backtrace(32);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00050}00050     bench\_mt(iters, std::move(basic\_mt\_tracing), threads);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00051}00051 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00052}00052     spdlog::info(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00053}00053     \textcolor{keyword}{auto} rotating\_mt = spdlog::rotating\_logger\_mt(\textcolor{stringliteral}{"{}rotating\_mt"{}}, \textcolor{stringliteral}{"{}logs/rotating\_mt.log"{}}, file\_size, rotating\_files);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00054}00054     bench\_mt(iters, std::move(rotating\_mt), threads);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00055}00055     \textcolor{keyword}{auto} rotating\_mt\_tracing = spdlog::rotating\_logger\_mt(\textcolor{stringliteral}{"{}rotating\_mt/backtrace-\/on"{}}, \textcolor{stringliteral}{"{}logs/rotating\_mt.log"{}}, file\_size, rotating\_files);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00056}00056     rotating\_mt\_tracing-\/>enable\_backtrace(32);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00057}00057     bench\_mt(iters, std::move(rotating\_mt\_tracing), threads);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00059}00059     spdlog::info(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00060}00060     \textcolor{keyword}{auto} daily\_mt = spdlog::daily\_logger\_mt(\textcolor{stringliteral}{"{}daily\_mt"{}}, \textcolor{stringliteral}{"{}logs/daily\_mt.log"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00061}00061     bench\_mt(iters, std::move(daily\_mt), threads);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00062}00062     \textcolor{keyword}{auto} daily\_mt\_tracing = spdlog::daily\_logger\_mt(\textcolor{stringliteral}{"{}daily\_mt/backtrace-\/on"{}}, \textcolor{stringliteral}{"{}logs/daily\_mt.log"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00063}00063     daily\_mt\_tracing-\/>enable\_backtrace(32);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00064}00064     bench\_mt(iters, std::move(daily\_mt\_tracing), threads);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00066}00066     spdlog::info(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00067}00067     \textcolor{keyword}{auto} empty\_logger = std::make\_shared<spdlog::logger>(\textcolor{stringliteral}{"{}level-\/off"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00068}00068     empty\_logger-\/>set\_level(spdlog::level::off);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00069}00069     bench(iters, empty\_logger);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00070}00070     \textcolor{keyword}{auto} empty\_logger\_tracing = std::make\_shared<spdlog::logger>(\textcolor{stringliteral}{"{}level-\/off/backtrace-\/on"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00071}00071     empty\_logger\_tracing-\/>set\_level(spdlog::level::off);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00072}00072     empty\_logger\_tracing-\/>enable\_backtrace(32);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00073}00073     bench(iters, empty\_logger\_tracing);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00074}00074 \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00076}00076 \textcolor{keywordtype}{void} bench\_single\_threaded(\textcolor{keywordtype}{int} iters)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00077}00077 \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00078}00078     spdlog::info(\textcolor{stringliteral}{"{}**************************************************************"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00079}00079     spdlog::info(spdlog::fmt\_lib::format(std::locale(\textcolor{stringliteral}{"{}en\_US.UTF-\/8"{}}), \textcolor{stringliteral}{"{}Single threaded: \{\} messages"{}}, iters));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00080}00080     spdlog::info(\textcolor{stringliteral}{"{}**************************************************************"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00081}00081 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00082}00082     \textcolor{keyword}{auto} basic\_st = spdlog::basic\_logger\_st(\textcolor{stringliteral}{"{}basic\_st"{}}, \textcolor{stringliteral}{"{}logs/basic\_st.log"{}}, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00083}00083     bench(iters, std::move(basic\_st));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00084}00084 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00085}00085     \textcolor{keyword}{auto} basic\_st\_tracing = spdlog::basic\_logger\_st(\textcolor{stringliteral}{"{}basic\_st/backtrace-\/on"{}}, \textcolor{stringliteral}{"{}logs/basic\_st.log"{}}, \textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00086}00086     bench(iters, std::move(basic\_st\_tracing));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00088}00088     spdlog::info(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00089}00089     \textcolor{keyword}{auto} rotating\_st = spdlog::rotating\_logger\_st(\textcolor{stringliteral}{"{}rotating\_st"{}}, \textcolor{stringliteral}{"{}logs/rotating\_st.log"{}}, file\_size, rotating\_files);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00090}00090     bench(iters, std::move(rotating\_st));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00091}00091     \textcolor{keyword}{auto} rotating\_st\_tracing = spdlog::rotating\_logger\_st(\textcolor{stringliteral}{"{}rotating\_st/backtrace-\/on"{}}, \textcolor{stringliteral}{"{}logs/rotating\_st.log"{}}, file\_size, rotating\_files);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00092}00092     rotating\_st\_tracing-\/>enable\_backtrace(32);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00093}00093     bench(iters, std::move(rotating\_st\_tracing));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00095}00095     spdlog::info(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00096}00096     \textcolor{keyword}{auto} daily\_st = spdlog::daily\_logger\_st(\textcolor{stringliteral}{"{}daily\_st"{}}, \textcolor{stringliteral}{"{}logs/daily\_st.log"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00097}00097     bench(iters, std::move(daily\_st));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00098}00098     \textcolor{keyword}{auto} daily\_st\_tracing = spdlog::daily\_logger\_st(\textcolor{stringliteral}{"{}daily\_st/backtrace-\/on"{}}, \textcolor{stringliteral}{"{}logs/daily\_st.log"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00099}00099     daily\_st\_tracing-\/>enable\_backtrace(32);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00100}00100     bench(iters, std::move(daily\_st\_tracing));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00101}00101 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00102}00102     spdlog::info(\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00103}00103     \textcolor{keyword}{auto} empty\_logger = std::make\_shared<spdlog::logger>(\textcolor{stringliteral}{"{}level-\/off"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00104}00104     empty\_logger-\/>set\_level(spdlog::level::off);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00105}00105     bench(iters, empty\_logger);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00106}00106 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00107}00107     \textcolor{keyword}{auto} empty\_logger\_tracing = std::make\_shared<spdlog::logger>(\textcolor{stringliteral}{"{}level-\/off/backtrace-\/on"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00108}00108     empty\_logger\_tracing-\/>set\_level(spdlog::level::off);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00109}00109     empty\_logger\_tracing-\/>enable\_backtrace(32);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00110}00110     bench(iters, empty\_logger\_tracing);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00111}00111 \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00112}00112 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00113}00113 \textcolor{keywordtype}{int} main(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00114}00114 \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00115}00115     spdlog::set\_automatic\_registration(\textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00116}00116     spdlog::default\_logger()-\/>set\_pattern(\textcolor{stringliteral}{"{}[\%\string^\%l\%\$] \%v"{}});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00117}00117     \textcolor{keywordtype}{int} iters = 250000;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00118}00118     \textcolor{keywordtype}{size\_t} threads = 4;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00119}00119     \textcolor{keywordflow}{try}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00120}00120     \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00121}00121 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00122}00122         \textcolor{keywordflow}{if} (argc > 1)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00123}00123         \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00124}00124             iters = std::stoi(argv[1]);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00125}00125         \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00126}00126         \textcolor{keywordflow}{if} (argc > 2)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00127}00127         \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00128}00128             threads = std::stoul(argv[2]);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00129}00129         \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00130}00130 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00131}00131         \textcolor{keywordflow}{if} (threads > max\_threads)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00132}00132         \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00133}00133             \textcolor{keywordflow}{throw} std::runtime\_error(spdlog::fmt\_lib::format(\textcolor{stringliteral}{"{}Number of threads exceeds maximum(\{\})"{}}, max\_threads));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00134}00134         \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00135}00135 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00136}00136         bench\_single\_threaded(iters);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00137}00137         bench\_threaded\_logging(1, iters);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00138}00138         bench\_threaded\_logging(threads, iters);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00139}00139     \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00140}00140     \textcolor{keywordflow}{catch} (std::exception \&ex)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00141}00141     \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00142}00142         spdlog::error(ex.what());}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00143}00143         \textcolor{keywordflow}{return} EXIT\_FAILURE;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00144}00144     \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00145}00145     \textcolor{keywordflow}{return} EXIT\_SUCCESS;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00146}00146 \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00147}00147 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00148}00148 \textcolor{keywordtype}{void} bench(\textcolor{keywordtype}{int} howmany, std::shared\_ptr<spdlog::logger> \mbox{\hyperlink{group__core__func__exponential_gad26901b9f2fdd30612867a8dcfa73fbc}{log}})}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00149}00149 \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00150}00150     \textcolor{keyword}{using} std::chrono::duration;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00151}00151     \textcolor{keyword}{using} std::chrono::duration\_cast;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00152}00152     \textcolor{keyword}{using} std::chrono::high\_resolution\_clock;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00153}00153 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00154}00154     \textcolor{keyword}{auto} start = high\_resolution\_clock::now();}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00155}00155     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} i = 0; i < howmany; ++i)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00156}00156     \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00157}00157         \mbox{\hyperlink{group__core__func__exponential_gad26901b9f2fdd30612867a8dcfa73fbc}{log}}-\/>info(\textcolor{stringliteral}{"{}Hello logger: msg number \{\}"{}}, i);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00158}00158     \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00159}00159 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00160}00160     \textcolor{keyword}{auto} delta = high\_resolution\_clock::now() -\/ start;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00161}00161     \textcolor{keyword}{auto} delta\_d = duration\_cast<duration<double>>(delta).count();}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00162}00162 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00163}00163     spdlog::info(spdlog::fmt\_lib::format(}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00164}00164         std::locale(\textcolor{stringliteral}{"{}en\_US.UTF-\/8"{}}), \textcolor{stringliteral}{"{}\{:<30\} Elapsed: \{:0.2f\} secs \{:>16L\}/sec"{}}, \mbox{\hyperlink{group__core__func__exponential_gad26901b9f2fdd30612867a8dcfa73fbc}{log}}-\/>name(), delta\_d, \textcolor{keywordtype}{int}(howmany / delta\_d)));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00165}00165     spdlog::drop(\mbox{\hyperlink{group__core__func__exponential_gad26901b9f2fdd30612867a8dcfa73fbc}{log}}-\/>name());}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00166}00166 \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00167}00167 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00168}00168 \textcolor{keywordtype}{void} bench\_mt(\textcolor{keywordtype}{int} howmany, std::shared\_ptr<spdlog::logger> \mbox{\hyperlink{group__core__func__exponential_gad26901b9f2fdd30612867a8dcfa73fbc}{log}}, \textcolor{keywordtype}{size\_t} thread\_count)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00169}00169 \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00170}00170     \textcolor{keyword}{using} std::chrono::duration;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00171}00171     \textcolor{keyword}{using} std::chrono::duration\_cast;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00172}00172     \textcolor{keyword}{using} std::chrono::high\_resolution\_clock;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00173}00173 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00174}00174     std::vector<std::thread> threads;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00175}00175     threads.reserve(thread\_count);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00176}00176     \textcolor{keyword}{auto} start = high\_resolution\_clock::now();}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00177}00177     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} t = 0; t < thread\_count; ++t)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00178}00178     \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00179}00179         threads.emplace\_back([\&]() \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00180}00180             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < howmany / \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(thread\_count); j++)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00181}00181             \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00182}00182                 \mbox{\hyperlink{group__core__func__exponential_gad26901b9f2fdd30612867a8dcfa73fbc}{log}}-\/>info(\textcolor{stringliteral}{"{}Hello logger: msg number \{\}"{}}, j);}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00183}00183             \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00184}00184         \});}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00185}00185     \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00186}00186 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00187}00187     \textcolor{keywordflow}{for} (\textcolor{keyword}{auto} \&t : threads)}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00188}00188     \{}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00189}00189         t.join();}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00190}00190     \};}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00191}00191 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00192}00192     \textcolor{keyword}{auto} delta = high\_resolution\_clock::now() -\/ start;}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00193}00193     \textcolor{keyword}{auto} delta\_d = duration\_cast<duration<double>>(delta).count();}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00194}00194     spdlog::info(spdlog::fmt\_lib::format(}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00195}00195         std::locale(\textcolor{stringliteral}{"{}en\_US.UTF-\/8"{}}), \textcolor{stringliteral}{"{}\{:<30\} Elapsed: \{:0.2f\} secs \{:>16L\}/sec"{}}, \mbox{\hyperlink{group__core__func__exponential_gad26901b9f2fdd30612867a8dcfa73fbc}{log}}-\/>name(), delta\_d, \textcolor{keywordtype}{int}(howmany / delta\_d)));}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00196}00196     spdlog::drop(\mbox{\hyperlink{group__core__func__exponential_gad26901b9f2fdd30612867a8dcfa73fbc}{log}}-\/>name());}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00197}00197 \}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00198}00198 }
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00199}00199 \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00200}00200 \textcolor{comment}{void bench\_default\_api(int howmany, std::shared\_ptr<spdlog::logger> log)}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00201}00201 \textcolor{comment}{\{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00202}00202 \textcolor{comment}{    using std::chrono::high\_resolution\_clock;}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00203}00203 \textcolor{comment}{    using std::chrono::duration;}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00204}00204 \textcolor{comment}{    using std::chrono::duration\_cast;}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00205}00205 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00206}00206 \textcolor{comment}{    auto orig\_default = spdlog::default\_logger();}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00207}00207 \textcolor{comment}{    spdlog::set\_default\_logger(log);}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00208}00208 \textcolor{comment}{    auto start = high\_resolution\_clock::now();}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00209}00209 \textcolor{comment}{    for (auto i = 0; i < howmany; ++i)}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00210}00210 \textcolor{comment}{    \{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00211}00211 \textcolor{comment}{        spdlog::info("{}Hello logger: msg number \{\}"{}, i);}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00212}00212 \textcolor{comment}{    \}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00213}00213 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00214}00214 \textcolor{comment}{    auto delta = high\_resolution\_clock::now() -\/ start;}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00215}00215 \textcolor{comment}{    auto delta\_d = duration\_cast<duration<double>>(delta).count();}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00216}00216 \textcolor{comment}{    spdlog::drop(log-\/>name());}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00217}00217 \textcolor{comment}{    spdlog::set\_default\_logger(std::move(orig\_default));}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00218}00218 \textcolor{comment}{    spdlog::info("{}\{:<30\} Elapsed: \{:0.2f\} secs \{:>16\}/sec"{}, log-\/>name(), delta\_d, int(howmany / delta\_d));}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00219}00219 \textcolor{comment}{\}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00220}00220 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00221}00221 \textcolor{comment}{void bench\_c\_string(int howmany, std::shared\_ptr<spdlog::logger> log)}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00222}00222 \textcolor{comment}{\{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00223}00223 \textcolor{comment}{    using std::chrono::high\_resolution\_clock;}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00224}00224 \textcolor{comment}{    using std::chrono::duration;}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00225}00225 \textcolor{comment}{    using std::chrono::duration\_cast;}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00226}00226 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00227}00227 \textcolor{comment}{    const char *msg = "{}Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum pharetra metus cursus "{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00228}00228 \textcolor{comment}{                      "{}lacus placerat congue. Nulla egestas, mauris a tincidunt tempus, enim lectus volutpat mi, eu consequat sem "{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00229}00229 \textcolor{comment}{                      "{}libero nec massa. In dapibus ipsum a diam rhoncus gravida. Etiam non dapibus eros. Donec fringilla dui sed "{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00230}00230 \textcolor{comment}{                      "{}augue pretium, nec scelerisque est maximus. Nullam convallis, sem nec blandit maximus, nisi turpis ornare "{}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00231}00231 \textcolor{comment}{                      "{}nisl, sit amet volutpat neque massa eu odio. Maecenas malesuada quam ex, posuere congue nibh turpis duis."{};}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00232}00232 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00233}00233 \textcolor{comment}{    auto orig\_default = spdlog::default\_logger();}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00234}00234 \textcolor{comment}{    spdlog::set\_default\_logger(log);}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00235}00235 \textcolor{comment}{    auto start = high\_resolution\_clock::now();}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00236}00236 \textcolor{comment}{    for (auto i = 0; i < howmany; ++i)}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00237}00237 \textcolor{comment}{    \{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00238}00238 \textcolor{comment}{        spdlog::log(spdlog::level::info, msg);}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00239}00239 \textcolor{comment}{    \}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00240}00240 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00241}00241 \textcolor{comment}{    auto delta = high\_resolution\_clock::now() -\/ start;}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00242}00242 \textcolor{comment}{    auto delta\_d = duration\_cast<duration<double>>(delta).count();}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00243}00243 \textcolor{comment}{    spdlog::drop(log-\/>name());}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00244}00244 \textcolor{comment}{    spdlog::set\_default\_logger(std::move(orig\_default));}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00245}00245 \textcolor{comment}{    spdlog::info("{}\{:<30\} Elapsed: \{:0.2f\} secs \{:>16\}/sec"{}, log-\/>name(), delta\_d, int(howmany / delta\_d));}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00246}00246 \textcolor{comment}{\}}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00247}00247 \textcolor{comment}{}}
\DoxyCodeLine{\Hypertarget{bench_8cpp_source_l00248}00248 \textcolor{comment}{*/}}

\end{DoxyCode}
