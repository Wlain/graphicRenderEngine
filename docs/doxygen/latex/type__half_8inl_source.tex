\hypertarget{type__half_8inl_source}{}\doxysection{type\+\_\+half.\+inl}
\label{type__half_8inl_source}\index{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glm/glm/detail/type\_half.inl@{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/glm/glm/detail/type\_half.inl}}
\mbox{\hyperlink{type__half_8inl}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00004}00004 \textcolor{keyword}{namespace }glm\{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00005}00005 \textcolor{keyword}{namespace }detail}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00006}00006 \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00007}00007     GLM\_FUNC\_QUALIFIER \textcolor{keywordtype}{float} overflow()}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00008}00008     \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00009}00009         \textcolor{keyword}{volatile} \textcolor{keywordtype}{float} f = 1e10;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00011}00011         \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < 10; ++i)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00012}00012             f *= f; \textcolor{comment}{// this will overflow before the for loop terminates}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00013}00013         \textcolor{keywordflow}{return} f;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00014}00014     \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00016}\mbox{\hyperlink{unionglm_1_1detail_1_1uif32}{00016}}     \textcolor{keyword}{union }\mbox{\hyperlink{unionglm_1_1detail_1_1uif32}{uif32}}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00017}00017     \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00018}00018         GLM\_FUNC\_QUALIFIER \mbox{\hyperlink{unionglm_1_1detail_1_1uif32}{uif32}}() :}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00019}00019             i(0)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00020}00020         \{\}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00022}00022         GLM\_FUNC\_QUALIFIER \mbox{\hyperlink{unionglm_1_1detail_1_1uif32}{uif32}}(\textcolor{keywordtype}{float} f\_) :}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00023}00023             f(f\_)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00024}00024         \{\}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00025}00025 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00026}00026         GLM\_FUNC\_QUALIFIER \mbox{\hyperlink{unionglm_1_1detail_1_1uif32}{uif32}}(uint32 i\_) :}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00027}00027             i(i\_)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00028}00028         \{\}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00029}00029 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00030}00030         \textcolor{keywordtype}{float} f;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00031}00031         uint32 i;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00032}00032     \};}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00033}00033 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00034}00034     GLM\_FUNC\_QUALIFIER \textcolor{keywordtype}{float} toFloat32(hdata \mbox{\hyperlink{classvalue}{value}})}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00035}00035     \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00036}00036         \textcolor{keywordtype}{int} s = (\mbox{\hyperlink{classvalue}{value}} >> 15) \& 0x00000001;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00037}00037         \textcolor{keywordtype}{int} \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} = (\mbox{\hyperlink{classvalue}{value}} >> 10) \& 0x0000001f;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00038}00038         \textcolor{keywordtype}{int} m =  \mbox{\hyperlink{classvalue}{value}}        \& 0x000003ff;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00039}00039 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00040}00040         \textcolor{keywordflow}{if}(\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} == 0)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00041}00041         \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00042}00042             \textcolor{keywordflow}{if}(m == 0)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00043}00043             \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00044}00044                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00045}00045                 \textcolor{comment}{// Plus or minus zero}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00046}00046                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00048}00048                 \mbox{\hyperlink{unionglm_1_1detail_1_1uif32}{detail::uif32}} \mbox{\hyperlink{structresult}{result}};}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00049}00049                 \mbox{\hyperlink{structresult}{result}}.i = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}\textcolor{keyword}{>}(s << 31);}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00050}00050                 \textcolor{keywordflow}{return} \mbox{\hyperlink{structresult}{result}}.f;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00051}00051             \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00052}00052             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00053}00053             \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00054}00054                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00055}00055                 \textcolor{comment}{// Denormalized number -\/-\/ renormalize it}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00056}00056                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00058}00058                 \textcolor{keywordflow}{while}(!(m \& 0x00000400))}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00059}00059                 \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00060}00060                     m <<= 1;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00061}00061                     \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} -\/=  1;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00062}00062                 \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00064}00064                 \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} += 1;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00065}00065                 m \&= \string~0x00000400;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00066}00066             \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00067}00067         \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00068}00068         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} == 31)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00069}00069         \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00070}00070             \textcolor{keywordflow}{if}(m == 0)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00071}00071             \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00072}00072                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00073}00073                 \textcolor{comment}{// Positive or negative infinity}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00074}00074                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00076}00076                 uif32 \mbox{\hyperlink{structresult}{result}};}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00077}00077                 \mbox{\hyperlink{structresult}{result}}.i = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}\textcolor{keyword}{>}((s << 31) | 0x7f800000);}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00078}00078                 \textcolor{keywordflow}{return} \mbox{\hyperlink{structresult}{result}}.f;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00079}00079             \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00080}00080             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00081}00081             \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00082}00082                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00083}00083                 \textcolor{comment}{// Nan -\/-\/ preserve sign and significand bits}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00084}00084                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00085}00085 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00086}00086                 uif32 \mbox{\hyperlink{structresult}{result}};}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00087}00087                 \mbox{\hyperlink{structresult}{result}}.i = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}\textcolor{keyword}{>}((s << 31) | 0x7f800000 | (m << 13));}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00088}00088                 \textcolor{keywordflow}{return} \mbox{\hyperlink{structresult}{result}}.f;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00089}00089             \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00090}00090         \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00092}00092         \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00093}00093         \textcolor{comment}{// Normalized number}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00094}00094         \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00095}00095 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00096}00096         \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} = \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} + (127 -\/ 15);}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00097}00097         m = m << 13;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00098}00098 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00099}00099         \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00100}00100         \textcolor{comment}{// Assemble s, e and m.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00101}00101         \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00102}00102 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00103}00103         uif32 Result;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00104}00104         Result.i = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}\textcolor{keyword}{>}((s << 31) | (\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} << 23) | m);}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00105}00105         \textcolor{keywordflow}{return} Result.f;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00106}00106     \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00107}00107 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00108}00108     GLM\_FUNC\_QUALIFIER hdata toFloat16(\textcolor{keywordtype}{float} \textcolor{keyword}{const}\& f)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00109}00109     \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00110}00110         uif32 Entry;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00111}00111         Entry.f = f;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00112}00112         \textcolor{keywordtype}{int} i = \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(Entry.i);}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00113}00113 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00114}00114         \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00115}00115         \textcolor{comment}{// Our floating point number, f, is represented by the bit}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00116}00116         \textcolor{comment}{// pattern in integer i.  Disassemble that bit pattern into}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00117}00117         \textcolor{comment}{// the sign, s, the exponent, e, and the significand, m.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00118}00118         \textcolor{comment}{// Shift s into the position where it will go in in the}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00119}00119         \textcolor{comment}{// resulting half number.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00120}00120         \textcolor{comment}{// Adjust e, accounting for the different exponent bias}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00121}00121         \textcolor{comment}{// of float and half (127 versus 15).}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00122}00122         \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00123}00123 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00124}00124         \textcolor{keywordtype}{int} s =  (i >> 16) \& 0x00008000;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00125}00125         \textcolor{keywordtype}{int} \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} = ((i >> 23) \& 0x000000ff) -\/ (127 -\/ 15);}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00126}00126         \textcolor{keywordtype}{int} m =   i        \& 0x007fffff;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00127}00127 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00128}00128         \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00129}00129         \textcolor{comment}{// Now reassemble s, e and m into a half:}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00130}00130         \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00131}00131 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00132}00132         \textcolor{keywordflow}{if}(\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} <= 0)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00133}00133         \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00134}00134             \textcolor{keywordflow}{if}(\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} < -\/10)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00135}00135             \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00136}00136                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00137}00137                 \textcolor{comment}{// E is less than -\/10.  The absolute value of f is}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00138}00138                 \textcolor{comment}{// less than half\_MIN (f may be a small normalized}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00139}00139                 \textcolor{comment}{// float, a denormalized float or a zero).}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00140}00140                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00141}00141                 \textcolor{comment}{// We convert f to a half zero.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00142}00142                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00143}00143 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00144}00144                 \textcolor{keywordflow}{return} hdata(s);}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00145}00145             \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00146}00146 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00147}00147             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00148}00148             \textcolor{comment}{// E is between -\/10 and 0.  F is a normalized float,}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00149}00149             \textcolor{comment}{// whose magnitude is less than \_\_half\_NRM\_MIN.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00150}00150             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00151}00151             \textcolor{comment}{// We convert f to a denormalized half.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00152}00152             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00153}00153 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00154}00154             m = (m | 0x00800000) >> (1 -\/ \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}});}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00155}00155 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00156}00156             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00157}00157             \textcolor{comment}{// Round to nearest, round "{}0.5"{} up.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00158}00158             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00159}00159             \textcolor{comment}{// Rounding may cause the significand to overflow and make}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00160}00160             \textcolor{comment}{// our number normalized.  Because of the way a half's bits}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00161}00161             \textcolor{comment}{// are laid out, we don't have to treat this case separately;}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00162}00162             \textcolor{comment}{// the code below will handle it correctly.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00163}00163             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00164}00164 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00165}00165             \textcolor{keywordflow}{if}(m \& 0x00001000)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00166}00166                 m += 0x00002000;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00167}00167 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00168}00168             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00169}00169             \textcolor{comment}{// Assemble the half from s, e (zero) and m.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00170}00170             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00171}00171 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00172}00172             \textcolor{keywordflow}{return} hdata(s | (m >> 13));}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00173}00173         \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00174}00174         \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} == 0xff -\/ (127 -\/ 15))}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00175}00175         \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00176}00176             \textcolor{keywordflow}{if}(m == 0)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00177}00177             \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00178}00178                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00179}00179                 \textcolor{comment}{// F is an infinity; convert f to a half}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00180}00180                 \textcolor{comment}{// infinity with the same sign as f.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00181}00181                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00182}00182 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00183}00183                 \textcolor{keywordflow}{return} hdata(s | 0x7c00);}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00184}00184             \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00185}00185             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00186}00186             \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00187}00187                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00188}00188                 \textcolor{comment}{// F is a NAN; we produce a half NAN that preserves}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00189}00189                 \textcolor{comment}{// the sign bit and the 10 leftmost bits of the}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00190}00190                 \textcolor{comment}{// significand of f, with one exception: If the 10}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00191}00191                 \textcolor{comment}{// leftmost bits are all zero, the NAN would turn}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00192}00192                 \textcolor{comment}{// into an infinity, so we have to set at least one}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00193}00193                 \textcolor{comment}{// bit in the significand.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00194}00194                 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00195}00195 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00196}00196                 m >>= 13;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00197}00197 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00198}00198                 \textcolor{keywordflow}{return} hdata(s | 0x7c00 | m | (m == 0));}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00199}00199             \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00200}00200         \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00201}00201         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00202}00202         \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00203}00203             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00204}00204             \textcolor{comment}{// E is greater than zero.  F is a normalized float.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00205}00205             \textcolor{comment}{// We try to convert f to a normalized half.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00206}00206             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00207}00207 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00208}00208             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00209}00209             \textcolor{comment}{// Round to nearest, round "{}0.5"{} up}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00210}00210             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00211}00211 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00212}00212             \textcolor{keywordflow}{if}(m \&  0x00001000)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00213}00213             \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00214}00214                 m += 0x00002000;}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00215}00215 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00216}00216                 \textcolor{keywordflow}{if}(m \& 0x00800000)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00217}00217                 \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00218}00218                     m =  0;     \textcolor{comment}{// overflow in significand,}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00219}00219                     \mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} += 1;     \textcolor{comment}{// adjust exponent}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00220}00220                 \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00221}00221             \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00222}00222 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00223}00223             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00224}00224             \textcolor{comment}{// Handle exponent overflow}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00225}00225             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00226}00226 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00227}00227             \textcolor{keywordflow}{if} (\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} > 30)}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00228}00228             \{}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00229}00229                 overflow();        \textcolor{comment}{// Cause a hardware floating point overflow;}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00230}00230 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00231}00231                 \textcolor{keywordflow}{return} hdata(s | 0x7c00);}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00232}00232                 \textcolor{comment}{// if this returns, the half becomes an}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00233}00233             \}   \textcolor{comment}{// infinity with the same sign as f.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00234}00234 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00235}00235             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00236}00236             \textcolor{comment}{// Assemble the half from s, e and m.}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00237}00237             \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00238}00238 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00239}00239             \textcolor{keywordflow}{return} hdata(s | (\mbox{\hyperlink{group__gtc__constants_ga4b7956eb6e2fbedfc7cf2e46e85c5139}{e}} << 10) | (m >> 13));}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00240}00240         \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00241}00241     \}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00242}00242 }
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00243}00243 \}\textcolor{comment}{//namespace detail}}
\DoxyCodeLine{\Hypertarget{type__half_8inl_source_l00244}00244 \}\textcolor{comment}{//namespace glm}}

\end{DoxyCode}
