\hypertarget{circular__q_8h_source}{}\doxysection{circular\+\_\+q.\+h}
\label{circular__q_8h_source}\index{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/spdlog/include/spdlog/details/circular\_q.h@{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/spdlog/include/spdlog/details/circular\_q.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00001}00001 \textcolor{comment}{// Copyright(c) 2015-\/present, Gabi Melman \& spdlog contributors.}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00002}00002 \textcolor{comment}{// Distributed under the MIT License (http://opensource.org/licenses/MIT)}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00004}00004 \textcolor{comment}{// circular q view of std::vector.}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00005}00005 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00007}00007 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00008}00008 \textcolor{preprocessor}{\#include <cassert>}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00010}00010 \textcolor{keyword}{namespace }spdlog \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00011}00011 \textcolor{keyword}{namespace }details \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00012}00012 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00013}\mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{00013}} \textcolor{keyword}{class }\mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00014}00014 \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00015}00015     \textcolor{keywordtype}{size\_t} max\_items\_ = 0;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00016}00016     \textcolor{keyword}{typename} std::vector<T>::size\_type head\_ = 0;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00017}00017     \textcolor{keyword}{typename} std::vector<T>::size\_type tail\_ = 0;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00018}00018     \textcolor{keywordtype}{size\_t} overrun\_counter\_ = 0;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00019}00019     std::vector<T> v\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00020}00020 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00021}00021 \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00022}00022     \textcolor{keyword}{using} value\_type = T;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00023}00023 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00024}00024     \textcolor{comment}{// empty ctor -\/ create a disabled queue with no elements allocated at all}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00025}00025     \mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00027}00027     \textcolor{keyword}{explicit} \mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}}(\textcolor{keywordtype}{size\_t} max\_items)}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00028}00028         : max\_items\_(max\_items + 1) \textcolor{comment}{// one item is reserved as marker for full q}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00029}00029         , v\_(max\_items\_)}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00030}00030     \{\}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00031}00031 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00032}00032     \mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}}(\textcolor{keyword}{const} \mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}} \&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00033}00033     \mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}} \&operator=(\textcolor{keyword}{const} \mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}} \&) = \textcolor{keywordflow}{default};}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00035}00035     \textcolor{comment}{// move cannot be default,}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00036}00036     \textcolor{comment}{// since we need to reset head\_, tail\_, etc to zero in the moved object}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00037}00037     \mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}}(\mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}} \&\&other) SPDLOG\_NOEXCEPT}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00038}00038     \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00039}00039         copy\_moveable(std::move(other));}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00040}00040     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00042}00042     \mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}} \&operator=(\mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}} \&\&other) SPDLOG\_NOEXCEPT}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00043}00043     \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00044}00044         copy\_moveable(std::move(other));}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00045}00045         \textcolor{keywordflow}{return} *\textcolor{keyword}{this};}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00046}00046     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00047}00047 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00048}00048     \textcolor{comment}{// push back, overrun (oldest) item if no room left}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00049}00049     \textcolor{keywordtype}{void} push\_back(T \&\&item)}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00050}00050     \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00051}00051         \textcolor{keywordflow}{if} (max\_items\_ > 0)}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00052}00052         \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00053}00053             v\_[tail\_] = std::move(item);}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00054}00054             tail\_ = (tail\_ + 1) \% max\_items\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00056}00056             \textcolor{keywordflow}{if} (tail\_ == head\_) \textcolor{comment}{// overrun last item if full}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00057}00057             \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00058}00058                 head\_ = (head\_ + 1) \% max\_items\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00059}00059                 ++overrun\_counter\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00060}00060             \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00061}00061         \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00062}00062     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00064}00064     \textcolor{comment}{// Return reference to the front item.}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00065}00065     \textcolor{comment}{// If there are no elements in the container, the behavior is undefined.}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00066}00066     \textcolor{keyword}{const} T \&front()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00067}00067 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00068}00068         \textcolor{keywordflow}{return} v\_[head\_];}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00069}00069     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00071}00071     T \&front()}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00072}00072     \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00073}00073         \textcolor{keywordflow}{return} v\_[head\_];}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00074}00074     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00076}00076     \textcolor{comment}{// Return number of elements actually stored}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00077}00077     \textcolor{keywordtype}{size\_t} size()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00078}00078 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00079}00079         \textcolor{keywordflow}{if} (tail\_ >= head\_)}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00080}00080         \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00081}00081             \textcolor{keywordflow}{return} tail\_ -\/ head\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00082}00082         \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00083}00083         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00084}00084         \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00085}00085             \textcolor{keywordflow}{return} max\_items\_ -\/ (head\_ -\/ tail\_);}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00086}00086         \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00087}00087     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00088}00088 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00089}00089     \textcolor{comment}{// Return const reference to item by index.}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00090}00090     \textcolor{comment}{// If index is out of range 0…size()-\/1, the behavior is undefined.}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00091}00091     \textcolor{keyword}{const} T \&at(\textcolor{keywordtype}{size\_t} i)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00092}00092 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00093}00093         assert(i < size());}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00094}00094         \textcolor{keywordflow}{return} v\_[(head\_ + i) \% max\_items\_];}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00095}00095     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00096}00096 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00097}00097     \textcolor{comment}{// Pop item from front.}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00098}00098     \textcolor{comment}{// If there are no elements in the container, the behavior is undefined.}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00099}00099     \textcolor{keywordtype}{void} pop\_front()}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00100}00100     \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00101}00101         head\_ = (head\_ + 1) \% max\_items\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00102}00102     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00103}00103 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00104}00104     \textcolor{keywordtype}{bool} empty()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00105}00105 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00106}00106         \textcolor{keywordflow}{return} tail\_ == head\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00107}00107     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00108}00108 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00109}00109     \textcolor{keywordtype}{bool} full()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00110}00110 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00111}00111         \textcolor{comment}{// head is ahead of the tail by 1}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00112}00112         \textcolor{keywordflow}{if} (max\_items\_ > 0)}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00113}00113         \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00114}00114             \textcolor{keywordflow}{return} ((tail\_ + 1) \% max\_items\_) == head\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00115}00115         \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00116}00116         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00117}00117     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00118}00118 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00119}00119     \textcolor{keywordtype}{size\_t} overrun\_counter()\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00120}00120 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00121}00121         \textcolor{keywordflow}{return} overrun\_counter\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00122}00122     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00123}00123 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00124}00124 \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00125}00125     \textcolor{comment}{// copy from other\&\& and reset it to disabled state}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00126}00126     \textcolor{keywordtype}{void} copy\_moveable(\mbox{\hyperlink{classspdlog_1_1details_1_1circular__q}{circular\_q}} \&\&other) SPDLOG\_NOEXCEPT}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00127}00127     \{}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00128}00128         max\_items\_ = other.max\_items\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00129}00129         head\_ = other.head\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00130}00130         tail\_ = other.tail\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00131}00131         overrun\_counter\_ = other.overrun\_counter\_;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00132}00132         v\_ = std::move(other.v\_);}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00133}00133 }
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00134}00134         \textcolor{comment}{// put \&\&other in disabled, but valid state}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00135}00135         other.max\_items\_ = 0;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00136}00136         other.head\_ = other.tail\_ = 0;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00137}00137         other.overrun\_counter\_ = 0;}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00138}00138     \}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00139}00139 \};}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00140}00140 \} \textcolor{comment}{// namespace details}}
\DoxyCodeLine{\Hypertarget{circular__q_8h_source_l00141}00141 \} \textcolor{comment}{// namespace spdlog}}

\end{DoxyCode}
