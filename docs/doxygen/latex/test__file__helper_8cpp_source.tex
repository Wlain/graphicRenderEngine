\hypertarget{test__file__helper_8cpp_source}{}\doxysection{test\+\_\+file\+\_\+helper.\+cpp}
\label{test__file__helper_8cpp_source}\index{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/spdlog/tests/test\_file\_helper.cpp@{/Users/cwb/developer/learning/graphicRenderEngine/ceres/3rdparty/spdlog/tests/test\_file\_helper.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00001}00001 \textcolor{comment}{/*}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00002}00002 \textcolor{comment}{ * This content is released under the MIT License as specified in https://raw.githubusercontent.com/gabime/spdlog/master/LICENSE}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00003}00003 \textcolor{comment}{ */}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include "{}includes.h"{}}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00006}00006 \textcolor{preprocessor}{\#define TEST\_FILENAME "{}test\_logs/file\_helper\_test.txt"{}}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00008}00008 \textcolor{keyword}{using} \mbox{\hyperlink{classspdlog_1_1details_1_1file__helper}{spdlog::details::file\_helper}};}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00010}00010 \textcolor{keyword}{static} \textcolor{keywordtype}{void} write\_with\_helper(\mbox{\hyperlink{classspdlog_1_1details_1_1file__helper}{file\_helper}} \&helper, \textcolor{keywordtype}{size\_t} howmany)}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00011}00011 \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00012}00012     spdlog::memory\_buf\_t formatted;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00013}00013     spdlog::fmt\_lib::format\_to(std::back\_inserter(formatted), \textcolor{stringliteral}{"{}\{\}"{}}, std::string(howmany, \textcolor{charliteral}{'1'}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00014}00014     helper.write(formatted);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00015}00015     helper.flush();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00016}00016 \}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00018}00018 TEST\_CASE(\textcolor{stringliteral}{"{}file\_helper\_filename"{}}, \textcolor{stringliteral}{"{}[file\_helper::filename()]]"{}})}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00019}00019 \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00020}00020     prepare\_logdir();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00022}00022     \mbox{\hyperlink{classspdlog_1_1details_1_1file__helper}{file\_helper}} helper;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00023}00023     spdlog::filename\_t target\_filename = SPDLOG\_FILENAME\_T(TEST\_FILENAME);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00024}00024     helper.open(target\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00025}00025     REQUIRE(helper.filename() == target\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00026}00026 \}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00028}00028 TEST\_CASE(\textcolor{stringliteral}{"{}file\_helper\_size"{}}, \textcolor{stringliteral}{"{}[file\_helper::size()]]"{}})}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00029}00029 \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00030}00030     prepare\_logdir();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00031}00031     spdlog::filename\_t target\_filename = SPDLOG\_FILENAME\_T(TEST\_FILENAME);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00032}00032     \textcolor{keywordtype}{size\_t} expected\_size = 123;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00033}00033     \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00034}00034         \mbox{\hyperlink{classspdlog_1_1details_1_1file__helper}{file\_helper}} helper;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00035}00035         helper.open(target\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00036}00036         write\_with\_helper(helper, expected\_size);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00037}00037         REQUIRE(\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{size\_t}\textcolor{keyword}{>}(helper.size()) == expected\_size);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00038}00038     \}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00039}00039     REQUIRE(get\_filesize(TEST\_FILENAME) == expected\_size);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00040}00040 \}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00042}00042 TEST\_CASE(\textcolor{stringliteral}{"{}file\_helper\_reopen"{}}, \textcolor{stringliteral}{"{}[file\_helper::reopen()]]"{}})}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00043}00043 \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00044}00044     prepare\_logdir();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00045}00045     spdlog::filename\_t target\_filename = SPDLOG\_FILENAME\_T(TEST\_FILENAME);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00046}00046     \mbox{\hyperlink{classspdlog_1_1details_1_1file__helper}{file\_helper}} helper;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00047}00047     helper.open(target\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00048}00048     write\_with\_helper(helper, 12);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00049}00049     REQUIRE(helper.size() == 12);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00050}00050     helper.reopen(\textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00051}00051     REQUIRE(helper.size() == 0);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00052}00052 \}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00054}00054 TEST\_CASE(\textcolor{stringliteral}{"{}file\_helper\_reopen2"{}}, \textcolor{stringliteral}{"{}[file\_helper::reopen(false)]]"{}})}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00055}00055 \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00056}00056     prepare\_logdir();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00057}00057     spdlog::filename\_t target\_filename = SPDLOG\_FILENAME\_T(TEST\_FILENAME);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00058}00058     \textcolor{keywordtype}{size\_t} expected\_size = 14;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00059}00059     \mbox{\hyperlink{classspdlog_1_1details_1_1file__helper}{file\_helper}} helper;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00060}00060     helper.open(target\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00061}00061     write\_with\_helper(helper, expected\_size);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00062}00062     REQUIRE(helper.size() == expected\_size);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00063}00063     helper.reopen(\textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00064}00064     REQUIRE(helper.size() == expected\_size);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00065}00065 \}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00067}00067 \textcolor{keyword}{static} \textcolor{keywordtype}{void} test\_split\_ext(\textcolor{keyword}{const} spdlog::filename\_t::value\_type *fname, \textcolor{keyword}{const} spdlog::filename\_t::value\_type *expect\_base,}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00068}00068     \textcolor{keyword}{const} spdlog::filename\_t::value\_type *expect\_ext)}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00069}00069 \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00070}00070     spdlog::filename\_t filename(fname);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00071}00071     spdlog::filename\_t expected\_base(expect\_base);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00072}00072     spdlog::filename\_t expected\_ext(expect\_ext);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00073}00073 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00074}00074     spdlog::filename\_t basename;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00075}00075     spdlog::filename\_t ext;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00076}00076     std::tie(basename, ext) = file\_helper::split\_by\_extension(filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00077}00077     REQUIRE(basename == expected\_base);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00078}00078     REQUIRE(ext == expected\_ext);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00079}00079 \}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00081}00081 TEST\_CASE(\textcolor{stringliteral}{"{}file\_helper\_split\_by\_extension"{}}, \textcolor{stringliteral}{"{}[file\_helper::split\_by\_extension()]]"{}})}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00082}00082 \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00083}00083     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}mylog.txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00084}00084     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.mylog.txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00085}00085     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00086}00086     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/aaa/bb.d/mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/aaa/bb.d/mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00087}00087     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/aaa/bb.d/mylog.txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/aaa/bb.d/mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00088}00088     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}aaa/bbb/ccc/mylog.txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}aaa/bbb/ccc/mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00089}00089     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}aaa/bbb/ccc/mylog."{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}aaa/bbb/ccc/mylog."{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00090}00090     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}aaa/bbb/ccc/.mylog.txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}aaa/bbb/ccc/.mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00091}00091     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/aaa/bbb/ccc/mylog.txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/aaa/bbb/ccc/mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00092}00092     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/aaa/bbb/ccc/.mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/aaa/bbb/ccc/.mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00093}00093     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}../mylog.txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}../mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00094}00094     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.././mylog.txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.././mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00095}00095     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.././mylog.txt/xxx"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.././mylog.txt/xxx"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00096}00096     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/mylog.txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00097}00097     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}//mylog.txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}//mylog"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00098}00098     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00099}00099     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}."{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}."{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00100}00100     test\_split\_ext(SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}..txt"{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}."{}}), SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}.txt"{}}));}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00101}00101 \}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00102}00102 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00103}00103 TEST\_CASE(\textcolor{stringliteral}{"{}file\_event\_handlers"{}}, \textcolor{stringliteral}{"{}[file\_helper]"{}})}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00104}00104 \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00105}00105     \textcolor{keyword}{enum class} flags}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00106}00106     \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00107}00107         before\_open,}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00108}00108         after\_open,}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00109}00109         before\_close,}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00110}00110         after\_close}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00111}00111     \};}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00112}00112     prepare\_logdir();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00113}00113 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00114}00114     spdlog::filename\_t test\_filename = SPDLOG\_FILENAME\_T(TEST\_FILENAME);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00115}00115     \textcolor{comment}{// define event handles that update vector of flags when called}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00116}00116     std::vector<flags> events;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00117}00117     \mbox{\hyperlink{structspdlog_1_1file__event__handlers}{spdlog::file\_event\_handlers}} handlers;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00118}00118     handlers.before\_open = [\&](spdlog::filename\_t filename) \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00119}00119         REQUIRE(filename == test\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00120}00120         events.push\_back(flags::before\_open);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00121}00121     \};}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00122}00122     handlers.after\_open = [\&](spdlog::filename\_t filename, std::FILE *fstream) \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00123}00123         REQUIRE(filename == test\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00124}00124         REQUIRE(fstream);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00125}00125         fputs(\textcolor{stringliteral}{"{}after\_open\(\backslash\)n"{}}, fstream);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00126}00126         events.push\_back(flags::after\_open);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00127}00127     \};}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00128}00128     handlers.before\_close = [\&](spdlog::filename\_t filename, std::FILE *fstream) \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00129}00129         REQUIRE(filename == test\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00130}00130         REQUIRE(fstream);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00131}00131         fputs(\textcolor{stringliteral}{"{}before\_close\(\backslash\)n"{}}, fstream);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00132}00132         events.push\_back(flags::before\_close);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00133}00133     \};}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00134}00134     handlers.after\_close = [\&](spdlog::filename\_t filename) \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00135}00135         REQUIRE(filename == test\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00136}00136         events.push\_back(flags::after\_close);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00137}00137     \};}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00138}00138     \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00139}00139         \mbox{\hyperlink{classspdlog_1_1details_1_1file__helper}{spdlog::details::file\_helper}} helper\{handlers\};}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00140}00140         REQUIRE(events.empty());}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00141}00141 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00142}00142         helper.open(test\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00143}00143         REQUIRE(events == std::vector<flags>\{flags::before\_open, flags::after\_open\});}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00144}00144 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00145}00145         events.clear();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00146}00146         helper.close();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00147}00147         REQUIRE(events == std::vector<flags>\{flags::before\_close, flags::after\_close\});}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00148}00148         REQUIRE(file\_contents(TEST\_FILENAME) == \textcolor{stringliteral}{"{}after\_open\(\backslash\)nbefore\_close\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00149}00149 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00150}00150         helper.reopen(\textcolor{keyword}{true});}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00151}00151         events.clear();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00152}00152     \}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00153}00153     \textcolor{comment}{// make sure that the file\_helper destrcutor calls the close callbacks if needed}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00154}00154     REQUIRE(events == std::vector<flags>\{flags::before\_close, flags::after\_close\});}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00155}00155     REQUIRE(file\_contents(TEST\_FILENAME) == \textcolor{stringliteral}{"{}after\_open\(\backslash\)nbefore\_close\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00156}00156 \}}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00157}00157 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00158}00158 TEST\_CASE(\textcolor{stringliteral}{"{}file\_helper\_open"{}}, \textcolor{stringliteral}{"{}[file\_helper]"{}})}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00159}00159 \{}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00160}00160     prepare\_logdir();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00161}00161     spdlog::filename\_t target\_filename = SPDLOG\_FILENAME\_T(TEST\_FILENAME);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00162}00162     \mbox{\hyperlink{classspdlog_1_1details_1_1file__helper}{file\_helper}} helper;}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00163}00163     helper.open(target\_filename);}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00164}00164     helper.close();}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00165}00165 }
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00166}00166     target\_filename += SPDLOG\_FILENAME\_T(\textcolor{stringliteral}{"{}/invalid"{}});}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00167}00167     REQUIRE\_THROWS\_AS(helper.open(target\_filename), \mbox{\hyperlink{classspdlog_1_1spdlog__ex}{spdlog::spdlog\_ex}});}
\DoxyCodeLine{\Hypertarget{test__file__helper_8cpp_source_l00168}00168 \}}

\end{DoxyCode}
